var bU=Object.defineProperty;var rS=t=>{throw TypeError(t)};var EU=(t,e,n)=>e in t?bU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pm=(t,e,n)=>EU(t,typeof e!="symbol"?e+"":e,n),Gv=(t,e,n)=>e.has(t)||rS("Cannot "+n);var ae=(t,e,n)=>(Gv(t,e,"read from private field"),n?n.call(t):e.get(t)),_t=(t,e,n)=>e.has(t)?rS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),rt=(t,e,n,r)=>(Gv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Jn=(t,e,n)=>(Gv(t,e,"access private method"),n);var gm=(t,e,n,r)=>({set _(s){rt(t,e,s,n)},get _(){return ae(t,e,r)}});function jU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Xk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zk={exports:{}},ry={},Jk={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf=Symbol.for("react.element"),NU=Symbol.for("react.portal"),SU=Symbol.for("react.fragment"),TU=Symbol.for("react.strict_mode"),CU=Symbol.for("react.profiler"),kU=Symbol.for("react.provider"),AU=Symbol.for("react.context"),IU=Symbol.for("react.forward_ref"),RU=Symbol.for("react.suspense"),PU=Symbol.for("react.memo"),DU=Symbol.for("react.lazy"),sS=Symbol.iterator;function OU(t){return t===null||typeof t!="object"?null:(t=sS&&t[sS]||t["@@iterator"],typeof t=="function"?t:null)}var eA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tA=Object.assign,nA={};function Cu(t,e,n){this.props=t,this.context=e,this.refs=nA,this.updater=n||eA}Cu.prototype.isReactComponent={};Cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rA(){}rA.prototype=Cu.prototype;function T_(t,e,n){this.props=t,this.context=e,this.refs=nA,this.updater=n||eA}var C_=T_.prototype=new rA;C_.constructor=T_;tA(C_,Cu.prototype);C_.isPureReactComponent=!0;var iS=Array.isArray,sA=Object.prototype.hasOwnProperty,k_={current:null},iA={key:!0,ref:!0,__self:!0,__source:!0};function oA(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)sA.call(e,r)&&!iA.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:hf,type:t,key:o,ref:a,props:s,_owner:k_.current}}function MU(t,e){return{$$typeof:hf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function A_(t){return typeof t=="object"&&t!==null&&t.$$typeof===hf}function LU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oS=/\/+/g;function Qv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LU(""+t.key):e.toString(36)}function np(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case hf:case NU:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Qv(a,0):r,iS(s)?(n="",t!=null&&(n=t.replace(oS,"$&/")+"/"),np(s,e,n,"",function(u){return u})):s!=null&&(A_(s)&&(s=MU(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(oS,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",iS(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+Qv(o,l);a+=np(o,e,n,c,s)}else if(c=OU(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+Qv(o,l++),a+=np(o,e,n,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ym(t,e,n){if(t==null)return t;var r=[],s=0;return np(t,r,"","",function(o){return e.call(n,o,s++)}),r}function FU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ar={current:null},rp={transition:null},VU={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:rp,ReactCurrentOwner:k_};function aA(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:ym,forEach:function(t,e,n){ym(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ym(t,function(){e++}),e},toArray:function(t){return ym(t,function(e){return e})||[]},only:function(t){if(!A_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Cu;lt.Fragment=SU;lt.Profiler=CU;lt.PureComponent=T_;lt.StrictMode=TU;lt.Suspense=RU;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VU;lt.act=aA;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tA({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=k_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)sA.call(e,c)&&!iA.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:hf,type:t.type,key:s,ref:o,props:r,_owner:a}};lt.createContext=function(t){return t={$$typeof:AU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kU,_context:t},t.Consumer=t};lt.createElement=oA;lt.createFactory=function(t){var e=oA.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:IU,render:t}};lt.isValidElement=A_;lt.lazy=function(t){return{$$typeof:DU,_payload:{_status:-1,_result:t},_init:FU}};lt.memo=function(t,e){return{$$typeof:PU,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=rp.transition;rp.transition={};try{t()}finally{rp.transition=e}};lt.unstable_act=aA;lt.useCallback=function(t,e){return Ar.current.useCallback(t,e)};lt.useContext=function(t){return Ar.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return Ar.current.useDeferredValue(t)};lt.useEffect=function(t,e){return Ar.current.useEffect(t,e)};lt.useId=function(){return Ar.current.useId()};lt.useImperativeHandle=function(t,e,n){return Ar.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return Ar.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return Ar.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return Ar.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return Ar.current.useReducer(t,e,n)};lt.useRef=function(t){return Ar.current.useRef(t)};lt.useState=function(t){return Ar.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return Ar.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return Ar.current.useTransition()};lt.version="18.3.1";Jk.exports=lt;var p=Jk.exports;const se=Xk(p),lA=jU({__proto__:null,default:se},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UU=p,$U=Symbol.for("react.element"),BU=Symbol.for("react.fragment"),zU=Object.prototype.hasOwnProperty,qU=UU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HU={key:!0,ref:!0,__self:!0,__source:!0};function cA(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)zU.call(e,r)&&!HU.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$U,type:t,key:o,ref:a,props:s,_owner:qU.current}}ry.Fragment=BU;ry.jsx=cA;ry.jsxs=cA;Zk.exports=ry;var i=Zk.exports,dw={},uA={exports:{}},ls={},dA={exports:{}},hA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var Y=F.length;F.push(H);e:for(;0<Y;){var q=Y-1>>>1,W=F[q];if(0<s(W,H))F[q]=H,F[Y]=W,Y=q;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],Y=F.pop();if(Y!==H){F[0]=Y;e:for(var q=0,W=F.length,re=W>>>1;q<re;){var je=2*(q+1)-1,Re=F[je],Pe=je+1,xe=F[Pe];if(0>s(Re,Y))Pe<W&&0>s(xe,Re)?(F[q]=xe,F[Pe]=Y,q=Pe):(F[q]=Re,F[je]=Y,q=je);else if(Pe<W&&0>s(xe,Y))F[q]=xe,F[Pe]=Y,q=Pe;else break e}}return H}function s(F,H){var Y=F.sortIndex-H.sortIndex;return Y!==0?Y:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=F)r(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(u)}}function C(F){if(v=!1,E(F),!y)if(n(c)!==null)y=!0,V(R);else{var H=n(u);H!==null&&z(C,H.startTime-F)}}function R(F,H){y=!1,v&&(v=!1,b(j),j=-1),g=!0;var Y=m;try{for(E(H),f=n(c);f!==null&&(!(f.expirationTime>H)||F&&!O());){var q=f.callback;if(typeof q=="function"){f.callback=null,m=f.priorityLevel;var W=q(f.expirationTime<=H);H=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),E(H)}else r(c);f=n(c)}if(f!==null)var re=!0;else{var je=n(u);je!==null&&z(C,je.startTime-H),re=!1}return re}finally{f=null,m=Y,g=!1}}var L=!1,A=null,j=-1,S=5,k=-1;function O(){return!(t.unstable_now()-k<S)}function I(){if(A!==null){var F=t.unstable_now();k=F;var H=!0;try{H=A(!0,F)}finally{H?N():(L=!1,A=null)}}else L=!1}var N;if(typeof w=="function")N=function(){w(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=I,N=function(){U.postMessage(null)}}else N=function(){x(I,0)};function V(F){A=F,L||(L=!0,N())}function z(F,H){j=x(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,V(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var Y=m;m=H;try{return F()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=m;m=F;try{return H()}finally{m=Y}},t.unstable_scheduleCallback=function(F,H,Y){var q=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?q+Y:q):Y=q,F){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,F={id:d++,callback:H,priorityLevel:F,startTime:Y,expirationTime:W,sortIndex:-1},Y>q?(F.sortIndex=Y,e(u,F),n(c)===null&&F===n(u)&&(v?(b(j),j=-1):v=!0,z(C,Y-q))):(F.sortIndex=W,e(c,F),y||g||(y=!0,V(R))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var H=m;return function(){var Y=m;m=H;try{return F.apply(this,arguments)}finally{m=Y}}}})(hA);dA.exports=hA;var WU=dA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU=p,os=WU;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fA=new Set,ah={};function Dl(t,e){Jc(t,e),Jc(t+"Capture",e)}function Jc(t,e){for(ah[t]=e,t=0;t<e.length;t++)fA.add(e[t])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hw=Object.prototype.hasOwnProperty,GU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aS={},lS={};function QU(t){return hw.call(lS,t)?!0:hw.call(aS,t)?!1:GU.test(t)?lS[t]=!0:(aS[t]=!0,!1)}function YU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XU(t,e,n,r){if(e===null||typeof e>"u"||YU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ir(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new Ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new Ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new Ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new Ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new Ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new Ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new Ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new Ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new Ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var I_=/[\-:]([a-z])/g;function R_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I_,R_);Wn[e]=new Ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I_,R_);Wn[e]=new Ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I_,R_);Wn[e]=new Ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function P_(t,e,n,r){var s=Wn.hasOwnProperty(e)?Wn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XU(e,n,s,r)&&(n=null),r||s===null?QU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var go=KU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vm=Symbol.for("react.element"),hc=Symbol.for("react.portal"),fc=Symbol.for("react.fragment"),D_=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),mA=Symbol.for("react.provider"),pA=Symbol.for("react.context"),O_=Symbol.for("react.forward_ref"),mw=Symbol.for("react.suspense"),pw=Symbol.for("react.suspense_list"),M_=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),gA=Symbol.for("react.offscreen"),cS=Symbol.iterator;function dd(t){return t===null||typeof t!="object"?null:(t=cS&&t[cS]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,Yv;function Td(t){if(Yv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yv=e&&e[1]||""}return`
`+Yv+t}var Xv=!1;function Zv(t,e){if(!t||Xv)return"";Xv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Xv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Td(t):""}function ZU(t){switch(t.tag){case 5:return Td(t.type);case 16:return Td("Lazy");case 13:return Td("Suspense");case 19:return Td("SuspenseList");case 0:case 2:case 15:return t=Zv(t.type,!1),t;case 11:return t=Zv(t.type.render,!1),t;case 1:return t=Zv(t.type,!0),t;default:return""}}function gw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fc:return"Fragment";case hc:return"Portal";case fw:return"Profiler";case D_:return"StrictMode";case mw:return"Suspense";case pw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pA:return(t.displayName||"Context")+".Consumer";case mA:return(t._context.displayName||"Context")+".Provider";case O_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M_:return e=t.displayName||null,e!==null?e:gw(t.type)||"Memo";case Ro:e=t._payload,t=t._init;try{return gw(t(e))}catch{}}return null}function JU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gw(e);case 8:return e===D_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ha(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e$(t){var e=yA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xm(t){t._valueTracker||(t._valueTracker=e$(t))}function vA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yw(t,e){var n=e.checked;return ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ha(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xA(t,e){e=e.checked,e!=null&&P_(t,"checked",e,!1)}function vw(t,e){xA(t,e);var n=ha(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xw(t,e.type,n):e.hasOwnProperty("defaultValue")&&xw(t,e.type,ha(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xw(t,e,n){(e!=="number"||Op(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cd=Array.isArray;function Cc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ha(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ww(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Cd(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ha(n)}}function wA(t,e){var n=ha(e.value),r=ha(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _A(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _w(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_A(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wm,bA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wm=wm||document.createElement("div"),wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t$=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(t){t$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$d[e]=$d[t]})});function EA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$d.hasOwnProperty(t)&&$d[t]?(""+e).trim():e+"px"}function jA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=EA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var n$=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bw(t,e){if(e){if(n$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Ew(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function L_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nw=null,kc=null,Ac=null;function mS(t){if(t=pf(t)){if(typeof Nw!="function")throw Error(he(280));var e=t.stateNode;e&&(e=ly(e),Nw(t.stateNode,t.type,e))}}function NA(t){kc?Ac?Ac.push(t):Ac=[t]:kc=t}function SA(){if(kc){var t=kc,e=Ac;if(Ac=kc=null,mS(t),e)for(t=0;t<e.length;t++)mS(e[t])}}function TA(t,e){return t(e)}function CA(){}var Jv=!1;function kA(t,e,n){if(Jv)return t(e,n);Jv=!0;try{return TA(t,e,n)}finally{Jv=!1,(kc!==null||Ac!==null)&&(CA(),SA())}}function ch(t,e){var n=t.stateNode;if(n===null)return null;var r=ly(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var Sw=!1;if(ro)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){Sw=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{Sw=!1}function r$(t,e,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Bd=!1,Mp=null,Lp=!1,Tw=null,s$={onError:function(t){Bd=!0,Mp=t}};function i$(t,e,n,r,s,o,a,l,c){Bd=!1,Mp=null,r$.apply(s$,arguments)}function o$(t,e,n,r,s,o,a,l,c){if(i$.apply(this,arguments),Bd){if(Bd){var u=Mp;Bd=!1,Mp=null}else throw Error(he(198));Lp||(Lp=!0,Tw=u)}}function Ol(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pS(t){if(Ol(t)!==t)throw Error(he(188))}function a$(t){var e=t.alternate;if(!e){if(e=Ol(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return pS(s),t;if(o===r)return pS(s),e;o=o.sibling}throw Error(he(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function IA(t){return t=a$(t),t!==null?RA(t):null}function RA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RA(t);if(e!==null)return e;t=t.sibling}return null}var PA=os.unstable_scheduleCallback,gS=os.unstable_cancelCallback,l$=os.unstable_shouldYield,c$=os.unstable_requestPaint,xn=os.unstable_now,u$=os.unstable_getCurrentPriorityLevel,F_=os.unstable_ImmediatePriority,DA=os.unstable_UserBlockingPriority,Fp=os.unstable_NormalPriority,d$=os.unstable_LowPriority,OA=os.unstable_IdlePriority,sy=null,mi=null;function h$(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(sy,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:p$,f$=Math.log,m$=Math.LN2;function p$(t){return t>>>=0,t===0?32:31-(f$(t)/m$|0)|0}var _m=64,bm=4194304;function kd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=kd(l):(o&=a,o!==0&&(r=kd(o)))}else a=n&~s,a!==0?r=kd(a):o!==0&&(r=kd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vs(e),s=1<<n,r|=t[n],e&=~s;return r}function g$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Vs(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=g$(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Cw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MA(){var t=_m;return _m<<=1,!(_m&4194240)&&(_m=64),t}function ex(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ff(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=n}function v$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vs(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function V_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var It=0;function LA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FA,U_,VA,UA,$A,kw=!1,Em=[],Zo=null,Jo=null,ea=null,uh=new Map,dh=new Map,Do=[],x$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yS(t,e){switch(t){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Jo=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":uh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dh.delete(e.pointerId)}}function fd(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=pf(e),e!==null&&U_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function w$(t,e,n,r,s){switch(e){case"focusin":return Zo=fd(Zo,t,e,n,r,s),!0;case"dragenter":return Jo=fd(Jo,t,e,n,r,s),!0;case"mouseover":return ea=fd(ea,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return uh.set(o,fd(uh.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,dh.set(o,fd(dh.get(o)||null,t,e,n,r,s)),!0}return!1}function BA(t){var e=Xa(t.target);if(e!==null){var n=Ol(e);if(n!==null){if(e=n.tag,e===13){if(e=AA(n),e!==null){t.blockedOn=e,$A(t.priority,function(){VA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Aw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jw=r,n.target.dispatchEvent(r),jw=null}else return e=pf(n),e!==null&&U_(e),t.blockedOn=n,!1;e.shift()}return!0}function vS(t,e,n){sp(t)&&n.delete(e)}function _$(){kw=!1,Zo!==null&&sp(Zo)&&(Zo=null),Jo!==null&&sp(Jo)&&(Jo=null),ea!==null&&sp(ea)&&(ea=null),uh.forEach(vS),dh.forEach(vS)}function md(t,e){t.blockedOn===e&&(t.blockedOn=null,kw||(kw=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,_$)))}function hh(t){function e(s){return md(s,t)}if(0<Em.length){md(Em[0],t);for(var n=1;n<Em.length;n++){var r=Em[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zo!==null&&md(Zo,t),Jo!==null&&md(Jo,t),ea!==null&&md(ea,t),uh.forEach(e),dh.forEach(e),n=0;n<Do.length;n++)r=Do[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Do.length&&(n=Do[0],n.blockedOn===null);)BA(n),n.blockedOn===null&&Do.shift()}var Ic=go.ReactCurrentBatchConfig,Up=!0;function b$(t,e,n,r){var s=It,o=Ic.transition;Ic.transition=null;try{It=1,$_(t,e,n,r)}finally{It=s,Ic.transition=o}}function E$(t,e,n,r){var s=It,o=Ic.transition;Ic.transition=null;try{It=4,$_(t,e,n,r)}finally{It=s,Ic.transition=o}}function $_(t,e,n,r){if(Up){var s=Aw(t,e,n,r);if(s===null)ux(t,e,r,$p,n),yS(t,r);else if(w$(s,t,e,n,r))r.stopPropagation();else if(yS(t,r),e&4&&-1<x$.indexOf(t)){for(;s!==null;){var o=pf(s);if(o!==null&&FA(o),o=Aw(t,e,n,r),o===null&&ux(t,e,r,$p,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else ux(t,e,r,null,n)}}var $p=null;function Aw(t,e,n,r){if($p=null,t=L_(r),t=Xa(t),t!==null)if(e=Ol(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $p=t,null}function zA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u$()){case F_:return 1;case DA:return 4;case Fp:case d$:return 16;case OA:return 536870912;default:return 16}default:return 16}}var Go=null,B_=null,ip=null;function qA(){if(ip)return ip;var t,e=B_,n=e.length,r,s="value"in Go?Go.value:Go.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return ip=s.slice(t,1<r?1-r:void 0)}function op(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jm(){return!0}function xS(){return!1}function cs(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jm:xS,this.isPropagationStopped=xS,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),e}var ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z_=cs(ku),mf=ln({},ku,{view:0,detail:0}),j$=cs(mf),tx,nx,pd,iy=ln({},mf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pd&&(pd&&t.type==="mousemove"?(tx=t.screenX-pd.screenX,nx=t.screenY-pd.screenY):nx=tx=0,pd=t),tx)},movementY:function(t){return"movementY"in t?t.movementY:nx}}),wS=cs(iy),N$=ln({},iy,{dataTransfer:0}),S$=cs(N$),T$=ln({},mf,{relatedTarget:0}),rx=cs(T$),C$=ln({},ku,{animationName:0,elapsedTime:0,pseudoElement:0}),k$=cs(C$),A$=ln({},ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I$=cs(A$),R$=ln({},ku,{data:0}),_S=cs(R$),P$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=O$[t])?!!e[t]:!1}function q_(){return M$}var L$=ln({},mf,{key:function(t){if(t.key){var e=P$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=op(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q_,charCode:function(t){return t.type==="keypress"?op(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?op(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F$=cs(L$),V$=ln({},iy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bS=cs(V$),U$=ln({},mf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q_}),$$=cs(U$),B$=ln({},ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),z$=cs(B$),q$=ln({},iy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H$=cs(q$),W$=[9,13,27,32],H_=ro&&"CompositionEvent"in window,zd=null;ro&&"documentMode"in document&&(zd=document.documentMode);var K$=ro&&"TextEvent"in window&&!zd,HA=ro&&(!H_||zd&&8<zd&&11>=zd),ES=" ",jS=!1;function WA(t,e){switch(t){case"keyup":return W$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function G$(t,e){switch(t){case"compositionend":return KA(e);case"keypress":return e.which!==32?null:(jS=!0,ES);case"textInput":return t=e.data,t===ES&&jS?null:t;default:return null}}function Q$(t,e){if(mc)return t==="compositionend"||!H_&&WA(t,e)?(t=qA(),ip=B_=Go=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HA&&e.locale!=="ko"?null:e.data;default:return null}}var Y$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y$[t.type]:e==="textarea"}function GA(t,e,n,r){NA(r),e=Bp(e,"onChange"),0<e.length&&(n=new z_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qd=null,fh=null;function X$(t){iI(t,0)}function oy(t){var e=yc(t);if(vA(e))return t}function Z$(t,e){if(t==="change")return e}var QA=!1;if(ro){var sx;if(ro){var ix="oninput"in document;if(!ix){var SS=document.createElement("div");SS.setAttribute("oninput","return;"),ix=typeof SS.oninput=="function"}sx=ix}else sx=!1;QA=sx&&(!document.documentMode||9<document.documentMode)}function TS(){qd&&(qd.detachEvent("onpropertychange",YA),fh=qd=null)}function YA(t){if(t.propertyName==="value"&&oy(fh)){var e=[];GA(e,fh,t,L_(t)),kA(X$,e)}}function J$(t,e,n){t==="focusin"?(TS(),qd=e,fh=n,qd.attachEvent("onpropertychange",YA)):t==="focusout"&&TS()}function e5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oy(fh)}function t5(t,e){if(t==="click")return oy(e)}function n5(t,e){if(t==="input"||t==="change")return oy(e)}function r5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zs=typeof Object.is=="function"?Object.is:r5;function mh(t,e){if(zs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hw.call(e,s)||!zs(t[s],e[s]))return!1}return!0}function CS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kS(t,e){var n=CS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CS(n)}}function XA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZA(){for(var t=window,e=Op();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Op(t.document)}return e}function W_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s5(t){var e=ZA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XA(n.ownerDocument.documentElement,n)){if(r!==null&&W_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=kS(n,o);var a=kS(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i5=ro&&"documentMode"in document&&11>=document.documentMode,pc=null,Iw=null,Hd=null,Rw=!1;function AS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rw||pc==null||pc!==Op(r)||(r=pc,"selectionStart"in r&&W_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hd&&mh(Hd,r)||(Hd=r,r=Bp(Iw,"onSelect"),0<r.length&&(e=new z_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pc)))}function Nm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gc={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},ox={},JA={};ro&&(JA=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function ay(t){if(ox[t])return ox[t];if(!gc[t])return t;var e=gc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JA)return ox[t]=e[n];return t}var eI=ay("animationend"),tI=ay("animationiteration"),nI=ay("animationstart"),rI=ay("transitionend"),sI=new Map,IS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(t,e){sI.set(t,e),Dl(e,[t])}for(var ax=0;ax<IS.length;ax++){var lx=IS[ax],o5=lx.toLowerCase(),a5=lx[0].toUpperCase()+lx.slice(1);Ra(o5,"on"+a5)}Ra(eI,"onAnimationEnd");Ra(tI,"onAnimationIteration");Ra(nI,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(rI,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);Dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ad));function RS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,o$(r,e,void 0,t),t.currentTarget=null}function iI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;RS(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;RS(s,l,u),o=c}}}if(Lp)throw t=Tw,Lp=!1,Tw=null,t}function qt(t,e){var n=e[Lw];n===void 0&&(n=e[Lw]=new Set);var r=t+"__bubble";n.has(r)||(oI(e,t,2,!1),n.add(r))}function cx(t,e,n){var r=0;e&&(r|=4),oI(n,t,r,e)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function ph(t){if(!t[Sm]){t[Sm]=!0,fA.forEach(function(n){n!=="selectionchange"&&(l5.has(n)||cx(n,!1,t),cx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sm]||(e[Sm]=!0,cx("selectionchange",!1,e))}}function oI(t,e,n,r){switch(zA(e)){case 1:var s=b$;break;case 4:s=E$;break;default:s=$_}n=s.bind(null,e,n,t),s=void 0,!Sw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ux(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Xa(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}kA(function(){var u=o,d=L_(n),f=[];e:{var m=sI.get(t);if(m!==void 0){var g=z_,y=t;switch(t){case"keypress":if(op(n)===0)break e;case"keydown":case"keyup":g=F$;break;case"focusin":y="focus",g=rx;break;case"focusout":y="blur",g=rx;break;case"beforeblur":case"afterblur":g=rx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=S$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$$;break;case eI:case tI:case nI:g=k$;break;case rI:g=z$;break;case"scroll":g=j$;break;case"wheel":g=H$;break;case"copy":case"cut":case"paste":g=I$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bS}var v=(e&4)!==0,x=!v&&t==="scroll",b=v?m!==null?m+"Capture":null:m;v=[];for(var w=u,E;w!==null;){E=w;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,b!==null&&(C=ch(w,b),C!=null&&v.push(gh(w,C,E)))),x)break;w=w.return}0<v.length&&(m=new g(m,y,null,n,d),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==jw&&(y=n.relatedTarget||n.fromElement)&&(Xa(y)||y[so]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Xa(y):null,y!==null&&(x=Ol(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=wS,C="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=bS,C="onPointerLeave",b="onPointerEnter",w="pointer"),x=g==null?m:yc(g),E=y==null?m:yc(y),m=new v(C,w+"leave",g,n,d),m.target=x,m.relatedTarget=E,C=null,Xa(d)===u&&(v=new v(b,w+"enter",y,n,d),v.target=E,v.relatedTarget=x,C=v),x=C,g&&y)t:{for(v=g,b=y,w=0,E=v;E;E=ec(E))w++;for(E=0,C=b;C;C=ec(C))E++;for(;0<w-E;)v=ec(v),w--;for(;0<E-w;)b=ec(b),E--;for(;w--;){if(v===b||b!==null&&v===b.alternate)break t;v=ec(v),b=ec(b)}v=null}else v=null;g!==null&&PS(f,m,g,v,!1),y!==null&&x!==null&&PS(f,x,y,v,!0)}}e:{if(m=u?yc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var R=Z$;else if(NS(m))if(QA)R=n5;else{R=e5;var L=J$}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=t5);if(R&&(R=R(t,u))){GA(f,R,n,d);break e}L&&L(t,m,u),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&xw(m,"number",m.value)}switch(L=u?yc(u):window,t){case"focusin":(NS(L)||L.contentEditable==="true")&&(pc=L,Iw=u,Hd=null);break;case"focusout":Hd=Iw=pc=null;break;case"mousedown":Rw=!0;break;case"contextmenu":case"mouseup":case"dragend":Rw=!1,AS(f,n,d);break;case"selectionchange":if(i5)break;case"keydown":case"keyup":AS(f,n,d)}var A;if(H_)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else mc?WA(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(HA&&n.locale!=="ko"&&(mc||j!=="onCompositionStart"?j==="onCompositionEnd"&&mc&&(A=qA()):(Go=d,B_="value"in Go?Go.value:Go.textContent,mc=!0)),L=Bp(u,j),0<L.length&&(j=new _S(j,t,null,n,d),f.push({event:j,listeners:L}),A?j.data=A:(A=KA(n),A!==null&&(j.data=A)))),(A=K$?G$(t,n):Q$(t,n))&&(u=Bp(u,"onBeforeInput"),0<u.length&&(d=new _S("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=A))}iI(f,e)})}function gh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ch(t,n),o!=null&&r.unshift(gh(t,o,s)),o=ch(t,e),o!=null&&r.push(gh(t,o,s))),t=t.return}return r}function ec(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PS(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ch(n,o),c!=null&&a.unshift(gh(n,c,l))):s||(c=ch(n,o),c!=null&&a.push(gh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var c5=/\r\n?/g,u5=/\u0000|\uFFFD/g;function DS(t){return(typeof t=="string"?t:""+t).replace(c5,`
`).replace(u5,"")}function Tm(t,e,n){if(e=DS(e),DS(t)!==e&&n)throw Error(he(425))}function zp(){}var Pw=null,Dw=null;function Ow(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mw=typeof setTimeout=="function"?setTimeout:void 0,d5=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,h5=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(t){return OS.resolve(null).then(t).catch(f5)}:Mw;function f5(t){setTimeout(function(){throw t})}function dx(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),hh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);hh(e)}function ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function MS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Au=Math.random().toString(36).slice(2),ui="__reactFiber$"+Au,yh="__reactProps$"+Au,so="__reactContainer$"+Au,Lw="__reactEvents$"+Au,m5="__reactListeners$"+Au,p5="__reactHandles$"+Au;function Xa(t){var e=t[ui];if(e)return e;for(var n=t.parentNode;n;){if(e=n[so]||n[ui]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=MS(t);t!==null;){if(n=t[ui])return n;t=MS(t)}return e}t=n,n=t.parentNode}return null}function pf(t){return t=t[ui]||t[so],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function ly(t){return t[yh]||null}var Fw=[],vc=-1;function Pa(t){return{current:t}}function Gt(t){0>vc||(t.current=Fw[vc],Fw[vc]=null,vc--)}function $t(t,e){vc++,Fw[vc]=t.current,t.current=e}var fa={},hr=Pa(fa),$r=Pa(!1),hl=fa;function eu(t,e){var n=t.type.contextTypes;if(!n)return fa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Br(t){return t=t.childContextTypes,t!=null}function qp(){Gt($r),Gt(hr)}function LS(t,e,n){if(hr.current!==fa)throw Error(he(168));$t(hr,e),$t($r,n)}function aI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(he(108,JU(t)||"Unknown",s));return ln({},n,r)}function Hp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fa,hl=hr.current,$t(hr,t),$t($r,$r.current),!0}function FS(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=aI(t,e,hl),r.__reactInternalMemoizedMergedChildContext=t,Gt($r),Gt(hr),$t(hr,t)):Gt($r),$t($r,n)}var Bi=null,cy=!1,hx=!1;function lI(t){Bi===null?Bi=[t]:Bi.push(t)}function g5(t){cy=!0,lI(t)}function Da(){if(!hx&&Bi!==null){hx=!0;var t=0,e=It;try{var n=Bi;for(It=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bi=null,cy=!1}catch(s){throw Bi!==null&&(Bi=Bi.slice(t+1)),PA(F_,Da),s}finally{It=e,hx=!1}}return null}var xc=[],wc=0,Wp=null,Kp=0,fs=[],ms=0,fl=null,qi=1,Hi="";function Ka(t,e){xc[wc++]=Kp,xc[wc++]=Wp,Wp=t,Kp=e}function cI(t,e,n){fs[ms++]=qi,fs[ms++]=Hi,fs[ms++]=fl,fl=t;var r=qi;t=Hi;var s=32-Vs(r)-1;r&=~(1<<s),n+=1;var o=32-Vs(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qi=1<<32-Vs(e)+s|n<<s|r,Hi=o+t}else qi=1<<o|n<<s|r,Hi=t}function K_(t){t.return!==null&&(Ka(t,1),cI(t,1,0))}function G_(t){for(;t===Wp;)Wp=xc[--wc],xc[wc]=null,Kp=xc[--wc],xc[wc]=null;for(;t===fl;)fl=fs[--ms],fs[ms]=null,Hi=fs[--ms],fs[ms]=null,qi=fs[--ms],fs[ms]=null}var ts=null,Zr=null,en=!1,Os=null;function uI(t,e){var n=ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function VS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Zr=ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fl!==null?{id:qi,overflow:Hi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Zr=null,!0):!1;default:return!1}}function Vw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uw(t){if(en){var e=Zr;if(e){var n=e;if(!VS(t,e)){if(Vw(t))throw Error(he(418));e=ta(n.nextSibling);var r=ts;e&&VS(t,e)?uI(r,n):(t.flags=t.flags&-4097|2,en=!1,ts=t)}}else{if(Vw(t))throw Error(he(418));t.flags=t.flags&-4097|2,en=!1,ts=t}}}function US(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Cm(t){if(t!==ts)return!1;if(!en)return US(t),en=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ow(t.type,t.memoizedProps)),e&&(e=Zr)){if(Vw(t))throw dI(),Error(he(418));for(;e;)uI(t,e),e=ta(e.nextSibling)}if(US(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zr=ta(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zr=null}}else Zr=ts?ta(t.stateNode.nextSibling):null;return!0}function dI(){for(var t=Zr;t;)t=ta(t.nextSibling)}function tu(){Zr=ts=null,en=!1}function Q_(t){Os===null?Os=[t]:Os.push(t)}var y5=go.ReactCurrentBatchConfig;function gd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function km(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $S(t){var e=t._init;return e(t._payload)}function hI(t){function e(b,w){if(t){var E=b.deletions;E===null?(b.deletions=[w],b.flags|=16):E.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=ia(b,w),b.index=0,b.sibling=null,b}function o(b,w,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<w?(b.flags|=2,w):E):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,w,E,C){return w===null||w.tag!==6?(w=xx(E,b.mode,C),w.return=b,w):(w=s(w,E),w.return=b,w)}function c(b,w,E,C){var R=E.type;return R===fc?d(b,w,E.props.children,C,E.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ro&&$S(R)===w.type)?(C=s(w,E.props),C.ref=gd(b,w,E),C.return=b,C):(C=fp(E.type,E.key,E.props,null,b.mode,C),C.ref=gd(b,w,E),C.return=b,C)}function u(b,w,E,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=wx(E,b.mode,C),w.return=b,w):(w=s(w,E.children||[]),w.return=b,w)}function d(b,w,E,C,R){return w===null||w.tag!==7?(w=ll(E,b.mode,C,R),w.return=b,w):(w=s(w,E),w.return=b,w)}function f(b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=xx(""+w,b.mode,E),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vm:return E=fp(w.type,w.key,w.props,null,b.mode,E),E.ref=gd(b,null,w),E.return=b,E;case hc:return w=wx(w,b.mode,E),w.return=b,w;case Ro:var C=w._init;return f(b,C(w._payload),E)}if(Cd(w)||dd(w))return w=ll(w,b.mode,E,null),w.return=b,w;km(b,w)}return null}function m(b,w,E,C){var R=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return R!==null?null:l(b,w,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vm:return E.key===R?c(b,w,E,C):null;case hc:return E.key===R?u(b,w,E,C):null;case Ro:return R=E._init,m(b,w,R(E._payload),C)}if(Cd(E)||dd(E))return R!==null?null:d(b,w,E,C,null);km(b,E)}return null}function g(b,w,E,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(E)||null,l(w,b,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vm:return b=b.get(C.key===null?E:C.key)||null,c(w,b,C,R);case hc:return b=b.get(C.key===null?E:C.key)||null,u(w,b,C,R);case Ro:var L=C._init;return g(b,w,E,L(C._payload),R)}if(Cd(C)||dd(C))return b=b.get(E)||null,d(w,b,C,R,null);km(w,C)}return null}function y(b,w,E,C){for(var R=null,L=null,A=w,j=w=0,S=null;A!==null&&j<E.length;j++){A.index>j?(S=A,A=null):S=A.sibling;var k=m(b,A,E[j],C);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(b,A),w=o(k,w,j),L===null?R=k:L.sibling=k,L=k,A=S}if(j===E.length)return n(b,A),en&&Ka(b,j),R;if(A===null){for(;j<E.length;j++)A=f(b,E[j],C),A!==null&&(w=o(A,w,j),L===null?R=A:L.sibling=A,L=A);return en&&Ka(b,j),R}for(A=r(b,A);j<E.length;j++)S=g(A,b,j,E[j],C),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?j:S.key),w=o(S,w,j),L===null?R=S:L.sibling=S,L=S);return t&&A.forEach(function(O){return e(b,O)}),en&&Ka(b,j),R}function v(b,w,E,C){var R=dd(E);if(typeof R!="function")throw Error(he(150));if(E=R.call(E),E==null)throw Error(he(151));for(var L=R=null,A=w,j=w=0,S=null,k=E.next();A!==null&&!k.done;j++,k=E.next()){A.index>j?(S=A,A=null):S=A.sibling;var O=m(b,A,k.value,C);if(O===null){A===null&&(A=S);break}t&&A&&O.alternate===null&&e(b,A),w=o(O,w,j),L===null?R=O:L.sibling=O,L=O,A=S}if(k.done)return n(b,A),en&&Ka(b,j),R;if(A===null){for(;!k.done;j++,k=E.next())k=f(b,k.value,C),k!==null&&(w=o(k,w,j),L===null?R=k:L.sibling=k,L=k);return en&&Ka(b,j),R}for(A=r(b,A);!k.done;j++,k=E.next())k=g(A,b,j,k.value,C),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?j:k.key),w=o(k,w,j),L===null?R=k:L.sibling=k,L=k);return t&&A.forEach(function(I){return e(b,I)}),en&&Ka(b,j),R}function x(b,w,E,C){if(typeof E=="object"&&E!==null&&E.type===fc&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case vm:e:{for(var R=E.key,L=w;L!==null;){if(L.key===R){if(R=E.type,R===fc){if(L.tag===7){n(b,L.sibling),w=s(L,E.props.children),w.return=b,b=w;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ro&&$S(R)===L.type){n(b,L.sibling),w=s(L,E.props),w.ref=gd(b,L,E),w.return=b,b=w;break e}n(b,L);break}else e(b,L);L=L.sibling}E.type===fc?(w=ll(E.props.children,b.mode,C,E.key),w.return=b,b=w):(C=fp(E.type,E.key,E.props,null,b.mode,C),C.ref=gd(b,w,E),C.return=b,b=C)}return a(b);case hc:e:{for(L=E.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(b,w.sibling),w=s(w,E.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=wx(E,b.mode,C),w.return=b,b=w}return a(b);case Ro:return L=E._init,x(b,w,L(E._payload),C)}if(Cd(E))return y(b,w,E,C);if(dd(E))return v(b,w,E,C);km(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,E),w.return=b,b=w):(n(b,w),w=xx(E,b.mode,C),w.return=b,b=w),a(b)):n(b,w)}return x}var nu=hI(!0),fI=hI(!1),Gp=Pa(null),Qp=null,_c=null,Y_=null;function X_(){Y_=_c=Qp=null}function Z_(t){var e=Gp.current;Gt(Gp),t._currentValue=e}function $w(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rc(t,e){Qp=t,Y_=_c=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ur=!0),t.firstContext=null)}function bs(t){var e=t._currentValue;if(Y_!==t)if(t={context:t,memoizedValue:e,next:null},_c===null){if(Qp===null)throw Error(he(308));_c=t,Qp.dependencies={lanes:0,firstContext:t}}else _c=_c.next=t;return e}var Za=null;function J_(t){Za===null?Za=[t]:Za.push(t)}function mI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,J_(e)):(n.next=s.next,s.next=n),e.interleaved=n,io(t,r)}function io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Po=!1;function eb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function na(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,yt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,io(t,n)}return s=r.interleaved,s===null?(e.next=e,J_(r)):(e.next=s.next,s.next=e),r.interleaved=e,io(t,n)}function ap(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V_(t,n)}}function BS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yp(t,e,n,r){var s=t.updateQueue;Po=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,d=u=c=null,l=o;do{var m=l.lane,g=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,v=l;switch(m=e,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(g,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(g,f,m):y,m==null)break e;f=ln({},f,m);break e;case 2:Po=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);pl|=a,t.lanes=a,t.memoizedState=f}}function zS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(he(191,s));s.call(r)}}}var gf={},pi=Pa(gf),vh=Pa(gf),xh=Pa(gf);function Ja(t){if(t===gf)throw Error(he(174));return t}function tb(t,e){switch($t(xh,e),$t(vh,t),$t(pi,gf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_w(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_w(e,t)}Gt(pi),$t(pi,e)}function ru(){Gt(pi),Gt(vh),Gt(xh)}function gI(t){Ja(xh.current);var e=Ja(pi.current),n=_w(e,t.type);e!==n&&($t(vh,t),$t(pi,n))}function nb(t){vh.current===t&&(Gt(pi),Gt(vh))}var rn=Pa(0);function Xp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fx=[];function rb(){for(var t=0;t<fx.length;t++)fx[t]._workInProgressVersionPrimary=null;fx.length=0}var lp=go.ReactCurrentDispatcher,mx=go.ReactCurrentBatchConfig,ml=0,an=null,In=null,Mn=null,Zp=!1,Wd=!1,wh=0,v5=0;function er(){throw Error(he(321))}function sb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zs(t[n],e[n]))return!1;return!0}function ib(t,e,n,r,s,o){if(ml=o,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lp.current=t===null||t.memoizedState===null?b5:E5,t=n(r,s),Wd){o=0;do{if(Wd=!1,wh=0,25<=o)throw Error(he(301));o+=1,Mn=In=null,e.updateQueue=null,lp.current=j5,t=n(r,s)}while(Wd)}if(lp.current=Jp,e=In!==null&&In.next!==null,ml=0,Mn=In=an=null,Zp=!1,e)throw Error(he(300));return t}function ob(){var t=wh!==0;return wh=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?an.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Es(){if(In===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=In.next;var e=Mn===null?an.memoizedState:Mn.next;if(e!==null)Mn=e,In=t;else{if(t===null)throw Error(he(310));In=t,t={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Mn===null?an.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function _h(t,e){return typeof e=="function"?e(t):e}function px(t){var e=Es(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=In,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((ml&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,an.lanes|=d,pl|=d}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,zs(r,e.memoizedState)||(Ur=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,an.lanes|=o,pl|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gx(t){var e=Es(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);zs(o,e.memoizedState)||(Ur=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function yI(){}function vI(t,e){var n=an,r=Es(),s=e(),o=!zs(r.memoizedState,s);if(o&&(r.memoizedState=s,Ur=!0),r=r.queue,ab(_I.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,bh(9,wI.bind(null,n,r,s,e),void 0,null),Ln===null)throw Error(he(349));ml&30||xI(n,e,s)}return s}function xI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wI(t,e,n,r){e.value=n,e.getSnapshot=r,bI(e)&&EI(t)}function _I(t,e,n){return n(function(){bI(e)&&EI(t)})}function bI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zs(t,n)}catch{return!0}}function EI(t){var e=io(t,1);e!==null&&Us(e,t,1,-1)}function qS(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_h,lastRenderedState:t},e.queue=t,t=t.dispatch=_5.bind(null,an,t),[e.memoizedState,t]}function bh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jI(){return Es().memoizedState}function cp(t,e,n,r){var s=ii();an.flags|=t,s.memoizedState=bh(1|e,n,void 0,r===void 0?null:r)}function uy(t,e,n,r){var s=Es();r=r===void 0?null:r;var o=void 0;if(In!==null){var a=In.memoizedState;if(o=a.destroy,r!==null&&sb(r,a.deps)){s.memoizedState=bh(e,n,o,r);return}}an.flags|=t,s.memoizedState=bh(1|e,n,o,r)}function HS(t,e){return cp(8390656,8,t,e)}function ab(t,e){return uy(2048,8,t,e)}function NI(t,e){return uy(4,2,t,e)}function SI(t,e){return uy(4,4,t,e)}function TI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CI(t,e,n){return n=n!=null?n.concat([t]):null,uy(4,4,TI.bind(null,e,t),n)}function lb(){}function kI(t,e){var n=Es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AI(t,e){var n=Es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function II(t,e,n){return ml&21?(zs(n,e)||(n=MA(),an.lanes|=n,pl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ur=!0),t.memoizedState=n)}function x5(t,e){var n=It;It=n!==0&&4>n?n:4,t(!0);var r=mx.transition;mx.transition={};try{t(!1),e()}finally{It=n,mx.transition=r}}function RI(){return Es().memoizedState}function w5(t,e,n){var r=sa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PI(t))DI(e,n);else if(n=mI(t,e,n,r),n!==null){var s=jr();Us(n,t,r,s),OI(n,e,r)}}function _5(t,e,n){var r=sa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PI(t))DI(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,zs(l,a)){var c=e.interleaved;c===null?(s.next=s,J_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=mI(t,e,s,r),n!==null&&(s=jr(),Us(n,t,r,s),OI(n,e,r))}}function PI(t){var e=t.alternate;return t===an||e!==null&&e===an}function DI(t,e){Wd=Zp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V_(t,n)}}var Jp={readContext:bs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},b5={readContext:bs,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:bs,useEffect:HS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cp(4194308,4,TI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cp(4194308,4,t,e)},useInsertionEffect:function(t,e){return cp(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=w5.bind(null,an,t),[r.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:qS,useDebugValue:lb,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=qS(!1),e=t[0];return t=x5.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=an,s=ii();if(en){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),Ln===null)throw Error(he(349));ml&30||xI(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,HS(_I.bind(null,r,o,t),[t]),r.flags|=2048,bh(9,wI.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ii(),e=Ln.identifierPrefix;if(en){var n=Hi,r=qi;n=(r&~(1<<32-Vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E5={readContext:bs,useCallback:kI,useContext:bs,useEffect:ab,useImperativeHandle:CI,useInsertionEffect:NI,useLayoutEffect:SI,useMemo:AI,useReducer:px,useRef:jI,useState:function(){return px(_h)},useDebugValue:lb,useDeferredValue:function(t){var e=Es();return II(e,In.memoizedState,t)},useTransition:function(){var t=px(_h)[0],e=Es().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:vI,useId:RI,unstable_isNewReconciler:!1},j5={readContext:bs,useCallback:kI,useContext:bs,useEffect:ab,useImperativeHandle:CI,useInsertionEffect:NI,useLayoutEffect:SI,useMemo:AI,useReducer:gx,useRef:jI,useState:function(){return gx(_h)},useDebugValue:lb,useDeferredValue:function(t){var e=Es();return In===null?e.memoizedState=t:II(e,In.memoizedState,t)},useTransition:function(){var t=gx(_h)[0],e=Es().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:vI,useId:RI,unstable_isNewReconciler:!1};function As(t,e){if(t&&t.defaultProps){e=ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dy={isMounted:function(t){return(t=t._reactInternals)?Ol(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jr(),s=sa(t),o=Xi(r,s);o.payload=e,n!=null&&(o.callback=n),e=na(t,o,s),e!==null&&(Us(e,t,s,r),ap(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jr(),s=sa(t),o=Xi(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=na(t,o,s),e!==null&&(Us(e,t,s,r),ap(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jr(),r=sa(t),s=Xi(n,r);s.tag=2,e!=null&&(s.callback=e),e=na(t,s,r),e!==null&&(Us(e,t,r,n),ap(e,t,r))}};function WS(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!mh(n,r)||!mh(s,o):!0}function MI(t,e,n){var r=!1,s=fa,o=e.contextType;return typeof o=="object"&&o!==null?o=bs(o):(s=Br(e)?hl:hr.current,r=e.contextTypes,o=(r=r!=null)?eu(t,s):fa),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function KS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dy.enqueueReplaceState(e,e.state,null)}function zw(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},eb(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=bs(o):(o=Br(e)?hl:hr.current,s.context=eu(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Bw(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dy.enqueueReplaceState(s,s.state,null),Yp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function su(t,e){try{var n="",r=e;do n+=ZU(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function yx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N5=typeof WeakMap=="function"?WeakMap:Map;function LI(t,e,n){n=Xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tg||(tg=!0,e0=r),qw(t,e)},n}function FI(t,e,n){n=Xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qw(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qw(t,e),typeof r!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function GS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=V5.bind(null,t,e,n),e.then(t,t))}function QS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function YS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xi(-1,1),e.tag=2,na(n,e,1))),n.lanes|=1),t)}var S5=go.ReactCurrentOwner,Ur=!1;function _r(t,e,n,r){e.child=t===null?fI(e,null,n,r):nu(e,t.child,n,r)}function XS(t,e,n,r,s){n=n.render;var o=e.ref;return Rc(e,s),r=ib(t,e,n,r,o,s),n=ob(),t!==null&&!Ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,oo(t,e,s)):(en&&n&&K_(e),e.flags|=1,_r(t,e,r,s),e.child)}function ZS(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!gb(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,VI(t,e,o,r,s)):(t=fp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:mh,n(a,r)&&t.ref===e.ref)return oo(t,e,s)}return e.flags|=1,t=ia(o,r),t.ref=e.ref,t.return=e,e.child=t}function VI(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(mh(o,r)&&t.ref===e.ref)if(Ur=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Ur=!0);else return e.lanes=t.lanes,oo(t,e,s)}return Hw(t,e,n,r,s)}function UI(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Ec,Qr),Qr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$t(Ec,Qr),Qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,$t(Ec,Qr),Qr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,$t(Ec,Qr),Qr|=r;return _r(t,e,s,n),e.child}function $I(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hw(t,e,n,r,s){var o=Br(n)?hl:hr.current;return o=eu(e,o),Rc(e,s),n=ib(t,e,n,r,o,s),r=ob(),t!==null&&!Ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,oo(t,e,s)):(en&&r&&K_(e),e.flags|=1,_r(t,e,n,s),e.child)}function JS(t,e,n,r,s){if(Br(n)){var o=!0;Hp(e)}else o=!1;if(Rc(e,s),e.stateNode===null)up(t,e),MI(e,n,r),zw(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=bs(u):(u=Br(n)?hl:hr.current,u=eu(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&KS(e,a,r,u),Po=!1;var m=e.memoizedState;a.state=m,Yp(e,r,a,s),c=e.memoizedState,l!==r||m!==c||$r.current||Po?(typeof d=="function"&&(Bw(e,n,d,r),c=e.memoizedState),(l=Po||WS(e,n,l,r,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,pI(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:As(e.type,l),a.props=u,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=bs(c):(c=Br(n)?hl:hr.current,c=eu(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&KS(e,a,r,c),Po=!1,m=e.memoizedState,a.state=m,Yp(e,r,a,s);var y=e.memoizedState;l!==f||m!==y||$r.current||Po?(typeof g=="function"&&(Bw(e,n,g,r),y=e.memoizedState),(u=Po||WS(e,n,u,r,m,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ww(t,e,n,r,o,s)}function Ww(t,e,n,r,s,o){$I(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&FS(e,n,!1),oo(t,e,o);r=e.stateNode,S5.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=nu(e,t.child,null,o),e.child=nu(e,null,l,o)):_r(t,e,l,o),e.memoizedState=r.state,s&&FS(e,n,!0),e.child}function BI(t){var e=t.stateNode;e.pendingContext?LS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LS(t,e.context,!1),tb(t,e.containerInfo)}function e1(t,e,n,r,s){return tu(),Q_(s),e.flags|=256,_r(t,e,n,r),e.child}var Kw={dehydrated:null,treeContext:null,retryLane:0};function Gw(t){return{baseLanes:t,cachePool:null,transitions:null}}function zI(t,e,n){var r=e.pendingProps,s=rn.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$t(rn,s&1),t===null)return Uw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=my(a,r,0,null),t=ll(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gw(n),e.memoizedState=Kw,t):cb(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return T5(t,e,a,r,l,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ia(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ia(l,o):(o=ll(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?Gw(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Kw,r}return o=t.child,t=o.sibling,r=ia(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cb(t,e){return e=my({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Am(t,e,n,r){return r!==null&&Q_(r),nu(e,t.child,null,n),t=cb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T5(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=yx(Error(he(422))),Am(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=my({mode:"visible",children:r.children},s,0,null),o=ll(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&nu(e,t.child,null,a),e.child.memoizedState=Gw(a),e.memoizedState=Kw,o);if(!(e.mode&1))return Am(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(he(419)),r=yx(o,r,void 0),Am(t,e,a,r)}if(l=(a&t.childLanes)!==0,Ur||l){if(r=Ln,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,io(t,s),Us(r,t,s,-1))}return pb(),r=yx(Error(he(421))),Am(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=U5.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Zr=ta(s.nextSibling),ts=e,en=!0,Os=null,t!==null&&(fs[ms++]=qi,fs[ms++]=Hi,fs[ms++]=fl,qi=t.id,Hi=t.overflow,fl=e),e=cb(e,r.children),e.flags|=4096,e)}function t1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$w(t.return,e,n)}function vx(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function qI(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(_r(t,e,r.children,n),r=rn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t1(t,n,e);else if(t.tag===19)t1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($t(rn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vx(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vx(e,!0,n,null,o);break;case"together":vx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function up(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=ia(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ia(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C5(t,e,n){switch(e.tag){case 3:BI(e),tu();break;case 5:gI(e);break;case 1:Br(e.type)&&Hp(e);break;case 4:tb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$t(Gp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($t(rn,rn.current&1),e.flags|=128,null):n&e.child.childLanes?zI(t,e,n):($t(rn,rn.current&1),t=oo(t,e,n),t!==null?t.sibling:null);$t(rn,rn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$t(rn,rn.current),r)break;return null;case 22:case 23:return e.lanes=0,UI(t,e,n)}return oo(t,e,n)}var HI,Qw,WI,KI;HI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qw=function(){};WI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ja(pi.current);var o=null;switch(n){case"input":s=yw(t,s),r=yw(t,r),o=[];break;case"select":s=ln({},s,{value:void 0}),r=ln({},r,{value:void 0}),o=[];break;case"textarea":s=ww(t,s),r=ww(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zp)}bw(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ah.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ah.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&qt("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};KI=function(t,e,n,r){n!==r&&(e.flags|=4)};function yd(t,e){if(!en)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function k5(t,e,n){var r=e.pendingProps;switch(G_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return Br(e.type)&&qp(),tr(e),null;case 3:return r=e.stateNode,ru(),Gt($r),Gt(hr),rb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Os!==null&&(r0(Os),Os=null))),Qw(t,e),tr(e),null;case 5:nb(e);var s=Ja(xh.current);if(n=e.type,t!==null&&e.stateNode!=null)WI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return tr(e),null}if(t=Ja(pi.current),Cm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ui]=e,r[yh]=o,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(s=0;s<Ad.length;s++)qt(Ad[s],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":uS(r,o),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qt("invalid",r);break;case"textarea":hS(r,o),qt("invalid",r)}bw(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Tm(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Tm(r.textContent,l,t),s=["children",""+l]):ah.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&qt("scroll",r)}switch(n){case"input":xm(r),dS(r,o,!0);break;case"textarea":xm(r),fS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=zp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_A(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ui]=e,t[yh]=r,HI(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ew(n,r),n){case"dialog":qt("cancel",t),qt("close",t),s=r;break;case"iframe":case"object":case"embed":qt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ad.length;s++)qt(Ad[s],t);s=r;break;case"source":qt("error",t),s=r;break;case"img":case"image":case"link":qt("error",t),qt("load",t),s=r;break;case"details":qt("toggle",t),s=r;break;case"input":uS(t,r),s=yw(t,r),qt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ln({},r,{value:void 0}),qt("invalid",t);break;case"textarea":hS(t,r),s=ww(t,r),qt("invalid",t);break;default:s=r}bw(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?jA(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bA(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&lh(t,c):typeof c=="number"&&lh(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ah.hasOwnProperty(o)?c!=null&&o==="onScroll"&&qt("scroll",t):c!=null&&P_(t,o,c,a))}switch(n){case"input":xm(t),dS(t,r,!1);break;case"textarea":xm(t),fS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ha(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Cc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)KI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=Ja(xh.current),Ja(pi.current),Cm(e)){if(r=e.stateNode,n=e.memoizedProps,r[ui]=e,(o=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Tm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ui]=e,e.stateNode=r}return tr(e),null;case 13:if(Gt(rn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&Zr!==null&&e.mode&1&&!(e.flags&128))dI(),tu(),e.flags|=98560,o=!1;else if(o=Cm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(he(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(he(317));o[ui]=e}else tu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),o=!1}else Os!==null&&(r0(Os),Os=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rn.current&1?Rn===0&&(Rn=3):pb())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return ru(),Qw(t,e),t===null&&ph(e.stateNode.containerInfo),tr(e),null;case 10:return Z_(e.type._context),tr(e),null;case 17:return Br(e.type)&&qp(),tr(e),null;case 19:if(Gt(rn),o=e.memoizedState,o===null)return tr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)yd(o,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Xp(t),a!==null){for(e.flags|=128,yd(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $t(rn,rn.current&1|2),e.child}t=t.sibling}o.tail!==null&&xn()>iu&&(e.flags|=128,r=!0,yd(o,!1),e.lanes=4194304)}else{if(!r)if(t=Xp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!en)return tr(e),null}else 2*xn()-o.renderingStartTime>iu&&n!==1073741824&&(e.flags|=128,r=!0,yd(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=xn(),e.sibling=null,n=rn.current,$t(rn,r?n&1|2:n&1),e):(tr(e),null);case 22:case 23:return mb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qr&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function A5(t,e){switch(G_(e),e.tag){case 1:return Br(e.type)&&qp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ru(),Gt($r),Gt(hr),rb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nb(e),null;case 13:if(Gt(rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));tu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(rn),null;case 4:return ru(),null;case 10:return Z_(e.type._context),null;case 22:case 23:return mb(),null;case 24:return null;default:return null}}var Im=!1,or=!1,I5=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function bc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mn(t,e,r)}else n.current=null}function Yw(t,e,n){try{n()}catch(r){mn(t,e,r)}}var n1=!1;function R5(t,e){if(Pw=Up,t=ZA(),W_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(l=a),m===o&&++d===r&&(c=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dw={focusedElem:t,selectionRange:n},Up=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:As(e.type,v),x);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(C){mn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return y=n1,n1=!1,y}function Kd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Yw(e,n,o)}s=s.next}while(s!==r)}}function hy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function GI(t){var e=t.alternate;e!==null&&(t.alternate=null,GI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ui],delete e[yh],delete e[Lw],delete e[m5],delete e[p5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QI(t){return t.tag===5||t.tag===3||t.tag===4}function r1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zp));else if(r!==4&&(t=t.child,t!==null))for(Zw(t,e,n),t=t.sibling;t!==null;)Zw(t,e,n),t=t.sibling}function Jw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jw(t,e,n),t=t.sibling;t!==null;)Jw(t,e,n),t=t.sibling}var $n=null,Ds=!1;function No(t,e,n){for(n=n.child;n!==null;)YI(t,e,n),n=n.sibling}function YI(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(sy,n)}catch{}switch(n.tag){case 5:or||bc(n,e);case 6:var r=$n,s=Ds;$n=null,No(t,e,n),$n=r,Ds=s,$n!==null&&(Ds?(t=$n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$n.removeChild(n.stateNode));break;case 18:$n!==null&&(Ds?(t=$n,n=n.stateNode,t.nodeType===8?dx(t.parentNode,n):t.nodeType===1&&dx(t,n),hh(t)):dx($n,n.stateNode));break;case 4:r=$n,s=Ds,$n=n.stateNode.containerInfo,Ds=!0,No(t,e,n),$n=r,Ds=s;break;case 0:case 11:case 14:case 15:if(!or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Yw(n,e,a),s=s.next}while(s!==r)}No(t,e,n);break;case 1:if(!or&&(bc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){mn(n,e,l)}No(t,e,n);break;case 21:No(t,e,n);break;case 22:n.mode&1?(or=(r=or)||n.memoizedState!==null,No(t,e,n),or=r):No(t,e,n);break;default:No(t,e,n)}}function s1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I5),e.forEach(function(r){var s=$5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:$n=l.stateNode,Ds=!1;break e;case 3:$n=l.stateNode.containerInfo,Ds=!0;break e;case 4:$n=l.stateNode.containerInfo,Ds=!0;break e}l=l.return}if($n===null)throw Error(he(160));YI(o,a,s),$n=null,Ds=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){mn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XI(e,t),e=e.sibling}function XI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cs(e,t),ri(t),r&4){try{Kd(3,t,t.return),hy(3,t)}catch(v){mn(t,t.return,v)}try{Kd(5,t,t.return)}catch(v){mn(t,t.return,v)}}break;case 1:Cs(e,t),ri(t),r&512&&n!==null&&bc(n,n.return);break;case 5:if(Cs(e,t),ri(t),r&512&&n!==null&&bc(n,n.return),t.flags&32){var s=t.stateNode;try{lh(s,"")}catch(v){mn(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&xA(s,o),Ew(l,a);var u=Ew(l,o);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?jA(s,f):d==="dangerouslySetInnerHTML"?bA(s,f):d==="children"?lh(s,f):P_(s,d,f,u)}switch(l){case"input":vw(s,o);break;case"textarea":wA(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Cc(s,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?Cc(s,!!o.multiple,o.defaultValue,!0):Cc(s,!!o.multiple,o.multiple?[]:"",!1))}s[yh]=o}catch(v){mn(t,t.return,v)}}break;case 6:if(Cs(e,t),ri(t),r&4){if(t.stateNode===null)throw Error(he(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(v){mn(t,t.return,v)}}break;case 3:if(Cs(e,t),ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hh(e.containerInfo)}catch(v){mn(t,t.return,v)}break;case 4:Cs(e,t),ri(t);break;case 13:Cs(e,t),ri(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(hb=xn())),r&4&&s1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(or=(u=or)||d,Cs(e,t),or=u):Cs(e,t),ri(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ae=t,d=t.child;d!==null;){for(f=Ae=d;Ae!==null;){switch(m=Ae,g=m.child,m.tag){case 0:case 11:case 14:case 15:Kd(4,m,m.return);break;case 1:bc(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){mn(r,n,v)}}break;case 5:bc(m,m.return);break;case 22:if(m.memoizedState!==null){o1(f);continue}}g!==null?(g.return=m,Ae=g):o1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=EA("display",a))}catch(v){mn(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){mn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cs(e,t),ri(t),r&4&&s1(t);break;case 21:break;default:Cs(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QI(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(lh(s,""),r.flags&=-33);var o=r1(t);Jw(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=r1(t);Zw(t,l,a);break;default:throw Error(he(161))}}catch(c){mn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function P5(t,e,n){Ae=t,ZI(t)}function ZI(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var s=Ae,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Im;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||or;l=Im;var u=or;if(Im=a,(or=c)&&!u)for(Ae=s;Ae!==null;)a=Ae,c=a.child,a.tag===22&&a.memoizedState!==null?a1(s):c!==null?(c.return=a,Ae=c):a1(s);for(;o!==null;)Ae=o,ZI(o),o=o.sibling;Ae=s,Im=l,or=u}i1(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ae=o):i1(t)}}function i1(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:or||hy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!or)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:As(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&zS(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zS(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&hh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}or||e.flags&512&&Xw(e)}catch(m){mn(e,e.return,m)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function o1(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function a1(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hy(4,e)}catch(c){mn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){mn(e,s,c)}}var o=e.return;try{Xw(e)}catch(c){mn(e,o,c)}break;case 5:var a=e.return;try{Xw(e)}catch(c){mn(e,a,c)}}}catch(c){mn(e,e.return,c)}if(e===t){Ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ae=l;break}Ae=e.return}}var D5=Math.ceil,eg=go.ReactCurrentDispatcher,ub=go.ReactCurrentOwner,gs=go.ReactCurrentBatchConfig,yt=0,Ln=null,Sn=null,Hn=0,Qr=0,Ec=Pa(0),Rn=0,Eh=null,pl=0,fy=0,db=0,Gd=null,Fr=null,hb=0,iu=1/0,$i=null,tg=!1,e0=null,ra=null,Rm=!1,Qo=null,ng=0,Qd=0,t0=null,dp=-1,hp=0;function jr(){return yt&6?xn():dp!==-1?dp:dp=xn()}function sa(t){return t.mode&1?yt&2&&Hn!==0?Hn&-Hn:y5.transition!==null?(hp===0&&(hp=MA()),hp):(t=It,t!==0||(t=window.event,t=t===void 0?16:zA(t.type)),t):1}function Us(t,e,n,r){if(50<Qd)throw Qd=0,t0=null,Error(he(185));ff(t,n,r),(!(yt&2)||t!==Ln)&&(t===Ln&&(!(yt&2)&&(fy|=n),Rn===4&&Oo(t,Hn)),zr(t,r),n===1&&yt===0&&!(e.mode&1)&&(iu=xn()+500,cy&&Da()))}function zr(t,e){var n=t.callbackNode;y$(t,e);var r=Vp(t,t===Ln?Hn:0);if(r===0)n!==null&&gS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gS(n),e===1)t.tag===0?g5(l1.bind(null,t)):lI(l1.bind(null,t)),h5(function(){!(yt&6)&&Da()}),n=null;else{switch(LA(r)){case 1:n=F_;break;case 4:n=DA;break;case 16:n=Fp;break;case 536870912:n=OA;break;default:n=Fp}n=oR(n,JI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JI(t,e){if(dp=-1,hp=0,yt&6)throw Error(he(327));var n=t.callbackNode;if(Pc()&&t.callbackNode!==n)return null;var r=Vp(t,t===Ln?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rg(t,r);else{e=r;var s=yt;yt|=2;var o=tR();(Ln!==t||Hn!==e)&&($i=null,iu=xn()+500,al(t,e));do try{L5();break}catch(l){eR(t,l)}while(!0);X_(),eg.current=o,yt=s,Sn!==null?e=0:(Ln=null,Hn=0,e=Rn)}if(e!==0){if(e===2&&(s=Cw(t),s!==0&&(r=s,e=n0(t,s))),e===1)throw n=Eh,al(t,0),Oo(t,r),zr(t,xn()),n;if(e===6)Oo(t,r);else{if(s=t.current.alternate,!(r&30)&&!O5(s)&&(e=rg(t,r),e===2&&(o=Cw(t),o!==0&&(r=o,e=n0(t,o))),e===1))throw n=Eh,al(t,0),Oo(t,r),zr(t,xn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Ga(t,Fr,$i);break;case 3:if(Oo(t,r),(r&130023424)===r&&(e=hb+500-xn(),10<e)){if(Vp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mw(Ga.bind(null,t,Fr,$i),e);break}Ga(t,Fr,$i);break;case 4:if(Oo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Vs(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=xn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D5(r/1960))-r,10<r){t.timeoutHandle=Mw(Ga.bind(null,t,Fr,$i),r);break}Ga(t,Fr,$i);break;case 5:Ga(t,Fr,$i);break;default:throw Error(he(329))}}}return zr(t,xn()),t.callbackNode===n?JI.bind(null,t):null}function n0(t,e){var n=Gd;return t.current.memoizedState.isDehydrated&&(al(t,e).flags|=256),t=rg(t,e),t!==2&&(e=Fr,Fr=n,e!==null&&r0(e)),t}function r0(t){Fr===null?Fr=t:Fr.push.apply(Fr,t)}function O5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!zs(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oo(t,e){for(e&=~db,e&=~fy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vs(e),r=1<<n;t[n]=-1,e&=~r}}function l1(t){if(yt&6)throw Error(he(327));Pc();var e=Vp(t,0);if(!(e&1))return zr(t,xn()),null;var n=rg(t,e);if(t.tag!==0&&n===2){var r=Cw(t);r!==0&&(e=r,n=n0(t,r))}if(n===1)throw n=Eh,al(t,0),Oo(t,e),zr(t,xn()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ga(t,Fr,$i),zr(t,xn()),null}function fb(t,e){var n=yt;yt|=1;try{return t(e)}finally{yt=n,yt===0&&(iu=xn()+500,cy&&Da())}}function gl(t){Qo!==null&&Qo.tag===0&&!(yt&6)&&Pc();var e=yt;yt|=1;var n=gs.transition,r=It;try{if(gs.transition=null,It=1,t)return t()}finally{It=r,gs.transition=n,yt=e,!(yt&6)&&Da()}}function mb(){Qr=Ec.current,Gt(Ec)}function al(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d5(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(G_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qp();break;case 3:ru(),Gt($r),Gt(hr),rb();break;case 5:nb(r);break;case 4:ru();break;case 13:Gt(rn);break;case 19:Gt(rn);break;case 10:Z_(r.type._context);break;case 22:case 23:mb()}n=n.return}if(Ln=t,Sn=t=ia(t.current,null),Hn=Qr=e,Rn=0,Eh=null,db=fy=pl=0,Fr=Gd=null,Za!==null){for(e=0;e<Za.length;e++)if(n=Za[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Za=null}return t}function eR(t,e){do{var n=Sn;try{if(X_(),lp.current=Jp,Zp){for(var r=an.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zp=!1}if(ml=0,Mn=In=an=null,Wd=!1,wh=0,ub.current=null,n===null||n.return===null){Rn=1,Eh=e,Sn=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=Hn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=QS(a);if(g!==null){g.flags&=-257,YS(g,a,l,o,e),g.mode&1&&GS(o,u,e),e=g,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){GS(o,u,e),pb();break e}c=Error(he(426))}}else if(en&&l.mode&1){var x=QS(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),YS(x,a,l,o,e),Q_(su(c,l));break e}}o=c=su(c,l),Rn!==4&&(Rn=2),Gd===null?Gd=[o]:Gd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=LI(o,c,e);BS(o,b);break e;case 1:l=c;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ra===null||!ra.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=FI(o,l,e);BS(o,C);break e}}o=o.return}while(o!==null)}rR(n)}catch(R){e=R,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(!0)}function tR(){var t=eg.current;return eg.current=Jp,t===null?Jp:t}function pb(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Ln===null||!(pl&268435455)&&!(fy&268435455)||Oo(Ln,Hn)}function rg(t,e){var n=yt;yt|=2;var r=tR();(Ln!==t||Hn!==e)&&($i=null,al(t,e));do try{M5();break}catch(s){eR(t,s)}while(!0);if(X_(),yt=n,eg.current=r,Sn!==null)throw Error(he(261));return Ln=null,Hn=0,Rn}function M5(){for(;Sn!==null;)nR(Sn)}function L5(){for(;Sn!==null&&!l$();)nR(Sn)}function nR(t){var e=iR(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?rR(t):Sn=e,ub.current=null}function rR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=A5(n,e),n!==null){n.flags&=32767,Sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,Sn=null;return}}else if(n=k5(n,e,Qr),n!==null){Sn=n;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);Rn===0&&(Rn=5)}function Ga(t,e,n){var r=It,s=gs.transition;try{gs.transition=null,It=1,F5(t,e,n,r)}finally{gs.transition=s,It=r}return null}function F5(t,e,n,r){do Pc();while(Qo!==null);if(yt&6)throw Error(he(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(v$(t,o),t===Ln&&(Sn=Ln=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rm||(Rm=!0,oR(Fp,function(){return Pc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=gs.transition,gs.transition=null;var a=It;It=1;var l=yt;yt|=4,ub.current=null,R5(t,n),XI(n,t),s5(Dw),Up=!!Pw,Dw=Pw=null,t.current=n,P5(n),c$(),yt=l,It=a,gs.transition=o}else t.current=n;if(Rm&&(Rm=!1,Qo=t,ng=s),o=t.pendingLanes,o===0&&(ra=null),h$(n.stateNode),zr(t,xn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tg)throw tg=!1,t=e0,e0=null,t;return ng&1&&t.tag!==0&&Pc(),o=t.pendingLanes,o&1?t===t0?Qd++:(Qd=0,t0=t):Qd=0,Da(),null}function Pc(){if(Qo!==null){var t=LA(ng),e=gs.transition,n=It;try{if(gs.transition=null,It=16>t?16:t,Qo===null)var r=!1;else{if(t=Qo,Qo=null,ng=0,yt&6)throw Error(he(331));var s=yt;for(yt|=4,Ae=t.current;Ae!==null;){var o=Ae,a=o.child;if(Ae.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ae=u;Ae!==null;){var d=Ae;switch(d.tag){case 0:case 11:case 15:Kd(8,d,o)}var f=d.child;if(f!==null)f.return=d,Ae=f;else for(;Ae!==null;){d=Ae;var m=d.sibling,g=d.return;if(GI(d),d===u){Ae=null;break}if(m!==null){m.return=g,Ae=m;break}Ae=g}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ae=a;else e:for(;Ae!==null;){if(o=Ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Kd(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Ae=b;break e}Ae=o.return}}var w=t.current;for(Ae=w;Ae!==null;){a=Ae;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,Ae=E;else e:for(a=w;Ae!==null;){if(l=Ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hy(9,l)}}catch(R){mn(l,l.return,R)}if(l===a){Ae=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ae=C;break e}Ae=l.return}}if(yt=s,Da(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(sy,t)}catch{}r=!0}return r}finally{It=n,gs.transition=e}}return!1}function c1(t,e,n){e=su(n,e),e=LI(t,e,1),t=na(t,e,1),e=jr(),t!==null&&(ff(t,1,e),zr(t,e))}function mn(t,e,n){if(t.tag===3)c1(t,t,n);else for(;e!==null;){if(e.tag===3){c1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ra===null||!ra.has(r))){t=su(n,t),t=FI(e,t,1),e=na(e,t,1),t=jr(),e!==null&&(ff(e,1,t),zr(e,t));break}}e=e.return}}function V5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jr(),t.pingedLanes|=t.suspendedLanes&n,Ln===t&&(Hn&n)===n&&(Rn===4||Rn===3&&(Hn&130023424)===Hn&&500>xn()-hb?al(t,0):db|=n),zr(t,e)}function sR(t,e){e===0&&(t.mode&1?(e=bm,bm<<=1,!(bm&130023424)&&(bm=4194304)):e=1);var n=jr();t=io(t,e),t!==null&&(ff(t,e,n),zr(t,n))}function U5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sR(t,n)}function $5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),sR(t,n)}var iR;iR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Ur=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ur=!1,C5(t,e,n);Ur=!!(t.flags&131072)}else Ur=!1,en&&e.flags&1048576&&cI(e,Kp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;up(t,e),t=e.pendingProps;var s=eu(e,hr.current);Rc(e,n),s=ib(null,e,r,t,s,n);var o=ob();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Br(r)?(o=!0,Hp(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eb(e),s.updater=dy,e.stateNode=s,s._reactInternals=e,zw(e,r,t,n),e=Ww(null,e,r,!0,o,n)):(e.tag=0,en&&o&&K_(e),_r(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(up(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=z5(r),t=As(r,t),s){case 0:e=Hw(null,e,r,t,n);break e;case 1:e=JS(null,e,r,t,n);break e;case 11:e=XS(null,e,r,t,n);break e;case 14:e=ZS(null,e,r,As(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),Hw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),JS(t,e,r,s,n);case 3:e:{if(BI(e),t===null)throw Error(he(387));r=e.pendingProps,o=e.memoizedState,s=o.element,pI(t,e),Yp(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=su(Error(he(423)),e),e=e1(t,e,r,n,s);break e}else if(r!==s){s=su(Error(he(424)),e),e=e1(t,e,r,n,s);break e}else for(Zr=ta(e.stateNode.containerInfo.firstChild),ts=e,en=!0,Os=null,n=fI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tu(),r===s){e=oo(t,e,n);break e}_r(t,e,r,n)}e=e.child}return e;case 5:return gI(e),t===null&&Uw(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,Ow(r,s)?a=null:o!==null&&Ow(r,o)&&(e.flags|=32),$I(t,e),_r(t,e,a,n),e.child;case 6:return t===null&&Uw(e),null;case 13:return zI(t,e,n);case 4:return tb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nu(e,null,r,n):_r(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),XS(t,e,r,s,n);case 7:return _r(t,e,e.pendingProps,n),e.child;case 8:return _r(t,e,e.pendingProps.children,n),e.child;case 12:return _r(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,$t(Gp,r._currentValue),r._currentValue=a,o!==null)if(zs(o.value,a)){if(o.children===s.children&&!$r.current){e=oo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Xi(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),$w(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(he(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),$w(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}_r(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rc(e,n),s=bs(s),r=r(s),e.flags|=1,_r(t,e,r,n),e.child;case 14:return r=e.type,s=As(r,e.pendingProps),s=As(r.type,s),ZS(t,e,r,s,n);case 15:return VI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),up(t,e),e.tag=1,Br(r)?(t=!0,Hp(e)):t=!1,Rc(e,n),MI(e,r,s),zw(e,r,s,n),Ww(null,e,r,!0,t,n);case 19:return qI(t,e,n);case 22:return UI(t,e,n)}throw Error(he(156,e.tag))};function oR(t,e){return PA(t,e)}function B5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(t,e,n,r){return new B5(t,e,n,r)}function gb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z5(t){if(typeof t=="function")return gb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O_)return 11;if(t===M_)return 14}return 2}function ia(t,e){var n=t.alternate;return n===null?(n=ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fp(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")gb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fc:return ll(n.children,s,o,e);case D_:a=8,s|=8;break;case fw:return t=ps(12,n,e,s|2),t.elementType=fw,t.lanes=o,t;case mw:return t=ps(13,n,e,s),t.elementType=mw,t.lanes=o,t;case pw:return t=ps(19,n,e,s),t.elementType=pw,t.lanes=o,t;case gA:return my(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mA:a=10;break e;case pA:a=9;break e;case O_:a=11;break e;case M_:a=14;break e;case Ro:a=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=ps(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function ll(t,e,n,r){return t=ps(7,t,r,e),t.lanes=n,t}function my(t,e,n,r){return t=ps(22,t,r,e),t.elementType=gA,t.lanes=n,t.stateNode={isHidden:!1},t}function xx(t,e,n){return t=ps(6,t,null,e),t.lanes=n,t}function wx(t,e,n){return e=ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ex(0),this.expirationTimes=ex(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ex(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yb(t,e,n,r,s,o,a,l,c){return t=new q5(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ps(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eb(o),t}function H5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aR(t){if(!t)return fa;t=t._reactInternals;e:{if(Ol(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(Br(n))return aI(t,n,e)}return e}function lR(t,e,n,r,s,o,a,l,c){return t=yb(n,r,!0,t,s,o,a,l,c),t.context=aR(null),n=t.current,r=jr(),s=sa(n),o=Xi(r,s),o.callback=e??null,na(n,o,s),t.current.lanes=s,ff(t,s,r),zr(t,r),t}function py(t,e,n,r){var s=e.current,o=jr(),a=sa(s);return n=aR(n),e.context===null?e.context=n:e.pendingContext=n,e=Xi(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=na(s,e,a),t!==null&&(Us(t,s,a,o),ap(t,s,a)),a}function sg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vb(t,e){u1(t,e),(t=t.alternate)&&u1(t,e)}function W5(){return null}var cR=typeof reportError=="function"?reportError:function(t){console.error(t)};function xb(t){this._internalRoot=t}gy.prototype.render=xb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));py(t,e,null,null)};gy.prototype.unmount=xb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gl(function(){py(null,t,null,null)}),e[so]=null}};function gy(t){this._internalRoot=t}gy.prototype.unstable_scheduleHydration=function(t){if(t){var e=UA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Do.length&&e!==0&&e<Do[n].priority;n++);Do.splice(n,0,t),n===0&&BA(t)}};function wb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function d1(){}function K5(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=sg(a);o.call(u)}}var a=lR(e,r,t,0,null,!1,!1,"",d1);return t._reactRootContainer=a,t[so]=a.current,ph(t.nodeType===8?t.parentNode:t),gl(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=sg(c);l.call(u)}}var c=yb(t,0,!1,null,null,!1,!1,"",d1);return t._reactRootContainer=c,t[so]=c.current,ph(t.nodeType===8?t.parentNode:t),gl(function(){py(e,c,n,r)}),c}function vy(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=sg(a);l.call(c)}}py(e,a,t,s)}else a=K5(n,e,t,s,r);return sg(a)}FA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kd(e.pendingLanes);n!==0&&(V_(e,n|1),zr(e,xn()),!(yt&6)&&(iu=xn()+500,Da()))}break;case 13:gl(function(){var r=io(t,1);if(r!==null){var s=jr();Us(r,t,1,s)}}),vb(t,1)}};U_=function(t){if(t.tag===13){var e=io(t,134217728);if(e!==null){var n=jr();Us(e,t,134217728,n)}vb(t,134217728)}};VA=function(t){if(t.tag===13){var e=sa(t),n=io(t,e);if(n!==null){var r=jr();Us(n,t,e,r)}vb(t,e)}};UA=function(){return It};$A=function(t,e){var n=It;try{return It=t,e()}finally{It=n}};Nw=function(t,e,n){switch(e){case"input":if(vw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ly(r);if(!s)throw Error(he(90));vA(r),vw(r,s)}}}break;case"textarea":wA(t,n);break;case"select":e=n.value,e!=null&&Cc(t,!!n.multiple,e,!1)}};TA=fb;CA=gl;var G5={usingClientEntryPoint:!1,Events:[pf,yc,ly,NA,SA,fb]},vd={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q5={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IA(t),t===null?null:t.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||W5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{sy=Pm.inject(Q5),mi=Pm}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G5;ls.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wb(e))throw Error(he(200));return H5(t,e,null,n)};ls.createRoot=function(t,e){if(!wb(t))throw Error(he(299));var n=!1,r="",s=cR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yb(t,1,!1,null,null,n,!1,r,s),t[so]=e.current,ph(t.nodeType===8?t.parentNode:t),new xb(e)};ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=IA(e),t=t===null?null:t.stateNode,t};ls.flushSync=function(t){return gl(t)};ls.hydrate=function(t,e,n){if(!yy(e))throw Error(he(200));return vy(null,t,e,!0,n)};ls.hydrateRoot=function(t,e,n){if(!wb(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=cR;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=lR(e,null,t,1,n??null,s,!1,o,a),t[so]=e.current,ph(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gy(e)};ls.render=function(t,e,n){if(!yy(e))throw Error(he(200));return vy(null,t,e,!1,n)};ls.unmountComponentAtNode=function(t){if(!yy(t))throw Error(he(40));return t._reactRootContainer?(gl(function(){vy(null,null,t,!1,function(){t._reactRootContainer=null,t[so]=null})}),!0):!1};ls.unstable_batchedUpdates=fb;ls.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yy(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return vy(t,e,n,!1,r)};ls.version="18.3.1-next-f1338f8080-20240426";function uR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uR)}catch(t){console.error(t)}}uR(),uA.exports=ls;var Ml=uA.exports;const dR=Xk(Ml);var h1=Ml;dw.createRoot=h1.createRoot,dw.hydrateRoot=h1.hydrateRoot;class Y5 extends p.Component{constructor(){super(...arguments);pm(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),i.jsx("p",{className:"text-gray-600 mb-4",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Reload Page"})]})}):this.props.children}}const X5=1,Z5=1e6;let _x=0;function J5(){return _x=(_x+1)%Number.MAX_SAFE_INTEGER,_x.toString()}const bx=new Map,f1=t=>{if(bx.has(t))return;const e=setTimeout(()=>{bx.delete(t),Yd({type:"REMOVE_TOAST",toastId:t})},Z5);bx.set(t,e)},e3=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,X5)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?f1(n):t.toasts.forEach(r=>{f1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},mp=[];let pp={toasts:[]};function Yd(t){pp=e3(pp,t),mp.forEach(e=>{e(pp)})}function t3({...t}){const e=J5(),n=s=>Yd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Yd({type:"DISMISS_TOAST",toastId:e});return Yd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Yt(){const[t,e]=p.useState(pp);return p.useEffect(()=>(mp.push(e),()=>{const n=mp.indexOf(e);n>-1&&mp.splice(n,1)}),[t]),{...t,toast:t3,dismiss:n=>Yd({type:"DISMISS_TOAST",toastId:n})}}function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function n3(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function xy(...t){return e=>t.forEach(n=>n3(n,e))}function dt(...t){return p.useCallback(xy(...t),t)}function r3(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:m,children:g,...y}=f,v=(m==null?void 0:m[t][c])||l,x=p.useMemo(()=>y,Object.values(y));return i.jsx(v.Provider,{value:x,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,y=p.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,s3(s,...e)]}function s3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var ao=p.forwardRef((t,e)=>{const{children:n,...r}=t,s=p.Children.toArray(n),o=s.find(i3);if(o){const a=o.props.children,l=s.map(c=>c===o?p.Children.count(a)>1?p.Children.only(null):p.isValidElement(a)?a.props.children:null:c);return i.jsx(s0,{...r,ref:e,children:p.isValidElement(a)?p.cloneElement(a,void 0,l):null})}return i.jsx(s0,{...r,ref:e,children:n})});ao.displayName="Slot";var s0=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const s=a3(n);return p.cloneElement(n,{...o3(r,n.props),ref:e?xy(e,s):s})}return p.Children.count(n)>1?p.Children.only(null):null});s0.displayName="SlotClone";var _b=({children:t})=>i.jsx(i.Fragment,{children:t});function i3(t){return p.isValidElement(t)&&t.type===_b}function o3(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function a3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function wy(t){const e=t+"CollectionProvider",[n,r]=r3(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:y,children:v}=g,x=se.useRef(null),b=se.useRef(new Map).current;return i.jsx(s,{scope:y,itemMap:b,collectionRef:x,children:v})};a.displayName=e;const l=t+"CollectionSlot",c=se.forwardRef((g,y)=>{const{scope:v,children:x}=g,b=o(l,v),w=dt(y,b.collectionRef);return i.jsx(ao,{ref:w,children:x})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=se.forwardRef((g,y)=>{const{scope:v,children:x,...b}=g,w=se.useRef(null),E=dt(y,w),C=o(u,v);return se.useEffect(()=>(C.itemMap.set(w,{ref:w,...b}),()=>void C.itemMap.delete(w))),i.jsx(ao,{[d]:"",ref:E,children:x})});f.displayName=u;function m(g){const y=o(t+"CollectionConsumer",g);return se.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((C,R)=>b.indexOf(C.ref.current)-b.indexOf(R.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},m,r]}function l3(t,e){const n=p.createContext(e),r=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(o){const a=p.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function js(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];const u=f=>{var b;const{scope:m,children:g,...y}=f,v=((b=m==null?void 0:m[t])==null?void 0:b[c])||l,x=p.useMemo(()=>y,Object.values(y));return i.jsx(v.Provider,{value:x,children:g})};u.displayName=o+"Provider";function d(f,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,y=p.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,c3(s,...e)]}function c3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var u3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=u3.reduce((t,e)=>{const n=p.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?ao:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...a,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function bb(t,e){t&&Ml.flushSync(()=>t.dispatchEvent(e))}function Kn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function d3(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var h3="DismissableLayer",i0="dismissableLayer.update",f3="dismissableLayer.pointerDownOutside",m3="dismissableLayer.focusOutside",m1,hR=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Iu=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=p.useContext(hR),[d,f]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),y=dt(e,A=>f(A)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(x),w=d?v.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=w>=b,R=g3(A=>{const j=A.target,S=[...u.branches].some(k=>k.contains(j));!C||S||(s==null||s(A),a==null||a(A),A.defaultPrevented||l==null||l())},m),L=y3(A=>{const j=A.target;[...u.branches].some(k=>k.contains(j))||(o==null||o(A),a==null||a(A),A.defaultPrevented||l==null||l())},m);return d3(A=>{w===u.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(m1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),p1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=m1)}},[d,m,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),p1())},[d,u]),p.useEffect(()=>{const A=()=>g({});return document.addEventListener(i0,A),()=>document.removeEventListener(i0,A)},[]),i.jsx(Ve.div,{...c,ref:y,style:{pointerEvents:E?C?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,L.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,R.onPointerDownCapture)})});Iu.displayName=h3;var p3="DismissableLayerBranch",fR=p.forwardRef((t,e)=>{const n=p.useContext(hR),r=p.useRef(null),s=dt(e,r);return p.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Ve.div,{...t,ref:s})});fR.displayName=p3;function g3(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){mR(f3,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function y3(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!r.current&&mR(m3,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function p1(){const t=new CustomEvent(i0);document.dispatchEvent(t)}function mR(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bb(s,o):s.dispatchEvent(o)}var v3=Iu,x3=fR,Fn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},w3="Portal",yf=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,o]=p.useState(!1);Fn(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?dR.createPortal(i.jsx(Ve.div,{...r,ref:e}),a):null});yf.displayName=w3;function _3(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Ns=t=>{const{present:e,children:n}=t,r=b3(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),o=dt(r.ref,E3(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:o}):null};Ns.displayName="Presence";function b3(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),o=p.useRef("none"),a=t?"mounted":"unmounted",[l,c]=_3(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Dm(r.current);o.current=l==="mounted"?u:"none"},[l]),Fn(()=>{const u=r.current,d=s.current;if(d!==t){const m=o.current,g=Dm(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Fn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=g=>{const v=Dm(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=g=>{g.target===e&&(o.current=Dm(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Dm(t){return(t==null?void 0:t.animationName)||"none"}function E3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function bi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=j3({defaultProp:e,onChange:n}),o=t!==void 0,a=o?t:r,l=Kn(n),c=p.useCallback(u=>{if(o){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[o,t,s,l]);return[a,c]}function j3({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),o=Kn(e);return p.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var N3="VisuallyHidden",vf=p.forwardRef((t,e)=>i.jsx(Ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));vf.displayName=N3;var S3=vf,Eb="ToastProvider",[jb,T3,C3]=wy("Toast"),[pR,gle]=js("Toast",[C3]),[k3,_y]=pR(Eb),gR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=t,[l,c]=p.useState(null),[u,d]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Eb}\`. Expected non-empty \`string\`.`),i.jsx(jb.Provider,{scope:e,children:i.jsx(k3,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(g=>g+1),[]),onToastRemove:p.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};gR.displayName=Eb;var yR="ToastViewport",A3=["F8"],o0="toast.viewportPause",a0="toast.viewportResume",vR=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=A3,label:s="Notifications ({hotkey})",...o}=t,a=_y(yR,n),l=T3(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),f=p.useRef(null),m=dt(e,f,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;p.useEffect(()=>{const x=b=>{var E;r.length!==0&&r.every(C=>b[C]||b.code===C)&&((E=f.current)==null||E.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,b=f.current;if(y&&x&&b){const w=()=>{if(!a.isClosePausedRef.current){const L=new CustomEvent(o0);b.dispatchEvent(L),a.isClosePausedRef.current=!0}},E=()=>{if(a.isClosePausedRef.current){const L=new CustomEvent(a0);b.dispatchEvent(L),a.isClosePausedRef.current=!1}},C=L=>{!x.contains(L.relatedTarget)&&E()},R=()=>{x.contains(document.activeElement)||E()};return x.addEventListener("focusin",w),x.addEventListener("focusout",C),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",R),window.addEventListener("blur",w),window.addEventListener("focus",E),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",R),window.removeEventListener("blur",w),window.removeEventListener("focus",E)}}},[y,a.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const w=l().map(E=>{const C=E.ref.current,R=[C,...z3(C)];return x==="forwards"?R:R.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const x=f.current;if(x){const b=w=>{var R,L,A;const E=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!E){const j=document.activeElement,S=w.shiftKey;if(w.target===x&&S){(R=u.current)==null||R.focus();return}const I=v({tabbingDirection:S?"backwards":"forwards"}),N=I.findIndex($=>$===j);Ex(I.slice(N+1))?w.preventDefault():S?(L=u.current)==null||L.focus():(A=d.current)==null||A.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[l,v]),i.jsxs(x3,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&i.jsx(l0,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});Ex(x)}}),i.jsx(jb.Slot,{scope:n,children:i.jsx(Ve.ol,{tabIndex:-1,...o,ref:m})}),y&&i.jsx(l0,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});Ex(x)}})]})});vR.displayName=yR;var xR="ToastFocusProxy",l0=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=_y(xR,n);return i.jsx(vf,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});l0.displayName=xR;var by="Toast",I3="toast.swipeStart",R3="toast.swipeMove",P3="toast.swipeCancel",D3="toast.swipeEnd",wR=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=t,[l=!0,c]=bi({prop:r,defaultProp:s,onChange:o});return i.jsx(Ns,{present:n||l,children:i.jsx(L3,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Kn(t.onPause),onResume:Kn(t.onResume),onSwipeStart:ve(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ve(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});wR.displayName=by;var[O3,M3]=pR(by,{onClose(){}}),L3=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...y}=t,v=_y(by,n),[x,b]=p.useState(null),w=dt(e,$=>b($)),E=p.useRef(null),C=p.useRef(null),R=s||v.duration,L=p.useRef(0),A=p.useRef(R),j=p.useRef(0),{onToastAdd:S,onToastRemove:k}=v,O=Kn(()=>{var U;(x==null?void 0:x.contains(document.activeElement))&&((U=v.viewport)==null||U.focus()),a()}),I=p.useCallback($=>{!$||$===1/0||(window.clearTimeout(j.current),L.current=new Date().getTime(),j.current=window.setTimeout(O,$))},[O]);p.useEffect(()=>{const $=v.viewport;if($){const U=()=>{I(A.current),u==null||u()},V=()=>{const z=new Date().getTime()-L.current;A.current=A.current-z,window.clearTimeout(j.current),c==null||c()};return $.addEventListener(o0,V),$.addEventListener(a0,U),()=>{$.removeEventListener(o0,V),$.removeEventListener(a0,U)}}},[v.viewport,R,c,u,I]),p.useEffect(()=>{o&&!v.isClosePausedRef.current&&I(R)},[o,R,v.isClosePausedRef,I]),p.useEffect(()=>(S(),()=>k()),[S,k]);const N=p.useMemo(()=>x?TR(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[N&&i.jsx(F3,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),i.jsx(O3,{scope:n,onClose:O,children:Ml.createPortal(i.jsx(jb.ItemSlot,{scope:n,children:i.jsx(v3,{asChild:!0,onEscapeKeyDown:ve(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||O(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ve(t.onPointerDown,$=>{$.button===0&&(E.current={x:$.clientX,y:$.clientY})}),onPointerMove:ve(t.onPointerMove,$=>{if(!E.current)return;const U=$.clientX-E.current.x,V=$.clientY-E.current.y,z=!!C.current,F=["left","right"].includes(v.swipeDirection),H=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,Y=F?H(0,U):0,q=F?0:H(0,V),W=$.pointerType==="touch"?10:2,re={x:Y,y:q},je={originalEvent:$,delta:re};z?(C.current=re,Om(R3,f,je,{discrete:!1})):g1(re,v.swipeDirection,W)?(C.current=re,Om(I3,d,je,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(U)>W||Math.abs(V)>W)&&(E.current=null)}),onPointerUp:ve(t.onPointerUp,$=>{const U=C.current,V=$.target;if(V.hasPointerCapture($.pointerId)&&V.releasePointerCapture($.pointerId),C.current=null,E.current=null,U){const z=$.currentTarget,F={originalEvent:$,delta:U};g1(U,v.swipeDirection,v.swipeThreshold)?Om(D3,g,F,{discrete:!0}):Om(P3,m,F,{discrete:!0}),z.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),F3=t=>{const{__scopeToast:e,children:n,...r}=t,s=_y(by,e),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return $3(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(yf,{asChild:!0,children:i.jsx(vf,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},V3="ToastTitle",_R=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Ve.div,{...r,ref:e})});_R.displayName=V3;var U3="ToastDescription",bR=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Ve.div,{...r,ref:e})});bR.displayName=U3;var ER="ToastAction",jR=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(SR,{altText:n,asChild:!0,children:i.jsx(Nb,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ER}\`. Expected non-empty \`string\`.`),null)});jR.displayName=ER;var NR="ToastClose",Nb=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=M3(NR,n);return i.jsx(SR,{asChild:!0,children:i.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ve(t.onClick,s.onClose)})})});Nb.displayName=NR;var SR=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function TR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),B3(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...TR(r))}}),e}function Om(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bb(s,o):s.dispatchEvent(o)}var g1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function $3(t=()=>{}){const e=Kn(t);Fn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function B3(t){return t.nodeType===t.ELEMENT_NODE}function z3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ex(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var q3=gR,CR=vR,kR=wR,AR=_R,IR=bR,RR=jR,PR=Nb;function DR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=DR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function OR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=DR(t))&&(r&&(r+=" "),r+=e);return r}const y1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,v1=OR,Ru=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return v1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const m=y1(d)||y1(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:m,...g}=d;return Object.entries(g).every(y=>{let[v,x]=y;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...u,f,m]:u},[]);return v1(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>p.createElement("svg",{ref:c,...W3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:MR("lucide",s),...l},[...a.map(([u,d])=>p.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(t,e)=>{const n=p.forwardRef(({className:r,...s},o)=>p.createElement(K3,{ref:o,iconNode:e,className:MR(`lucide-${H3(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=be("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=be("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=be("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=be("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=be("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=be("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=be("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=be("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=be("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=be("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=be("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=be("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=be("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=be("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=be("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=be("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=be("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=be("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=be("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=be("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=be("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=be("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=be("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=be("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=be("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=be("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=be("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=be("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=be("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Db="-",T6=t=>{const e=k6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Db);return l[0]===""&&l.length!==1&&l.shift(),qR(l,e)||C6(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},qR=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?qR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Db);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},S1=/^\[(.+)\]$/,C6=t=>{if(S1.test(t)){const e=S1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},k6=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return I6(Object.entries(t.classGroups),n).forEach(([o,a])=>{u0(a,r,o,e)}),r},u0=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:T1(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(A6(s)){u0(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{u0(a,T1(e,o),n,r)})})},T1=(t,e)=>{let n=t;return e.split(Db).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},A6=t=>t.isThemeGetter,I6=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[n,s]}):t,R6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},HR="!",P6=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let x=0;x<l.length;x++){let b=l[x];if(u===0){if(b===s&&(r||l.slice(x,x+o)===e)){c.push(l.slice(d,x)),d=x+o;continue}if(b==="/"){f=x;continue}}b==="["?u++:b==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(HR),y=g?m.substring(1):m,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},D6=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},O6=t=>({cache:R6(t.cacheSize),parseClassName:P6(t),...T6(t)}),M6=/\s+/,L6=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],a=t.trim().split(M6);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let y=!!g,v=r(y?m.substring(0,g):m);if(!v){if(!y){l=u+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=u+(l.length>0?" "+l:l);continue}y=!1}const x=D6(d).join(":"),b=f?x+HR:x,w=b+v;if(o.includes(w))continue;o.push(w);const E=s(v,y);for(let C=0;C<E.length;++C){const R=E[C];o.push(b+R)}l=u+(l.length>0?" "+l:l)}return l};function F6(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=WR(e))&&(r&&(r+=" "),r+=n);return r}const WR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=WR(t[r]))&&(n&&(n+=" "),n+=e);return n};function V6(t,...e){let n,r,s,o=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return n=O6(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=L6(c,n);return s(c,d),d}return function(){return o(F6.apply(null,arguments))}}const zt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},KR=/^\[(?:([a-z-]+):)?(.+)\]$/i,U6=/^\d+\/\d+$/,$6=new Set(["px","full","screen"]),B6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,W6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mi=t=>Dc(t)||$6.has(t)||U6.test(t),So=t=>Pu(t,"length",eB),Dc=t=>!!t&&!Number.isNaN(Number(t)),Sx=t=>Pu(t,"number",Dc),xd=t=>!!t&&Number.isInteger(Number(t)),K6=t=>t.endsWith("%")&&Dc(t.slice(0,-1)),nt=t=>KR.test(t),To=t=>B6.test(t),G6=new Set(["length","size","percentage"]),Q6=t=>Pu(t,G6,GR),Y6=t=>Pu(t,"position",GR),X6=new Set(["image","url"]),Z6=t=>Pu(t,X6,nB),J6=t=>Pu(t,"",tB),wd=()=>!0,Pu=(t,e,n)=>{const r=KR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},eB=t=>z6.test(t)&&!q6.test(t),GR=()=>!1,tB=t=>H6.test(t),nB=t=>W6.test(t),rB=()=>{const t=zt("colors"),e=zt("spacing"),n=zt("blur"),r=zt("brightness"),s=zt("borderColor"),o=zt("borderRadius"),a=zt("borderSpacing"),l=zt("borderWidth"),c=zt("contrast"),u=zt("grayscale"),d=zt("hueRotate"),f=zt("invert"),m=zt("gap"),g=zt("gradientColorStops"),y=zt("gradientColorStopPositions"),v=zt("inset"),x=zt("margin"),b=zt("opacity"),w=zt("padding"),E=zt("saturate"),C=zt("scale"),R=zt("sepia"),L=zt("skew"),A=zt("space"),j=zt("translate"),S=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",nt,e],I=()=>[nt,e],N=()=>["",Mi,So],$=()=>["auto",Dc,nt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",nt],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Dc,nt];return{cacheSize:500,separator:":",theme:{colors:[wd],spacing:[Mi,So],blur:["none","",To,nt],brightness:q(),borderColor:[t],borderRadius:["none","","full",To,nt],borderSpacing:I(),borderWidth:N(),contrast:q(),grayscale:H(),hueRotate:q(),invert:H(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[K6,So],inset:O(),margin:O(),opacity:q(),padding:I(),saturate:q(),scale:q(),sepia:H(),skew:q(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[To]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),nt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xd,nt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",xd,nt]}],"grid-cols":[{"grid-cols":[wd]}],"col-start-end":[{col:["auto",{span:["full",xd,nt]},nt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[wd]}],"row-start-end":[{row:["auto",{span:[xd,nt]},nt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[To]},To]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",To,So]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sx]}],"font-family":[{font:[wd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",Dc,Sx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Mi,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Mi,So]}],"underline-offset":[{"underline-offset":["auto",Mi,nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),Y6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Q6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Z6]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Mi,nt]}],"outline-w":[{outline:[Mi,So]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Mi,So]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",To,J6]}],"shadow-color":[{shadow:[wd]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",To,nt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[xd,nt]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Mi,So,Sx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sB=V6(rB);function me(...t){return sB(OR(t))}function C1(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0;r<t;r++){const s=Math.floor(Math.random()*e.length);n+=e.charAt(s)}return n}const iB=q3,QR=p.forwardRef(({className:t,...e},n)=>i.jsx(CR,{ref:n,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));QR.displayName=CR.displayName;const oB=Ru("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),YR=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(kR,{ref:r,className:me(oB({variant:e}),t),...n}));YR.displayName=kR.displayName;const aB=p.forwardRef(({className:t,...e},n)=>i.jsx(RR,{ref:n,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));aB.displayName=RR.displayName;const XR=p.forwardRef(({className:t,...e},n)=>i.jsx(PR,{ref:n,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Ll,{className:"h-4 w-4"})}));XR.displayName=PR.displayName;const ZR=p.forwardRef(({className:t,...e},n)=>i.jsx(AR,{ref:n,className:me("text-sm font-semibold",t),...e}));ZR.displayName=AR.displayName;const JR=p.forwardRef(({className:t,...e},n)=>i.jsx(IR,{ref:n,className:me("text-sm opacity-90",t),...e}));JR.displayName=IR.displayName;function eP(){const{toasts:t}=Yt();return i.jsxs(iB,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return i.jsxs(YR,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(ZR,{children:n}),r&&i.jsx(JR,{children:r})]}),s,i.jsx(XR,{})]},e)}),i.jsx(QR,{})]})}var k1=["light","dark"],lB="(prefers-color-scheme: dark)",cB=p.createContext(void 0),uB={setTheme:t=>{},themes:[]},dB=()=>{var t;return(t=p.useContext(cB))!=null?t:uB};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:a,attrs:l,nonce:c})=>{let u=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?k1.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,v=!1,x=!0)=>{let b=a?a[y]:y,w=v?y+"|| ''":`'${b}'`,E="";return s&&x&&!v&&k1.includes(y)&&(E+=`d.style.colorScheme = '${y}';`),n==="class"?v||b?E+=`c.add(${w})`:E+="null":b&&(E+=`d[s](n,${w})`),E},g=t?`!function(){${d}${m(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${lB}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var hB=t=>{switch(t){case"success":return pB;case"info":return yB;case"warning":return gB;case"error":return vB;default:return null}},fB=Array(12).fill(0),mB=({visible:t})=>se.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},se.createElement("div",{className:"sonner-spinner"},fB.map((e,n)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),pB=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gB=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yB=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vB=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xB=()=>{let[t,e]=se.useState(document.hidden);return se.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},d0=1,wB=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:d0++,o=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0;return r.then(async o=>{if(bB(o)&&!o.ok){s=!1;let a=typeof e.error=="function"?await e.error(`HTTP error! status: ${o.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${o.status}`):e.description;this.create({id:n,type:"error",message:a,description:l})}else if(e.success!==void 0){s=!1;let a=typeof e.success=="function"?await e.success(o):e.success,l=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"success",message:a,description:l})}}).catch(async o=>{if(e.error!==void 0){s=!1;let a=typeof e.error=="function"?await e.error(o):e.error,l=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"error",message:a,description:l})}}).finally(()=>{var o;s&&(this.dismiss(n),n=void 0),(o=e.finally)==null||o.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||d0++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Gr=new wB,_B=(t,e)=>{let n=(e==null?void 0:e.id)||d0++;return Gr.addToast({title:t,...e,id:n}),n},bB=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",EB=_B,jB=()=>Gr.toasts;Object.assign(EB,{success:Gr.success,info:Gr.info,warning:Gr.warning,error:Gr.error,custom:Gr.custom,message:Gr.message,promise:Gr.promise,dismiss:Gr.dismiss,loading:Gr.loading},{getHistory:jB});function NB(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}NB(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Mm(t){return t.label!==void 0}var SB=3,TB="32px",CB=4e3,kB=356,AB=14,IB=20,RB=200;function PB(...t){return t.filter(Boolean).join(" ")}var DB=t=>{var e,n,r,s,o,a,l,c,u,d;let{invert:f,toast:m,unstyled:g,interacting:y,setHeights:v,visibleToasts:x,heights:b,index:w,toasts:E,expanded:C,removeToast:R,defaultRichColors:L,closeButton:A,style:j,cancelButtonStyle:S,actionButtonStyle:k,className:O="",descriptionClassName:I="",duration:N,position:$,gap:U,loadingIcon:V,expandByDefault:z,classNames:F,icons:H,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:q,cn:W}=t,[re,je]=se.useState(!1),[Re,Pe]=se.useState(!1),[xe,Q]=se.useState(!1),[ce,P]=se.useState(!1),[Z,J]=se.useState(0),[we,mt]=se.useState(0),gr=se.useRef(null),kn=se.useRef(null),Hr=w===0,M=w+1<=x,B=m.type,X=m.dismissible!==!1,de=m.className||"",pe=m.descriptionClassName||"",le=se.useMemo(()=>b.findIndex(Ge=>Ge.toastId===m.id)||0,[b,m.id]),ke=se.useMemo(()=>{var Ge;return(Ge=m.closeButton)!=null?Ge:A},[m.closeButton,A]),$e=se.useMemo(()=>m.duration||N||CB,[m.duration,N]),tt=se.useRef(0),Ye=se.useRef(0),yr=se.useRef(0),Ss=se.useRef(null),[Ri,za]=$.split("-"),ei=se.useMemo(()=>b.reduce((Ge,Rt,St)=>St>=le?Ge:Ge+Rt.height,0),[b,le]),wo=xB(),Ql=m.invert||f,ti=B==="loading";Ye.current=se.useMemo(()=>le*U+ei,[le,ei]),se.useEffect(()=>{je(!0)},[]),se.useLayoutEffect(()=>{if(!re)return;let Ge=kn.current,Rt=Ge.style.height;Ge.style.height="auto";let St=Ge.getBoundingClientRect().height;Ge.style.height=Rt,mt(St),v(Yn=>Yn.find(Pr=>Pr.toastId===m.id)?Yn.map(Pr=>Pr.toastId===m.id?{...Pr,height:St}:Pr):[{toastId:m.id,height:St,position:m.position},...Yn])},[re,m.title,m.description,v,m.id]);let ni=se.useCallback(()=>{Pe(!0),J(Ye.current),v(Ge=>Ge.filter(Rt=>Rt.toastId!==m.id)),setTimeout(()=>{R(m)},RB)},[m,R,v,Ye]);se.useEffect(()=>{if(m.promise&&B==="loading"||m.duration===1/0||m.type==="loading")return;let Ge,Rt=$e;return C||y||q&&wo?(()=>{if(yr.current<tt.current){let St=new Date().getTime()-tt.current;Rt=Rt-St}yr.current=new Date().getTime()})():Rt!==1/0&&(tt.current=new Date().getTime(),Ge=setTimeout(()=>{var St;(St=m.onAutoClose)==null||St.call(m,m),ni()},Rt)),()=>clearTimeout(Ge)},[C,y,z,m,$e,ni,m.promise,B,q,wo]),se.useEffect(()=>{let Ge=kn.current;if(Ge){let Rt=Ge.getBoundingClientRect().height;return mt(Rt),v(St=>[{toastId:m.id,height:Rt,position:m.position},...St]),()=>v(St=>St.filter(Yn=>Yn.toastId!==m.id))}},[v,m.id]),se.useEffect(()=>{m.delete&&ni()},[ni,m.delete]);function Ov(){return H!=null&&H.loading?se.createElement("div",{className:"sonner-loader","data-visible":B==="loading"},H.loading):V?se.createElement("div",{className:"sonner-loader","data-visible":B==="loading"},V):se.createElement(mB,{visible:B==="loading"})}return se.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:kn,className:W(O,de,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[B],(n=m==null?void 0:m.classNames)==null?void 0:n[B]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:L,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":re,"data-promise":!!m.promise,"data-removed":Re,"data-visible":M,"data-y-position":Ri,"data-x-position":za,"data-index":w,"data-front":Hr,"data-swiping":xe,"data-dismissible":X,"data-type":B,"data-invert":Ql,"data-swipe-out":ce,"data-expanded":!!(C||z&&re),style:{"--index":w,"--toasts-before":w,"--z-index":E.length-w,"--offset":`${Re?Z:Ye.current}px`,"--initial-height":z?"auto":`${we}px`,...j,...m.style},onPointerDown:Ge=>{ti||!X||(gr.current=new Date,J(Ye.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Q(!0),Ss.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Rt,St,Yn;if(ce||!X)return;Ss.current=null;let Pr=Number(((Ge=kn.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount").replace("px",""))||0),_o=new Date().getTime()-((Rt=gr.current)==null?void 0:Rt.getTime()),Pi=Math.abs(Pr)/_o;if(Math.abs(Pr)>=IB||Pi>.11){J(Ye.current),(St=m.onDismiss)==null||St.call(m,m),ni(),P(!0);return}(Yn=kn.current)==null||Yn.style.setProperty("--swipe-amount","0px"),Q(!1)},onPointerMove:Ge=>{var Rt;if(!Ss.current||!X)return;let St=Ge.clientY-Ss.current.y,Yn=Ge.clientX-Ss.current.x,Pr=(Ri==="top"?Math.min:Math.max)(0,St),_o=Ge.pointerType==="touch"?10:2;Math.abs(Pr)>_o?(Rt=kn.current)==null||Rt.style.setProperty("--swipe-amount",`${St}px`):Math.abs(Yn)>_o&&(Ss.current=null)}},ke&&!m.jsx?se.createElement("button",{"aria-label":Y,"data-disabled":ti,"data-close-button":!0,onClick:ti||!X?()=>{}:()=>{var Ge;ni(),(Ge=m.onDismiss)==null||Ge.call(m,m)},className:W(F==null?void 0:F.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||se.isValidElement(m.title)?m.jsx||m.title:se.createElement(se.Fragment,null,B||m.icon||m.promise?se.createElement("div",{"data-icon":"",className:W(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ov():null,m.type!=="loading"?m.icon||(H==null?void 0:H[B])||hB(B):null):null,se.createElement("div",{"data-content":"",className:W(F==null?void 0:F.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},se.createElement("div",{"data-title":"",className:W(F==null?void 0:F.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?se.createElement("div",{"data-description":"",className:W(I,pe,F==null?void 0:F.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),se.isValidElement(m.cancel)?m.cancel:m.cancel&&Mm(m.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:Ge=>{var Rt,St;Mm(m.cancel)&&X&&((St=(Rt=m.cancel).onClick)==null||St.call(Rt,Ge),ni())},className:W(F==null?void 0:F.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,se.isValidElement(m.action)?m.action:m.action&&Mm(m.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:Ge=>{var Rt,St;Mm(m.action)&&(Ge.defaultPrevented||((St=(Rt=m.action).onClick)==null||St.call(Rt,Ge),ni()))},className:W(F==null?void 0:F.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function A1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var OB=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:m=SB,toastOptions:g,dir:y=A1(),gap:v=AB,loadingIcon:x,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:E,cn:C=PB}=t,[R,L]=se.useState([]),A=se.useMemo(()=>Array.from(new Set([n].concat(R.filter(q=>q.position).map(q=>q.position)))),[R,n]),[j,S]=se.useState([]),[k,O]=se.useState(!1),[I,N]=se.useState(!1),[$,U]=se.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=se.useRef(null),z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=se.useRef(null),H=se.useRef(!1),Y=se.useCallback(q=>{var W;(W=R.find(re=>re.id===q.id))!=null&&W.delete||Gr.dismiss(q.id),L(re=>re.filter(({id:je})=>je!==q.id))},[R]);return se.useEffect(()=>Gr.subscribe(q=>{if(q.dismiss){L(W=>W.map(re=>re.id===q.id?{...re,delete:!0}:re));return}setTimeout(()=>{dR.flushSync(()=>{L(W=>{let re=W.findIndex(je=>je.id===q.id);return re!==-1?[...W.slice(0,re),{...W[re],...q},...W.slice(re+1)]:[q,...W]})})})}),[]),se.useEffect(()=>{if(c!=="system"){U(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:q})=>{U(q?"dark":"light")})},[c]),se.useEffect(()=>{R.length<=1&&O(!1)},[R]),se.useEffect(()=>{let q=W=>{var re,je;r.every(Re=>W[Re]||W.code===Re)&&(O(!0),(re=V.current)==null||re.focus()),W.code==="Escape"&&(document.activeElement===V.current||(je=V.current)!=null&&je.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[r]),se.useEffect(()=>{if(V.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,H.current=!1)}},[V.current]),R.length?se.createElement("section",{"aria-label":`${w} ${z}`,tabIndex:-1},A.map((q,W)=>{var re;let[je,Re]=q.split("-");return se.createElement("ol",{key:q,dir:y==="auto"?A1():y,tabIndex:-1,ref:V,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":je,"data-x-position":Re,style:{"--front-toast-height":`${((re=j[0])==null?void 0:re.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||TB,"--width":`${kB}px`,"--gap":`${v}px`,...f},onBlur:Pe=>{H.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(H.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||H.current||(H.current=!0,F.current=Pe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{I||O(!1)},onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},R.filter(Pe=>!Pe.position&&W===0||Pe.position===q).map((Pe,xe)=>{var Q,ce;return se.createElement(DB,{key:Pe.id,icons:b,index:xe,toast:Pe,defaultRichColors:u,duration:(Q=g==null?void 0:g.duration)!=null?Q:d,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:m,closeButton:(ce=g==null?void 0:g.closeButton)!=null?ce:o,interacting:I,position:q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Y,toasts:R.filter(P=>P.position==Pe.position),heights:j.filter(P=>P.position==Pe.position),setHeights:S,expandByDefault:s,gap:v,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:E,cn:C})}))})):null};const MB=({...t})=>{const{theme:e="system"}=dB();return i.jsx(OB,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var LB=lA.useId||(()=>{}),FB=0;function $s(t){const[e,n]=p.useState(LB());return Fn(()=>{n(r=>r??String(FB++))},[t]),e?`radix-${e}`:""}const VB=["top","right","bottom","left"],pa=Math.min,Yr=Math.max,og=Math.round,Lm=Math.floor,ga=t=>({x:t,y:t}),UB={left:"right",right:"left",bottom:"top",top:"bottom"},$B={start:"end",end:"start"};function h0(t,e,n){return Yr(t,pa(e,n))}function lo(t,e){return typeof t=="function"?t(e):t}function co(t){return t.split("-")[0]}function Du(t){return t.split("-")[1]}function Ob(t){return t==="x"?"y":"x"}function Mb(t){return t==="y"?"height":"width"}function ya(t){return["top","bottom"].includes(co(t))?"y":"x"}function Lb(t){return Ob(ya(t))}function BB(t,e,n){n===void 0&&(n=!1);const r=Du(t),s=Lb(t),o=Mb(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=ag(a)),[a,ag(a)]}function zB(t){const e=ag(t);return[f0(t),e,f0(e)]}function f0(t){return t.replace(/start|end/g,e=>$B[e])}function qB(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:a;default:return[]}}function HB(t,e,n,r){const s=Du(t);let o=qB(co(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(f0)))),o}function ag(t){return t.replace(/left|right|bottom|top/g,e=>UB[e])}function WB(t){return{top:0,right:0,bottom:0,left:0,...t}}function tP(t){return typeof t!="number"?WB(t):{top:t,right:t,bottom:t,left:t}}function lg(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function I1(t,e,n){let{reference:r,floating:s}=t;const o=ya(e),a=Lb(e),l=Mb(a),c=co(e),u=o==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Du(e)){case"start":g[a]-=m*(n&&u?-1:1);break;case"end":g[a]+=m*(n&&u?-1:1);break}return g}const KB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=I1(u,r,c),m=r,g={},y=0;for(let v=0;v<l.length;v++){const{name:x,fn:b}=l[v],{x:w,y:E,data:C,reset:R}=await b({x:d,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});d=w??d,f=E??f,g={...g,[x]:{...g[x],...C}},R&&y<=50&&(y++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(u=R.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:d,y:f}=I1(u,m,c)),v=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:g}};async function Th(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=lo(e,t),y=tP(g),x=l[m?f==="floating"?"reference":"floating":f],b=lg(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),C=await(o.isElement==null?void 0:o.isElement(E))?await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1}:{x:1,y:1},R=lg(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:E,strategy:c}):w);return{top:(b.top-R.top+y.top)/C.y,bottom:(R.bottom-b.bottom+y.bottom)/C.y,left:(b.left-R.left+y.left)/C.x,right:(R.right-b.right+y.right)/C.x}}const GB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=lo(t,e)||{};if(u==null)return{};const f=tP(d),m={x:n,y:r},g=Lb(s),y=Mb(g),v=await a.getDimensions(u),x=g==="y",b=x?"top":"left",w=x?"bottom":"right",E=x?"clientHeight":"clientWidth",C=o.reference[y]+o.reference[g]-m[g]-o.floating[y],R=m[g]-o.reference[g],L=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let A=L?L[E]:0;(!A||!await(a.isElement==null?void 0:a.isElement(L)))&&(A=l.floating[E]||o.floating[y]);const j=C/2-R/2,S=A/2-v[y]/2-1,k=pa(f[b],S),O=pa(f[w],S),I=k,N=A-v[y]-O,$=A/2-v[y]/2+j,U=h0(I,$,N),V=!c.arrow&&Du(s)!=null&&$!==U&&o.reference[y]/2-($<I?k:O)-v[y]/2<0,z=V?$<I?$-I:$-N:0;return{[g]:m[g]+z,data:{[g]:U,centerOffset:$-U-z,...V&&{alignmentOffset:z}},reset:V}}}),QB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...x}=lo(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const b=co(s),w=ya(l),E=co(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),R=m||(E||!v?[ag(l)]:zB(l)),L=y!=="none";!m&&L&&R.push(...HB(l,v,y,C));const A=[l,...R],j=await Th(e,x),S=[];let k=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&S.push(j[b]),f){const $=BB(s,a,C);S.push(j[$[0]],j[$[1]])}if(k=[...k,{placement:s,overflows:S}],!S.every($=>$<=0)){var O,I;const $=(((O=o.flip)==null?void 0:O.index)||0)+1,U=A[$];if(U)return{data:{index:$,overflows:k},reset:{placement:U}};let V=(I=k.filter(z=>z.overflows[0]<=0).sort((z,F)=>z.overflows[1]-F.overflows[1])[0])==null?void 0:I.placement;if(!V)switch(g){case"bestFit":{var N;const z=(N=k.filter(F=>{if(L){const H=ya(F.placement);return H===w||H==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(H=>H>0).reduce((H,Y)=>H+Y,0)]).sort((F,H)=>F[1]-H[1])[0])==null?void 0:N[0];z&&(V=z);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function R1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function P1(t){return VB.some(e=>t[e]>=0)}const YB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=lo(t,e);switch(r){case"referenceHidden":{const o=await Th(e,{...s,elementContext:"reference"}),a=R1(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:P1(a)}}}case"escaped":{const o=await Th(e,{...s,altBoundary:!0}),a=R1(o,n.floating);return{data:{escapedOffsets:a,escaped:P1(a)}}}default:return{}}}}};async function XB(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=co(n),l=Du(n),c=ya(n)==="y",u=["left","top"].includes(a)?-1:1,d=o&&c?-1:1,f=lo(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(g=l==="end"?y*-1:y),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const ZB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,c=await XB(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},JB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:b,y:w}=x;return{x:b,y:w}}},...c}=lo(t,e),u={x:n,y:r},d=await Th(e,c),f=ya(co(s)),m=Ob(f);let g=u[m],y=u[f];if(o){const x=m==="y"?"top":"left",b=m==="y"?"bottom":"right",w=g+d[x],E=g-d[b];g=h0(w,g,E)}if(a){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=y+d[x],E=y-d[b];y=h0(w,y,E)}const v=l.fn({...e,[m]:g,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:o,[f]:a}}}}}},e9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=lo(t,e),d={x:n,y:r},f=ya(s),m=Ob(f);let g=d[m],y=d[f];const v=lo(l,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const E=m==="y"?"height":"width",C=o.reference[m]-o.floating[E]+x.mainAxis,R=o.reference[m]+o.reference[E]-x.mainAxis;g<C?g=C:g>R&&(g=R)}if(u){var b,w;const E=m==="y"?"width":"height",C=["top","left"].includes(co(s)),R=o.reference[f]-o.floating[E]+(C&&((b=a.offset)==null?void 0:b[f])||0)+(C?0:x.crossAxis),L=o.reference[f]+o.reference[E]+(C?0:((w=a.offset)==null?void 0:w[f])||0)-(C?x.crossAxis:0);y<R?y=R:y>L&&(y=L)}return{[m]:g,[f]:y}}}},t9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:a,elements:l}=e,{apply:c=()=>{},...u}=lo(t,e),d=await Th(e,u),f=co(s),m=Du(s),g=ya(s)==="y",{width:y,height:v}=o.floating;let x,b;f==="top"||f==="bottom"?(x=f,b=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,x=m==="end"?"top":"bottom");const w=v-d.top-d.bottom,E=y-d.left-d.right,C=pa(v-d[x],w),R=pa(y-d[b],E),L=!e.middlewareData.shift;let A=C,j=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=w),L&&!m){const k=Yr(d.left,0),O=Yr(d.right,0),I=Yr(d.top,0),N=Yr(d.bottom,0);g?j=y-2*(k!==0||O!==0?k+O:Yr(d.left,d.right)):A=v-2*(I!==0||N!==0?I+N:Yr(d.top,d.bottom))}await c({...e,availableWidth:j,availableHeight:A});const S=await a.getDimensions(l.floating);return y!==S.width||v!==S.height?{reset:{rects:!0}}:{}}}};function Ny(){return typeof window<"u"}function Ou(t){return nP(t)?(t.nodeName||"").toLowerCase():"#document"}function ns(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ci(t){var e;return(e=(nP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nP(t){return Ny()?t instanceof Node||t instanceof ns(t).Node:!1}function qs(t){return Ny()?t instanceof Element||t instanceof ns(t).Element:!1}function Ei(t){return Ny()?t instanceof HTMLElement||t instanceof ns(t).HTMLElement:!1}function D1(t){return!Ny()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ns(t).ShadowRoot}function xf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Hs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function n9(t){return["table","td","th"].includes(Ou(t))}function Sy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Fb(t){const e=Vb(),n=qs(t)?Hs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function r9(t){let e=va(t);for(;Ei(e)&&!lu(e);){if(Fb(e))return e;if(Sy(e))return null;e=va(e)}return null}function Vb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lu(t){return["html","body","#document"].includes(Ou(t))}function Hs(t){return ns(t).getComputedStyle(t)}function Ty(t){return qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function va(t){if(Ou(t)==="html")return t;const e=t.assignedSlot||t.parentNode||D1(t)&&t.host||Ci(t);return D1(e)?e.host:e}function rP(t){const e=va(t);return lu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ei(e)&&xf(e)?e:rP(e)}function Ch(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=rP(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=ns(s);if(o){const l=m0(a);return e.concat(a,a.visualViewport||[],xf(s)?s:[],l&&n?Ch(l):[])}return e.concat(s,Ch(s,[],n))}function m0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sP(t){const e=Hs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ei(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=og(n)!==o||og(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Ub(t){return qs(t)?t:t.contextElement}function Oc(t){const e=Ub(t);if(!Ei(e))return ga(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=sP(e);let a=(o?og(n.width):n.width)/r,l=(o?og(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const s9=ga(0);function iP(t){const e=ns(t);return!Vb()||!e.visualViewport?s9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function i9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ns(t)?!1:e}function xl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Ub(t);let a=ga(1);e&&(r?qs(r)&&(a=Oc(r)):a=Oc(t));const l=i9(o,n,r)?iP(o):ga(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(o){const m=ns(o),g=r&&qs(r)?ns(r):r;let y=m,v=m0(y);for(;v&&r&&g!==y;){const x=Oc(v),b=v.getBoundingClientRect(),w=Hs(v),E=b.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,C=b.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,f*=x.y,c+=E,u+=C,y=ns(v),v=m0(y)}}return lg({width:d,height:f,x:c,y:u})}function o9(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=Ci(r),l=e?Sy(e.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=ga(1);const d=ga(0),f=Ei(r);if((f||!f&&!o)&&((Ou(r)!=="body"||xf(a))&&(c=Ty(r)),Ei(r))){const m=xl(r);u=Oc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function a9(t){return Array.from(t.getClientRects())}function p0(t,e){const n=Ty(t).scrollLeft;return e?e.left+n:xl(Ci(t)).left+n}function l9(t){const e=Ci(t),n=Ty(t),r=t.ownerDocument.body,s=Yr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Yr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+p0(t);const l=-n.scrollTop;return Hs(r).direction==="rtl"&&(a+=Yr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function c9(t,e){const n=ns(t),r=Ci(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=Vb();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function u9(t,e){const n=xl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=Ei(t)?Oc(t):ga(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function O1(t,e,n){let r;if(e==="viewport")r=c9(t,n);else if(e==="document")r=l9(Ci(t));else if(qs(e))r=u9(e,n);else{const s=iP(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return lg(r)}function oP(t,e){const n=va(t);return n===e||!qs(n)||lu(n)?!1:Hs(n).position==="fixed"||oP(n,e)}function d9(t,e){const n=e.get(t);if(n)return n;let r=Ch(t,[],!1).filter(l=>qs(l)&&Ou(l)!=="body"),s=null;const o=Hs(t).position==="fixed";let a=o?va(t):t;for(;qs(a)&&!lu(a);){const l=Hs(a),c=Fb(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xf(a)&&!c&&oP(t,a))?r=r.filter(d=>d!==a):s=l,a=va(a)}return e.set(t,r),r}function h9(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Sy(e)?[]:d9(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,d)=>{const f=O1(e,d,s);return u.top=Yr(f.top,u.top),u.right=pa(f.right,u.right),u.bottom=pa(f.bottom,u.bottom),u.left=Yr(f.left,u.left),u},O1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function f9(t){const{width:e,height:n}=sP(t);return{width:e,height:n}}function m9(t,e,n){const r=Ei(e),s=Ci(e),o=n==="fixed",a=xl(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=ga(0);if(r||!r&&!o)if((Ou(e)!=="body"||xf(s))&&(l=Ty(e)),r){const g=xl(e,!0,o,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=p0(s));let u=0,d=0;if(s&&!r&&!o){const g=s.getBoundingClientRect();d=g.top+l.scrollTop,u=g.left+l.scrollLeft-p0(s,g)}const f=a.left+l.scrollLeft-c.x-u,m=a.top+l.scrollTop-c.y-d;return{x:f,y:m,width:a.width,height:a.height}}function Tx(t){return Hs(t).position==="static"}function M1(t,e){if(!Ei(t)||Hs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ci(t)===n&&(n=n.ownerDocument.body),n}function aP(t,e){const n=ns(t);if(Sy(t))return n;if(!Ei(t)){let s=va(t);for(;s&&!lu(s);){if(qs(s)&&!Tx(s))return s;s=va(s)}return n}let r=M1(t,e);for(;r&&n9(r)&&Tx(r);)r=M1(r,e);return r&&lu(r)&&Tx(r)&&!Fb(r)?n:r||r9(t)||n}const p9=async function(t){const e=this.getOffsetParent||aP,n=this.getDimensions,r=await n(t.floating);return{reference:m9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function g9(t){return Hs(t).direction==="rtl"}const y9={convertOffsetParentRelativeRectToViewportRelativeRect:o9,getDocumentElement:Ci,getClippingRect:h9,getOffsetParent:aP,getElementRects:p9,getClientRects:a9,getDimensions:f9,getScale:Oc,isElement:qs,isRTL:g9};function v9(t,e){let n=null,r;const s=Ci(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const g=Lm(d),y=Lm(s.clientWidth-(u+f)),v=Lm(s.clientHeight-(d+m)),x=Lm(u),w={rootMargin:-g+"px "+-y+"px "+-v+"px "+-x+"px",threshold:Yr(0,pa(1,c))||1};let E=!0;function C(R){const L=R[0].intersectionRatio;if(L!==c){if(!E)return a();L?a(!1,L):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E=!1}try{n=new IntersectionObserver(C,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,w)}n.observe(t)}return a(!0),o}function x9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Ub(t),d=s||o?[...u?Ch(u):[],...Ch(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),o&&b.addEventListener("resize",n)});const f=u&&l?v9(u,n):null;let m=-1,g=null;a&&(g=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let y,v=c?xl(t):null;c&&x();function x(){const b=xl(t);v&&(b.x!==v.x||b.y!==v.y||b.width!==v.width||b.height!==v.height)&&n(),v=b,y=requestAnimationFrame(x)}return n(),()=>{var b;d.forEach(w=>{s&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),f==null||f(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(y)}}const w9=ZB,_9=JB,b9=QB,E9=t9,j9=YB,L1=GB,N9=e9,S9=(t,e,n)=>{const r=new Map,s={platform:y9,...n},o={...s.platform,_c:r};return KB(t,e,{...s,platform:o})};var gp=typeof document<"u"?p.useLayoutEffect:p.useEffect;function cg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!cg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!cg(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function lP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function F1(t,e){const n=lP(t);return Math.round(e*n)/n}function Cx(t){const e=p.useRef(t);return gp(()=>{e.current=t}),e}function T9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);cg(m,r)||g(r);const[y,v]=p.useState(null),[x,b]=p.useState(null),w=p.useCallback(F=>{F!==L.current&&(L.current=F,v(F))},[]),E=p.useCallback(F=>{F!==A.current&&(A.current=F,b(F))},[]),C=o||y,R=a||x,L=p.useRef(null),A=p.useRef(null),j=p.useRef(d),S=c!=null,k=Cx(c),O=Cx(s),I=Cx(u),N=p.useCallback(()=>{if(!L.current||!A.current)return;const F={placement:e,strategy:n,middleware:m};O.current&&(F.platform=O.current),S9(L.current,A.current,F).then(H=>{const Y={...H,isPositioned:I.current!==!1};$.current&&!cg(j.current,Y)&&(j.current=Y,Ml.flushSync(()=>{f(Y)}))})},[m,e,n,O,I]);gp(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[u]);const $=p.useRef(!1);gp(()=>($.current=!0,()=>{$.current=!1}),[]),gp(()=>{if(C&&(L.current=C),R&&(A.current=R),C&&R){if(k.current)return k.current(C,R,N);N()}},[C,R,N,k,S]);const U=p.useMemo(()=>({reference:L,floating:A,setReference:w,setFloating:E}),[w,E]),V=p.useMemo(()=>({reference:C,floating:R}),[C,R]),z=p.useMemo(()=>{const F={position:n,left:0,top:0};if(!V.floating)return F;const H=F1(V.floating,d.x),Y=F1(V.floating,d.y);return l?{...F,transform:"translate("+H+"px, "+Y+"px)",...lP(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Y}},[n,l,V.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:N,refs:U,elements:V,floatingStyles:z}),[d,N,U,V,z])}const C9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?L1({element:r.current,padding:s}).fn(n):{}:r?L1({element:r,padding:s}).fn(n):{}}}},k9=(t,e)=>({...w9(t),options:[t,e]}),A9=(t,e)=>({..._9(t),options:[t,e]}),I9=(t,e)=>({...N9(t),options:[t,e]}),R9=(t,e)=>({...b9(t),options:[t,e]}),P9=(t,e)=>({...E9(t),options:[t,e]}),D9=(t,e)=>({...j9(t),options:[t,e]}),O9=(t,e)=>({...C9(t),options:[t,e]});var M9="Arrow",cP=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return i.jsx(Ve.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});cP.displayName=M9;var L9=cP;function F9(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:m,children:g,...y}=f,v=(m==null?void 0:m[t][c])||l,x=p.useMemo(()=>y,Object.values(y));return i.jsx(v.Provider,{value:x,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,y=p.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,V9(s,...e)]}function V9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function $b(t){const[e,n]=p.useState(void 0);return Fn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Bb="Popper",[uP,Mu]=F9(Bb),[U9,dP]=uP(Bb),hP=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return i.jsx(U9,{scope:e,anchor:r,onAnchorChange:s,children:n})};hP.displayName=Bb;var fP="PopperAnchor",mP=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=dP(fP,n),a=p.useRef(null),l=dt(e,a);return p.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(Ve.div,{...s,ref:l})});mP.displayName=fP;var zb="PopperContent",[$9,B9]=uP(zb),pP=p.forwardRef((t,e)=>{var xe,Q,ce,P,Z,J;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=t,x=dP(zb,n),[b,w]=p.useState(null),E=dt(e,we=>w(we)),[C,R]=p.useState(null),L=$b(C),A=(L==null?void 0:L.width)??0,j=(L==null?void 0:L.height)??0,S=r+(o!=="center"?"-"+o:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],I=O.length>0,N={padding:k,boundary:O.filter(q9),altBoundary:I},{refs:$,floatingStyles:U,placement:V,isPositioned:z,middlewareData:F}=T9({strategy:"fixed",placement:S,whileElementsMounted:(...we)=>x9(...we,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[k9({mainAxis:s+j,alignmentAxis:a}),c&&A9({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?I9():void 0,...N}),c&&R9({...N}),P9({...N,apply:({elements:we,rects:mt,availableWidth:gr,availableHeight:kn})=>{const{width:Hr,height:M}=mt.reference,B=we.floating.style;B.setProperty("--radix-popper-available-width",`${gr}px`),B.setProperty("--radix-popper-available-height",`${kn}px`),B.setProperty("--radix-popper-anchor-width",`${Hr}px`),B.setProperty("--radix-popper-anchor-height",`${M}px`)}}),C&&O9({element:C,padding:l}),H9({arrowWidth:A,arrowHeight:j}),m&&D9({strategy:"referenceHidden",...N})]}),[H,Y]=vP(V),q=Kn(y);Fn(()=>{z&&(q==null||q())},[z,q]);const W=(xe=F.arrow)==null?void 0:xe.x,re=(Q=F.arrow)==null?void 0:Q.y,je=((ce=F.arrow)==null?void 0:ce.centerOffset)!==0,[Re,Pe]=p.useState();return Fn(()=>{b&&Pe(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:z?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(P=F.transformOrigin)==null?void 0:P.x,(Z=F.transformOrigin)==null?void 0:Z.y].join(" "),...((J=F.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx($9,{scope:n,placedSide:H,onArrowChange:R,arrowX:W,arrowY:re,shouldHideArrow:je,children:i.jsx(Ve.div,{"data-side":H,"data-align":Y,...v,ref:E,style:{...v.style,animation:z?void 0:"none"}})})})});pP.displayName=zb;var gP="PopperArrow",z9={top:"bottom",right:"left",bottom:"top",left:"right"},yP=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=B9(gP,r),a=z9[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(L9,{...s,ref:n,style:{...s.style,display:"block"}})})});yP.displayName=gP;function q9(t){return t!==null}var H9=t=>({name:"transformOrigin",options:t,fn(e){var x,b,w;const{placement:n,rects:r,middlewareData:s}=e,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=vP(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let y="",v="";return u==="bottom"?(y=a?f:`${m}px`,v=`${-c}px`):u==="top"?(y=a?f:`${m}px`,v=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,v=a?f:`${g}px`):u==="left"&&(y=`${r.floating.width+c}px`,v=a?f:`${g}px`),{data:{x:y,y:v}}}});function vP(t){const[e,n="center"]=t.split("-");return[e,n]}var qb=hP,Hb=mP,Wb=pP,Kb=yP,[Cy,yle]=js("Tooltip",[Mu]),ky=Mu(),xP="TooltipProvider",W9=700,g0="tooltip.open",[K9,Gb]=Cy(xP),wP=t=>{const{__scopeTooltip:e,delayDuration:n=W9,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,[a,l]=p.useState(!0),c=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),i.jsx(K9,{scope:e,isOpenDelayed:a,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:o})};wP.displayName=xP;var Ay="Tooltip",[G9,Iy]=Cy(Ay),_P=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:a,delayDuration:l}=t,c=Gb(Ay,t.__scopeTooltip),u=ky(e),[d,f]=p.useState(null),m=$s(),g=p.useRef(0),y=a??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[b=!1,w]=bi({prop:r,defaultProp:s,onChange:A=>{A?(c.onOpen(),document.dispatchEvent(new CustomEvent(g0))):c.onClose(),o==null||o(A)}}),E=p.useMemo(()=>b?x.current?"delayed-open":"instant-open":"closed",[b]),C=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x.current=!1,w(!0)},[w]),R=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),L=p.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{x.current=!0,w(!0),g.current=0},v)},[v,w]);return p.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),i.jsx(qb,{...u,children:i.jsx(G9,{scope:e,contentId:m,open:b,stateAttribute:E,trigger:d,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?L():C()},[c.isOpenDelayed,L,C]),onTriggerLeave:p.useCallback(()=>{y?R():(window.clearTimeout(g.current),g.current=0)},[R,y]),onOpen:C,onClose:R,disableHoverableContent:y,children:n})})};_P.displayName=Ay;var y0="TooltipTrigger",bP=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Iy(y0,n),o=Gb(y0,n),a=ky(n),l=p.useRef(null),c=dt(e,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(Hb,{asChild:!0,...a,children:i.jsx(Ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ve(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ve(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ve(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ve(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ve(t.onBlur,s.onClose),onClick:ve(t.onClick,s.onClose)})})});bP.displayName=y0;var Q9="TooltipPortal",[vle,Y9]=Cy(Q9,{forceMount:void 0}),cu="TooltipContent",EP=p.forwardRef((t,e)=>{const n=Y9(cu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,a=Iy(cu,t.__scopeTooltip);return i.jsx(Ns,{present:r||a.open,children:a.disableHoverableContent?i.jsx(jP,{side:s,...o,ref:e}):i.jsx(X9,{side:s,...o,ref:e})})}),X9=p.forwardRef((t,e)=>{const n=Iy(cu,t.__scopeTooltip),r=Gb(cu,t.__scopeTooltip),s=p.useRef(null),o=dt(e,s),[a,l]=p.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),g=p.useCallback((y,v)=>{const x=y.currentTarget,b={x:y.clientX,y:y.clientY},w=tz(b,x.getBoundingClientRect()),E=nz(b,w),C=rz(v.getBoundingClientRect()),R=iz([...E,...C]);l(R),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&d){const y=x=>g(x,d),v=x=>g(x,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",v)}}},[c,d,g,m]),p.useEffect(()=>{if(a){const y=v=>{const x=v.target,b={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),E=!sz(b,a);w?m():E&&(m(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,a,u,m]),i.jsx(jP,{...t,ref:o})}),[Z9,J9]=Cy(Ay,{isInside:!1}),jP=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=t,c=Iy(cu,n),u=ky(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(g0,d),()=>document.removeEventListener(g0,d)),[d]),p.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(Wb,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(_b,{children:r}),i.jsx(Z9,{scope:n,isInside:!0,children:i.jsx(S3,{id:c.contentId,role:"tooltip",children:s||r})})]})})});EP.displayName=cu;var NP="TooltipArrow",ez=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ky(n);return J9(NP,n).isInside?null:i.jsx(Kb,{...s,...r,ref:e})});ez.displayName=NP;function tz(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nz(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function rz(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function sz(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o].x,c=e[o].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}function iz(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),oz(e)}function oz(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var az=wP,lz=_P,cz=bP,SP=EP;const uu=az,kh=lz,Ah=cz,du=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(SP,{ref:r,sideOffset:e,className:me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));du.displayName=SP.displayName;var Ry=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Py=typeof window>"u"||"Deno"in globalThis;function Is(){}function uz(t,e){return typeof t=="function"?t(e):t}function dz(t){return typeof t=="number"&&t>=0&&t!==1/0}function hz(t,e){return Math.max(t+(e||0)-Date.now(),0)}function V1(t,e){return typeof t=="function"?t(e):t}function fz(t,e){return typeof t=="function"?t(e):t}function U1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==Qb(a,e.options))return!1}else if(!Rh(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function $1(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Ih(e.options.mutationKey)!==Ih(o))return!1}else if(!Rh(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Qb(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ih)(t)}function Ih(t){return JSON.stringify(t,(e,n)=>v0(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Rh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Rh(t[n],e[n])):!1}function TP(t,e){if(t===e)return t;const n=B1(t)&&B1(e);if(n||v0(t)&&v0(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),a=o.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const d=n?u:o[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=TP(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function B1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function v0(t){if(!z1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!z1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function z1(t){return Object.prototype.toString.call(t)==="[object Object]"}function mz(t){return new Promise(e=>{setTimeout(e,t)})}function pz(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?TP(t,e):e}function gz(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function yz(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Yb=Symbol();function CP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Yb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var rl,zo,qc,zk,vz=(zk=class extends Ry{constructor(){super();_t(this,rl);_t(this,zo);_t(this,qc);rt(this,qc,e=>{if(!Py&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ae(this,zo)||this.setEventListener(ae(this,qc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,zo))==null||e.call(this),rt(this,zo,void 0))}setEventListener(e){var n;rt(this,qc,e),(n=ae(this,zo))==null||n.call(this),rt(this,zo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ae(this,rl)!==e&&(rt(this,rl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ae(this,rl)=="boolean"?ae(this,rl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rl=new WeakMap,zo=new WeakMap,qc=new WeakMap,zk),kP=new vz,Hc,qo,Wc,qk,xz=(qk=class extends Ry{constructor(){super();_t(this,Hc,!0);_t(this,qo);_t(this,Wc);rt(this,Wc,e=>{if(!Py&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ae(this,qo)||this.setEventListener(ae(this,Wc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,qo))==null||e.call(this),rt(this,qo,void 0))}setEventListener(e){var n;rt(this,Wc,e),(n=ae(this,qo))==null||n.call(this),rt(this,qo,e(this.setOnline.bind(this)))}setOnline(e){ae(this,Hc)!==e&&(rt(this,Hc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ae(this,Hc)}},Hc=new WeakMap,qo=new WeakMap,Wc=new WeakMap,qk),ug=new xz;function wz(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function _z(t){return Math.min(1e3*2**t,3e4)}function AP(t){return(t??"online")==="online"?ug.isOnline():!0}var IP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function kx(t){return t instanceof IP}function RP(t){let e=!1,n=0,r=!1,s;const o=wz(),a=v=>{var x;r||(m(new IP(v)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>kP.isFocused()&&(t.networkMode==="always"||ug.isOnline())&&t.canRun(),d=()=>AP(t.networkMode)&&t.canRun(),f=v=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,v),s==null||s(),o.resolve(v))},m=v=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,v),s==null||s(),o.reject(v))},g=()=>new Promise(v=>{var x;s=b=>{(r||u())&&v(b)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),y=()=>{if(r)return;let v;const x=n===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{var L;if(r)return;const w=t.retry??(Py?0:3),E=t.retryDelay??_z,C=typeof E=="function"?E(n,b):E,R=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,b);if(e||!R){m(b);return}n++,(L=t.onFail)==null||L.call(t,n,b),mz(C).then(()=>u()?void 0:g()).then(()=>{e?m(b):y()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():g().then(y),o)}}function bz(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const o=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Er=bz(),sl,Hk,PP=(Hk=class{constructor(){_t(this,sl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dz(this.gcTime)&&rt(this,sl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Py?1/0:5*60*1e3))}clearGcTimeout(){ae(this,sl)&&(clearTimeout(ae(this,sl)),rt(this,sl,void 0))}},sl=new WeakMap,Hk),Kc,Gc,ds,rr,uf,il,Ps,Vi,Wk,Ez=(Wk=class extends PP{constructor(n){super();_t(this,Ps);_t(this,Kc);_t(this,Gc);_t(this,ds);_t(this,rr);_t(this,uf);_t(this,il);rt(this,il,!1),rt(this,uf,n.defaultOptions),this.setOptions(n.options),this.observers=[],rt(this,ds,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,rt(this,Kc,Nz(this.options)),this.state=n.state??ae(this,Kc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=ae(this,rr))==null?void 0:n.promise}setOptions(n){this.options={...ae(this,uf),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,ds).remove(this)}setData(n,r){const s=pz(this.state.data,n,this.options);return Jn(this,Ps,Vi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Jn(this,Ps,Vi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,o;const r=(s=ae(this,rr))==null?void 0:s.promise;return(o=ae(this,rr))==null||o.cancel(n),r?r.then(Is).catch(Is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,Kc))}isActive(){return this.observers.some(n=>fz(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!hz(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=ae(this,rr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=ae(this,rr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),ae(this,ds).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(ae(this,rr)&&(ae(this,il)?ae(this,rr).cancel({revert:!0}):ae(this,rr).cancelRetry()),this.scheduleGc()),ae(this,ds).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jn(this,Ps,Vi).call(this,{type:"invalidate"})}fetch(n,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ae(this,rr))return ae(this,rr).continueRetry(),ae(this,rr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,o=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(rt(this,il,!0),s.signal)})},a=()=>{const m=CP(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return o(g),rt(this,il,!1),this.options.persister?this.options.persister(m,g,this):m(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};o(l),(u=this.options.behavior)==null||u.onFetch(l,this),rt(this,Gc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Jn(this,Ps,Vi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var g,y,v,x;kx(m)&&m.silent||Jn(this,Ps,Vi).call(this,{type:"error",error:m}),kx(m)||((y=(g=ae(this,ds).config).onError)==null||y.call(g,m,this),(x=(v=ae(this,ds).config).onSettled)==null||x.call(v,this.state.data,m,this)),this.scheduleGc()};return rt(this,rr,RP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,y,v,x;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(b){c(b);return}(y=(g=ae(this,ds).config).onSuccess)==null||y.call(g,m,this),(x=(v=ae(this,ds).config).onSettled)==null||x.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{Jn(this,Ps,Vi).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{Jn(this,Ps,Vi).call(this,{type:"pause"})},onContinue:()=>{Jn(this,Ps,Vi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ae(this,rr).start()}},Kc=new WeakMap,Gc=new WeakMap,ds=new WeakMap,rr=new WeakMap,uf=new WeakMap,il=new WeakMap,Ps=new WeakSet,Vi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...jz(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return kx(o)&&o.revert&&ae(this,Gc)?{...ae(this,Gc),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Er.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ae(this,ds).notify({query:this,type:"updated",action:n})})},Wk);function jz(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Nz(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ai,Kk,Sz=(Kk=class extends Ry{constructor(e={}){super();_t(this,ai);this.config=e,rt(this,ai,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Qb(s,n);let a=this.get(o);return a||(a=new Ez({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){ae(this,ai).has(e.queryHash)||(ae(this,ai).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ae(this,ai).get(e.queryHash);n&&(e.destroy(),n===e&&ae(this,ai).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,ai).get(e)}getAll(){return[...ae(this,ai).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>U1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>U1(e,r)):n}notify(e){Er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ai=new WeakMap,Kk),li,wr,ol,ci,Ao,Gk,Tz=(Gk=class extends PP{constructor(n){super();_t(this,ci);_t(this,li);_t(this,wr);_t(this,ol);this.mutationId=n.mutationId,rt(this,wr,n.mutationCache),rt(this,li,[]),this.state=n.state||Cz(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){ae(this,li).includes(n)||(ae(this,li).push(n),this.clearGcTimeout(),ae(this,wr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){rt(this,li,ae(this,li).filter(r=>r!==n)),this.scheduleGc(),ae(this,wr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){ae(this,li).length||(this.state.status==="pending"?this.scheduleGc():ae(this,wr).remove(this))}continue(){var n;return((n=ae(this,ol))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,c,u,d,f,m,g,y,v,x,b,w,E,C,R,L,A,j;rt(this,ol,RP({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{Jn(this,ci,Ao).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{Jn(this,ci,Ao).call(this,{type:"pause"})},onContinue:()=>{Jn(this,ci,Ao).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,wr).canRun(this)}));const r=this.state.status==="pending",s=!ae(this,ol).canStart();try{if(!r){Jn(this,ci,Ao).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=ae(this,wr).config).onMutate)==null?void 0:a.call(o,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Jn(this,ci,Ao).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const S=await ae(this,ol).start();return await((d=(u=ae(this,wr).config).onSuccess)==null?void 0:d.call(u,S,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,S,n,this.state.context)),await((y=(g=ae(this,wr).config).onSettled)==null?void 0:y.call(g,S,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,S,null,n,this.state.context)),Jn(this,ci,Ao).call(this,{type:"success",data:S}),S}catch(S){try{throw await((w=(b=ae(this,wr).config).onError)==null?void 0:w.call(b,S,n,this.state.context,this)),await((C=(E=this.options).onError)==null?void 0:C.call(E,S,n,this.state.context)),await((L=(R=ae(this,wr).config).onSettled)==null?void 0:L.call(R,void 0,S,this.state.variables,this.state.context,this)),await((j=(A=this.options).onSettled)==null?void 0:j.call(A,void 0,S,n,this.state.context)),S}finally{Jn(this,ci,Ao).call(this,{type:"error",error:S})}}finally{ae(this,wr).runNext(this)}}},li=new WeakMap,wr=new WeakMap,ol=new WeakMap,ci=new WeakSet,Ao=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Er.batch(()=>{ae(this,li).forEach(s=>{s.onMutationUpdate(n)}),ae(this,wr).notify({mutation:this,type:"updated",action:n})})},Gk);function Cz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kr,df,Qk,kz=(Qk=class extends Ry{constructor(e={}){super();_t(this,Kr);_t(this,df);this.config=e,rt(this,Kr,new Map),rt(this,df,Date.now())}build(e,n,r){const s=new Tz({mutationCache:this,mutationId:++gm(this,df)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Fm(e),r=ae(this,Kr).get(n)??[];r.push(e),ae(this,Kr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Fm(e);if(ae(this,Kr).has(n)){const s=(r=ae(this,Kr).get(n))==null?void 0:r.filter(o=>o!==e);s&&(s.length===0?ae(this,Kr).delete(n):ae(this,Kr).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=ae(this,Kr).get(Fm(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=ae(this,Kr).get(Fm(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ae(this,Kr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$1(n,r))}findAll(e={}){return this.getAll().filter(n=>$1(e,n))}notify(e){Er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Er.batch(()=>Promise.all(e.map(n=>n.continue().catch(Is))))}},Kr=new WeakMap,df=new WeakMap,Qk);function Fm(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function q1(t){return{onFetch:(e,n)=>{var d,f,m,g,y;const r=e.options,s=(m=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,o=((g=e.state.data)==null?void 0:g.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=CP(e.options,e.fetchOptions),w=async(E,C,R)=>{if(v)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const L={queryKey:e.queryKey,pageParam:C,direction:R?"backward":"forward",meta:e.options.meta};x(L);const A=await b(L),{maxPages:j}=e.options,S=R?yz:gz;return{pages:S(E.pages,A,j),pageParams:S(E.pageParams,C,j)}};if(s&&o.length){const E=s==="backward",C=E?Az:H1,R={pages:o,pageParams:a},L=C(r,R);l=await w(R,L,E)}else{const E=t??o.length;do{const C=c===0?a[0]??r.initialPageParam:H1(r,l);if(c>0&&C==null)break;l=await w(l,C),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function H1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Az(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var fn,Ho,Wo,Qc,Yc,Ko,Xc,Zc,Yk,DP=(Yk=class{constructor(t={}){_t(this,fn);_t(this,Ho);_t(this,Wo);_t(this,Qc);_t(this,Yc);_t(this,Ko);_t(this,Xc);_t(this,Zc);rt(this,fn,t.queryCache||new Sz),rt(this,Ho,t.mutationCache||new kz),rt(this,Wo,t.defaultOptions||{}),rt(this,Qc,new Map),rt(this,Yc,new Map),rt(this,Ko,0)}mount(){gm(this,Ko)._++,ae(this,Ko)===1&&(rt(this,Xc,kP.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,fn).onFocus())})),rt(this,Zc,ug.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,fn).onOnline())})))}unmount(){var t,e;gm(this,Ko)._--,ae(this,Ko)===0&&((t=ae(this,Xc))==null||t.call(this),rt(this,Xc,void 0),(e=ae(this,Zc))==null||e.call(this),rt(this,Zc,void 0))}isFetching(t){return ae(this,fn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ae(this,Ho).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,fn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=ae(this,fn).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(V1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return ae(this,fn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=ae(this,fn).get(r.queryHash),o=s==null?void 0:s.state.data,a=uz(e,o);if(a!==void 0)return ae(this,fn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Er.batch(()=>ae(this,fn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ae(this,fn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ae(this,fn);Er.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ae(this,fn),r={type:"active",...t};return Er.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Er.batch(()=>ae(this,fn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Is).catch(Is)}invalidateQueries(t={},e={}){return Er.batch(()=>{if(ae(this,fn).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Er.batch(()=>ae(this,fn).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Is)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Is)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ae(this,fn).build(this,e);return n.isStaleByTime(V1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Is).catch(Is)}fetchInfiniteQuery(t){return t.behavior=q1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Is).catch(Is)}ensureInfiniteQueryData(t){return t.behavior=q1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ug.isOnline()?ae(this,Ho).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,fn)}getMutationCache(){return ae(this,Ho)}getDefaultOptions(){return ae(this,Wo)}setDefaultOptions(t){rt(this,Wo,t)}setQueryDefaults(t,e){ae(this,Qc).set(Ih(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ae(this,Qc).values()];let n={};return e.forEach(r=>{Rh(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){ae(this,Yc).set(Ih(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ae(this,Yc).values()];let n={};return e.forEach(r=>{Rh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ae(this,Wo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Qb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Yb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ae(this,Wo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ae(this,fn).clear(),ae(this,Ho).clear()}},fn=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,Qc=new WeakMap,Yc=new WeakMap,Ko=new WeakMap,Xc=new WeakMap,Zc=new WeakMap,Yk),Iz=p.createContext(void 0),OP=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(Iz.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}var Yo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yo||(Yo={}));const W1="popstate";function Rz(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:a,hash:l}=r.location;return x0("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dg(s)}return Dz(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function MP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pz(){return Math.random().toString(36).substr(2,8)}function K1(t,e){return{usr:t.state,key:t.key,idx:e}}function x0(t,e,n,r){return n===void 0&&(n=null),Ph({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Lu(e):e,{state:n,key:e&&e.key||r||Pz()})}function dg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Dz(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=Yo.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ph({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Yo.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:b})}function m(x,b){l=Yo.Push;let w=x0(v.location,x,b);u=d()+1;let E=K1(w,u),C=v.createHref(w);try{a.pushState(E,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}o&&c&&c({action:l,location:v.location,delta:1})}function g(x,b){l=Yo.Replace;let w=x0(v.location,x,b);u=d();let E=K1(w,u),C=v.createHref(w);a.replaceState(E,"",C),o&&c&&c({action:l,location:v.location,delta:0})}function y(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof x=="string"?x:dg(x);return w=w.replace(/ $/,"%20"),wn(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let v={get action(){return l},get location(){return t(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(W1,f),c=x,()=>{s.removeEventListener(W1,f),c=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let b=y(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:g,go(x){return a.go(x)}};return v}var G1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(G1||(G1={}));function Oz(t,e,n){return n===void 0&&(n="/"),Mz(t,e,n,!1)}function Mz(t,e,n,r){let s=typeof e=="string"?Lu(e):e,o=Xb(s.pathname||"/",n);if(o==null)return null;let a=LP(t);Lz(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=Gz(o);l=Wz(a[c],u,r)}return l}function LP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(wn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=oa([r,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(wn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),LP(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:qz(u,o.index),routesMeta:d})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of FP(o.path))s(o,a,c)}),e}function FP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=FP(r.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Lz(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Hz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fz=/^:[\w-]+$/,Vz=3,Uz=2,$z=1,Bz=10,zz=-2,Q1=t=>t==="*";function qz(t,e){let n=t.split("/"),r=n.length;return n.some(Q1)&&(r+=zz),e&&(r+=Uz),n.filter(s=>!Q1(s)).reduce((s,o)=>s+(Fz.test(o)?Vz:o===""?$z:Bz),r)}function Hz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Wz(t,e,n){let{routesMeta:r}=t,s={},o="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=Y1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Y1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:oa([o,f.pathname]),pathnameBase:Zz(oa([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=oa([o,f.pathnameBase]))}return a}function Y1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Kz(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let v=l[f]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[f];return g&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:t}}function Kz(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),MP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Gz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return MP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qz(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Lu(t):t;return{pathname:n?n.startsWith("/")?n:Yz(n,e):e,search:Jz(r),hash:eq(s)}}function Yz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ax(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xz(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zb(t,e){let n=Xz(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jb(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Lu(t):(s=Ph({},t),wn(!s.pathname||!s.pathname.includes("?"),Ax("?","pathname","search",s)),wn(!s.pathname||!s.pathname.includes("#"),Ax("#","pathname","hash",s)),wn(!s.search||!s.search.includes("#"),Ax("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=Qz(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const oa=t=>t.join("/").replace(/\/\/+/g,"/"),Zz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Jz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VP=["post","put","patch","delete"];new Set(VP);const nq=["get",...VP];new Set(nq);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}const eE=p.createContext(null),rq=p.createContext(null),Oa=p.createContext(null),Dy=p.createContext(null),ki=p.createContext({outlet:null,matches:[],isDataRoute:!1}),UP=p.createContext(null);function sq(t,e){let{relative:n}=e===void 0?{}:e;Fu()||wn(!1);let{basename:r,navigator:s}=p.useContext(Oa),{hash:o,pathname:a,search:l}=BP(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:oa([r,a])),s.createHref({pathname:c,search:l,hash:o})}function Fu(){return p.useContext(Dy)!=null}function Ma(){return Fu()||wn(!1),p.useContext(Dy).location}function $P(t){p.useContext(Oa).static||p.useLayoutEffect(t)}function pr(){let{isDataRoute:t}=p.useContext(ki);return t?xq():iq()}function iq(){Fu()||wn(!1);let t=p.useContext(eE),{basename:e,future:n,navigator:r}=p.useContext(Oa),{matches:s}=p.useContext(ki),{pathname:o}=Ma(),a=JSON.stringify(Zb(s,n.v7_relativeSplatPath)),l=p.useRef(!1);return $P(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Jb(u,JSON.parse(a),o,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:oa([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,a,o,t])}const oq=p.createContext(null);function aq(t){let e=p.useContext(ki).outlet;return e&&p.createElement(oq.Provider,{value:t},e)}function tE(){let{matches:t}=p.useContext(ki),e=t[t.length-1];return e?e.params:{}}function BP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(Oa),{matches:s}=p.useContext(ki),{pathname:o}=Ma(),a=JSON.stringify(Zb(s,r.v7_relativeSplatPath));return p.useMemo(()=>Jb(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function lq(t,e){return cq(t,e)}function cq(t,e,n,r){Fu()||wn(!1);let{navigator:s}=p.useContext(Oa),{matches:o}=p.useContext(ki),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ma(),d;if(e){var f;let x=typeof e=="string"?Lu(e):e;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||wn(!1),d=x}else d=u;let m=d.pathname||"/",g=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Oz(t,{pathname:g}),v=mq(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:oa([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:oa([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return e&&v?p.createElement(Dy.Provider,{value:{location:Dh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yo.Pop}},v):v}function uq(){let t=vq(),e=tq(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const dq=p.createElement(uq,null);class hq extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(ki.Provider,{value:this.props.routeContext},p.createElement(UP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fq(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(eE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ki.Provider,{value:e},r)}function mq(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||wn(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let g,y=!1,v=null,x=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||dq,c&&(u<0&&m===0?(y=!0,x=null):u===m&&(y=!0,x=f.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),w=()=>{let E;return g?E=v:y?E=x:f.route.Component?E=p.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,p.createElement(fq,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(hq,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var zP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zP||{}),hg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hg||{});function pq(t){let e=p.useContext(eE);return e||wn(!1),e}function gq(t){let e=p.useContext(rq);return e||wn(!1),e}function yq(t){let e=p.useContext(ki);return e||wn(!1),e}function qP(t){let e=yq(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function vq(){var t;let e=p.useContext(UP),n=gq(hg.UseRouteError),r=qP(hg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function xq(){let{router:t}=pq(zP.UseNavigateStable),e=qP(hg.UseNavigateStable),n=p.useRef(!1);return $P(()=>{n.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dh({fromRouteId:e},o)))},[t,e])}function w0(t){let{to:e,replace:n,state:r,relative:s}=t;Fu()||wn(!1);let{future:o,static:a}=p.useContext(Oa),{matches:l}=p.useContext(ki),{pathname:c}=Ma(),u=pr(),d=Jb(e,Zb(l,o.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function nE(t){return aq(t.context)}function ot(t){wn(!1)}function wq(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Yo.Pop,navigator:o,static:a=!1,future:l}=t;Fu()&&wn(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:o,static:a,future:Dh({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof r=="string"&&(r=Lu(r));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:y="default"}=r,v=p.useMemo(()=>{let x=Xb(d,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:g,key:y},navigationType:s}},[c,d,f,m,g,y,s]);return v==null?null:p.createElement(Oa.Provider,{value:u},p.createElement(Dy.Provider,{children:n,value:v}))}function _q(t){let{children:e,location:n}=t;return lq(_0(e),n)}new Promise(()=>{});function _0(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,s)=>{if(!p.isValidElement(r))return;let o=[...e,s];if(r.type===p.Fragment){n.push.apply(n,_0(r.props.children,o));return}r.type!==ot&&wn(!1),!r.props.index||!r.props.children||wn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=_0(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b0(){return b0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b0.apply(this,arguments)}function bq(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Eq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jq(t,e){return t.button===0&&(!e||e==="_self")&&!Eq(t)}function E0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Nq(t,e){let n=E0(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Sq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tq="6";try{window.__reactRouterVersion=Tq}catch{}const Cq="startTransition",X1=lA[Cq];function kq(t){let{basename:e,children:n,future:r,window:s}=t,o=p.useRef();o.current==null&&(o.current=Rz({window:s,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=p.useCallback(f=>{u&&X1?X1(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>a.listen(d),[a,d]),p.createElement(wq,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const Aq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=p.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=bq(e,Sq),{basename:g}=p.useContext(Oa),y,v=!1;if(typeof u=="string"&&Iq.test(u)&&(y=u,Aq))try{let E=new URL(window.location.href),C=u.startsWith("//")?new URL(E.protocol+u):new URL(u),R=Xb(C.pathname,g);C.origin===E.origin&&R!=null?u=R+C.search+C.hash:v=!0}catch{}let x=sq(u,{relative:s}),b=Rq(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function w(E){r&&r(E),E.defaultPrevented||b(E)}return p.createElement("a",b0({},m,{href:y||x,onClick:v||o?r:w,ref:n,target:c}))});var Z1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Z1||(Z1={}));var J1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(J1||(J1={}));function Rq(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=e===void 0?{}:e,c=pr(),u=Ma(),d=BP(t,{relative:a});return p.useCallback(f=>{if(jq(f,n)){f.preventDefault();let m=r!==void 0?r:dg(u)===dg(d);c(t,{replace:m,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,d,r,s,n,t,o,a,l])}function Pq(t){let e=p.useRef(E0(t)),n=p.useRef(!1),r=Ma(),s=p.useMemo(()=>Nq(r.search,n.current?null:e.current),[r.search]),o=pr(),a=p.useCallback((l,c)=>{const u=E0(typeof l=="function"?l(s):l);n.current=!0,o("?"+u,c)},[o,s]);return[s,a]}const Dq=()=>{};var eT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Oq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},WP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=o>>2,f=(o&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(m=64)),r.push(n[d],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Oq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||u==null||f==null)throw new Mq;const m=o<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Mq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lq=function(t){const e=HP(t);return WP.encodeByteArray(e,!0)},fg=function(t){return Lq(t).replace(/\./g,"")},KP=function(t){try{return WP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=()=>Fq().__FIREBASE_DEFAULTS__,Uq=()=>{if(typeof process>"u"||typeof eT>"u")return;const t=eT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$q=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KP(t[1]);return e&&JSON.parse(e)},Oy=()=>{try{return Dq()||Vq()||Uq()||$q()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GP=t=>{var e,n;return(n=(e=Oy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QP=t=>{const e=GP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YP=()=>{var t;return(t=Oy())===null||t===void 0?void 0:t.config},XP=t=>{var e;return(e=Oy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fg(JSON.stringify(n)),fg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function qq(){var t;const e=(t=Oy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Kq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gq(){const t=fr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Qq(){return!qq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yq(){try{return typeof indexedDB=="object"}catch{return!1}}function Xq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="FirebaseError";class Ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Zq,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wf.prototype.create)}}class wf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?Jq(o,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ai(s,l,r)}}function Jq(t,e){return t.replace(e8,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const e8=/\{\$([^}]+)}/g;function t8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(tT(o)&&tT(a)){if(!wl(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Id(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Rd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n8(t,e){const n=new r8(t,e);return n.subscribe.bind(n)}class r8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s8(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ix),s.error===void 0&&(s.error=Ix),s.complete===void 0&&(s.complete=Ix);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ix(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class xa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Bq;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a8(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o8(t){return t===Qa?void 0:t}function a8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const c8={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},u8=ct.INFO,d8={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},h8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=d8[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rE{constructor(e){this.name=e,this._logLevel=u8,this._logHandler=h8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const f8=(t,e)=>e.some(n=>t instanceof n);let nT,rT;function m8(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p8(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JP=new WeakMap,j0=new WeakMap,e2=new WeakMap,Rx=new WeakMap,sE=new WeakMap;function g8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(aa(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&JP.set(n,t)}).catch(()=>{}),sE.set(e,t),e}function y8(t){if(j0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});j0.set(t,e)}let N0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return j0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||e2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v8(t){N0=t(N0)}function x8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Px(this),e,...n);return e2.set(r,e.sort?e.sort():[e]),aa(r)}:p8().includes(t)?function(...e){return t.apply(Px(this),e),aa(JP.get(this))}:function(...e){return aa(t.apply(Px(this),e))}}function w8(t){return typeof t=="function"?x8(t):(t instanceof IDBTransaction&&y8(t),f8(t,m8())?new Proxy(t,N0):t)}function aa(t){if(t instanceof IDBRequest)return g8(t);if(Rx.has(t))return Rx.get(t);const e=w8(t);return e!==t&&(Rx.set(t,e),sE.set(e,t)),e}const Px=t=>sE.get(t);function _8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=aa(a);return r&&a.addEventListener("upgradeneeded",c=>{r(aa(a.result),c.oldVersion,c.newVersion,aa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const b8=["get","getKey","getAll","getAllKeys","count"],E8=["put","add","delete","clear"],Dx=new Map;function sT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dx.get(e))return Dx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=E8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b8.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Dx.set(e,o),o}v8(t=>({...t,get:(e,n,r)=>sT(e,n)||t.get(e,n,r),has:(e,n)=>!!sT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S0="@firebase/app",iT="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new rE("@firebase/app"),S8="@firebase/app-compat",T8="@firebase/analytics-compat",C8="@firebase/analytics",k8="@firebase/app-check-compat",A8="@firebase/app-check",I8="@firebase/auth",R8="@firebase/auth-compat",P8="@firebase/database",D8="@firebase/data-connect",O8="@firebase/database-compat",M8="@firebase/functions",L8="@firebase/functions-compat",F8="@firebase/installations",V8="@firebase/installations-compat",U8="@firebase/messaging",$8="@firebase/messaging-compat",B8="@firebase/performance",z8="@firebase/performance-compat",q8="@firebase/remote-config",H8="@firebase/remote-config-compat",W8="@firebase/storage",K8="@firebase/storage-compat",G8="@firebase/firestore",Q8="@firebase/vertexai",Y8="@firebase/firestore-compat",X8="firebase",Z8="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="[DEFAULT]",J8={[S0]:"fire-core",[S8]:"fire-core-compat",[C8]:"fire-analytics",[T8]:"fire-analytics-compat",[A8]:"fire-app-check",[k8]:"fire-app-check-compat",[I8]:"fire-auth",[R8]:"fire-auth-compat",[P8]:"fire-rtdb",[D8]:"fire-data-connect",[O8]:"fire-rtdb-compat",[M8]:"fire-fn",[L8]:"fire-fn-compat",[F8]:"fire-iid",[V8]:"fire-iid-compat",[U8]:"fire-fcm",[$8]:"fire-fcm-compat",[B8]:"fire-perf",[z8]:"fire-perf-compat",[q8]:"fire-rc",[H8]:"fire-rc-compat",[W8]:"fire-gcs",[K8]:"fire-gcs-compat",[G8]:"fire-fst",[Y8]:"fire-fst-compat",[Q8]:"fire-vertex","fire-js":"fire-js",[X8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,eH=new Map,C0=new Map;function oT(t,e){try{t.container.addComponent(e)}catch(n){uo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _l(t){const e=t.name;if(C0.has(e))return uo.debug(`There were multiple attempts to register component ${e}.`),!1;C0.set(e,t);for(const n of Oh.values())oT(n,t);for(const n of eH.values())oT(n,t);return!0}function My(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new wf("app","Firebase",tH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=Z8;function Ly(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:T0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw la.create("bad-app-name",{appName:String(s)});if(n||(n=YP()),!n)throw la.create("no-options");const o=Oh.get(s);if(o){if(wl(n,o.options)&&wl(r,o.config))return o;throw la.create("duplicate-app",{appName:s})}const a=new l8(s);for(const c of C0.values())a.addComponent(c);const l=new nH(n,r,a);return Oh.set(s,l),l}function Vu(t=T0){const e=Oh.get(t);if(!e&&t===T0&&YP())return Ly();if(!e)throw la.create("no-app",{appName:t});return e}function iE(){return Array.from(Oh.values())}function gi(t,e,n){var r;let s=(r=J8[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uo.warn(l.join(" "));return}_l(new xa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH="firebase-heartbeat-database",sH=1,Mh="firebase-heartbeat-store";let Ox=null;function t2(){return Ox||(Ox=_8(rH,sH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mh)}catch(n){console.warn(n)}}}}).catch(t=>{throw la.create("idb-open",{originalErrorMessage:t.message})})),Ox}async function iH(t){try{const n=(await t2()).transaction(Mh),r=await n.objectStore(Mh).get(n2(t));return await n.done,r}catch(e){if(e instanceof Ai)uo.warn(e.message);else{const n=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uo.warn(n.message)}}}async function aT(t,e){try{const r=(await t2()).transaction(Mh,"readwrite");await r.objectStore(Mh).put(e,n2(t)),await r.done}catch(n){if(n instanceof Ai)uo.warn(n.message);else{const r=la.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});uo.warn(r.message)}}}function n2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=1024,aH=30;class lH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>aH){const a=dH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){uo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lT(),{heartbeatsToSend:r,unsentEntries:s}=cH(this._heartbeatsCache.heartbeats),o=fg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return uo.warn(n),""}}}function lT(){return new Date().toISOString().substring(0,10)}function cH(t,e=oH){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),cT(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yq()?Xq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cT(t){return fg(JSON.stringify({version:2,heartbeats:t})).length}function dH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t){_l(new xa("platform-logger",e=>new j8(e),"PRIVATE")),_l(new xa("heartbeat",e=>new lH(e),"PRIVATE")),gi(S0,iT,t),gi(S0,iT,"esm2017"),gi("fire-js","")}hH("");var di=function(){return di=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},di.apply(this,arguments)};function bf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function r2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mH=r2,s2=new wf("auth","Firebase",r2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new rE("@firebase/auth");function pH(t,...e){mg.logLevel<=ct.WARN&&mg.warn(`Auth (${Fl}): ${t}`,...e)}function yp(t,...e){mg.logLevel<=ct.ERROR&&mg.error(`Auth (${Fl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,...e){throw oE(t,...e)}function yi(t,...e){return oE(t,...e)}function i2(t,e,n){const r=Object.assign(Object.assign({},mH()),{[e]:n});return new wf("auth","Firebase",r).create(e,{appName:t.name})}function Zi(t){return i2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s2.create(t,...e)}function qe(t,e,...n){if(!t)throw oE(e,...n)}function Ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function ho(t,e){t||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gH(){return uT()==="http:"||uT()==="https:"}function uT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gH()||Wq()||"connection"in navigator)?navigator.onLine:!0}function vH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.shortDelay=e,this.longDelay=n,ho(n>e,"Short delay should be less than long delay!"),this.isMobile=zq()||Kq()}get(){return yH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e){ho(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new Ef(3e4,6e4);function La(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,n,r,s={}){return a2(t,s,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const l=_f(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return Hq()||(u.referrerPolicy="no-referrer"),o2.fetch()(l2(t,t.config.apiHost,n,l),u)})}async function a2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xH),e);try{const s=new bH(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Vm(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vm(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Vm(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Vm(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw i2(t,d,u);Ws(t,d)}}catch(s){if(s instanceof Ai)throw s;Ws(t,"network-request-failed",{message:String(s)})}}async function jf(t,e,n,r,s={}){const o=await Ii(t,e,n,r,s);return"mfaPendingCredential"in o&&Ws(t,"multi-factor-auth-required",{_serverResponse:o}),o}function l2(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?aE(t.config,s):`${t.config.apiScheme}://${s}`}function _H(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),wH.get())})}}function Vm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yi(t,e,r);return s.customData._tokenResponse=n,s}function dT(t){return t!==void 0&&t.enterprise!==void 0}class EH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _H(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jH(t,e){return Ii(t,"GET","/v2/recaptchaConfig",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NH(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function c2(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SH(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=lE(r);qe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Zd(Mx(s.auth_time)),issuedAtTime:Zd(Mx(s.iat)),expirationTime:Zd(Mx(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mx(t){return Number(t)*1e3}function lE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{const s=KP(n);return s?JSON.parse(s):(yp("Failed to decode base64 JWT payload"),null)}catch(s){return yp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hT(t){const e=lE(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ai&&TH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zd(this.lastLoginAt),this.creationTime=Zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bl(t,c2(n,{idToken:r}));qe(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?u2(o.providerUserInfo):[],l=AH(t.providerData,a),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new A0(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function kH(t){const e=Nt(t);await pg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AH(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function u2(t){return t.map(e=>{var{providerId:n}=e,r=bf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH(t,e){const n=await a2(t,{},async()=>{const r=_f({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=l2(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",o2.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RH(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const n=hT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await IH(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,a=new Mc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(qe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(qe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mc,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new A0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SH(this,e)}reload(){return kH(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xr(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await bl(this,NH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,a,l,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(l=n.tenantId)!==null&&l!==void 0?l:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:C,isAnonymous:R,providerData:L,stsTokenManager:A}=n;qe(E&&A,e,"internal-error");const j=Mc.fromJSON(this.name,A);qe(typeof E=="string",e,"internal-error"),Co(f,e.name),Co(m,e.name),qe(typeof C=="boolean",e,"internal-error"),qe(typeof R=="boolean",e,"internal-error"),Co(g,e.name),Co(y,e.name),Co(v,e.name),Co(x,e.name),Co(b,e.name),Co(w,e.name);const S=new Gi({uid:E,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:R,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:j,createdAt:b,lastLoginAt:w});return L&&Array.isArray(L)&&(S.providerData=L.map(k=>Object.assign({},k))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Mc;s.updateFromServerResponse(n);const o=new Gi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await pg(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];qe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?u2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Mc;l.updateFromIdToken(r);const c=new Gi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new A0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function Qi(t){ho(t instanceof Function,"Expected a class definition");let e=fT.get(t);return e?(ho(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}d2.type="NONE";const mT=d2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e,n){return`firebase:${t}:${e}:${n}`}class Lc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=vp(this.userKey,s.apiKey,o),this.fullPersistenceKey=vp("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Lc(Qi(mT),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||Qi(mT);const a=vp(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(a);if(d){const f=Gi._fromJSON(e,d);u!==o&&(l=f),o=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Lc(o,e,r):(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new Lc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y2(e))return"Blackberry";if(v2(e))return"Webos";if(f2(e))return"Safari";if((e.includes("chrome/")||m2(e))&&!e.includes("edge/"))return"Chrome";if(g2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function h2(t=fr()){return/firefox\//i.test(t)}function f2(t=fr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m2(t=fr()){return/crios\//i.test(t)}function p2(t=fr()){return/iemobile/i.test(t)}function g2(t=fr()){return/android/i.test(t)}function y2(t=fr()){return/blackberry/i.test(t)}function v2(t=fr()){return/webos/i.test(t)}function cE(t=fr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PH(t=fr()){var e;return cE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DH(){return Gq()&&document.documentMode===10}function x2(t=fr()){return cE(t)||g2(t)||v2(t)||y2(t)||/windows phone/i.test(t)||p2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e=[]){let n;switch(t){case"Browser":n=pT(fr());break;case"Worker":n=`${pT(fr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,l)=>{try{const c=e(o);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MH(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",La(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=6;class FH{constructor(e){var n,r,s,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:LH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gT(this),this.idTokenSubscription=new gT(this),this.beforeStateQueue=new OH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Lc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await c2(this,{idToken:e}),r=await Gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xr(this.app))return Promise.reject(Zi(this));const n=e?Nt(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xr(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xr(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MH(this),n=new FH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await RH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qi(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await Lc.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pH(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vl(t){return Nt(t)}class gT{constructor(e){this.auth=e,this.observer=null,this.addObserver=n8(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UH(t){Fy=t}function _2(t){return Fy.loadJS(t)}function $H(){return Fy.recaptchaEnterpriseScript}function BH(){return Fy.gapiScript}function zH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qH{constructor(){this.enterprise=new HH}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HH{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const WH="recaptcha-enterprise",b2="NO_RECAPTCHA";class KH{constructor(e){this.type=WH,this.auth=Vl(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{jH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new EH(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function s(o,a,l){const c=window.grecaptcha;dT(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{a(u)}).catch(()=>{a(b2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qH().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(l=>{if(!n&&dT(window.grecaptcha))s(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=$H();c.length!==0&&(c+=l),_2(c).then(()=>{s(l,o,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function yT(t,e,n,r=!1,s=!1){const o=new KH(t);let a;if(s)a=b2;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function I0(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await yT(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yT(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t,e){const n=My(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(wl(o,e??{}))return s;Ws(s,"already-initialized")}return n.initialize({options:e})}function QH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YH(t,e,n){const r=Vl(t);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=E2(e),{host:a,port:l}=XH(e),c=l===null?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(wl(u,r.config.emulator)&&wl(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ZH()}function E2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XH(t){const e=E2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:vT(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:vT(a)}}}function vT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function JH(t,e){return Ii(t,"POST","/v1/accounts:update",e)}async function eW(t,e){return Ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t,e){return jf(t,"POST","/v1/accounts:signInWithPassword",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(t,e){return jf(t,"POST","/v1/accounts:signInWithEmailLink",La(t,e))}async function rW(t,e){return jf(t,"POST","/v1/accounts:signInWithEmailLink",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends uE{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Lh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(e,n,"signInWithPassword",tW);case"emailLink":return nW(e,{email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return I0(e,r,"signUpPassword",eW);case"emailLink":return rW(e,{idToken:n,email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t,e){return jf(t,"POST","/v1/accounts:signInWithIdp",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW="http://localhost";class El extends uE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new El(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=bf(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new El(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Fc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fc(e,n)}buildRequest(){const e={requestUri:sW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_f(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oW(t){const e=Id(Rd(t)).link,n=e?Id(Rd(e)).deep_link_id:null,r=Id(Rd(t)).deep_link_id;return(r?Id(Rd(r)).link:null)||r||n||e||t}class dE{constructor(e){var n,r,s,o,a,l;const c=Id(Rd(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=iW((s=c.mode)!==null&&s!==void 0?s:null);qe(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=oW(e);try{return new dE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,n){return Lh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dE.parseLink(n);return qe(r,"argument-error"),Lh._fromEmailAndCode(e,r.code,r.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends j2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Nf{constructor(){super("facebook.com")}static credential(e){return El._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return El._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lo.credential(n,r)}catch{return null}}}Lo.GOOGLE_SIGN_IN_METHOD="google.com";Lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Nf{constructor(){super("github.com")}static credential(e){return El._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.GITHUB_SIGN_IN_METHOD="github.com";Fo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Nf{constructor(){super("twitter.com")}static credential(e,n){return El._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vo.credential(n,r)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e){return jf(t,"POST","/v1/accounts:signUp",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Gi._fromIdTokenResponse(e,r,s),a=xT(r);return new jl({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=xT(r);return new jl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function xT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends Ai{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gg.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gg(e,n,r,s)}}function N2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gg._fromErrorAndOperation(t,o,e,r):o})}async function lW(t,e,n=!1){const r=await bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e,n=!1){const{auth:r}=t;if(Xr(r.app))return Promise.reject(Zi(r));const s="reauthenticate";try{const o=await bl(t,N2(r,s,e,t),n);qe(o.idToken,r,"internal-error");const a=lE(o.idToken);qe(a,r,"internal-error");const{sub:l}=a;return qe(t.uid===l,r,"user-mismatch"),jl._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ws(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e,n=!1){if(Xr(t.app))return Promise.reject(Zi(t));const r="signIn",s=await N2(t,r,e),o=await jl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function cW(t,e){return T2(Vl(t),e)}async function uW(t,e){return S2(Nt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t){const e=Vl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hE(t,e,n){if(Xr(t.app))return Promise.reject(Zi(t));const r=Vl(t),a=await I0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aW).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&C2(t),c}),l=await jl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function dW(t,e,n){return Xr(t.app)?Promise.reject(Zi(t)):cW(Nt(t),Ul.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&C2(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hW(t,e){return Ii(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Nt(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await bl(r,hW(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function fW(t,e){return mW(Nt(t),null,e)}async function mW(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const a=await bl(t,JH(r,o));await t._updateTokensIfNecessary(a,!0)}function pW(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function gW(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function yW(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function vW(t){return Nt(t).signOut()}const yg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yg,"1"),this.storage.removeItem(yg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=1e3,wW=10;class A2 extends k2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);DH()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wW):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A2.type="LOCAL";const _W=A2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends k2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I2.type="SESSION";const R2=I2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Vy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,o)),c=await bW(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=fE("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function jW(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function NW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TW(){return P2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebaseLocalStorageDb",CW=1,vg="firebaseLocalStorage",O2="fbase_key";class Sf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uy(t,e){return t.transaction([vg],e?"readwrite":"readonly").objectStore(vg)}function kW(){const t=indexedDB.deleteDatabase(D2);return new Sf(t).toPromise()}function P0(){const t=indexedDB.open(D2,CW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vg,{keyPath:O2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vg)?e(r):(r.close(),await kW(),e(await P0()))})})}async function wT(t,e,n){const r=Uy(t,!0).put({[O2]:e,value:n});return new Sf(r).toPromise()}async function AW(t,e){const n=Uy(t,!1).get(e),r=await new Sf(n).toPromise();return r===void 0?null:r.value}function _T(t,e){const n=Uy(t,!0).delete(e);return new Sf(n).toPromise()}const IW=800,RW=3;class M2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vy._getInstance(TW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NW(),!this.activeServiceWorker)return;this.sender=new EW(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await wT(e,yg,"1"),await _T(e,yg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_T(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Uy(s,!1).getAll();return new Sf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M2.type="LOCAL";const PW=M2;new Ef(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t,e){return e?Qi(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends uE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OW(t){return T2(t.auth,new mE(t),t.bypassAuthState)}function MW(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),S2(n,new mE(t),t.bypassAuthState)}async function LW(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),lW(n,new mE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OW;case"linkViaPopup":case"linkViaRedirect":return LW;case"reauthViaPopup":case"reauthViaRedirect":return MW;default:Ws(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=new Ef(2e3,1e4);class jc extends L2{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,jc.currentPopupAction&&jc.currentPopupAction.cancel(),jc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=fE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FW.get())};e()}}jc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW="pendingRedirect",xp=new Map;class UW extends L2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xp.get(this.auth._key());if(!e){try{const r=await $W(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xp.set(this.auth._key(),e)}return this.bypassAuthState||xp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $W(t,e){const n=qW(e),r=zW(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BW(t,e){xp.set(t._key(),e)}function zW(t){return Qi(t._redirectPersistence)}function qW(t){return vp(VW,t.config.apiKey,t.name)}async function HW(t,e,n=!1){if(Xr(t.app))return Promise.reject(Zi(t));const r=Vl(t),s=DW(r,e),a=await new UW(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=10*60*1e3;class KW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!F2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WW&&this.cachedEventUids.clear(),this.cachedEventUids.has(bT(e))}saveEventToCache(e){this.cachedEventUids.add(bT(e)),this.lastProcessedEventTime=Date.now()}}function bT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XW=/^https?/;async function ZW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QW(t);for(const n of e)try{if(JW(n))return}catch{}Ws(t,"unauthorized-domain")}function JW(t){const e=k0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!XW.test(n))return!1;if(YW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new Ef(3e4,6e4);function ET(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function t7(t){return new Promise((e,n)=>{var r,s,o;function a(){ET(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ET(),n(yi(t,"network-request-failed"))},timeout:e7.get()})}if(!((s=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=vi().gapi)===null||o===void 0)&&o.load)a();else{const l=zH("iframefcb");return vi()[l]=()=>{gapi.load?a():n(yi(t,"network-request-failed"))},_2(`${BH()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw wp=null,e})}let wp=null;function n7(t){return wp=wp||t7(t),wp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new Ef(5e3,15e3),s7="__/auth/iframe",i7="emulator/auth/iframe",o7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l7(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?aE(e,i7):`https://${t.config.authDomain}/${s7}`,r={apiKey:e.apiKey,appName:t.name,v:Fl},s=a7.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${_f(r).slice(1)}`}async function c7(t){const e=await n7(t),n=vi().gapi;return qe(n,t,"internal-error"),e.open({where:document.body,url:l7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o7,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=yi(t,"network-request-failed"),l=vi().setTimeout(()=>{o(a)},r7.get());function c(){vi().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d7=500,h7=600,f7="_blank",m7="http://localhost";class jT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p7(t,e,n,r=d7,s=h7){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},u7),{width:r.toString(),height:s.toString(),top:o,left:a}),u=fr().toLowerCase();n&&(l=m2(u)?f7:n),h2(u)&&(e=e||m7,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,y])=>`${m}${g}=${y},`,"");if(PH(u)&&l!=="_self")return g7(e||"",l),new jT(null);const f=window.open(e||"",l,d);qe(f,t,"popup-blocked");try{f.focus()}catch{}return new jT(f)}function g7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="__/auth/handler",v7="emulator/auth/handler",x7=encodeURIComponent("fac");async function NT(t,e,n,r,s,o){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fl,eventId:s};if(e instanceof j2){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",t8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Nf){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${x7}=${encodeURIComponent(c)}`:"";return`${w7(t)}?${_f(l).slice(1)}${u}`}function w7({config:t}){return t.emulator?aE(t,v7):`https://${t.authDomain}/${y7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="webStorageSupport";class _7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R2,this._completeRedirectFn=HW,this._overrideRedirectResult=BW}async _openPopup(e,n,r,s){var o;ho((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await NT(e,n,r,k0(),s);return p7(e,a,fE())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await NT(e,n,r,k0(),s);return jW(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ho(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await c7(e),r=new KW(e);return n.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lx,{type:Lx},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Lx];a!==void 0&&n(!!a),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x2()||f2()||cE()}}const b7=_7;var ST="@firebase/auth",TT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N7(t){_l(new xa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;qe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w2(t)},u=new VH(r,s,o,c);return QH(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_l(new xa("auth-internal",e=>{const n=Vl(e.getProvider("auth").getImmediate());return(r=>new E7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(ST,TT,j7(t)),gi(ST,TT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=5*60,T7=XP("authIdTokenMaxAge")||S7;let CT=null;const C7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>T7)return;const s=n==null?void 0:n.token;CT!==s&&(CT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function V2(t=Vu()){const e=My(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GH(t,{popupRedirectResolver:b7,persistence:[PW,_W,R2]}),r=XP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=C7(o.toString());gW(n,a,()=>a(n.currentUser)),pW(n,l=>a(l))}}const s=GP("auth");return s&&YH(n,`http://${s}`),n}function k7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=yi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",k7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N7("Browser");var A7="firebase",I7="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(A7,I7,"app");var kT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,U2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,j){function S(){}S.prototype=j.prototype,A.D=j.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(k,O,I){for(var N=Array(arguments.length-2),$=2;$<arguments.length;$++)N[$-2]=arguments[$];return j.prototype[O].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,j,S){S||(S=0);var k=Array(16);if(typeof j=="string")for(var O=0;16>O;++O)k[O]=j.charCodeAt(S++)|j.charCodeAt(S++)<<8|j.charCodeAt(S++)<<16|j.charCodeAt(S++)<<24;else for(O=0;16>O;++O)k[O]=j[S++]|j[S++]<<8|j[S++]<<16|j[S++]<<24;j=A.g[0],S=A.g[1],O=A.g[2];var I=A.g[3],N=j+(I^S&(O^I))+k[0]+3614090360&4294967295;j=S+(N<<7&4294967295|N>>>25),N=I+(O^j&(S^O))+k[1]+3905402710&4294967295,I=j+(N<<12&4294967295|N>>>20),N=O+(S^I&(j^S))+k[2]+606105819&4294967295,O=I+(N<<17&4294967295|N>>>15),N=S+(j^O&(I^j))+k[3]+3250441966&4294967295,S=O+(N<<22&4294967295|N>>>10),N=j+(I^S&(O^I))+k[4]+4118548399&4294967295,j=S+(N<<7&4294967295|N>>>25),N=I+(O^j&(S^O))+k[5]+1200080426&4294967295,I=j+(N<<12&4294967295|N>>>20),N=O+(S^I&(j^S))+k[6]+2821735955&4294967295,O=I+(N<<17&4294967295|N>>>15),N=S+(j^O&(I^j))+k[7]+4249261313&4294967295,S=O+(N<<22&4294967295|N>>>10),N=j+(I^S&(O^I))+k[8]+1770035416&4294967295,j=S+(N<<7&4294967295|N>>>25),N=I+(O^j&(S^O))+k[9]+2336552879&4294967295,I=j+(N<<12&4294967295|N>>>20),N=O+(S^I&(j^S))+k[10]+4294925233&4294967295,O=I+(N<<17&4294967295|N>>>15),N=S+(j^O&(I^j))+k[11]+2304563134&4294967295,S=O+(N<<22&4294967295|N>>>10),N=j+(I^S&(O^I))+k[12]+1804603682&4294967295,j=S+(N<<7&4294967295|N>>>25),N=I+(O^j&(S^O))+k[13]+4254626195&4294967295,I=j+(N<<12&4294967295|N>>>20),N=O+(S^I&(j^S))+k[14]+2792965006&4294967295,O=I+(N<<17&4294967295|N>>>15),N=S+(j^O&(I^j))+k[15]+1236535329&4294967295,S=O+(N<<22&4294967295|N>>>10),N=j+(O^I&(S^O))+k[1]+4129170786&4294967295,j=S+(N<<5&4294967295|N>>>27),N=I+(S^O&(j^S))+k[6]+3225465664&4294967295,I=j+(N<<9&4294967295|N>>>23),N=O+(j^S&(I^j))+k[11]+643717713&4294967295,O=I+(N<<14&4294967295|N>>>18),N=S+(I^j&(O^I))+k[0]+3921069994&4294967295,S=O+(N<<20&4294967295|N>>>12),N=j+(O^I&(S^O))+k[5]+3593408605&4294967295,j=S+(N<<5&4294967295|N>>>27),N=I+(S^O&(j^S))+k[10]+38016083&4294967295,I=j+(N<<9&4294967295|N>>>23),N=O+(j^S&(I^j))+k[15]+3634488961&4294967295,O=I+(N<<14&4294967295|N>>>18),N=S+(I^j&(O^I))+k[4]+3889429448&4294967295,S=O+(N<<20&4294967295|N>>>12),N=j+(O^I&(S^O))+k[9]+568446438&4294967295,j=S+(N<<5&4294967295|N>>>27),N=I+(S^O&(j^S))+k[14]+3275163606&4294967295,I=j+(N<<9&4294967295|N>>>23),N=O+(j^S&(I^j))+k[3]+4107603335&4294967295,O=I+(N<<14&4294967295|N>>>18),N=S+(I^j&(O^I))+k[8]+1163531501&4294967295,S=O+(N<<20&4294967295|N>>>12),N=j+(O^I&(S^O))+k[13]+2850285829&4294967295,j=S+(N<<5&4294967295|N>>>27),N=I+(S^O&(j^S))+k[2]+4243563512&4294967295,I=j+(N<<9&4294967295|N>>>23),N=O+(j^S&(I^j))+k[7]+1735328473&4294967295,O=I+(N<<14&4294967295|N>>>18),N=S+(I^j&(O^I))+k[12]+2368359562&4294967295,S=O+(N<<20&4294967295|N>>>12),N=j+(S^O^I)+k[5]+4294588738&4294967295,j=S+(N<<4&4294967295|N>>>28),N=I+(j^S^O)+k[8]+2272392833&4294967295,I=j+(N<<11&4294967295|N>>>21),N=O+(I^j^S)+k[11]+1839030562&4294967295,O=I+(N<<16&4294967295|N>>>16),N=S+(O^I^j)+k[14]+4259657740&4294967295,S=O+(N<<23&4294967295|N>>>9),N=j+(S^O^I)+k[1]+2763975236&4294967295,j=S+(N<<4&4294967295|N>>>28),N=I+(j^S^O)+k[4]+1272893353&4294967295,I=j+(N<<11&4294967295|N>>>21),N=O+(I^j^S)+k[7]+4139469664&4294967295,O=I+(N<<16&4294967295|N>>>16),N=S+(O^I^j)+k[10]+3200236656&4294967295,S=O+(N<<23&4294967295|N>>>9),N=j+(S^O^I)+k[13]+681279174&4294967295,j=S+(N<<4&4294967295|N>>>28),N=I+(j^S^O)+k[0]+3936430074&4294967295,I=j+(N<<11&4294967295|N>>>21),N=O+(I^j^S)+k[3]+3572445317&4294967295,O=I+(N<<16&4294967295|N>>>16),N=S+(O^I^j)+k[6]+76029189&4294967295,S=O+(N<<23&4294967295|N>>>9),N=j+(S^O^I)+k[9]+3654602809&4294967295,j=S+(N<<4&4294967295|N>>>28),N=I+(j^S^O)+k[12]+3873151461&4294967295,I=j+(N<<11&4294967295|N>>>21),N=O+(I^j^S)+k[15]+530742520&4294967295,O=I+(N<<16&4294967295|N>>>16),N=S+(O^I^j)+k[2]+3299628645&4294967295,S=O+(N<<23&4294967295|N>>>9),N=j+(O^(S|~I))+k[0]+4096336452&4294967295,j=S+(N<<6&4294967295|N>>>26),N=I+(S^(j|~O))+k[7]+1126891415&4294967295,I=j+(N<<10&4294967295|N>>>22),N=O+(j^(I|~S))+k[14]+2878612391&4294967295,O=I+(N<<15&4294967295|N>>>17),N=S+(I^(O|~j))+k[5]+4237533241&4294967295,S=O+(N<<21&4294967295|N>>>11),N=j+(O^(S|~I))+k[12]+1700485571&4294967295,j=S+(N<<6&4294967295|N>>>26),N=I+(S^(j|~O))+k[3]+2399980690&4294967295,I=j+(N<<10&4294967295|N>>>22),N=O+(j^(I|~S))+k[10]+4293915773&4294967295,O=I+(N<<15&4294967295|N>>>17),N=S+(I^(O|~j))+k[1]+2240044497&4294967295,S=O+(N<<21&4294967295|N>>>11),N=j+(O^(S|~I))+k[8]+1873313359&4294967295,j=S+(N<<6&4294967295|N>>>26),N=I+(S^(j|~O))+k[15]+4264355552&4294967295,I=j+(N<<10&4294967295|N>>>22),N=O+(j^(I|~S))+k[6]+2734768916&4294967295,O=I+(N<<15&4294967295|N>>>17),N=S+(I^(O|~j))+k[13]+1309151649&4294967295,S=O+(N<<21&4294967295|N>>>11),N=j+(O^(S|~I))+k[4]+4149444226&4294967295,j=S+(N<<6&4294967295|N>>>26),N=I+(S^(j|~O))+k[11]+3174756917&4294967295,I=j+(N<<10&4294967295|N>>>22),N=O+(j^(I|~S))+k[2]+718787259&4294967295,O=I+(N<<15&4294967295|N>>>17),N=S+(I^(O|~j))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+I&4294967295}r.prototype.u=function(A,j){j===void 0&&(j=A.length);for(var S=j-this.blockSize,k=this.B,O=this.h,I=0;I<j;){if(O==0)for(;I<=S;)s(this,A,I),I+=this.blockSize;if(typeof A=="string"){for(;I<j;)if(k[O++]=A.charCodeAt(I++),O==this.blockSize){s(this,k),O=0;break}}else for(;I<j;)if(k[O++]=A[I++],O==this.blockSize){s(this,k),O=0;break}}this.h=O,this.o+=j},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;var S=8*this.o;for(j=A.length-8;j<A.length;++j)A[j]=S&255,S/=256;for(this.u(A),A=Array(16),j=S=0;4>j;++j)for(var k=0;32>k;k+=8)A[S++]=this.g[j]>>>k&255;return A};function o(A,j){var S=l;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=j(A)}function a(A,j){this.h=j;for(var S=[],k=!0,O=A.length-1;0<=O;O--){var I=A[O]|0;k&&I==j||(S[O]=I,k=!1)}this.g=S}var l={};function c(A){return-128<=A&&128>A?o(A,function(j){return new a([j|0],0>j?-1:0)}):new a([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return x(u(-A));for(var j=[],S=1,k=0;A>=S;k++)j[k]=A/S|0,S*=4294967296;return new a(j,0)}function d(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return x(d(A.substring(1),j));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(j,8)),k=f,O=0;O<A.length;O+=8){var I=Math.min(8,A.length-O),N=parseInt(A.substring(O,O+I),j);8>I?(I=u(Math.pow(j,I)),k=k.j(I).add(u(N))):(k=k.j(S),k=k.add(u(N)))}return k}var f=c(0),m=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-x(this).m();for(var A=0,j=1,S=0;S<this.g.length;S++){var k=this.i(S);A+=(0<=k?k:4294967296+k)*j,j*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(y(this))return"0";if(v(this))return"-"+x(this).toString(A);for(var j=u(Math.pow(A,6)),S=this,k="";;){var O=C(S,j).g;S=b(S,O.j(j));var I=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=O,y(S))return I+k;for(;6>I.length;)I="0"+I;k=I+k}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function y(A){if(A.h!=0)return!1;for(var j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=b(this,A),v(A)?-1:y(A)?0:1};function x(A){for(var j=A.g.length,S=[],k=0;k<j;k++)S[k]=~A.g[k];return new a(S,~A.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(A){for(var j=Math.max(this.g.length,A.g.length),S=[],k=0,O=0;O<=j;O++){var I=k+(this.i(O)&65535)+(A.i(O)&65535),N=(I>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);k=N>>>16,I&=65535,N&=65535,S[O]=N<<16|I}return new a(S,S[S.length-1]&-2147483648?-1:0)};function b(A,j){return A.add(x(j))}t.j=function(A){if(y(this)||y(A))return f;if(v(this))return v(A)?x(this).j(x(A)):x(x(this).j(A));if(v(A))return x(this.j(x(A)));if(0>this.l(g)&&0>A.l(g))return u(this.m()*A.m());for(var j=this.g.length+A.g.length,S=[],k=0;k<2*j;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<A.g.length;O++){var I=this.i(k)>>>16,N=this.i(k)&65535,$=A.i(O)>>>16,U=A.i(O)&65535;S[2*k+2*O]+=N*U,w(S,2*k+2*O),S[2*k+2*O+1]+=I*U,w(S,2*k+2*O+1),S[2*k+2*O+1]+=N*$,w(S,2*k+2*O+1),S[2*k+2*O+2]+=I*$,w(S,2*k+2*O+2)}for(k=0;k<j;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=j;k<2*j;k++)S[k]=0;return new a(S,0)};function w(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function E(A,j){this.g=A,this.h=j}function C(A,j){if(y(j))throw Error("division by zero");if(y(A))return new E(f,f);if(v(A))return j=C(x(A),j),new E(x(j.g),x(j.h));if(v(j))return j=C(A,x(j)),new E(x(j.g),j.h);if(30<A.g.length){if(v(A)||v(j))throw Error("slowDivide_ only works with positive integers.");for(var S=m,k=j;0>=k.l(A);)S=R(S),k=R(k);var O=L(S,1),I=L(k,1);for(k=L(k,2),S=L(S,2);!y(k);){var N=I.add(k);0>=N.l(A)&&(O=O.add(S),I=N),k=L(k,1),S=L(S,1)}return j=b(A,O.j(j)),new E(O,j)}for(O=f;0<=A.l(j);){for(S=Math.max(1,Math.floor(A.m()/j.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),I=u(S),N=I.j(j);v(N)||0<N.l(A);)S-=k,I=u(S),N=I.j(j);y(I)&&(I=m),O=O.add(I),A=b(A,N)}return new E(O,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var j=Math.max(this.g.length,A.g.length),S=[],k=0;k<j;k++)S[k]=this.i(k)&A.i(k);return new a(S,this.h&A.h)},t.or=function(A){for(var j=Math.max(this.g.length,A.g.length),S=[],k=0;k<j;k++)S[k]=this.i(k)|A.i(k);return new a(S,this.h|A.h)},t.xor=function(A){for(var j=Math.max(this.g.length,A.g.length),S=[],k=0;k<j;k++)S[k]=this.i(k)^A.i(k);return new a(S,this.h^A.h)};function R(A){for(var j=A.g.length+1,S=[],k=0;k<j;k++)S[k]=A.i(k)<<1|A.i(k-1)>>>31;return new a(S,A.h)}function L(A,j){var S=j>>5;j%=32;for(var k=A.g.length-S,O=[],I=0;I<k;I++)O[I]=0<j?A.i(I+S)>>>j|A.i(I+S+1)<<32-j:A.i(I+S);return new a(O,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,ca=a}).apply(typeof kT<"u"?kT:typeof self<"u"?self:typeof window<"u"?window:{});var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $2,Pd,B2,_p,D0,z2,q2,H2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Um=="object"&&Um];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(h,_){if(_)e:{var T=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var G=h[D];if(!(G in T))break e;T=T[G]}h=h[h.length-1],D=T[h],_=_(D),_!=D&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var T=0,D=!1,G={next:function(){if(!D&&T<h.length){var ee=T++;return{value:_(ee,h[ee]),done:!1}}return D=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(h){return h||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function u(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,T){return h.call.apply(h.bind,arguments)}function f(h,_,T){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,D),h.apply(_,G)}}return function(){return h.apply(_,arguments)}}function m(h,_,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function y(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(D,G,ee){for(var ge=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)ge[Pt-2]=arguments[Pt];return _.prototype[G].apply(D,ge)}}function v(h){const _=h.length;if(0<_){const T=Array(_);for(let D=0;D<_;D++)T[D]=h[D];return T}return[]}function x(h,_){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(c(D)){const G=h.length||0,ee=D.length||0;h.length=G+ee;for(let ge=0;ge<ee;ge++)h[G+ge]=D[ge]}else h.push(D)}}class b{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function C(h){return C[" "](h),h}C[" "]=function(){};var R=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function L(h,_,T){for(const D in h)_.call(T,h[D],D,h)}function A(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function j(h){const _={};for(const T in h)_[T]=h[T];return _}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,_){let T,D;for(let G=1;G<arguments.length;G++){D=arguments[G];for(T in D)h[T]=D[T];for(let ee=0;ee<S.length;ee++)T=S[ee],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function O(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function I(h){l.setTimeout(()=>{throw h},0)}function N(){var h=H;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,T){const D=U.get();D.set(_,T),this.h?this.h.next=D:this.g=D,this.h=D}}var U=new b(()=>new V,h=>h.reset());class V{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,H=new $,Y=()=>{const h=l.Promise.resolve(void 0);z=()=>{h.then(q)}};var q=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(T){I(T)}var _=U;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}F=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};l.addEventListener("test",T,_),l.removeEventListener("test",T,_)}catch{}return h}();function Re(h,_){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(R){e:{try{C(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Re.aa.h.call(this)}}y(Re,re);var Pe={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Q=0;function ce(h,_,T,D,G){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!D,this.ha=G,this.key=++Q,this.da=this.fa=!1}function P(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Z(h){this.src=h,this.g={},this.h=0}Z.prototype.add=function(h,_,T,D,G){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var ge=we(h,_,D,G);return-1<ge?(_=h[ge],T||(_.fa=!1)):(_=new ce(_,this.src,ee,!!D,G),_.fa=T,h.push(_)),_};function J(h,_){var T=_.type;if(T in h.g){var D=h.g[T],G=Array.prototype.indexOf.call(D,_,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(D,G,1),ee&&(P(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function we(h,_,T,D){for(var G=0;G<h.length;++G){var ee=h[G];if(!ee.da&&ee.listener==_&&ee.capture==!!T&&ee.ha==D)return G}return-1}var mt="closure_lm_"+(1e6*Math.random()|0),gr={};function kn(h,_,T,D,G){if(Array.isArray(_)){for(var ee=0;ee<_.length;ee++)kn(h,_[ee],T,D,G);return null}return T=$e(T),h&&h[xe]?h.K(_,T,u(D)?!!D.capture:!!D,G):Hr(h,_,T,!1,D,G)}function Hr(h,_,T,D,G,ee){if(!_)throw Error("Invalid event type");var ge=u(G)?!!G.capture:!!G,Pt=le(h);if(Pt||(h[mt]=Pt=new Z(h)),T=Pt.add(_,T,D,ge,ee),T.proxy)return T;if(D=M(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)je||(G=ge),G===void 0&&(G=!1),h.addEventListener(_.toString(),D,G);else if(h.attachEvent)h.attachEvent(de(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function M(){function h(T){return _.call(h.src,h.listener,T)}const _=pe;return h}function B(h,_,T,D,G){if(Array.isArray(_))for(var ee=0;ee<_.length;ee++)B(h,_[ee],T,D,G);else D=u(D)?!!D.capture:!!D,T=$e(T),h&&h[xe]?(h=h.i,_=String(_).toString(),_ in h.g&&(ee=h.g[_],T=we(ee,T,D,G),-1<T&&(P(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete h.g[_],h.h--)))):h&&(h=le(h))&&(_=h.g[_.toString()],h=-1,_&&(h=we(_,T,D,G)),(T=-1<h?_[h]:null)&&X(T))}function X(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[xe])J(_.i,h);else{var T=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(T,D,h.capture):_.detachEvent?_.detachEvent(de(T),D):_.addListener&&_.removeListener&&_.removeListener(D),(T=le(_))?(J(T,h),T.h==0&&(T.src=null,_[mt]=null)):P(h)}}}function de(h){return h in gr?gr[h]:gr[h]="on"+h}function pe(h,_){if(h.da)h=!0;else{_=new Re(_,this);var T=h.listener,D=h.ha||h.src;h.fa&&X(h),h=T.call(D,_)}return h}function le(h){return h=h[mt],h instanceof Z?h:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(h){return typeof h=="function"?h:(h[ke]||(h[ke]=function(_){return h.handleEvent(_)}),h[ke])}function tt(){W.call(this),this.i=new Z(this),this.M=this,this.F=null}y(tt,W),tt.prototype[xe]=!0,tt.prototype.removeEventListener=function(h,_,T,D){B(this,h,_,T,D)};function Ye(h,_){var T,D=h.F;if(D)for(T=[];D;D=D.F)T.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new re(_,h);else if(_ instanceof re)_.target=_.target||h;else{var G=_;_=new re(D,h),k(_,G)}if(G=!0,T)for(var ee=T.length-1;0<=ee;ee--){var ge=_.g=T[ee];G=yr(ge,D,!0,_)&&G}if(ge=_.g=h,G=yr(ge,D,!0,_)&&G,G=yr(ge,D,!1,_)&&G,T)for(ee=0;ee<T.length;ee++)ge=_.g=T[ee],G=yr(ge,D,!1,_)&&G}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],D=0;D<T.length;D++)P(T[D]);delete h.g[_],h.h--}}this.F=null},tt.prototype.K=function(h,_,T,D){return this.i.add(String(h),_,!1,T,D)},tt.prototype.L=function(h,_,T,D){return this.i.add(String(h),_,!0,T,D)};function yr(h,_,T,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,ee=0;ee<_.length;++ee){var ge=_[ee];if(ge&&!ge.da&&ge.capture==T){var Pt=ge.listener,Vn=ge.ha||ge.src;ge.fa&&J(h.i,ge),G=Pt.call(Vn,D)!==!1&&G}}return G&&!D.defaultPrevented}function Ss(h,_,T){if(typeof h=="function")T&&(h=m(h,T));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:l.setTimeout(h,_||0)}function Ri(h){h.g=Ss(()=>{h.g=null,h.i&&(h.i=!1,Ri(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class za extends W{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(h){W.call(this),this.h=h,this.g={}}y(ei,W);var wo=[];function Ql(h){L(h.g,function(_,T){this.g.hasOwnProperty(T)&&X(_)},h),h.g={}}ei.prototype.N=function(){ei.aa.N.call(this),Ql(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=l.JSON.stringify,ni=l.JSON.parse,Ov=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Ge(){}Ge.prototype.h=null;function Rt(h){return h.h||(h.h=h.i())}function St(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){re.call(this,"d")}y(Pr,re);function _o(){re.call(this,"c")}y(_o,re);var Pi={},mN=null;function em(){return mN=mN||new tt}Pi.La="serverreachability";function pN(h){re.call(this,Pi.La,h)}y(pN,re);function ed(h){const _=em();Ye(_,new pN(_))}Pi.STAT_EVENT="statevent";function gN(h,_){re.call(this,Pi.STAT_EVENT,h),this.stat=_}y(gN,re);function vr(h){const _=em();Ye(_,new gN(_,h))}Pi.Ma="timingevent";function yN(h,_){re.call(this,Pi.Ma,h),this.size=_}y(yN,re);function td(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},_)}function nd(){this.g=!0}nd.prototype.xa=function(){this.g=!1};function JV(h,_,T,D,G,ee){h.info(function(){if(h.g)if(ee)for(var ge="",Pt=ee.split("&"),Vn=0;Vn<Pt.length;Vn++){var vt=Pt[Vn].split("=");if(1<vt.length){var Xn=vt[0];vt=vt[1];var Zn=Xn.split("_");ge=2<=Zn.length&&Zn[1]=="type"?ge+(Xn+"="+vt+"&"):ge+(Xn+"=redacted&")}}else ge=null;else ge=ee;return"XMLHTTP REQ ("+D+") [attempt "+G+"]: "+_+`
`+T+`
`+ge})}function eU(h,_,T,D,G,ee,ge){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+G+"]: "+_+`
`+T+`
`+ee+" "+ge})}function Yl(h,_,T,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+nU(h,T)+(D?" "+D:"")})}function tU(h,_){h.info(function(){return"TIMEOUT: "+_})}nd.prototype.info=function(){};function nU(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var D=T[h];if(!(2>D.length)){var G=D[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return ti(T)}catch{return _}}var tm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vN={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mv;function nm(){}y(nm,Ge),nm.prototype.g=function(){return new XMLHttpRequest},nm.prototype.i=function(){return{}},Mv=new nm;function bo(h,_,T,D){this.j=h,this.i=_,this.l=T,this.R=D||1,this.U=new ei(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xN}function xN(){this.i=null,this.g="",this.h=!1}var wN={},Lv={};function Fv(h,_,T){h.L=1,h.v=om(Di(_)),h.m=T,h.P=!0,_N(h,null)}function _N(h,_){h.F=Date.now(),rm(h),h.A=Di(h.v);var T=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),ON(T.i,"t",D),h.C=0,T=h.j.J,h.h=new xN,h.g=JN(h.j,T?_:null,!h.m),0<h.O&&(h.M=new za(m(h.Y,h,h.g),h.O)),_=h.U,T=h.g,D=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(wo[0]=G.toString()),G=wo);for(var ee=0;ee<G.length;ee++){var ge=kn(T,G[ee],D||_.handleEvent,!1,_.h||_);if(!ge)break;_.g[ge.key]=ge}_=h.H?j(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ed(),JV(h.i,h.u,h.A,h.l,h.R,h.m)}bo.prototype.ca=function(h){h=h.target;const _=this.M;_&&Oi(h)==3?_.j():this.Y(h)},bo.prototype.Y=function(h){try{if(h==this.g)e:{const Zn=Oi(this.g);var _=this.g.Ba();const Jl=this.g.Z();if(!(3>Zn)&&(Zn!=3||this.g&&(this.h.h||this.g.oa()||BN(this.g)))){this.J||Zn!=4||_==7||(_==8||0>=Jl?ed(3):ed(2)),Vv(this);var T=this.g.Z();this.X=T;t:if(bN(this)){var D=BN(this.g);h="";var G=D.length,ee=Oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qa(this),rd(this);var ge="";break t}this.h.i=new l.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ee&&_==G-1)});D.length=0,this.h.g+=h,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=T==200,eU(this.i,this.u,this.A,this.l,this.R,Zn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Vn=this.g;if((Pt=Vn.g?Vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pt)){var vt=Pt;break t}}vt=null}if(T=vt)Yl(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uv(this,T);else{this.o=!1,this.s=3,vr(12),qa(this),rd(this);break e}}if(this.P){T=!0;let Ts;for(;!this.J&&this.C<ge.length;)if(Ts=rU(this,ge),Ts==Lv){Zn==4&&(this.s=4,vr(14),T=!1),Yl(this.i,this.l,null,"[Incomplete Response]");break}else if(Ts==wN){this.s=4,vr(15),Yl(this.i,this.l,ge,"[Invalid Chunk]"),T=!1;break}else Yl(this.i,this.l,Ts,null),Uv(this,Ts);if(bN(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zn!=4||ge.length!=0||this.h.h||(this.s=1,vr(16),T=!1),this.o=this.o&&T,!T)Yl(this.i,this.l,ge,"[Invalid Chunked Response]"),qa(this),rd(this);else if(0<ge.length&&!this.W){this.W=!0;var Xn=this.j;Xn.g==this&&Xn.ba&&!Xn.M&&(Xn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Wv(Xn),Xn.M=!0,vr(11))}}else Yl(this.i,this.l,ge,null),Uv(this,ge);Zn==4&&qa(this),this.o&&!this.J&&(Zn==4?QN(this.j,this):(this.o=!1,rm(this)))}else wU(this.g),T==400&&0<ge.indexOf("Unknown SID")?(this.s=3,vr(12)):(this.s=0,vr(13)),qa(this),rd(this)}}}catch{}finally{}};function bN(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function rU(h,_){var T=h.C,D=_.indexOf(`
`,T);return D==-1?Lv:(T=Number(_.substring(T,D)),isNaN(T)?wN:(D+=1,D+T>_.length?Lv:(_=_.slice(D,D+T),h.C=D+T,_)))}bo.prototype.cancel=function(){this.J=!0,qa(this)};function rm(h){h.S=Date.now()+h.I,EN(h,h.I)}function EN(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=td(m(h.ba,h),_)}function Vv(h){h.B&&(l.clearTimeout(h.B),h.B=null)}bo.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(tU(this.i,this.A),this.L!=2&&(ed(),vr(17)),qa(this),this.s=2,rd(this)):EN(this,this.S-h)};function rd(h){h.j.G==0||h.J||QN(h.j,h)}function qa(h){Vv(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Ql(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Uv(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||$v(T.h,h))){if(!h.K&&$v(T.h,h)&&T.G==3){try{var D=T.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var G=D;if(G[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)hm(T),um(T);else break e;Hv(T),vr(18)}}else T.za=G[1],0<T.za-T.T&&37500>G[2]&&T.F&&T.v==0&&!T.C&&(T.C=td(m(T.Za,T),6e3));if(1>=SN(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Wa(T,11)}else if((h.K||T.g==h)&&hm(T),!w(_))for(G=T.Da.g.parse(_),_=0;_<G.length;_++){let vt=G[_];if(T.T=vt[0],vt=vt[1],T.G==2)if(vt[0]=="c"){T.K=vt[1],T.ia=vt[2];const Xn=vt[3];Xn!=null&&(T.la=Xn,T.j.info("VER="+T.la));const Zn=vt[4];Zn!=null&&(T.Aa=Zn,T.j.info("SVER="+T.Aa));const Jl=vt[5];Jl!=null&&typeof Jl=="number"&&0<Jl&&(D=1.5*Jl,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Ts=h.g;if(Ts){const mm=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mm){var ee=D.h;ee.g||mm.indexOf("spdy")==-1&&mm.indexOf("quic")==-1&&mm.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Bv(ee,ee.h),ee.h=null))}if(D.D){const Kv=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Kv&&(D.ya=Kv,Bt(D.I,D.D,Kv))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var ge=h;if(D.qa=ZN(D,D.J?D.ia:null,D.W),ge.K){TN(D.h,ge);var Pt=ge,Vn=D.L;Vn&&(Pt.I=Vn),Pt.B&&(Vv(Pt),rm(Pt)),D.g=ge}else KN(D);0<T.i.length&&dm(T)}else vt[0]!="stop"&&vt[0]!="close"||Wa(T,7);else T.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Wa(T,7):qv(T):vt[0]!="noop"&&T.l&&T.l.ta(vt),T.v=0)}}ed(4)}catch{}}var sU=class{constructor(h,_){this.g=h,this.map=_}};function jN(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NN(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function SN(h){return h.h?1:h.g?h.g.size:0}function $v(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Bv(h,_){h.g?h.g.add(_):h.h=_}function TN(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}jN.prototype.cancel=function(){if(this.i=CN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function CN(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return v(h.i)}function iU(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],T=h.length,D=0;D<T;D++)_.push(h[D]);return _}_=[],T=0;for(D in h)_[T++]=h[D];return _}function oU(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const D in h)_[T++]=D;return _}}}function kN(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=oU(h),D=iU(h),G=D.length,ee=0;ee<G;ee++)_.call(void 0,D[ee],T&&T[ee],h)}var AN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aU(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var D=h[T].indexOf("="),G=null;if(0<=D){var ee=h[T].substring(0,D);G=h[T].substring(D+1)}else ee=h[T];_(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ha(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ha){this.h=h.h,sm(this,h.j),this.o=h.o,this.g=h.g,im(this,h.s),this.l=h.l;var _=h.i,T=new od;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),IN(this,T),this.m=h.m}else h&&(_=String(h).match(AN))?(this.h=!1,sm(this,_[1]||"",!0),this.o=sd(_[2]||""),this.g=sd(_[3]||"",!0),im(this,_[4]),this.l=sd(_[5]||"",!0),IN(this,_[6]||"",!0),this.m=sd(_[7]||"")):(this.h=!1,this.i=new od(null,this.h))}Ha.prototype.toString=function(){var h=[],_=this.j;_&&h.push(id(_,RN,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(id(_,RN,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(id(T,T.charAt(0)=="/"?uU:cU,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",id(T,hU)),h.join("")};function Di(h){return new Ha(h)}function sm(h,_,T){h.j=T?sd(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function im(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function IN(h,_,T){_ instanceof od?(h.i=_,fU(h.i,h.h)):(T||(_=id(_,dU)),h.i=new od(_,h.h))}function Bt(h,_,T){h.i.set(_,T)}function om(h){return Bt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function sd(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function id(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,lU),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function lU(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var RN=/[#\/\?@]/g,cU=/[#\?:]/g,uU=/[#\?]/g,dU=/[#\?@]/g,hU=/#/g;function od(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Eo(h){h.g||(h.g=new Map,h.h=0,h.i&&aU(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}t=od.prototype,t.add=function(h,_){Eo(this),this.i=null,h=Xl(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function PN(h,_){Eo(h),_=Xl(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function DN(h,_){return Eo(h),_=Xl(h,_),h.g.has(_)}t.forEach=function(h,_){Eo(this),this.g.forEach(function(T,D){T.forEach(function(G){h.call(_,G,D,this)},this)},this)},t.na=function(){Eo(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let D=0;D<_.length;D++){const G=h[D];for(let ee=0;ee<G.length;ee++)T.push(_[D])}return T},t.V=function(h){Eo(this);let _=[];if(typeof h=="string")DN(this,h)&&(_=_.concat(this.g.get(Xl(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},t.set=function(h,_){return Eo(this),this.i=null,h=Xl(this,h),DN(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function ON(h,_,T){PN(h,_),0<T.length&&(h.i=null,h.g.set(Xl(h,_),v(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var D=_[T];const ee=encodeURIComponent(String(D)),ge=this.V(D);for(D=0;D<ge.length;D++){var G=ee;ge[D]!==""&&(G+="="+encodeURIComponent(String(ge[D]))),h.push(G)}}return this.i=h.join("&")};function Xl(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function fU(h,_){_&&!h.j&&(Eo(h),h.i=null,h.g.forEach(function(T,D){var G=D.toLowerCase();D!=G&&(PN(this,D),ON(this,G,T))},h)),h.j=_}function mU(h,_){const T=new nd;if(l.Image){const D=new Image;D.onload=g(jo,T,"TestLoadImage: loaded",!0,_,D),D.onerror=g(jo,T,"TestLoadImage: error",!1,_,D),D.onabort=g(jo,T,"TestLoadImage: abort",!1,_,D),D.ontimeout=g(jo,T,"TestLoadImage: timeout",!1,_,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function pU(h,_){const T=new nd,D=new AbortController,G=setTimeout(()=>{D.abort(),jo(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(ee=>{clearTimeout(G),ee.ok?jo(T,"TestPingServer: ok",!0,_):jo(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),jo(T,"TestPingServer: error",!1,_)})}function jo(h,_,T,D,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),D(T)}catch{}}function gU(){this.g=new Ov}function yU(h,_,T){const D=T||"";try{kN(h,function(G,ee){let ge=G;u(G)&&(ge=ti(G)),_.push(D+ee+"="+encodeURIComponent(ge))})}catch(G){throw _.push(D+"type="+encodeURIComponent("_badmap")),G}}function am(h){this.l=h.Ub||null,this.j=h.eb||!1}y(am,Ge),am.prototype.g=function(){return new lm(this.l,this.j)},am.prototype.i=function(h){return function(){return h}}({});function lm(h,_){tt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(lm,tt),t=lm.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ld(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||l).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ad(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ld(this)),this.g&&(this.readyState=3,ld(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;MN(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function MN(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ad(this):ld(this),this.readyState==3&&MN(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ad(this))},t.Qa=function(h){this.g&&(this.response=h,ad(this))},t.ga=function(){this.g&&ad(this)};function ad(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ld(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function ld(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(lm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function LN(h){let _="";return L(h,function(T,D){_+=D,_+=":",_+=T,_+=`\r
`}),_}function zv(h,_,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=LN(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Bt(h,_,T))}function hn(h){tt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(hn,tt);var vU=/^https?$/i,xU=["POST","PUT"];t=hn.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mv.g(),this.v=this.o?Rt(this.o):Rt(Mv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ee){FN(this,ee);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var G in D)T.set(G,D[G]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())T.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xU,_,void 0))||D||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ge]of T)this.g.setRequestHeader(ee,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$N(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){FN(this,ee)}};function FN(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,VN(h),cm(h)}function VN(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),cm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cm(this,!0)),hn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?UN(this):this.bb())},t.bb=function(){UN(this)};function UN(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Oi(h)!=4||h.Z()!=2)){if(h.u&&Oi(h)==4)Ss(h.Ea,0,h);else if(Ye(h,"readystatechange"),Oi(h)==4){h.h=!1;try{const ge=h.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var D;if(D=ge===0){var G=String(h.D).match(AN)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),D=!vU.test(G?G.toLowerCase():"")}T=D}if(T)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var ee=2<Oi(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",VN(h)}}finally{cm(h)}}}}function cm(h,_){if(h.g){$N(h);const T=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ye(h,"ready");try{T.onreadystatechange=D}catch{}}}function $N(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Oi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),ni(_)}};function BN(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wU(h){const _={};h=(h.g&&2<=Oi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(w(h[D]))continue;var T=O(h[D]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=_[G]||[];_[G]=ee,ee.push(T)}A(_,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cd(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function zN(h){this.Aa=0,this.i=[],this.j=new nd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cd("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cd("baseRetryDelayMs",5e3,h),this.cb=cd("retryDelaySeedMs",1e4,h),this.Wa=cd("forwardChannelMaxRetries",2,h),this.wa=cd("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new jN(h&&h.concurrentRequestLimit),this.Da=new gU,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zN.prototype,t.la=8,t.G=1,t.connect=function(h,_,T,D){vr(0),this.W=h,this.H=_||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=ZN(this,null,this.W),dm(this)};function qv(h){if(qN(h),h.G==3){var _=h.U++,T=Di(h.I);if(Bt(T,"SID",h.K),Bt(T,"RID",_),Bt(T,"TYPE","terminate"),ud(h,T),_=new bo(h,h.j,_),_.L=2,_.v=om(Di(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=_.v,T=!0),T||(_.g=JN(_.j,null),_.g.ea(_.v)),_.F=Date.now(),rm(_)}XN(h)}function um(h){h.g&&(Wv(h),h.g.cancel(),h.g=null)}function qN(h){um(h),h.u&&(l.clearTimeout(h.u),h.u=null),hm(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function dm(h){if(!NN(h.h)&&!h.s){h.s=!0;var _=h.Ga;z||Y(),F||(z(),F=!0),H.add(_,h),h.B=0}}function _U(h,_){return SN(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=td(m(h.Ga,h,_),YN(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new bo(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=j(ee),k(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=WN(this,G,_),T=Di(this.I),Bt(T,"RID",h),Bt(T,"CVER",22),this.D&&Bt(T,"X-HTTP-Session-Id",this.D),ud(this,T),ee&&(this.O?_="headers="+encodeURIComponent(String(LN(ee)))+"&"+_:this.m&&zv(T,this.m,ee)),Bv(this.h,G),this.Ua&&Bt(T,"TYPE","init"),this.P?(Bt(T,"$req",_),Bt(T,"SID","null"),G.T=!0,Fv(G,T,null)):Fv(G,T,_),this.G=2}}else this.G==3&&(h?HN(this,h):this.i.length==0||NN(this.h)||HN(this))};function HN(h,_){var T;_?T=_.l:T=h.U++;const D=Di(h.I);Bt(D,"SID",h.K),Bt(D,"RID",T),Bt(D,"AID",h.T),ud(h,D),h.m&&h.o&&zv(D,h.m,h.o),T=new bo(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=WN(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Bv(h.h,T),Fv(T,D,_)}function ud(h,_){h.H&&L(h.H,function(T,D){Bt(_,D,T)}),h.l&&kN({},function(T,D){Bt(_,D,T)})}function WN(h,_,T){T=Math.min(h.i.length,T);var D=h.l?m(h.l.Na,h.l,h):null;e:{var G=h.i;let ee=-1;for(;;){const ge=["count="+T];ee==-1?0<T?(ee=G[0].g,ge.push("ofs="+ee)):ee=0:ge.push("ofs="+ee);let Pt=!0;for(let Vn=0;Vn<T;Vn++){let vt=G[Vn].g;const Xn=G[Vn].map;if(vt-=ee,0>vt)ee=Math.max(0,G[Vn].g-100),Pt=!1;else try{yU(Xn,ge,"req"+vt+"_")}catch{D&&D(Xn)}}if(Pt){D=ge.join("&");break e}}}return h=h.i.splice(0,T),_.D=h,D}function KN(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;z||Y(),F||(z(),F=!0),H.add(_,h),h.v=0}}function Hv(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=td(m(h.Fa,h),YN(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,GN(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=td(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vr(10),um(this),GN(this))};function Wv(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function GN(h){h.g=new bo(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Di(h.qa);Bt(_,"RID","rpc"),Bt(_,"SID",h.K),Bt(_,"AID",h.T),Bt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Bt(_,"TO",h.ja),Bt(_,"TYPE","xmlhttp"),ud(h,_),h.m&&h.o&&zv(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=om(Di(_)),T.m=null,T.P=!0,_N(T,h)}t.Za=function(){this.C!=null&&(this.C=null,um(this),Hv(this),vr(19))};function hm(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function QN(h,_){var T=null;if(h.g==_){hm(h),Wv(h),h.g=null;var D=2}else if($v(h.h,_))T=_.D,TN(h.h,_),D=1;else return;if(h.G!=0){if(_.o)if(D==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var G=h.B;D=em(),Ye(D,new yN(D,T)),dm(h)}else KN(h);else if(G=_.s,G==3||G==0&&0<_.X||!(D==1&&_U(h,_)||D==2&&Hv(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),G){case 1:Wa(h,5);break;case 4:Wa(h,10);break;case 3:Wa(h,6);break;default:Wa(h,2)}}}function YN(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function Wa(h,_){if(h.j.info("Error code "+_),_==2){var T=m(h.fb,h),D=h.Xa;const G=!D;D=new Ha(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sm(D,"https"),om(D),G?mU(D.toString(),T):pU(D.toString(),T)}else vr(2);h.G=0,h.l&&h.l.sa(_),XN(h),qN(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))};function XN(h){if(h.G=0,h.ka=[],h.l){const _=CN(h.h);(_.length!=0||h.i.length!=0)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function ZN(h,_,T){var D=T instanceof Ha?Di(T):new Ha(T);if(D.g!="")_&&(D.g=_+"."+D.g),im(D,D.s);else{var G=l.location;D=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var ee=new Ha(null);D&&sm(ee,D),_&&(ee.g=_),G&&im(ee,G),T&&(ee.l=T),D=ee}return T=h.D,_=h.ya,T&&_&&Bt(D,T,_),Bt(D,"VER",h.la),ud(h,D),D}function JN(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new hn(new am({eb:T})):new hn(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eS(){}t=eS.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fm(){}fm.prototype.g=function(h,_){return new Wr(h,_)};function Wr(h,_){tt.call(this),this.g=new zN(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!w(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!w(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zl(this)}y(Wr,tt),Wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wr.prototype.close=function(){qv(this.g)},Wr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=ti(h),h=T);_.i.push(new sU(_.Ya++,h)),_.G==3&&dm(_)},Wr.prototype.N=function(){this.g.l=null,delete this.j,qv(this.g),delete this.g,Wr.aa.N.call(this)};function tS(h){Pr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}y(tS,Pr);function nS(){_o.call(this),this.status=1}y(nS,_o);function Zl(h){this.g=h}y(Zl,eS),Zl.prototype.ua=function(){Ye(this.g,"a")},Zl.prototype.ta=function(h){Ye(this.g,new tS(h))},Zl.prototype.sa=function(h){Ye(this.g,new nS)},Zl.prototype.ra=function(){Ye(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,Wr.prototype.send=Wr.prototype.o,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,H2=function(){return new fm},q2=function(){return em()},z2=Pi,D0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tm.NO_ERROR=0,tm.TIMEOUT=8,tm.HTTP_ERROR=6,_p=tm,vN.COMPLETE="complete",B2=vN,St.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Pd=St,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,$2=hn}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});const AT="@firebase/firestore",IT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sr.UNAUTHENTICATED=new sr(null),sr.GOOGLE_CREDENTIALS=new sr("google-credentials-uid"),sr.FIRST_PARTY=new sr("first-party-uid"),sr.MOCK_USER=new sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new rE("@firebase/firestore");function ac(){return Nl.logLevel}function Ce(t,...e){if(Nl.logLevel<=ct.DEBUG){const n=e.map(pE);Nl.debug(`Firestore (${Uu}): ${t}`,...n)}}function fo(t,...e){if(Nl.logLevel<=ct.ERROR){const n=e.map(pE);Nl.error(`Firestore (${Uu}): ${t}`,...n)}}function hu(t,...e){if(Nl.logLevel<=ct.WARN){const n=e.map(pE);Nl.warn(`Firestore (${Uu}): ${t}`,...n)}}function pE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t="Unexpected state"){const e=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: `+t;throw fo(e),new Error(e)}function jt(t,e){t||Ke()}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sr.UNAUTHENTICATED))}shutdown(){}}class P7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class D7{constructor(e){this.t=e,this.currentUser=sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ji,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ji)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(jt(typeof r.accessToken=="string"),new W2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string"),new sr(e)}}class O7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class M7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new O7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L7{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Xr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0);const r=o=>{o.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Ce("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new RT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(jt(typeof n.token=="string"),this.R=n.token,new RT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=F7(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function it(t,e){return t<e?-1:t>e?1:0}function O0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return it(r,s);{const o=K2(),a=V7(o.encode(PT(t,n)),o.encode(PT(e,n)));return a!==0?a:it(r,s)}}n+=r>65535?2:1}return it(t.length,e.length)}function PT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function V7(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return it(t[n],e[n]);return it(t.length,e.length)}function fu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=-62135596800,OT=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*OT);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<DT)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OT}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-DT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new ft(0,0))}static max(){return new Qe(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__name__";class oi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ke(),r===void 0?r=e.length-n:r>e.length-n&&Ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=oi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return it(e.length,n.length)}static compareSegments(e,n){const r=oi.isNumericId(e),s=oi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?oi.extractNumericId(e).compare(oi.extractNumericId(n)):O0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class Kt extends oi{construct(e,n,r){return new Kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Kt(n)}static emptyPath(){return new Kt([])}}const U7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends oi{construct(e,n,r){return new zn(e,n,r)}static isValidIdentifier(e){return U7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new zn([MT])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(o(),s++)}if(o(),a)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(n)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Kt.fromString(e))}static fromName(e){return new Ue(Kt.fromString(e).popFirst(5))}static empty(){return new Ue(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=-1;function $7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Qe.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new wa(s,Ue.empty(),e)}function B7(t){return new wa(t.readTime,t.key,Fh)}class wa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wa(Qe.min(),Ue.empty(),Fh)}static max(){return new wa(Qe.max(),Ue.empty(),Fh)}}function z7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(t.documentKey,e.documentKey),n!==0?n:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==q7)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&n()},c=>r(c))}),a=!0,o===s&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(s=>s?oe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,s)=>{const o=e.length,a=new Array(o);let l=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++l,l===o&&r(a)},d=>s(d))}})}static doWhile(e,n){return new oe((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function W7(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}$y.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=-1;function By(t){return t==null}function xg(t){return t===0&&1/t==-1/0}function K7(t){return typeof t=="number"&&Number.isInteger(t)&&!xg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="";function G7(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=LT(e)),e=Q7(t.get(n),e);return LT(e)}function Q7(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case Q2:n+="";break;default:n+=o}}return n}function LT(t){return t+Q2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $m(this.root,e,this.comparator,!1)}getReverseIterator(){return new $m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $m(this.root,e,this.comparator,!0)}}class $m{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Bn.RED,this.left=s??Bn.EMPTY,this.right=o??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Bn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,n,r,s,o){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pn(this.comparator);return n.data=e,n}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new Pn(zn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new X2("Invalid base64 string: "+o):o}}(e);return new Gn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const Y7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(t){if(jt(!!t),typeof t=="string"){let e=0;const n=Y7.exec(t);if(jt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vn(t.seconds),nanos:vn(t.nanos)}}function vn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ba(t){return typeof t=="string"?Gn.fromBase64String(t):Gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="server_timestamp",J2="__type__",eD="__previous_value__",tD="__local_write_time__";function yE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[J2])===null||n===void 0?void 0:n.stringValue)===Z2}function zy(t){const e=t.mapValue.fields[eD];return yE(e)?zy(e):e}function Vh(t){const e=_a(t.mapValue.fields[tD].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,n,r,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}const wg="(default)";class Uh{constructor(e,n){this.projectId=e,this.database=n||wg}static empty(){return new Uh("","")}get isDefaultDatabase(){return this.database===wg}isEqual(e){return e instanceof Uh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="__type__",rD="__max__",Bm={mapValue:{fields:{__type__:{stringValue:rD}}}},sD="__vector__",_g="value";function Ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yE(t)?4:J7(t)?9007199254740991:Z7(t)?10:11:Ke()}function ji(t,e){if(t===e)return!0;const n=Ea(t);if(n!==Ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vh(t).isEqual(Vh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=_a(s.timestampValue),l=_a(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return ba(s.bytesValue).isEqual(ba(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return vn(s.geoPointValue.latitude)===vn(o.geoPointValue.latitude)&&vn(s.geoPointValue.longitude)===vn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return vn(s.integerValue)===vn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=vn(s.doubleValue),l=vn(o.doubleValue);return a===l?xg(a)===xg(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return fu(t.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(FT(a)!==FT(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ji(a[c],l[c])))return!1;return!0}(t,e);default:return Ke()}}function $h(t,e){return(t.values||[]).find(n=>ji(n,e))!==void 0}function mu(t,e){if(t===e)return 0;const n=Ea(t),r=Ea(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=vn(o.integerValue||o.doubleValue),c=vn(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return UT(t.timestampValue,e.timestampValue);case 4:return UT(Vh(t),Vh(e));case 5:return O0(t.stringValue,e.stringValue);case 6:return function(o,a){const l=ba(o),c=ba(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=it(l[u],c[u]);if(d!==0)return d}return it(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=it(vn(o.latitude),vn(a.latitude));return l!==0?l:it(vn(o.longitude),vn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $T(t.arrayValue,e.arrayValue);case 10:return function(o,a){var l,c,u,d;const f=o.fields||{},m=a.fields||{},g=(l=f[_g])===null||l===void 0?void 0:l.arrayValue,y=(c=m[_g])===null||c===void 0?void 0:c.arrayValue,v=it(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:$T(g,y)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Bm.mapValue&&a===Bm.mapValue)return 0;if(o===Bm.mapValue)return 1;if(a===Bm.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=O0(c[f],d[f]);if(m!==0)return m;const g=mu(l[c[f]],u[d[f]]);if(g!==0)return g}return it(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ke()}}function UT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const n=_a(t),r=_a(e),s=it(n.seconds,r.seconds);return s!==0?s:it(n.nanos,r.nanos)}function $T(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=mu(n[s],r[s]);if(o)return o}return it(n.length,r.length)}function pu(t){return M0(t)}function M0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_a(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ba(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=M0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${M0(n.fields[a])}`;return s+"}"}(t.mapValue):Ke()}function bp(t){switch(Ea(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zy(t);return e?16+bp(e):16;case 5:return 2*t.stringValue.length;case 6:return ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+bp(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fa(r.fields,(o,a)=>{s+=o.length+bp(a)}),s}(t.mapValue);default:throw Ke()}}function BT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function L0(t){return!!t&&"integerValue"in t}function vE(t){return!!t&&"arrayValue"in t}function zT(t){return!!t&&"nullValue"in t}function qT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ep(t){return!!t&&"mapValue"in t}function Z7(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[nD])===null||n===void 0?void 0:n.stringValue)===sD}function Jd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function J7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ep(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jd(n)}setAll(e){let n=zn.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Jd(a):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Ep(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ep(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fa(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Vr(Jd(this.value))}}function iD(t){const e=[];return Fa(t.fields,(n,r)=>{const s=new zn([n]);if(Ep(r)){const o=iD(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new Jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,o,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ar(e,0,Qe.min(),Qe.min(),Qe.min(),Vr.empty(),0)}static newFoundDocument(e,n,r,s){return new ar(e,1,n,Qe.min(),r,s,0)}static newNoDocument(e,n){return new ar(e,2,n,Qe.min(),Qe.min(),Vr.empty(),0)}static newUnknownDocument(e,n){return new ar(e,3,n,Qe.min(),Qe.min(),Vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.position=e,this.inclusive=n}}function HT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=Ue.comparator(Ue.fromName(a.referenceValue),n.key):r=mu(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function WT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ji(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n="asc"){this.field=e,this.dir=n}}function eK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{}class Tn extends oD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nK(e,n,r):n==="array-contains"?new iK(e,r):n==="in"?new oK(e,r):n==="not-in"?new aK(e,r):n==="array-contains-any"?new lK(e,r):new Tn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rK(e,r):new sK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mu(n,this.value)):n!==null&&Ea(this.value)===Ea(n)&&this.matchesComparison(mu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ks extends oD{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ks(e,n)}matches(e){return aD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function aD(t){return t.op==="and"}function lD(t){return tK(t)&&aD(t)}function tK(t){for(const e of t.filters)if(e instanceof Ks)return!1;return!0}function F0(t){if(t instanceof Tn)return t.field.canonicalString()+t.op.toString()+pu(t.value);if(lD(t))return t.filters.map(e=>F0(e)).join(",");{const e=t.filters.map(n=>F0(n)).join(",");return`${t.op}(${e})`}}function cD(t,e){return t instanceof Tn?function(r,s){return s instanceof Tn&&r.op===s.op&&r.field.isEqual(s.field)&&ji(r.value,s.value)}(t,e):t instanceof Ks?function(r,s){return s instanceof Ks&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,l)=>o&&cD(a,s.filters[l]),!0):!1}(t,e):void Ke()}function uD(t){return t instanceof Tn?function(n){return`${n.field.canonicalString()} ${n.op} ${pu(n.value)}`}(t):t instanceof Ks?function(n){return n.op.toString()+" {"+n.getFilters().map(uD).join(" ,")+"}"}(t):"Filter"}class nK extends Tn{constructor(e,n,r){super(e,n,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class rK extends Tn{constructor(e,n){super(e,"in",n),this.keys=dD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sK extends Tn{constructor(e,n){super(e,"not-in",n),this.keys=dD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class iK extends Tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vE(n)&&$h(n.arrayValue,this.value)}}class oK extends Tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$h(this.value.arrayValue,n)}}class aK extends Tn{constructor(e,n){super(e,"not-in",n)}matches(e){if($h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$h(this.value.arrayValue,n)}}class lK extends Tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$h(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e,n=null,r=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.le=null}}function KT(t,e=null,n=[],r=[],s=null,o=null,a=null){return new cK(t,e,n,r,s,o,a)}function xE(t){const e=Xe(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>F0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),By(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pu(r)).join(",")),e.le=n}return e.le}function wE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WT(t.startAt,e.startAt)&&WT(t.endAt,e.endAt)}function V0(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n=null,r=[],s=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function uK(t,e,n,r,s,o,a,l){return new zu(t,e,n,r,s,o,a,l)}function qy(t){return new zu(t)}function GT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hD(t){return t.collectionGroup!==null}function eh(t){const e=Xe(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Pn(zn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new Bh(o,r))}),n.has(zn.keyField().canonicalString())||e.he.push(new Bh(zn.keyField(),r))}return e.he}function xi(t){const e=Xe(t);return e.Pe||(e.Pe=dK(e,eh(t))),e.Pe}function dK(t,e){if(t.limitType==="F")return KT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Bh(s.field,o)});const n=t.endAt?new bg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bg(t.startAt.position,t.startAt.inclusive):null;return KT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function U0(t,e){const n=t.filters.concat([e]);return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Eg(t,e,n){return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hy(t,e){return wE(xi(t),xi(e))&&t.limitType===e.limitType}function fD(t){return`${xE(xi(t))}|lt:${t.limitType}`}function lc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>uD(s)).join(", ")}]`),By(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>pu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>pu(s)).join(",")),`Target(${r})`}(xi(t))}; limitType=${t.limitType})`}function Wy(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of eh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=HT(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,eh(r),s)||r.endAt&&!function(a,l,c){const u=HT(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,eh(r),s))}(t,e)}function hK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mD(t){return(e,n)=>{let r=!1;for(const s of eh(t)){const o=fK(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function fK(t,e,n){const r=t.field.isKeyField()?Ue.comparator(e.key,n.key):function(o,a,l){const c=a.data.field(o),u=l.data.field(o);return c!==null&&u!==null?mu(c,u):Ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Y2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=new cn(Ue.comparator);function mo(){return mK}const pD=new cn(Ue.comparator);function Dd(...t){let e=pD;for(const n of t)e=e.insert(n.key,n);return e}function gD(t){let e=pD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function el(){return th()}function yD(){return th()}function th(){return new $l(t=>t.toString(),(t,e)=>t.isEqual(e))}const pK=new cn(Ue.comparator),gK=new Pn(Ue.comparator);function ut(...t){let e=gK;for(const n of t)e=e.add(n);return e}const yK=new Pn(it);function vK(){return yK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xg(e)?"-0":e}}function vD(t){return{integerValue:""+t}}function xK(t,e){return K7(e)?vD(e):_E(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this._=void 0}}function wK(t,e,n){return t instanceof zh?function(s,o){const a={fields:{[J2]:{stringValue:Z2},[tD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&yE(o)&&(o=zy(o)),o&&(a.fields[eD]=o),{mapValue:a}}(n,e):t instanceof qh?wD(t,e):t instanceof Hh?_D(t,e):function(s,o){const a=xD(s,o),l=QT(a)+QT(s.Ie);return L0(a)&&L0(s.Ie)?vD(l):_E(s.serializer,l)}(t,e)}function _K(t,e,n){return t instanceof qh?wD(t,e):t instanceof Hh?_D(t,e):n}function xD(t,e){return t instanceof jg?function(r){return L0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class zh extends Ky{}class qh extends Ky{constructor(e){super(),this.elements=e}}function wD(t,e){const n=bD(e);for(const r of t.elements)n.some(s=>ji(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hh extends Ky{constructor(e){super(),this.elements=e}}function _D(t,e){let n=bD(e);for(const r of t.elements)n=n.filter(s=>!ji(s,r));return{arrayValue:{values:n}}}class jg extends Ky{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function QT(t){return vn(t.integerValue||t.doubleValue)}function bD(t){return vE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,n){this.field=e,this.transform=n}}function EK(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qh&&s instanceof qh||r instanceof Hh&&s instanceof Hh?fu(r.elements,s.elements,ji):r instanceof jg&&s instanceof jg?ji(r.Ie,s.Ie):r instanceof zh&&s instanceof zh}(t.transform,e.transform)}class jK{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gy{}function ED(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qy(t.key,Nr.none()):new Tf(t.key,t.data,Nr.none());{const n=t.data,r=Vr.empty();let s=new Pn(zn.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Va(t.key,r,new Jr(s.toArray()),Nr.none())}}function NK(t,e,n){t instanceof Tf?function(s,o,a){const l=s.value.clone(),c=XT(s.fieldTransforms,o,a.transformResults);l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Va?function(s,o,a){if(!jp(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=XT(s.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(jD(s)),c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function nh(t,e,n,r){return t instanceof Tf?function(o,a,l,c){if(!jp(o.precondition,a))return l;const u=o.value.clone(),d=ZT(o.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Va?function(o,a,l,c){if(!jp(o.precondition,a))return l;const u=ZT(o.fieldTransforms,c,a),d=a.data;return d.setAll(jD(o)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,l){return jp(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function SK(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=xD(r.transform,s||null);o!=null&&(n===null&&(n=Vr.empty()),n.set(r.field,o))}return n||null}function YT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&fu(r,s,(o,a)=>EK(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tf extends Gy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Va extends Gy{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function XT(t,e,n){const r=new Map;jt(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);r.set(o.field,_K(a,l,n[s]))}return r}function ZT(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,wK(o,a,e))}return r}class Qy extends Gy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TK extends Gy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&NK(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yD();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=n.has(s.key)?null:l;const c=ED(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ut())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,(n,r)=>YT(n,r))&&fu(this.baseMutations,e.baseMutations,(n,r)=>YT(n,r))}}class bE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){jt(e.mutations.length===r.length);let s=function(){return pK}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new bE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kK=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,pt;function IK(t){switch(t){case ie.OK:return Ke();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ke()}}function ND(t){if(t===void 0)return fo("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Nn.OK:return ie.OK;case Nn.CANCELLED:return ie.CANCELLED;case Nn.UNKNOWN:return ie.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return ie.INTERNAL;case Nn.UNAVAILABLE:return ie.UNAVAILABLE;case Nn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Nn.NOT_FOUND:return ie.NOT_FOUND;case Nn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Nn.ABORTED:return ie.ABORTED;case Nn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Nn.DATA_LOSS:return ie.DATA_LOSS;default:return Ke()}}(pt=Nn||(Nn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=new ca([4294967295,4294967295],0);function JT(t){const e=K2().encode(t),n=new U2;return n.update(e),new Uint8Array(n.digest())}function eC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ca([n,r],0),new ca([s,o],0)]}class EE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Od(`Invalid padding: ${n}`);if(r<0)throw new Od(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Od(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Od(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=ca.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(ca.fromNumber(r)));return s.compare(RK)===1&&(s=new ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=JT(e),[r,s]=eC(n);for(let o=0;o<this.hashCount;o++){const a=this.Ae(r,s,o);if(!this.Re(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new EE(o,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const n=JT(e),[r,s]=eC(n);for(let o=0;o<this.hashCount;o++){const a=this.Ae(r,s,o);this.Ve(a)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Cf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yy(Qe.min(),s,new cn(it),mo(),ut())}}class Cf{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cf(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class SD{constructor(e,n){this.targetId=e,this.ge=n}}class TD{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tC{constructor(){this.pe=0,this.ye=nC(),this.we=Gn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ut(),n=ut(),r=ut();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ke()}}),new Cf(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=nC()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,jt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class PK{constructor(e){this.ke=e,this.qe=new Map,this.Qe=mo(),this.$e=zm(),this.Ue=zm(),this.Ke=new cn(it)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const o=s.target;if(V0(o))if(r===0){const a=new Ue(o.path);this.ze(n,a,ar.newNoDocument(a,Qe.min()))}else jt(r===1);else{const a=this.et(n);if(a!==r){const l=this.tt(e),c=l?this.nt(l,e,a):1;if(c!==0){this.Ye(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=ba(r).toUint8Array()}catch(c){if(c instanceof X2)return hu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new EE(a,s,o)}catch(c){return hu(c instanceof Od?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,o,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((o,a)=>{const l=this.Xe(a);if(l){if(o.current&&V0(l.target)){const c=new Ue(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,ar.newNoDocument(c,e))}o.ve&&(n.set(a,o.Fe()),o.Me())}});let r=ut();this.Ue.forEach((o,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.Qe.forEach((o,a)=>a.setReadTime(e));const s=new Yy(e,n,this.Ke,this.Qe,r);return this.Qe=mo(),this.$e=zm(),this.Ue=zm(),this.Ke=new cn(it),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new tC,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Pn(it),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Pn(it),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tC),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function zm(){return new cn(Ue.comparator)}function nC(){return new cn(Ue.comparator)}const DK={asc:"ASCENDING",desc:"DESCENDING"},OK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MK={and:"AND",or:"OR"};class LK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $0(t,e){return t.useProto3Json||By(e)?e:{value:e}}function Ng(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FK(t,e){return Ng(t,e.toTimestamp())}function wi(t){return jt(!!t),Qe.fromTimestamp(function(n){const r=_a(n);return new ft(r.seconds,r.nanos)}(t))}function jE(t,e){return B0(t,e).canonicalString()}function B0(t,e){const n=function(s){return new Kt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kD(t){const e=Kt.fromString(t);return jt(DD(e)),e}function z0(t,e){return jE(t.databaseId,e.path)}function Fx(t,e){const n=kD(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ue(ID(n))}function AD(t,e){return jE(t.databaseId,e)}function VK(t){const e=kD(t);return e.length===4?Kt.emptyPath():ID(e)}function q0(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ID(t){return jt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rC(t,e,n){return{name:z0(t,e),fields:n.value.mapValue.fields}}function UK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(jt(d===void 0||typeof d=="string"),Gn.fromBase64String(d||"")):(jt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?ie.UNKNOWN:ND(u.code);return new Se(d,u.message||"")}(a);n=new TD(r,s,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fx(t,r.document.name),o=wi(r.document.updateTime),a=r.document.createTime?wi(r.document.createTime):Qe.min(),l=new Vr({mapValue:{fields:r.document.fields}}),c=ar.newFoundDocument(s,o,a,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Np(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fx(t,r.document),o=r.readTime?wi(r.readTime):Qe.min(),a=ar.newNoDocument(s,o),l=r.removedTargetIds||[];n=new Np([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fx(t,r.document),o=r.removedTargetIds||[];n=new Np([],o,s,null)}else{if(!("filter"in e))return Ke();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new AK(s,o),l=r.targetId;n=new SD(l,a)}}return n}function $K(t,e){let n;if(e instanceof Tf)n={update:rC(t,e.key,e.value)};else if(e instanceof Qy)n={delete:z0(t,e.key)};else if(e instanceof Va)n={update:rC(t,e.key,e.data),updateMask:YK(e.fieldMask)};else{if(!(e instanceof TK))return Ke();n={verify:z0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const l=a.transform;if(l instanceof zh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jg)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw Ke()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:FK(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ke()}(t,e.precondition)),n}function BK(t,e){return t&&t.length>0?(jt(e!==void 0),t.map(n=>function(s,o){let a=s.updateTime?wi(s.updateTime):wi(o);return a.isEqual(Qe.min())&&(a=wi(o)),new jK(a,s.transformResults||[])}(n,e))):[]}function zK(t,e){return{documents:[AD(t,e.path)]}}function qK(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AD(t,s);const o=function(u){if(u.length!==0)return PD(Ks.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:cc(m.field),direction:KK(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=$0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:n,parent:s}}function HK(t){let e=VK(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){jt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){const m=RD(f);return m instanceof Ks&&lD(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(y){return new Bh(uc(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,By(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new bg(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new bg(g,m)}(n.endAt)),uK(e,s,a,o,l,"F",c,u)}function WK(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=uc(n.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=uc(n.unaryFilter.field);return Tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=uc(n.unaryFilter.field);return Tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=uc(n.unaryFilter.field);return Tn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(t):t.fieldFilter!==void 0?function(n){return Tn.create(uc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ks.create(n.compositeFilter.filters.map(r=>RD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ke()}}(n.compositeFilter.op))}(t):Ke()}function KK(t){return DK[t]}function GK(t){return OK[t]}function QK(t){return MK[t]}function cc(t){return{fieldPath:t.canonicalString()}}function uc(t){return zn.fromServerFormat(t.fieldPath)}function PD(t){return t instanceof Tn?function(n){if(n.op==="=="){if(qT(n.value))return{unaryFilter:{field:cc(n.field),op:"IS_NAN"}};if(zT(n.value))return{unaryFilter:{field:cc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qT(n.value))return{unaryFilter:{field:cc(n.field),op:"IS_NOT_NAN"}};if(zT(n.value))return{unaryFilter:{field:cc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cc(n.field),op:GK(n.op),value:n.value}}}(t):t instanceof Ks?function(n){const r=n.getFilters().map(s=>PD(s));return r.length===1?r[0]:{compositeFilter:{op:QK(n.op),filters:r}}}(t):Ke()}function YK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r,s,o=Qe.min(),a=Qe.min(),l=Gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e){this.Tt=e}}function ZK(t){const e=HK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Eg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(){this.Tn=new eG}addToCollectionParentIndex(e,n){return this.Tn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(wa.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(wa.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class eG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Pn(Kt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pn(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OD=41943040;class Mr{static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(OD,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new gu(0)}static Kn(){return new gu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="LruGarbageCollector",tG=1048576;function oC([t,e],[n,r]){const s=it(t,n);return s===0?it(e,r):s}class nG{constructor(e){this.Hn=e,this.buffer=new Pn(oC),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ce(iC,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bu(n)?Ce(iC,"Ignoring IndexedDB error during garbage collection: ",n):await $u(n)}await this.er(3e5)})}}class sG{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return oe.resolve($y.ae);const r=new nG(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(sC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sC):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,o,a,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ac()<=ct.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f})))}}function iG(t,e){return new sG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.changes=new $l(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nh(r.mutation,s,Jr.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ut()){const s=el();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=Dd();return o.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=el();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ut()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let o=mo();const a=th(),l=function(){return th()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Va)?o=o.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),nh(d.mutation,u,d.mutation.getFieldMask(),ft.now())):a.set(u.key,Jr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var f;return l.set(u,new aG(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=th();let s=new cn((a,l)=>a-l),o=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Jr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(s.get(l.batchId)||ut()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=yD();d.forEach(m=>{if(!o.has(m)){const g=ED(n.get(m),r.get(m));g!==null&&f.set(m,g),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return oe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):oe.resolve(el());let l=Fh,c=o;return a.next(u=>oe.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ut())).next(d=>({batchId:l,changes:gD(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next(r=>{let s=Dd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=Dd();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,c=>{const u=function(f,m){return new zu(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,ar.newInvalidDocument(d)))});let l=Dd();return a.forEach((c,u)=>{const d=o.get(c);d!==void 0&&nh(d.mutation,u,Jr.empty(),ft.now()),Wy(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return oe.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wi(s.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:ZK(s.bundledQuery),readTime:wi(s.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(){this.overlays=new cn(Ue.comparator),this.Rr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=el();return oe.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.Et(e,n,o)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=el(),o=n.length+1,a=new Ue(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new cn((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=el(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=el(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return oe.resolve(l)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new kK(n,r));let o=this.Rr.get(n);o===void 0&&(o=ut(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.Vr=new Pn(On.mr),this.gr=new Pn(On.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new On(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new On(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new Ue(new Kt([])),r=new On(n,e),s=new On(n,e+1),o=[];return this.gr.forEachInRange([r,s],a=>{this.wr(a),o.push(a.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ue(new Kt([])),r=new On(n,e),s=new On(n,e+1);let o=ut();return this.gr.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new On(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ue.comparator(e.key,n.key)||it(e.Cr,n.Cr)}static pr(e,n){return it(e.Cr,n.Cr)||Ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Pn(On.mr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CK(o,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new On(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return oe.resolve(a)}lookupMutationBatch(e,n){return oe.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?gE:this.Fr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),s=new On(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],a=>{const l=this.Or(a.Cr);o.push(l)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pn(it);return n.forEach(s=>{const o=new On(s,0),a=new On(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,a],l=>{r=r.add(l.Cr)})}),oe.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ue.isDocumentKey(o)||(o=o.child(""));const a=new On(new Ue(o),0);let l=new Pn(it);return this.Mr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Cr)),!0)},a),oe.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){jt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return oe.forEach(n.mutations,s=>{const o=new On(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new On(n,0),s=this.Mr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e){this.kr=e,this.docs=function(){return new cn(Ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(n))}getEntries(e,n){let r=mo();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():ar.newInvalidDocument(s))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=mo();const a=n.path,l=new Ue(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||z7(B7(d),r)<=0||(s.has(d.key)||Wy(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ke()}qr(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mG(this)}getSize(e){return oe.resolve(this.size)}}class mG extends oG{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e){this.persistence=e,this.Qr=new $l(n=>xE(n),wE),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new NE,this.targetCount=0,this.Kr=gu.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),oe.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new gu(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.zn(n),oe.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Qr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),oe.waitFor(o).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new $y(0),this.zr=!1,this.zr=!0,this.jr=new dG,this.referenceDelegate=e(this),this.Hr=new pG(this),this.indexManager=new JK,this.remoteDocumentCache=function(s){return new fG(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new XK(n),this.Yr=new cG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new hG(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const s=new gG(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,n){return oe.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class gG extends H7{constructor(e){super(),this.currentSequenceNumber=e}}class SE{constructor(e){this.persistence=e,this.ti=new NE,this.ni=null}static ri(e){return new SE(e)}get ii(){if(this.ni)return this.ni;throw Ke()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),oe.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.ii,r=>{const s=Ue.fromPath(r);return this.si(e,s).next(o=>{o||n.removeEntry(s,Qe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return oe.or([()=>oe.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Sg{constructor(e,n){this.persistence=e,this.oi=new $l(r=>G7(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=iG(this,n)}static ri(e,n){return new Sg(e,n)}Zr(){}Xr(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return oe.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?oe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,n).next(l=>{l||(r++,o.removeEntry(a,Qe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),oe.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bp(e.data.value)),n}ar(e,n,r){return oe.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return oe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=ut(),s=ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new TE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Qq()?8:W7(fr())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.rs(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ss(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new yG;return this._s(e,n,a).next(l=>{if(o.result=l,this.Xi)return this.us(e,n,a,l.size)})}).next(()=>o.result)}us(e,n,r,s){return r.documentReadCount<this.es?(ac()<=ct.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",lc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),oe.resolve()):(ac()<=ct.DEBUG&&Ce("QueryEngine","Query:",lc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(ac()<=ct.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",lc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(n))):oe.resolve())}rs(e,n){if(GT(n))return oe.resolve(null);let r=xi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Eg(n,null,"F"),r=xi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=ut(...o);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.cs(n,l);return this.ls(n,u,a,c.readTime)?this.rs(e,Eg(n,null,"F")):this.hs(e,u,n,c)}))})))}ss(e,n,r,s){return GT(n)||s.isEqual(Qe.min())?oe.resolve(null):this.ns.getDocuments(e,r).next(o=>{const a=this.cs(n,o);return this.ls(n,a,r,s)?oe.resolve(null):(ac()<=ct.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),lc(n)),this.hs(e,a,n,$7(s,Fh)).next(l=>l))})}cs(e,n){let r=new Pn(mD(e));return n.forEach((s,o)=>{Wy(e,o)&&(r=r.add(o))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,n,r){return ac()<=ct.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",lc(n)),this.ns.getDocumentsMatchingQuery(e,n,wa.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LocalStore",xG=3e8;class wG{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new cn(it),this.Is=new $l(o=>xE(o),wE),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lG(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function _G(t,e,n,r){return new wG(t,e,n,r)}async function LD(t,e){const n=Xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],l=[];let c=ut();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Rs:u,removedBatchIds:a,addedBatchIds:l}))})})}function bG(t,e){const n=Xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let g=oe.resolve();return m.forEach(y=>{g=g.next(()=>d.getEntry(c,y)).next(v=>{const x=u.docVersions.get(y);jt(x!==null),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ut();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function FD(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function EG(t,e){const n=Xe(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;l.push(n.Hr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Hr.addMatchingKeys(o,d.addedDocuments,f)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Gn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(f,g),function(v,x,b){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=xG?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,d)&&l.push(n.Hr.updateTargetData(o,g))});let c=mo(),u=ut();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(jG(o,a,e.documentUpdates).next(d=>{c=d.Vs,u=d.fs})),!r.isEqual(Qe.min())){const d=n.Hr.getLastRemoteSnapshotVersion(o).next(f=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(d)}return oe.waitFor(l).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Ts=s,o))}function jG(t,e,n){let r=ut(),s=ut();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=mo();return n.forEach((l,c)=>{const u=o.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Ce(CE,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Vs:a,fs:s}})}function NG(t,e){const n=Xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SG(t,e){const n=Xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(o=>o?(s=o,oe.resolve(s)):n.Hr.allocateTargetId(r).next(a=>(s=new Xo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function H0(t,e,n){const r=Xe(t),s=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Bu(a))throw a;Ce(CE,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function aC(t,e,n){const r=Xe(t);let s=Qe.min(),o=ut();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Xe(c),m=f.Is.get(d);return m!==void 0?oe.resolve(f.Ts.get(m)):f.Hr.getTargetData(u,d)}(r,a,xi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(a,e,n?s:Qe.min(),n?o:ut())).next(l=>(TG(r,hK(e),l),{documents:l,gs:o})))}function TG(t,e,n){let r=t.Es.get(e)||Qe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}class lC{constructor(){this.activeTargetIds=vK()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CG{constructor(){this.ho=new lC,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new lC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="ConnectivityMonitor";class uC{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ce(cC,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ce(cC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm=null;function W0(){return qm===null?qm=function(){return 268435456+Math.round(2147483648*Math.random())}():qm++,"0x"+qm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="RestConnection",AG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IG{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===wg?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,o){const a=W0(),l=this.bo(e,n.toUriEncodedString());Ce(Vx,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,l,c,r).then(u=>(Ce(Vx,`Received RPC '${e}' ${a}: `,u),u),u=>{throw hu(Vx,`RPC '${e}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Co(e,n,r,s,o,a){return this.So(e,n,r,s,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,n){const r=AG[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class PG extends IG{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const o=W0();return new Promise((a,l)=>{const c=new $2;c.setWithCredentials(!0),c.listenOnce(B2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _p.NO_ERROR:const d=c.getResponseJson();Ce(nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case _p.TIMEOUT:Ce(nr,`RPC '${e}' ${o} timed out`),l(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case _p.HTTP_ERROR:const f=c.getStatus();if(Ce(nr,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const y=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(b)>=0?b:ie.UNKNOWN}(g.status);l(new Se(y,g.message))}else l(new Se(ie.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Ce(nr,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(s);Ce(nr,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",u,r,15)})}Wo(e,n,r){const s=W0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=H2(),l=q2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");Ce(nr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=a.createWebChannel(d,c);let m=!1,g=!1;const y=new RG({Fo:x=>{g?Ce(nr,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(Ce(nr,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Ce(nr,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Mo:()=>f.close()}),v=(x,b,w)=>{x.listen(b,E=>{try{w(E)}catch(C){setTimeout(()=>{throw C},0)}})};return v(f,Pd.EventType.OPEN,()=>{g||(Ce(nr,`RPC '${e}' stream ${s} transport opened.`),y.Qo())}),v(f,Pd.EventType.CLOSE,()=>{g||(g=!0,Ce(nr,`RPC '${e}' stream ${s} transport closed`),y.Uo())}),v(f,Pd.EventType.ERROR,x=>{g||(g=!0,hu(nr,`RPC '${e}' stream ${s} transport errored:`,x),y.Uo(new Se(ie.UNAVAILABLE,"The operation could not be completed")))}),v(f,Pd.EventType.MESSAGE,x=>{var b;if(!g){const w=x.data[0];jt(!!w);const E=w,C=(E==null?void 0:E.error)||((b=E[0])===null||b===void 0?void 0:b.error);if(C){Ce(nr,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let L=function(S){const k=Nn[S];if(k!==void 0)return ND(k)}(R),A=C.message;L===void 0&&(L=ie.INTERNAL,A="Unknown error status: "+R+" with message "+C.message),g=!0,y.Uo(new Se(L,A)),f.close()}else Ce(nr,`RPC '${e}' stream ${s} received:`,w),y.Ko(w)}}),v(l,z2.STAT_EVENT,x=>{x.stat===D0.PROXY?Ce(nr,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===D0.NOPROXY&&Ce(nr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function Ux(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){return new LK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&Ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="PersistentStream";class UD{constructor(e,n,r,s,o,a,l,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new VD(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(fo(n.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new Se(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ce(dC,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(Ce(dC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DG extends UD{constructor(e,n,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=UK(this.serializer,e),r=function(o){if(!("targetChange"in o))return Qe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Qe.min():a.readTime?wi(a.readTime):Qe.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=q0(this.serializer),n.addTarget=function(o,a){let l;const c=a.target;if(l=V0(c)?{documents:zK(o,c)}:{query:qK(o,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=CD(o,a.resumeToken);const u=$0(o,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Qe.min())>0){l.readTime=Ng(o,a.snapshotVersion.toTimestamp());const u=$0(o,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=WK(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=q0(this.serializer),n.removeTarget=e,this.I_(n)}}class OG extends UD{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return jt(!!e.streamToken),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=BK(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=q0(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$K(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{}class LG extends MG{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.So(e,B0(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ie.UNKNOWN,o.toString())})}Co(e,n,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,B0(n,r),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ie.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class FG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fo(n),this.N_=!1):Ce("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class VG{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(a=>{r.enqueueAndForget(async()=>{Bl(this)&&(Ce(Sl,"Restarting streams for network reachability change."),await async function(c){const u=Xe(c);u.W_.add(4),await kf(u),u.j_.set("Unknown"),u.W_.delete(4),await Zy(u)}(this))})}),this.j_=new FG(r,s)}}async function Zy(t){if(Bl(t))for(const e of t.G_)await e(!0)}async function kf(t){for(const e of t.G_)await e(!1)}function $D(t,e){const n=Xe(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),RE(n)?IE(n):qu(n).c_()&&AE(n,e))}function kE(t,e){const n=Xe(t),r=qu(n);n.K_.delete(e),r.c_()&&BD(n,e),n.K_.size===0&&(r.c_()?r.P_():Bl(n)&&n.j_.set("Unknown"))}function AE(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qu(t).y_(e)}function BD(t,e){t.H_.Ne(e),qu(t).w_(e)}function IE(t){t.H_=new PK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),qu(t).start(),t.j_.B_()}function RE(t){return Bl(t)&&!qu(t).u_()&&t.K_.size>0}function Bl(t){return Xe(t).W_.size===0}function zD(t){t.H_=void 0}async function UG(t){t.j_.set("Online")}async function $G(t){t.K_.forEach((e,n)=>{AE(t,e)})}async function BG(t,e){zD(t),RE(t)?(t.j_.q_(e),IE(t)):t.j_.set("Unknown")}async function zG(t,e,n){if(t.j_.set("Online"),e instanceof TD&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.K_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.K_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(r){Ce(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tg(t,r)}else if(e instanceof Np?t.H_.We(e):e instanceof SD?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Qe.min()))try{const r=await FD(t.localStore);n.compareTo(r)>=0&&await function(o,a){const l=o.H_.ot(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.K_.get(u);d&&o.K_.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=o.K_.get(c);if(!d)return;o.K_.set(c,d.withResumeToken(Gn.EMPTY_BYTE_STRING,d.snapshotVersion)),BD(o,c);const f=new Xo(d.target,c,u,d.sequenceNumber);AE(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ce(Sl,"Failed to raise snapshot:",r),await Tg(t,r)}}async function Tg(t,e,n){if(!Bu(e))throw e;t.W_.add(1),await kf(t),t.j_.set("Offline"),n||(n=()=>FD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce(Sl,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Zy(t)})}function qD(t,e){return e().catch(n=>Tg(t,n,e))}async function Jy(t){const e=Xe(t),n=ja(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:gE;for(;qG(e);)try{const s=await NG(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,HG(e,s)}catch(s){await Tg(e,s)}HD(e)&&WD(e)}function qG(t){return Bl(t)&&t.U_.length<10}function HG(t,e){t.U_.push(e);const n=ja(t);n.c_()&&n.S_&&n.b_(e.mutations)}function HD(t){return Bl(t)&&!ja(t).u_()&&t.U_.length>0}function WD(t){ja(t).start()}async function WG(t){ja(t).C_()}async function KG(t){const e=ja(t);for(const n of t.U_)e.b_(n.mutations)}async function GG(t,e,n){const r=t.U_.shift(),s=bE.from(r,e,n);await qD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jy(t)}async function QG(t,e){e&&ja(t).S_&&await async function(r,s){if(function(a){return IK(a)&&a!==ie.ABORTED}(s.code)){const o=r.U_.shift();ja(r).h_(),await qD(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Jy(r)}}(t,e),HD(t)&&WD(t)}async function hC(t,e){const n=Xe(t);n.asyncQueue.verifyOperationInProgress(),Ce(Sl,"RemoteStore received new credentials");const r=Bl(n);n.W_.add(3),await kf(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Zy(n)}async function YG(t,e){const n=Xe(t);e?(n.W_.delete(2),await Zy(n)):e||(n.W_.add(2),await kf(n),n.j_.set("Unknown"))}function qu(t){return t.J_||(t.J_=function(n,r,s){const o=Xe(n);return o.M_(),new DG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:UG.bind(null,t),No:$G.bind(null,t),Lo:BG.bind(null,t),p_:zG.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),RE(t)?IE(t):t.j_.set("Unknown")):(await t.J_.stop(),zD(t))})),t.J_}function ja(t){return t.Y_||(t.Y_=function(n,r,s){const o=Xe(n);return o.M_(),new OG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:WG.bind(null,t),Lo:QG.bind(null,t),D_:KG.bind(null,t),v_:GG.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Jy(t)):(await t.Y_.stop(),t.U_.length>0&&(Ce(Sl,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,l=new PE(e,n,a,s,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DE(t,e){if(fo("AsyncQueue",`${e}: ${t}`),Bu(t))return new Se(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{static emptySet(e){return new Vc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ue.comparator(n.key,r.key):(n,r)=>Ue.comparator(n.key,r.key),this.keyedMap=Dd(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.Z_=new cn(Ue.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ke():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yu{constructor(e,n,r,s,o,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,o){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new yu(e,n,Vc.emptySet(n),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class ZG{constructor(){this.queries=mC(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Xe(n),o=s.queries;s.queries=mC(),o.forEach((a,l)=>{for(const c of l.ta)c.onError(r)})})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function mC(){return new $l(t=>fD(t),Hy)}async function OE(t,e){const n=Xe(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new XG,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(s,!0);break;case 1:o.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=DE(a,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&LE(n)}async function ME(t,e){const n=Xe(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const a=o.ta.indexOf(e);a>=0&&(o.ta.splice(a,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JG(t,e){const n=Xe(t);let r=!1;for(const s of e){const o=s.query,a=n.queries.get(o);if(a){for(const l of a.ta)l.oa(s)&&(r=!0);a.ea=s}}r&&LE(n)}function eQ(t,e,n){const r=Xe(t),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(n);r.queries.delete(e)}function LE(t){t.ia.forEach(e=>{e.next()})}var K0,pC;(pC=K0||(K0={}))._a="default",pC.Cache="cache";class FE{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==K0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.key=e}}class GD{constructor(e){this.key=e}}class tQ{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ut(),this.mutatedKeys=ut(),this.ya=mD(e),this.wa=new Vc(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new fC,s=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),g=Wy(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?y!==v&&(r.track({type:3,doc:g}),x=!0):this.va(m,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.ya(g,c)>0||u&&this.ya(g,u)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(g?(a=a.add(g),o=v?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{wa:a,Da:r,ls:l,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((d,f)=>function(g,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return v(g)-v(y)}(d.type,f.type)||this.ya(d.doc,f.doc)),this.Ca(r),s=s!=null&&s;const l=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,u=c!==this.ga;return this.ga=c,a.length!==0||u?{snapshot:new yu(this.query,e.wa,o,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new fC,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ut(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new GD(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new KD(r))}),n}Oa(e){this.fa=e.gs,this.pa=ut();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return yu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const VE="SyncEngine";class nQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rQ{constructor(e){this.key=e,this.Ba=!1}}class sQ{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new $l(l=>fD(l),Hy),this.qa=new Map,this.Qa=new Set,this.$a=new cn(Ue.comparator),this.Ua=new Map,this.Ka=new NE,this.Wa={},this.Ga=new Map,this.za=gu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function iQ(t,e,n=!0){const r=eO(t);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await QD(r,e,n,!0),s}async function oQ(t,e){const n=eO(t);await QD(n,e,!0,!1)}async function QD(t,e,n,r){const s=await SG(t.localStore,xi(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await aQ(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&$D(t.remoteStore,s),l}async function aQ(t,e,n,r,s){t.Ha=(f,m,g)=>async function(v,x,b,w){let E=x.view.ba(b);E.ls&&(E=await aC(v.localStore,x.query,!1).then(({documents:A})=>x.view.ba(A,E)));const C=w&&w.targetChanges.get(x.targetId),R=w&&w.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(E,v.isPrimaryClient,C,R);return yC(v,x.targetId,L.Ma),L.snapshot}(t,f,m,g);const o=await aC(t.localStore,e,!0),a=new tQ(e,o.gs),l=a.ba(o.documents),c=Cf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);yC(t,n,u.Ma);const d=new nQ(e,n,a);return t.ka.set(e,d),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),u.snapshot}async function lQ(t,e,n){const r=Xe(t),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(a=>!Hy(a,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await H0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kE(r.remoteStore,s.targetId),G0(r,s.targetId)}).catch($u)):(G0(r,s.targetId),await H0(r.localStore,s.targetId,!0))}async function cQ(t,e){const n=Xe(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kE(n.remoteStore,r.targetId))}async function uQ(t,e,n){const r=yQ(t);try{const s=await function(a,l){const c=Xe(a),u=ft.now(),d=l.reduce((g,y)=>g.add(y.key),ut());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=mo(),v=ut();return c.ds.getEntries(g,d).next(x=>{y=x,y.forEach((b,w)=>{w.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(x=>{f=x;const b=[];for(const w of l){const E=SK(w,f.get(w.key).overlayedDocument);E!=null&&b.push(new Va(w.key,E,iD(E.value.mapValue),Nr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(x=>{m=x;const b=x.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(g,x.batchId,b)})}).then(()=>({batchId:m.batchId,changes:gD(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Wa[a.currentUser.toKey()];u||(u=new cn(it)),u=u.insert(l,c),a.Wa[a.currentUser.toKey()]=u}(r,s.batchId,n),await Af(r,s.changes),await Jy(r.remoteStore)}catch(s){const o=DE(s,"Failed to persist write");n.reject(o)}}async function YD(t,e){const n=Xe(t);try{const r=await EG(n.localStore,e);e.targetChanges.forEach((s,o)=>{const a=n.Ua.get(o);a&&(jt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?jt(a.Ba):s.removedDocuments.size>0&&(jt(a.Ba),a.Ba=!1))}),await Af(n,r,e)}catch(r){await $u(r)}}function gC(t,e,n){const r=Xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((o,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Xe(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.ta)m.sa(l)&&(u=!0)}),u&&LE(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dQ(t,e,n){const r=Xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),o=s&&s.key;if(o){let a=new cn(Ue.comparator);a=a.insert(o,ar.newNoDocument(o,Qe.min()));const l=ut().add(o),c=new Yy(Qe.min(),new Map,new cn(it),a,l);await YD(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),UE(r)}else await H0(r.localStore,e,!1).then(()=>G0(r,e,n)).catch($u)}async function hQ(t,e){const n=Xe(t),r=e.batch.batchId;try{const s=await bG(n.localStore,e);ZD(n,r,null),XD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Af(n,s)}catch(s){await $u(s)}}async function fQ(t,e,n){const r=Xe(t);try{const s=await function(a,l){const c=Xe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(jt(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);ZD(r,e,n),XD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Af(r,s)}catch(s){await $u(s)}}function XD(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function ZD(t,e,n){const r=Xe(t);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function G0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||JD(t,r)})}function JD(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(kE(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),UE(t))}function yC(t,e,n){for(const r of n)r instanceof KD?(t.Ka.addReference(r.key,e),mQ(t,r)):r instanceof GD?(Ce(VE,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||JD(t,r.key)):Ke()}function mQ(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(Ce(VE,"New document in limbo: "+n),t.Qa.add(r),UE(t))}function UE(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Ue(Kt.fromString(e)),r=t.za.next();t.Ua.set(r,new rQ(n)),t.$a=t.$a.insert(n,r),$D(t.remoteStore,new Xo(xi(qy(n.path)),r,"TargetPurposeLimboResolution",$y.ae))}}async function Af(t,e,n){const r=Xe(t),s=[],o=[],a=[];r.ka.isEmpty()||(r.ka.forEach((l,c)=>{a.push(r.Ha(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=TE.Yi(c.targetId,u);o.push(f)}}))}),await Promise.all(a),r.La.p_(s),await async function(c,u){const d=Xe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>oe.forEach(u,m=>oe.forEach(m.Hi,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>oe.forEach(m.Ji,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Bu(f))throw f;Ce(CE,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=d.Ts.get(m),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);d.Ts=d.Ts.insert(m,v)}}}(r.localStore,o))}async function pQ(t,e){const n=Xe(t);if(!n.currentUser.isEqual(e)){Ce(VE,"User change. New user:",e.toKey());const r=await LD(n.localStore,e);n.currentUser=e,function(o,a){o.Ga.forEach(l=>{l.forEach(c=>{c.reject(new Se(ie.CANCELLED,a))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Af(n,r.Rs)}}function gQ(t,e){const n=Xe(t),r=n.Ua.get(e);if(r&&r.Ba)return ut().add(r.key);{let s=ut();const o=n.qa.get(e);if(!o)return s;for(const a of o){const l=n.ka.get(a);s=s.unionWith(l.view.Sa)}return s}}function eO(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dQ.bind(null,e),e.La.p_=JG.bind(null,e.eventManager),e.La.Ja=eQ.bind(null,e.eventManager),e}function yQ(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fQ.bind(null,e),e}class Cg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xy(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return _G(this.persistence,new vG,e.initialUser,this.serializer)}Xa(e){return new MD(SE.ri,this.serializer)}Za(e){return new CG}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cg.provider={build:()=>new Cg};class vQ extends Cg{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){jt(this.persistence.referenceDelegate instanceof Sg);const r=this.persistence.referenceDelegate.garbageCollector;return new rG(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new MD(r=>Sg.ri(r,n),this.serializer)}}class Q0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pQ.bind(null,this.syncEngine),await YG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZG}()}createDatastore(e){const n=Xy(e.databaseInfo.databaseId),r=function(o){return new PG(o)}(e.databaseInfo);return function(o,a,l,c){return new LG(o,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,l){return new VG(r,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gC(this.syncEngine,n,0),function(){return uC.D()?new uC:new kG}())}createSyncEngine(e,n){return function(s,o,a,l,c,u,d){const f=new sQ(s,o,a,l,c,u);return d&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Xe(s);Ce(Sl,"RemoteStore shutting down."),o.W_.add(5),await kf(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Q0.provider={build:()=>new Q0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="FirestoreClient";class xQ{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=sr.UNAUTHENTICATED,this.clientId=G2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Ce(Na,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Ce(Na,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=DE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $x(t,e){t.asyncQueue.verifyOperationInProgress(),Ce(Na,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wQ(t);Ce(Na,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hC(e.remoteStore,s)),t._onlineComponents=e}async function wQ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce(Na,"Using user provided OfflineComponentProvider");try{await $x(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hu("Error using user provided cache. Falling back to memory cache: "+n),await $x(t,new Cg)}}else Ce(Na,"Using default OfflineComponentProvider"),await $x(t,new vQ(void 0));return t._offlineComponents}async function tO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce(Na,"Using user provided OnlineComponentProvider"),await vC(t,t._uninitializedComponentsProvider._online)):(Ce(Na,"Using default OnlineComponentProvider"),await vC(t,new Q0))),t._onlineComponents}function _Q(t){return tO(t).then(e=>e.syncEngine)}async function kg(t){const e=await tO(t),n=e.eventManager;return n.onListen=iQ.bind(null,e.syncEngine),n.onUnlisten=lQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cQ.bind(null,e.syncEngine),n}function bQ(t,e,n={}){const r=new Ji;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,u){const d=new $E({next:m=>{d.su(),a.enqueueAndForget(()=>ME(o,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new Se(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Se(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new FE(qy(l.path),d,{includeMetadataChanges:!0,Ta:!0});return OE(o,f)}(await kg(t),t.asyncQueue,e,n,r)),r.promise}function EQ(t,e,n={}){const r=new Ji;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,u){const d=new $E({next:m=>{d.su(),a.enqueueAndForget(()=>ME(o,f)),m.fromCache&&c.source==="server"?u.reject(new Se(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new FE(l,d,{includeMetadataChanges:!0,Ta:!0});return OE(o,f)}(await kg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e,n){if(!n)throw new Se(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jQ(t,e,n,r){if(e===!0&&r===!0)throw new Se(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wC(t){if(!Ue.isDocumentKey(t))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _C(t){if(Ue.isDocumentKey(t))throw new Se(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ev(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ke()}function Sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ev(t);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NQ(t,e){if(e<=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="firestore.googleapis.com",bC=!0;class EC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sO,this.ssl=bC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bC;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tG)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tv{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R7;switch(r.type){case"firstParty":return new M7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xC.get(n);r&&(Ce("ComponentProvider","Removing Datastore"),xC.delete(n),r.terminate())}(this),Promise.resolve()}}function SQ(t,e,n,r={}){var s;const o=(t=Sr(t,tv))._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;o.host!==sO&&o.host!==l&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:!1,emulatorOptions:r});if(!wl(c,a)&&(t._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=sr.MOCK_USER;else{u=ZP(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new sr(f)}t._authCredentials=new P7(new W2(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class ur{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ua extends yo{constructor(e,n,r){super(e,n,qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new Ue(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function et(t,e,...n){if(t=Nt(t),rO("collection","path",e),t instanceof tv){const r=Kt.fromString(e,...n);return _C(r),new ua(t,null,r)}{if(!(t instanceof ur||t instanceof ua))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return _C(r),new ua(t.firestore,null,r)}}function Le(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=G2.newId()),rO("doc","path",e),t instanceof tv){const r=Kt.fromString(e,...n);return wC(r),new ur(t,null,new Ue(r))}{if(!(t instanceof ur||t instanceof ua))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return wC(r),new ur(t.firestore,t instanceof ua?t.converter:null,new Ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="AsyncQueue";class NC{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new VD(this,"async_queue_retry"),this.Su=()=>{const r=Ux();r&&Ce(jC,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Ux();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Ux();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Ji;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Bu(e))throw e;Ce(jC,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw fo("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=PE.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ke()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function SC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ni extends tv{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new NC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NC(e),this._firestoreClient=void 0,await e}}}function BE(t,e){const n=typeof t=="object"?t:Vu(),r=typeof t=="string"?t:wg,s=My(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=QP("firestore");o&&SQ(s,...o)}return s}function If(t){if(t._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TQ(t),t._firestoreClient}function TQ(t){var e,n,r;const s=t._freezeSettings(),o=function(l,c,u,d){return new X7(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nO(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new xQ(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vu(Gn.fromBase64String(e))}catch(n){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vu(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQ=/^__.*__$/;class kQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Va(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tf(e,this.data,n,this.fieldTransforms)}}class iO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Va(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class HE{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new HE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ag(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(oO(this.Lu)&&CQ.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class AQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xy(e)}ju(e,n,r,s=!1){return new HE({Lu:e,methodName:n,zu:r,path:zn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pf(t){const e=t._freezeSettings(),n=Xy(t._databaseId);return new AQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WE(t,e,n,r,s,o={}){const a=t.ju(o.merge||o.mergeFields?2:0,e,n,s);GE("Data must be an object, but it was:",a,r);const l=cO(r,a);let c,u;if(o.merge)c=new Jr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const f of o.mergeFields){const m=Y0(e,f,n);if(!a.contains(m))throw new Se(ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dO(d,m)||d.push(m)}c=new Jr(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new kQ(new Vr(l),c,u)}class rv extends nv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rv}}class KE extends nv{_toFieldTransform(e){return new bK(e.path,new zh)}isEqual(e){return e instanceof KE}}function aO(t,e,n,r){const s=t.ju(1,e,n);GE("Data must be an object, but it was:",s,r);const o=[],a=Vr.empty();Fa(r,(c,u)=>{const d=QE(e,c,n);u=Nt(u);const f=s.Uu(d);if(u instanceof rv)o.push(d);else{const m=Df(u,f);m!=null&&(o.push(d),a.set(d,m))}});const l=new Jr(o);return new iO(a,l,s.fieldTransforms)}function lO(t,e,n,r,s,o){const a=t.ju(1,e,n),l=[Y0(e,r,n)],c=[s];if(o.length%2!=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Y0(e,o[m])),c.push(o[m+1]);const u=[],d=Vr.empty();for(let m=l.length-1;m>=0;--m)if(!dO(u,l[m])){const g=l[m];let y=c[m];y=Nt(y);const v=a.Uu(g);if(y instanceof rv)u.push(g);else{const x=Df(y,v);x!=null&&(u.push(g),d.set(g,x))}}const f=new Jr(u);return new iO(d,f,a.fieldTransforms)}function IQ(t,e,n,r=!1){return Df(n,t.ju(r?4:3,e))}function Df(t,e){if(uO(t=Nt(t)))return GE("Unsupported field value:",e,t),cO(t,e);if(t instanceof nv)return function(r,s){if(!oO(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const l of r){let c=Df(l,s.Ku(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xK(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ft.fromDate(r);return{timestampValue:Ng(s.serializer,o)}}if(r instanceof ft){const o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ng(s.serializer,o)}}if(r instanceof zE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vu)return{bytesValue:CD(s.serializer,r._byteString)};if(r instanceof ur){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qE)return function(a,l){return{mapValue:{fields:{[nD]:{stringValue:sD},[_g]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Wu("VectorValues must only contain numeric values.");return _E(l.serializer,u)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${ev(r)}`)}(t,e)}function cO(t,e){const n={};return Y2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(t,(r,s)=>{const o=Df(s,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function uO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof zE||t instanceof vu||t instanceof ur||t instanceof nv||t instanceof qE)}function GE(t,e,n){if(!uO(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ev(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Y0(t,e,n){if((e=Nt(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return QE(t,e);throw Ag("Field path arguments must be of type string or ",t,!1,void 0,n)}const RQ=new RegExp("[~\\*/\\[\\]]");function QE(t,e,n){if(e.search(RQ)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rf(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ag(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Se(ie.INVALID_ARGUMENT,l+t+c)}function dO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PQ extends hO{data(){return super.data()}}function sv(t,e){return typeof e=="string"?QE(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YE{}class XE extends YE{}function Dt(t,e,...n){let r=[];e instanceof YE&&r.push(e),r=r.concat(n),function(o){const a=o.filter(c=>c instanceof ZE).length,l=o.filter(c=>c instanceof iv).length;if(a>1||a>0&&l>0)throw new Se(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class iv extends XE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new iv(e,n,r)}_apply(e){const n=this._parse(e);return mO(e._query,n),new yo(e.firestore,e.converter,U0(e._query,n))}_parse(e){const n=Pf(e.firestore);return function(o,a,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){CC(f,d);const y=[];for(const v of f)y.push(TC(c,o,v));m={arrayValue:{values:y}}}else m=TC(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||CC(f,d),m=IQ(l,a,f,d==="in"||d==="not-in");return Tn.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ct(t,e,n){const r=e,s=sv("where",t);return iv._create(s,r,n)}class ZE extends YE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ZE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ks.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let a=s;const l=o.getFlattenedFilters();for(const c of l)mO(a,c),a=U0(a,c)}(e._query,n),new yo(e.firestore,e.converter,U0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class JE extends XE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new JE(e,n)}_apply(e){const n=function(s,o,a){if(s.startAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bh(o,a)}(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,function(s,o){const a=s.explicitOrderBy.concat([o]);return new zu(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Tr(t,e="asc"){const n=e,r=sv("orderBy",t);return JE._create(r,n)}class ej extends XE{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ej(e,n,r)}_apply(e){return new yo(e.firestore,e.converter,Eg(e._query,this._limit,this._limitType))}}function X0(t){return NQ("limit",t),ej._create("limit",t,"F")}function TC(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new Se(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hD(e)&&n.indexOf("/")!==-1)throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Kt.fromString(n));if(!Ue.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return BT(t,new Ue(r))}if(n instanceof ur)return BT(t,n._key);throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ev(n)}.`)}function CC(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mO(t,e){const n=function(s,o){for(const a of s)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DQ{convertValue(e,n="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fa(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[_g].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>vn(a.doubleValue));return new qE(o)}convertGeoPoint(e){return new zE(vn(e.latitude),vn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vh(e));default:return null}}convertTimestamp(e){const n=_a(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Kt.fromString(e);jt(DD(r));const s=new Uh(r.get(1),r.get(3)),o=new Ue(r.popFirst(5));return s.isEqual(n)||fo(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pO extends hO{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Sp extends pO{data(e={}){return super.data(e)}}class gO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Md(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sp(this._firestore,this._userDataWriter,r.key,r,new Md(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Sp(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Md(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new Sp(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Md(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:OQ(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){t=Sr(t,ur);const e=Sr(t.firestore,Ni);return bQ(If(e),t._key).then(n=>yO(e,t,n))}class nj extends DQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new vu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,n)}}function Et(t){t=Sr(t,yo);const e=Sr(t.firestore,Ni),n=If(e),r=new nj(e);return fO(t._query),EQ(n,t._query).then(s=>new gO(e,r,t,s))}function us(t,e,n){t=Sr(t,ur);const r=Sr(t.firestore,Ni),s=tj(t.converter,e,n);return Of(r,[WE(Pf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Nr.none())])}function tn(t,e,n,...r){t=Sr(t,ur);const s=Sr(t.firestore,Ni),o=Pf(s);let a;return a=typeof(e=Nt(e))=="string"||e instanceof Rf?lO(o,"updateDoc",t._key,e,n,r):aO(o,"updateDoc",t._key,e),Of(s,[a.toMutation(t._key,Nr.exists(!0))])}function zl(t){return Of(Sr(t.firestore,Ni),[new Qy(t._key,Nr.none())])}function ov(t,e){const n=Sr(t.firestore,Ni),r=Le(t),s=tj(t.converter,e);return Of(n,[WE(Pf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}function MQ(t,...e){var n,r,s;t=Nt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||SC(e[a])||(o=e[a],a++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(SC(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,d;if(t instanceof ur)u=Sr(t.firestore,Ni),d=qy(t._key.path),c={next:f=>{e[a]&&e[a](yO(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Sr(t,yo);u=Sr(f.firestore,Ni),d=f._query;const m=new nj(u);c={next:g=>{e[a]&&e[a](new gO(u,m,f,g))},error:e[a+1],complete:e[a+2]},fO(t._query)}return function(m,g,y,v){const x=new $E(v),b=new FE(g,x,y);return m.asyncQueue.enqueueAndForget(async()=>OE(await kg(m),b)),()=>{x.su(),m.asyncQueue.enqueueAndForget(async()=>ME(await kg(m),b))}}(If(u),d,l,c)}function Of(t,e){return function(r,s){const o=new Ji;return r.asyncQueue.enqueueAndForget(async()=>uQ(await _Q(r),s,o)),o.promise}(If(t),e)}function yO(t,e,n){const r=n.docs.get(e._key),s=new nj(t);return new pO(t,s,e._key,r,new Md(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pf(e)}set(e,n,r){this._verifyNotCommitted();const s=Bx(e,this._firestore),o=tj(s.converter,n,r),a=WE(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Nr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Bx(e,this._firestore);let a;return a=typeof(n=Nt(n))=="string"||n instanceof Rf?lO(this._dataReader,"WriteBatch.update",o._key,n,r,s):aO(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Bx(e,this._firestore);return this._mutations=this._mutations.concat(new Qy(n._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bx(t,e){if((t=Nt(t)).firestore!==e)throw new Se(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function wt(){return new KE("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){return If(t=Sr(t,Ni)),new LQ(t,e=>Of(t,e))}(function(e,n=!0){(function(s){Uu=s})(Fl),_l(new xa("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),l=new Ni(new D7(r.getProvider("auth-internal")),new L7(a,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uh(u.options.projectId,d)}(a,s),a);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),gi(AT,IT,e),gi(AT,IT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="firebasestorage.googleapis.com",xO="storageBucket",FQ=2*60*1e3,VQ=10*60*1e3,UQ=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends Ai{constructor(e,n,r=0){super(zx(e),`Firebase Storage: ${n} (${zx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function zx(t){return"storage/"+t}function sj(){const t="An unknown error occurred, please check the error payload for server response.";return new dn(Qt.UNKNOWN,t)}function $Q(t){return new dn(Qt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BQ(t){return new dn(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dn(Qt.UNAUTHENTICATED,t)}function qQ(){return new dn(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function HQ(t){return new dn(Qt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wO(){return new dn(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _O(){return new dn(Qt.CANCELED,"User canceled the upload/download.")}function WQ(t){return new dn(Qt.INVALID_URL,"Invalid URL '"+t+"'.")}function KQ(t){return new dn(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GQ(){return new dn(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xO+"' property when initializing the app?")}function bO(){return new dn(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QQ(){return new dn(Qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function YQ(){return new dn(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XQ(t){return new dn(Qt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Z0(t){return new dn(Qt.INVALID_ARGUMENT,t)}function EO(){return new dn(Qt.APP_DELETED,"The Firebase app was deleted.")}function ZQ(t){return new dn(Qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rh(t,e){return new dn(Qt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _d(t){throw new dn(Qt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=es.makeFromUrl(e,n)}catch{return new es(e,"")}if(r.path==="")return r;throw KQ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${d}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},v=n===vO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",b=new RegExp(`^https?://${v}/${s}/${x}`,"i"),E=[{regex:l,indices:c,postModify:o},{regex:g,indices:y,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<E.length;C++){const R=E[C],L=R.regex.exec(e);if(L){const A=L[R.indices.bucket];let j=L[R.indices.path];j||(j=""),r=new es(A,j),R.postModify(r);break}}if(r==null)throw WQ(e);return r}}class JQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t,e,n){let r=1,s=null,o=null,a=!1,l=0;function c(){return l===2}let u=!1;function d(...x){u||(u=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(g,c())},x)}function m(){o&&clearTimeout(o)}function g(x,...b){if(u){m();return}if(x){m(),d.call(null,x,...b);return}if(c()||a){m(),d.call(null,x,...b);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,f(E)}let y=!1;function v(x){y||(y=!0,m(),!u&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),o=setTimeout(()=>{a=!0,v(!0)},n),v}function tY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(t){return t!==void 0}function rY(t){return typeof t=="function"}function sY(t){return typeof t=="object"&&!Array.isArray(t)}function av(t){return typeof t=="string"||t instanceof String}function kC(t){return ij()&&t instanceof Blob}function ij(){return typeof Blob<"u"}function AC(t,e,n,r){if(r<e)throw Z0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Z0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var cl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(cl||(cl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e,n,r,s,o,a,l,c,u,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Hm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const l=o.getErrorCode()===cl.NO_ERROR,c=o.getStatus();if(!l||NO(c,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===cl.ABORT;r(!1,new Hm(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Hm(u,o))})},n=(r,s)=>{const o=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());nY(c)?o(c):o()}catch(c){a(c)}else if(l!==null){const c=sj();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?EO():_O();a(c)}else{const c=wO();a(c)}};this.canceled_?n(!1,new Hm(!1,null,!0)):this.backoffId_=eY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uY(t,e,n,r,s,o,a=!0){const l=jO(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return lY(u,e),oY(u,n),aY(u,o),cY(u,r),new iY(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hY(...t){const e=dY();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ij())return new Blob(t);throw new dn(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t){if(typeof atob>"u")throw XQ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qx{constructor(e,n){this.data=e,this.contentType=n||null}}function pY(t,e){switch(t){case hi.RAW:return new qx(SO(e));case hi.BASE64:case hi.BASE64URL:return new qx(TO(t,e));case hi.DATA_URL:return new qx(yY(e),vY(e))}throw sj()}function SO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,a=t.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gY(t){let e;try{e=decodeURIComponent(t)}catch{throw rh(hi.DATA_URL,"Malformed data URL.")}return SO(e)}function TO(t,e){switch(t){case hi.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw rh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case hi.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw rh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mY(e)}catch(s){throw s.message.includes("polyfill")?s:rh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class CO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rh(hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xY(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yY(t){const e=new CO(t);return e.base64?TO(hi.BASE64,e.rest):gY(e.rest)}function vY(t){return new CO(t).contentType}function xY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){let r=0,s="";kC(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(kC(this.data_)){const r=this.data_,s=fY(r,e,n);return s===null?null:new zi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zi(r,!0)}}static getBlob(...e){if(ij()){const n=e.map(r=>r instanceof zi?r.data_:r);return new zi(hY.apply(null,n))}else{const n=e.map(a=>av(a)?pY(hi.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[o++]=a[l]}),new zi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){let e;try{e=JSON.parse(t)}catch{return null}return sY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _Y(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function AO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bY(t,e){return e}class xr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||bY}}let Wm=null;function EY(t){return!av(t)||t.length<2?t:AO(t)}function oj(){if(Wm)return Wm;const t=[];t.push(new xr("bucket")),t.push(new xr("generation")),t.push(new xr("metageneration")),t.push(new xr("name","fullPath",!0));function e(o,a){return EY(a)}const n=new xr("name");n.xform=e,t.push(n);function r(o,a){return a!==void 0?Number(a):a}const s=new xr("size");return s.xform=r,t.push(s),t.push(new xr("timeCreated")),t.push(new xr("updated")),t.push(new xr("md5Hash",null,!0)),t.push(new xr("cacheControl",null,!0)),t.push(new xr("contentDisposition",null,!0)),t.push(new xr("contentEncoding",null,!0)),t.push(new xr("contentLanguage",null,!0)),t.push(new xr("contentType",null,!0)),t.push(new xr("metadata","customMetadata",!0)),Wm=t,Wm}function jY(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new es(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function NY(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const a=n[o];r[a.local]=a.xform(r,e[a.server])}return jY(r,t),r}function IO(t,e,n){const r=kO(e);return r===null?null:NY(t,r,n)}function SY(t,e,n,r){const s=kO(e);if(s===null||!av(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(u=>{const d=t.bucket,f=t.fullPath,m="/b/"+a(d)+"/o/"+a(f),g=Hu(m,n,r),y=jO({alt:"media",token:u});return g+y})[0]}function RO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class ql{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(!t)throw sj()}function aj(t,e){function n(r,s){const o=IO(t,s,e);return eo(o!==null),o}return n}function TY(t,e){function n(r,s){const o=IO(t,s,e);return eo(o!==null),SY(o,s,t.host,t._protocol)}return n}function Mf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=qQ():s=zQ():n.getStatus()===402?s=BQ(t.bucket):n.getStatus()===403?s=HQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function lj(t){const e=Mf(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=$Q(t.path)),o.serverResponse=s.serverResponse,o}return n}function CY(t,e,n){const r=e.fullServerUrl(),s=Hu(r,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,l=new ql(s,o,aj(t,n),a);return l.errorHandler=lj(e),l}function kY(t,e,n){const r=e.fullServerUrl(),s=Hu(r,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,l=new ql(s,o,TY(t,n),a);return l.errorHandler=lj(e),l}function AY(t,e){const n=e.fullServerUrl(),r=Hu(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function a(c,u){}const l=new ql(r,s,a,o);return l.successCodes=[200,204],l.errorHandler=lj(e),l}function IY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=IY(null,e)),r}function DO(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let E="";for(let C=0;C<2;C++)E=E+Math.random().toString().slice(2);return E}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const u=PO(e,r,s),d=RO(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=zi.getBlob(f,r,m);if(g===null)throw bO();const y={name:u.fullPath},v=Hu(o,t.host,t._protocol),x="POST",b=t.maxUploadRetryTime,w=new ql(v,x,aj(t,n),b);return w.urlParams=y,w.headers=a,w.body=g.uploadData(),w.errorHandler=Mf(e),w}class Ig{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function cj(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{eo(!1)}return eo(!!n&&(e||["active"]).indexOf(n)!==-1),n}function RY(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),a=PO(e,r,s),l={name:a.fullPath},c=Hu(o,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},f=RO(a,n),m=t.maxUploadRetryTime;function g(v){cj(v);let x;try{x=v.getResponseHeader("X-Goog-Upload-URL")}catch{eo(!1)}return eo(av(x)),x}const y=new ql(c,u,g,m);return y.urlParams=l,y.headers=d,y.body=f,y.errorHandler=Mf(e),y}function PY(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function o(u){const d=cj(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{eo(!1)}f||eo(!1);const m=Number(f);return eo(!isNaN(m)),new Ig(m,r.size(),d==="final")}const a="POST",l=t.maxUploadRetryTime,c=new ql(n,a,o,l);return c.headers=s,c.errorHandler=Mf(e),c}const IC=256*1024;function DY(t,e,n,r,s,o,a,l){const c=new Ig(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw QQ();const u=c.total-c.current;let d=u;s>0&&(d=Math.min(d,s));const f=c.current,m=f+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const y={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${c.current}`},v=r.slice(f,m);if(v===null)throw bO();function x(C,R){const L=cj(C,["active","final"]),A=c.current+d,j=r.size();let S;return L==="final"?S=aj(e,o)(C,R):S=null,new Ig(A,j,L==="final",S)}const b="POST",w=e.maxUploadRetryTime,E=new ql(n,b,x,w);return E.headers=y,E.body=v.uploadData(),E.progressCallback=l||null,E.errorHandler=Mf(t),E}const Lr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hx(t){switch(t){case"running":case"pausing":case"canceling":return Lr.RUNNING;case"paused":return Lr.PAUSED;case"success":return Lr.SUCCESS;case"canceled":return Lr.CANCELED;case"error":return Lr.ERROR;default:return Lr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e,n,r){if(rY(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class MY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw _d("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _d("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _d("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _d("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _d("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LY extends MY{initXhr(){this.xhr_.responseType="text"}}function Uo(){return new LY}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=oj(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(NO(s.status,[]))if(o)s=wO();else{this.sleepTime=Math.max(this.sleepTime*2,UQ),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Qt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=RY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Uo,e,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=PY(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(s,Uo,n,r);this._request=o,o.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=IC*this._chunkMultiplier,n=new Ig(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,o)=>{let a;try{a=DY(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(a,Uo,s,o,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){IC*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=CY(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Uo,e,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=DO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Uo,e,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=_O(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Hx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const o=new OY(n||void 0,r||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Hx(this._state)){case Lr.SUCCESS:tc(this._resolve.bind(null,this.snapshot))();break;case Lr.CANCELED:case Lr.ERROR:const n=this._reject;tc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Hx(this._state)){case Lr.RUNNING:case Lr.PAUSED:e.next&&tc(e.next.bind(e,this.snapshot))();break;case Lr.SUCCESS:e.complete&&tc(e.complete.bind(e))();break;case Lr.CANCELED:case Lr.ERROR:e.error&&tc(e.error.bind(e,this._error))();break;default:e.error&&tc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this._service=e,n instanceof es?this._location=n:this._location=es.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tl(e,n)}get root(){const e=new es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AO(this._location.path)}get storage(){return this._service}get parent(){const e=wY(this._location.path);if(e===null)return null;const n=new es(this._location.bucket,e);return new Tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ZQ(e)}}function VY(t,e,n){t._throwIfRoot("uploadBytes");const r=DO(t.storage,t._location,oj(),new zi(e,!0),n);return t.storage.makeRequestWithTokens(r,Uo).then(s=>({metadata:s,ref:t}))}function UY(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new FY(t,new zi(e),n)}function $Y(t){t._throwIfRoot("getDownloadURL");const e=kY(t.storage,t._location,oj());return t.storage.makeRequestWithTokens(e,Uo).then(n=>{if(n===null)throw YQ();return n})}function BY(t){t._throwIfRoot("deleteObject");const e=AY(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Uo)}function zY(t,e){const n=_Y(t._location.path,e),r=new es(t._location.bucket,n);return new Tl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t){return/^[A-Za-z]+:\/\//.test(t)}function HY(t,e){return new Tl(t,e)}function OO(t,e){if(t instanceof uj){const n=t;if(n._bucket==null)throw GQ();const r=new Tl(n,n._bucket);return e!=null?OO(r,e):r}else return e!==void 0?zY(t,e):t}function WY(t,e){if(e&&qY(e)){if(t instanceof uj)return HY(t,e);throw Z0("To use ref(service, url), the first argument must be a Storage instance.")}else return OO(t,e)}function RC(t,e){const n=e==null?void 0:e[xO];return n==null?null:es.makeFromBucketSpec(n,t)}function KY(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ZP(s,t.app.options.projectId))}class uj{constructor(e,n,r,s,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=vO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FQ,this._maxUploadRetryTime=VQ,this._requests=new Set,s!=null?this._bucket=es.makeFromBucketSpec(s,this._host):this._bucket=RC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=es.makeFromBucketSpec(this._url,e):this._bucket=RC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tl(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new JQ(EO());{const a=uY(e,this._appId,r,s,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const PC="@firebase/storage",DC="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="storage";function GY(t,e,n){return t=Nt(t),VY(t,e,n)}function QY(t,e,n){return t=Nt(t),UY(t,e,n)}function LO(t){return t=Nt(t),$Y(t)}function YY(t){return t=Nt(t),BY(t)}function J0(t,e){return t=Nt(t),WY(t,e)}function dj(t=Vu(),e){t=Nt(t);const r=My(t,MO).getImmediate({identifier:e}),s=QP("storage");return s&&XY(r,...s),r}function XY(t,e,n,r={}){KY(t,e,n,r)}function ZY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new uj(n,r,s,e,Fl)}function JY(){_l(new xa(MO,ZY,"PUBLIC").setMultipleInstances(!0)),gi(PC,DC,""),gi(PC,DC,"esm2017")}JY();const eX={apiKey:"AIzaSyBqwZcpuOKZ9uCVZEBgynbxaaH_dtr_AMk",authDomain:"crm-pro-e2df3.firebaseapp.com",projectId:"crm-pro-e2df3",storageBucket:"crm-pro-e2df3.firebasestorage.app",messagingSenderId:"201619768522",appId:"1:201619768522:web:62bb56cd9422ac2fac2033",measurementId:"demo-measurement-id"},hj=iE().length?Vu():Ly(eX),Rs=V2(hj),Ee=BE(hj);dj(hj);const FO=p.createContext(null);function Dn(){const t=p.useContext(FO);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function VO({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0);async function o(f,m,g){try{const y=await hE(Rs,f,m);Rs.currentUser&&await R0(Rs.currentUser,{displayName:g}),await us(Le(Ee,"users",y.user.uid),{email:f,displayName:g,role:"user",createdAt:new Date})}catch(y){throw console.error("Error signing up:",y),y}}async function a(f,m){try{console.log("Login attempt for:",f);const g=await dW(Rs,f,m);return console.log("Login successful for:",g.user.email),g.user}catch(g){throw console.error("Error logging in:",g),g}}async function l(){try{await vW(Rs)}catch(f){throw console.error("Error logging out:",f),f}}async function c(f){if(Rs.currentUser)try{await R0(Rs.currentUser,{displayName:f}),n({...e,displayName:f})}catch(m){throw console.error("Error updating profile:",m),m}}function u(){return(e==null?void 0:e.role)==="admin"}p.useEffect(()=>yW(Rs,async m=>{if(console.log("Auth state changed:",m?`User logged in: ${m.email}`:"User logged out"),m)try{const y=(await un(Le(Ee,"users",m.uid))).data(),v={...m,role:(y==null?void 0:y.role)||"user"};n(v)}catch(g){console.error("Error fetching user data:",g),n(m)}else n(null);s(!1)}),[]);const d={currentUser:e,loading:r,login:a,logout:l,signup:o,updateUserProfile:c,isAdmin:u};return i.jsx(FO.Provider,{value:d,children:!r&&t})}const tX=({redirectTo:t="/login"})=>{const{currentUser:e,loading:n}=Dn();return p.useEffect(()=>{console.log("ProtectedRoute rendered:",{isAuthenticated:!!e,loading:n,userEmail:e==null?void 0:e.email})},[e,n]),n?(console.log("ProtectedRoute: Auth still loading"),i.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."})):e?(console.log("ProtectedRoute: User authenticated, rendering protected content"),i.jsx(nE,{})):(console.log("ProtectedRoute: No authenticated user, redirecting to",t),i.jsx(w0,{to:t,replace:!0}))},nX=({redirectTo:t="/"})=>{const{currentUser:e,loading:n}=Dn(),{toast:r}=Yt();return p.useEffect(()=>{console.log("AdminRoute rendered:",{isAuthenticated:!!e,loading:n,userEmail:e==null?void 0:e.email,userRole:e==null?void 0:e.role})},[e,n]),n?(console.log("AdminRoute: Auth still loading"),i.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."})):e?e.role!=="admin"?(console.log("AdminRoute: User is not an admin, redirecting to",t),r({title:"Access Denied",description:"You don't have permission to access this page.",variant:"destructive"}),i.jsx(w0,{to:t,replace:!0})):(console.log("AdminRoute: Admin authenticated, rendering protected content"),i.jsx(nE,{})):(console.log("AdminRoute: No authenticated user, redirecting to login"),i.jsx(w0,{to:"/login",replace:!0}))},rX={apiKey:"AIzaSyBqwZcpuOKZ9uCVZEBgynbxaaH_dtr_AMk",authDomain:"crm-pro-e2df3.firebaseapp.com",projectId:"crm-pro-e2df3",storageBucket:"crm-pro-e2df3.firebasestorage.app",messagingSenderId:"201619768522",appId:"1:201619768522:web:62bb56cd9422ac2fac2033"},UO=iE().length?Vu():Ly(rX),Lf=BE(UO),OC=dj(UO),$O="general",BO="adminSettings",zO=async()=>{var t,e;try{const n=Le(Lf,BO,$O),r=await un(n);if(!r.exists())return null;const s=r.data();return{...s,createdAt:(t=s.createdAt)==null?void 0:t.toDate(),updatedAt:(e=s.updatedAt)==null?void 0:e.toDate()}}catch(n){throw console.error("Error fetching admin settings:",n),new Error("Failed to fetch admin settings. Please check your permissions and try again.")}},sX=async(t,e)=>{var n;try{const r=Le(Lf,BO,$O),s=await un(r);let o=t.companyLogo;if(e)try{const l=J0(OC,`settings/logo_${Date.now()}`);if(await GY(l,e),o=await LO(l),s.exists()&&((n=s.data())!=null&&n.companyLogo))try{const c=J0(OC,s.data().companyLogo);await YY(c)}catch(c){console.warn("Error deleting old logo:",c)}}catch(l){throw l.code==="storage/unauthorized"?new Error("You do not have permission to upload files. Please contact your administrator."):new Error("Failed to upload logo. Please try again.")}const a={companyName:s.exists()?s.data().companyName:"My Company",...s.exists()?s.data():{},...t,companyLogo:o||t.companyLogo,updatedAt:new Date,createdAt:s.exists()?s.data().createdAt:new Date};return await us(r,a),a}catch(r){throw console.error("Error updating admin settings:",r),r instanceof Error?r:new Error("Failed to update settings. Please try again.")}},qO=p.createContext(void 0);function iX({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0),o=async()=>{try{s(!0);const l=await zO();n(l)}catch(l){console.error("Error loading admin settings:",l)}finally{s(!1)}};p.useEffect(()=>{o()},[]);const a=async()=>{await o()};return i.jsx(qO.Provider,{value:{settings:e,loading:r,refreshSettings:a},children:t})}function fj(){const t=p.useContext(qO);if(t===void 0)throw new Error("useAdminSettings must be used within an AdminSettingsProvider");return t}function oX(){const{settings:t}=fj();return p.useEffect(()=>{if(document.title=(t==null?void 0:t.companyName)||"CRM Pro",t!=null&&t.favicon){const e=document.querySelector("link[rel~='icon']");if(e)e.href=t.favicon;else{const n=document.createElement("link");n.rel="icon",n.href=t.favicon,document.head.appendChild(n)}}},[t]),null}function aX(){const{settings:t}=fj();return p.useEffect(()=>{t!=null&&t.primaryColor&&(document.documentElement.style.setProperty("--crm-blue",t.primaryColor),document.documentElement.style.setProperty("--primary",t.primaryColor))},[t==null?void 0:t.primaryColor]),null}const mj=Ru("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-crm-blue hover:bg-crm-blue/90 text-white shadow-sm",destructive:"bg-crm-red hover:bg-crm-red/90 text-white shadow-sm",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground text-foreground shadow-sm",secondary:"bg-secondary hover:bg-secondary/80 text-secondary-foreground shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground text-foreground",link:"text-crm-blue underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const a=r?ao:"button";return i.jsx(a,{className:me(mj({variant:e,size:n,className:t})),ref:o,...s})});K.displayName="Button";var lX="Separator",MC="horizontal",cX=["horizontal","vertical"],HO=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=MC,...s}=t,o=uX(r)?r:MC,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Ve.div,{"data-orientation":o,...l,...s,ref:e})});HO.displayName=lX;function uX(t){return cX.includes(t)}var WO=HO;const gn=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(WO,{ref:s,decorative:n,orientation:e,className:me("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));gn.displayName=WO.displayName;var pj="Avatar",[dX,Ele]=js(pj),[hX,KO]=dX(pj),GO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=p.useState("idle");return i.jsx(hX,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(Ve.span,{...r,ref:e})})});GO.displayName=pj;var QO="AvatarImage",YO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,a=KO(QO,n),l=fX(r,o.referrerPolicy),c=Kn(u=>{s(u),a.onImageLoadingStatusChange(u)});return Fn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ve.img,{...o,ref:e,src:r}):null});YO.displayName=QO;var XO="AvatarFallback",ZO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=KO(XO,n),[a,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(Ve.span,{...s,ref:e}):null});ZO.displayName=XO;function fX(t,e){const[n,r]=p.useState("idle");return Fn(()=>{if(!t){r("error");return}let s=!0;const o=new window.Image,a=l=>()=>{s&&r(l)};return r("loading"),o.onload=a("loaded"),o.onerror=a("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var JO=GO,eM=YO,tM=ZO;const gj=p.forwardRef(({className:t,...e},n)=>i.jsx(JO,{ref:n,className:me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));gj.displayName=JO.displayName;const yj=p.forwardRef(({className:t,...e},n)=>i.jsx(eM,{ref:n,className:me("aspect-square h-full w-full",t),...e}));yj.displayName=eM.displayName;const vj=p.forwardRef(({className:t,...e},n)=>i.jsx(tM,{ref:n,className:me("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));vj.displayName=tM.displayName;const mX=Ru("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),at=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,className:me(mX({variant:e}),t),...n}));at.displayName="Badge";var Wx="focusScope.autoFocusOnMount",Kx="focusScope.autoFocusOnUnmount",LC={bubbles:!1,cancelable:!0},pX="FocusScope",lv=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=t,[l,c]=p.useState(null),u=Kn(s),d=Kn(o),f=p.useRef(null),m=dt(e,v=>c(v)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(E){if(g.paused||!l)return;const C=E.target;l.contains(C)?f.current=C:Io(f.current,{select:!0})},x=function(E){if(g.paused||!l)return;const C=E.relatedTarget;C!==null&&(l.contains(C)||Io(f.current,{select:!0}))},b=function(E){if(document.activeElement===document.body)for(const R of E)R.removedNodes.length>0&&Io(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,l,g.paused]),p.useEffect(()=>{if(l){VC.add(g);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Wx,LC);l.addEventListener(Wx,u),l.dispatchEvent(b),b.defaultPrevented||(gX(_X(nM(l)),{select:!0}),document.activeElement===v&&Io(l))}return()=>{l.removeEventListener(Wx,u),setTimeout(()=>{const b=new CustomEvent(Kx,LC);l.addEventListener(Kx,d),l.dispatchEvent(b),b.defaultPrevented||Io(v??document.body,{select:!0}),l.removeEventListener(Kx,d),VC.remove(g)},0)}}},[l,u,d,g]);const y=p.useCallback(v=>{if(!n&&!r||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(x&&b){const w=v.currentTarget,[E,C]=yX(w);E&&C?!v.shiftKey&&b===C?(v.preventDefault(),n&&Io(E,{select:!0})):v.shiftKey&&b===E&&(v.preventDefault(),n&&Io(C,{select:!0})):b===w&&v.preventDefault()}},[n,r,g.paused]);return i.jsx(Ve.div,{tabIndex:-1,...a,ref:m,onKeyDown:y})});lv.displayName=pX;function gX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Io(r,{select:e}),document.activeElement!==n)return}function yX(t){const e=nM(t),n=FC(e,t),r=FC(e.reverse(),t);return[n,r]}function nM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FC(t,e){for(const n of t)if(!vX(n,{upTo:e}))return n}function vX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xX(t){return t instanceof HTMLInputElement&&"select"in t}function Io(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&xX(t)&&e&&t.select()}}var VC=wX();function wX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=UC(t,e),t.unshift(e)},remove(e){var n;t=UC(t,e),(n=t[0])==null||n.resume()}}}function UC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function _X(t){return t.filter(e=>e.tagName!=="A")}var Gx=0;function xj(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$C()),document.body.insertAdjacentElement("beforeend",t[1]??$C()),Gx++,()=>{Gx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gx--}},[])}function $C(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Tp="right-scroll-bar-position",Cp="width-before-scroll-bar",bX="with-scroll-bars-hidden",EX="--removed-body-scroll-bar-size";function Qx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function jX(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var NX=typeof window<"u"?p.useLayoutEffect:p.useEffect,BC=new WeakMap;function SX(t,e){var n=jX(null,function(r){return t.forEach(function(s){return Qx(s,r)})});return NX(function(){var r=BC.get(n);if(r){var s=new Set(r),o=new Set(t),a=n.current;s.forEach(function(l){o.has(l)||Qx(l,null)}),o.forEach(function(l){s.has(l)||Qx(l,a)})}BC.set(n,t)},[t]),n}function TX(t){return t}function CX(t,e){e===void 0&&(e=TX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return s}function kX(t){t===void 0&&(t={});var e=CX(null);return e.options=di({async:!0,ssr:!1},t),e}var rM=function(t){var e=t.sideCar,n=bf(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,di({},n))};rM.isSideCarExport=!0;function AX(t,e){return t.useMedium(e),rM}var sM=kX(),Yx=function(){},cv=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Yx,onWheelCapture:Yx,onTouchMoveCapture:Yx}),s=r[0],o=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,g=t.noIsolation,y=t.inert,v=t.allowPinchZoom,x=t.as,b=x===void 0?"div":x,w=t.gapMode,E=bf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,R=SX([n,e]),L=di(di({},E),s);return p.createElement(p.Fragment,null,d&&p.createElement(C,{sideCar:sM,removeScrollBar:u,shards:f,noIsolation:g,inert:y,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:w}),a?p.cloneElement(p.Children.only(l),di(di({},L),{ref:R})):p.createElement(b,di({},L,{className:c,ref:R}),l))});cv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cv.classNames={fullWidth:Cp,zeroRight:Tp};var IX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=IX();return e&&t.setAttribute("nonce",e),t}function PX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function DX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var OX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=RX())&&(PX(e,n),DX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},MX=function(){var t=OX();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},iM=function(){var t=MX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},LX={left:0,top:0,right:0,gap:0},Xx=function(t){return parseInt(t||"",10)||0},FX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Xx(n),Xx(r),Xx(s)]},VX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return LX;var e=FX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},UX=iM(),Uc="data-scroll-locked",$X=function(t,e,n,r){var s=t.left,o=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(bX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Uc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tp,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Cp,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tp," .").concat(Tp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cp," .").concat(Cp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Uc,`] {
    `).concat(EX,": ").concat(l,`px;
  }
`)},zC=function(){var t=parseInt(document.body.getAttribute(Uc)||"0",10);return isFinite(t)?t:0},BX=function(){p.useEffect(function(){return document.body.setAttribute(Uc,(zC()+1).toString()),function(){var t=zC()-1;t<=0?document.body.removeAttribute(Uc):document.body.setAttribute(Uc,t.toString())}},[])},zX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;BX();var o=p.useMemo(function(){return VX(s)},[s]);return p.createElement(UX,{styles:$X(o,!e,s,n?"":"!important")})},e_=!1;if(typeof window<"u")try{var Km=Object.defineProperty({},"passive",{get:function(){return e_=!0,!0}});window.addEventListener("test",Km,Km),window.removeEventListener("test",Km,Km)}catch{e_=!1}var nc=e_?{passive:!1}:!1,qX=function(t){return t.tagName==="TEXTAREA"},oM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qX(t)&&n[e]==="visible")},HX=function(t){return oM(t,"overflowY")},WX=function(t){return oM(t,"overflowX")},qC=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=aM(t,r);if(s){var o=lM(t,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},KX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},GX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},aM=function(t,e){return t==="v"?HX(e):WX(e)},lM=function(t,e){return t==="v"?KX(e):GX(e)},QX=function(t,e){return t==="h"&&e==="rtl"?-1:1},YX=function(t,e,n,r,s){var o=QX(t,window.getComputedStyle(e).direction),a=o*r,l=n.target,c=e.contains(l),u=!1,d=a>0,f=0,m=0;do{var g=lM(t,l),y=g[0],v=g[1],x=g[2],b=v-x-o*y;(y||b)&&aM(t,l)&&(f+=b,m+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},Gm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HC=function(t){return[t.deltaX,t.deltaY]},WC=function(t){return t&&"current"in t?t.current:t},XX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ZX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},JX=0,rc=[];function eZ(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(JX++)[0],o=p.useState(iM)[0],a=p.useRef(t);p.useEffect(function(){a.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=fH([t.lockRef.current],(t.shards||[]).map(WC),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var b=Gm(v),w=n.current,E="deltaX"in v?v.deltaX:w[0]-b[0],C="deltaY"in v?v.deltaY:w[1]-b[1],R,L=v.target,A=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in v&&A==="h"&&L.type==="range")return!1;var j=qC(A,L);if(!j)return!0;if(j?R=A:(R=A==="v"?"h":"v",j=qC(A,L)),!j)return!1;if(!r.current&&"changedTouches"in v&&(E||C)&&(r.current=R),!R)return!0;var S=r.current||R;return YX(S,x,v,S==="h"?E:C,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!rc.length||rc[rc.length-1]!==o)){var b="deltaY"in x?HC(x):Gm(x),w=e.current.filter(function(R){return R.name===x.type&&(R.target===x.target||x.target===R.shadowParent)&&XX(R.delta,b)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var E=(a.current.shards||[]).map(WC).filter(Boolean).filter(function(R){return R.contains(x.target)}),C=E.length>0?l(x,E[0]):!a.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,b,w){var E={name:v,delta:x,target:b,should:w,shadowParent:tZ(b)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(C){return C!==E})},1)},[]),d=p.useCallback(function(v){n.current=Gm(v),r.current=void 0},[]),f=p.useCallback(function(v){u(v.type,HC(v),v.target,l(v,t.lockRef.current))},[]),m=p.useCallback(function(v){u(v.type,Gm(v),v.target,l(v,t.lockRef.current))},[]);p.useEffect(function(){return rc.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,nc),document.addEventListener("touchmove",c,nc),document.addEventListener("touchstart",d,nc),function(){rc=rc.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,nc),document.removeEventListener("touchmove",c,nc),document.removeEventListener("touchstart",d,nc)}},[]);var g=t.removeScrollBar,y=t.inert;return p.createElement(p.Fragment,null,y?p.createElement(o,{styles:ZX(s)}):null,g?p.createElement(zX,{gapMode:t.gapMode}):null)}function tZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const nZ=AX(sM,eZ);var uv=p.forwardRef(function(t,e){return p.createElement(cv,di({},t,{ref:e,sideCar:nZ}))});uv.classNames=cv.classNames;var rZ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},sc=new WeakMap,Qm=new WeakMap,Ym={},Zx=0,cM=function(t){return t&&(t.host||cM(t.parentNode))},sZ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=cM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},iZ=function(t,e,n,r){var s=sZ(e,Array.isArray(t)?t:[t]);Ym[n]||(Ym[n]=new WeakMap);var o=Ym[n],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(r),y=g!==null&&g!=="false",v=(sc.get(m)||0)+1,x=(o.get(m)||0)+1;sc.set(m,v),o.set(m,x),a.push(m),v===1&&y&&Qm.set(m,!0),x===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(e),l.clear(),Zx++,function(){a.forEach(function(f){var m=sc.get(f)-1,g=o.get(f)-1;sc.set(f,m),o.set(f,g),m||(Qm.has(f)||f.removeAttribute(r),Qm.delete(f)),g||f.removeAttribute(n)}),Zx--,Zx||(sc=new WeakMap,sc=new WeakMap,Qm=new WeakMap,Ym={})}},wj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=rZ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),iZ(r,s,n,"aria-hidden")):function(){return null}},_j="Dialog",[uM,dM]=js(_j),[oZ,Zs]=uM(_j),hM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=bi({prop:r,defaultProp:s,onChange:o});return i.jsx(oZ,{scope:e,triggerRef:l,contentRef:c,contentId:$s(),titleId:$s(),descriptionId:$s(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};hM.displayName=_j;var fM="DialogTrigger",mM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zs(fM,n),o=dt(e,s.triggerRef);return i.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":jj(s.open),...r,ref:o,onClick:ve(t.onClick,s.onOpenToggle)})});mM.displayName=fM;var bj="DialogPortal",[aZ,pM]=uM(bj,{forceMount:void 0}),gM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Zs(bj,e);return i.jsx(aZ,{scope:e,forceMount:n,children:p.Children.map(r,a=>i.jsx(Ns,{present:n||o.open,children:i.jsx(yf,{asChild:!0,container:s,children:a})}))})};gM.displayName=bj;var Rg="DialogOverlay",yM=p.forwardRef((t,e)=>{const n=pM(Rg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Zs(Rg,t.__scopeDialog);return o.modal?i.jsx(Ns,{present:r||o.open,children:i.jsx(lZ,{...s,ref:e})}):null});yM.displayName=Rg;var lZ=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zs(Rg,n);return i.jsx(uv,{as:ao,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ve.div,{"data-state":jj(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Cl="DialogContent",vM=p.forwardRef((t,e)=>{const n=pM(Cl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Zs(Cl,t.__scopeDialog);return i.jsx(Ns,{present:r||o.open,children:o.modal?i.jsx(cZ,{...s,ref:e}):i.jsx(uZ,{...s,ref:e})})});vM.displayName=Cl;var cZ=p.forwardRef((t,e)=>{const n=Zs(Cl,t.__scopeDialog),r=p.useRef(null),s=dt(e,n.contentRef,r);return p.useEffect(()=>{const o=r.current;if(o)return wj(o)},[]),i.jsx(xM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault())})}),uZ=p.forwardRef((t,e)=>{const n=Zs(Cl,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(xM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),xM=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=t,l=Zs(Cl,n),c=p.useRef(null),u=dt(e,c);return xj(),i.jsxs(i.Fragment,{children:[i.jsx(lv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Iu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":jj(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(hZ,{titleId:l.titleId}),i.jsx(mZ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ej="DialogTitle",wM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zs(Ej,n);return i.jsx(Ve.h2,{id:s.titleId,...r,ref:e})});wM.displayName=Ej;var _M="DialogDescription",bM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zs(_M,n);return i.jsx(Ve.p,{id:s.descriptionId,...r,ref:e})});bM.displayName=_M;var EM="DialogClose",jM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zs(EM,n);return i.jsx(Ve.button,{type:"button",...r,ref:e,onClick:ve(t.onClick,()=>s.onOpenChange(!1))})});jM.displayName=EM;function jj(t){return t?"open":"closed"}var NM="DialogTitleWarning",[dZ,SM]=l3(NM,{contentName:Cl,titleName:Ej,docsSlug:"dialog"}),hZ=({titleId:t})=>{const e=SM(NM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},fZ="DialogDescriptionWarning",mZ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${SM(fZ).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Nj=hM,Sj=mM,Tj=gM,Ff=yM,Vf=vM,Uf=wM,$f=bM,Bf=jM;const t_=Nj,pZ=Sj,gZ=Tj,TM=p.forwardRef(({className:t,...e},n)=>i.jsx(Ff,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));TM.displayName=Ff.displayName;const yZ=Ru("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pg=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>i.jsxs(gZ,{children:[i.jsx(TM,{}),i.jsxs(Vf,{ref:s,className:me(yZ({side:t}),e),...r,children:[n,i.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Ll,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pg.displayName=Vf.displayName;const n_=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});n_.displayName="SheetHeader";const r_=p.forwardRef(({className:t,...e},n)=>i.jsx(Uf,{ref:n,className:me("text-lg font-semibold text-foreground",t),...e}));r_.displayName=Uf.displayName;const s_=p.forwardRef(({className:t,...e},n)=>i.jsx($f,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));s_.displayName=$f.displayName;const vZ=[{path:"/",label:"Dashboard",icon:d6},{path:"/leads",label:"Leads",icon:Sh},{path:"/invoices",label:"Invoices",icon:Wi},{path:"/reports",label:"Reports",icon:Fi}],Xm={path:"/settings",label:"Settings",icon:x6,requiresAdminForFullAccess:!0};function xZ(){const t=Ma(),e=pr(),[n,r]=p.useState(!1),{currentUser:s,isAdmin:o,logout:a}=Dn();fj();const[l,c]=p.useState(!1),{toast:u}=Yt(),d=()=>s!=null&&s.displayName?s.displayName.split(" ").map(g=>g[0]).join("").toUpperCase().substring(0,2):"U",f=async()=>{try{await a(),u({title:"Logged out",description:"You have been successfully logged out"}),e("/login")}catch{u({title:"Error",description:"Failed to log out",variant:"destructive"})}},m=()=>i.jsxs("div",{className:me("flex flex-col h-full bg-card border-r transition-all duration-300",n?"w-16":"w-64"),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[!n&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(gj,{className:"h-8 w-8",children:[i.jsx(yj,{src:(s==null?void 0:s.photoURL)||void 0}),i.jsx(vj,{children:d()})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm font-medium",children:(s==null?void 0:s.displayName)||"User"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:s==null?void 0:s.email})]})]}),i.jsx(K,{variant:"ghost",size:"icon",className:"ml-auto",onClick:()=>r(!n),children:i.jsx(FR,{className:me("h-4 w-4 transition-transform",n&&"rotate-180")})})]}),i.jsxs("nav",{className:"flex-1 overflow-y-auto py-4",children:[i.jsx("div",{className:"px-2 space-y-1",children:vZ.map(g=>i.jsxs(yn,{to:g.path,className:me("flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors",t.pathname===g.path?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:()=>c(!1),children:[i.jsx(g.icon,{className:"h-4 w-4 mr-3"}),!n&&g.label]},g.path))}),i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"px-2 space-y-1",children:i.jsxs(yn,{to:Xm.path,className:me("flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors",t.pathname===Xm.path?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:()=>c(!1),children:[i.jsx(Xm.icon,{className:"h-4 w-4 mr-3"}),!n&&Xm.label,!n&&o&&i.jsx(at,{variant:"secondary",className:"ml-2",children:"Admin"})]})})]}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs(K,{variant:"ghost",className:"w-full justify-start",onClick:()=>{f(),c(!1)},children:[i.jsx(BR,{className:"h-4 w-4 mr-3"}),!n&&"Logout"]})})]});return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:i.jsxs(t_,{open:l,onOpenChange:c,children:[i.jsx(pZ,{asChild:!0,children:i.jsx(K,{variant:"ghost",size:"icon",children:i.jsx(m6,{className:"h-6 w-6"})})}),i.jsx(Pg,{side:"left",className:"p-0",children:i.jsx(m,{})})]})}),i.jsx("div",{className:"hidden md:block",children:i.jsx(m,{})})]})}const ue=p.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ue.displayName="Input";var wZ=p.createContext(void 0);function zf(t){const e=p.useContext(wZ);return t||e||"ltr"}function _Z(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:m,children:g,...y}=f,v=(m==null?void 0:m[t][c])||l,x=p.useMemo(()=>y,Object.values(y));return i.jsx(v.Provider,{value:x,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,y=p.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,bZ(s,...e)]}function bZ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Jx="rovingFocusGroup.onEntryFocus",EZ={bubbles:!1,cancelable:!0},dv="RovingFocusGroup",[i_,CM,jZ]=wy(dv),[NZ,Wu]=_Z(dv,[jZ]),[SZ,TZ]=NZ(dv),kM=p.forwardRef((t,e)=>i.jsx(i_.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(i_.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(CZ,{...t,ref:e})})}));kM.displayName=dv;var CZ=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=p.useRef(null),g=dt(e,m),y=zf(o),[v=null,x]=bi({prop:a,defaultProp:l,onChange:c}),[b,w]=p.useState(!1),E=Kn(u),C=CM(n),R=p.useRef(!1),[L,A]=p.useState(0);return p.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(Jx,E),()=>j.removeEventListener(Jx,E)},[E]),i.jsx(SZ,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(j=>x(j),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>A(j=>j+1),[]),onFocusableItemRemove:p.useCallback(()=>A(j=>j-1),[]),children:i.jsx(Ve.div,{tabIndex:b||L===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{R.current=!0}),onFocus:ve(t.onFocus,j=>{const S=!R.current;if(j.target===j.currentTarget&&S&&!b){const k=new CustomEvent(Jx,EZ);if(j.currentTarget.dispatchEvent(k),!k.defaultPrevented){const O=C().filter(V=>V.focusable),I=O.find(V=>V.active),N=O.find(V=>V.id===v),U=[I,N,...O].filter(Boolean).map(V=>V.ref.current);RM(U,d)}}R.current=!1}),onBlur:ve(t.onBlur,()=>w(!1))})})}),AM="RovingFocusGroupItem",IM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=t,l=$s(),c=o||l,u=TZ(AM,n),d=u.currentTabStopId===c,f=CM(n),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(i_.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(Ve.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ve(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ve(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=IZ(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const w=b.indexOf(y.currentTarget);b=u.loop?RZ(b,w+1):b.slice(w+1)}setTimeout(()=>RM(b))}})})})});IM.displayName=AM;var kZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function IZ(t,e,n){const r=AZ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return kZ[r]}function RM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function RZ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Cj=kM,kj=IM,o_=["Enter"," "],PZ=["ArrowDown","PageUp","Home"],PM=["ArrowUp","PageDown","End"],DZ=[...PZ,...PM],OZ={ltr:[...o_,"ArrowRight"],rtl:[...o_,"ArrowLeft"]},MZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qf="Menu",[Wh,LZ,FZ]=wy(qf),[Hl,DM]=js(qf,[FZ,Mu,Wu]),hv=Mu(),OM=Wu(),[VZ,Wl]=Hl(qf),[UZ,Hf]=Hl(qf),MM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=t,l=hv(e),[c,u]=p.useState(null),d=p.useRef(!1),f=Kn(o),m=zf(s);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),i.jsx(qb,{...l,children:i.jsx(VZ,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(UZ,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:a,children:r})})})};MM.displayName=qf;var $Z="MenuAnchor",Aj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=hv(n);return i.jsx(Hb,{...s,...r,ref:e})});Aj.displayName=$Z;var Ij="MenuPortal",[BZ,LM]=Hl(Ij,{forceMount:void 0}),FM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Wl(Ij,e);return i.jsx(BZ,{scope:e,forceMount:n,children:i.jsx(Ns,{present:n||o.open,children:i.jsx(yf,{asChild:!0,container:s,children:r})})})};FM.displayName=Ij;var vs="MenuContent",[zZ,Rj]=Hl(vs),VM=p.forwardRef((t,e)=>{const n=LM(vs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Wl(vs,t.__scopeMenu),a=Hf(vs,t.__scopeMenu);return i.jsx(Wh.Provider,{scope:t.__scopeMenu,children:i.jsx(Ns,{present:r||o.open,children:i.jsx(Wh.Slot,{scope:t.__scopeMenu,children:a.modal?i.jsx(qZ,{...s,ref:e}):i.jsx(HZ,{...s,ref:e})})})})}),qZ=p.forwardRef((t,e)=>{const n=Wl(vs,t.__scopeMenu),r=p.useRef(null),s=dt(e,r);return p.useEffect(()=>{const o=r.current;if(o)return wj(o)},[]),i.jsx(Pj,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),HZ=p.forwardRef((t,e)=>{const n=Wl(vs,t.__scopeMenu);return i.jsx(Pj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Pj=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,...v}=t,x=Wl(vs,n),b=Hf(vs,n),w=hv(n),E=OM(n),C=LZ(n),[R,L]=p.useState(null),A=p.useRef(null),j=dt(e,A,x.onContentChange),S=p.useRef(0),k=p.useRef(""),O=p.useRef(0),I=p.useRef(null),N=p.useRef("right"),$=p.useRef(0),U=y?uv:p.Fragment,V=y?{as:ao,allowPinchZoom:!0}:void 0,z=H=>{var xe,Q;const Y=k.current+H,q=C().filter(ce=>!ce.disabled),W=document.activeElement,re=(xe=q.find(ce=>ce.ref.current===W))==null?void 0:xe.textValue,je=q.map(ce=>ce.textValue),Re=rJ(je,Y,re),Pe=(Q=q.find(ce=>ce.textValue===Re))==null?void 0:Q.ref.current;(function ce(P){k.current=P,window.clearTimeout(S.current),P!==""&&(S.current=window.setTimeout(()=>ce(""),1e3))})(Y),Pe&&setTimeout(()=>Pe.focus())};p.useEffect(()=>()=>window.clearTimeout(S.current),[]),xj();const F=p.useCallback(H=>{var q,W;return N.current===((q=I.current)==null?void 0:q.side)&&iJ(H,(W=I.current)==null?void 0:W.area)},[]);return i.jsx(zZ,{scope:n,searchRef:k,onItemEnter:p.useCallback(H=>{F(H)&&H.preventDefault()},[F]),onItemLeave:p.useCallback(H=>{var Y;F(H)||((Y=A.current)==null||Y.focus(),L(null))},[F]),onTriggerLeave:p.useCallback(H=>{F(H)&&H.preventDefault()},[F]),pointerGraceTimerRef:O,onPointerGraceIntentChange:p.useCallback(H=>{I.current=H},[]),children:i.jsx(U,{...V,children:i.jsx(lv,{asChild:!0,trapped:s,onMountAutoFocus:ve(o,H=>{var Y;H.preventDefault(),(Y=A.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:i.jsx(Cj,{asChild:!0,...E,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:R,onCurrentTabStopIdChange:L,onEntryFocus:ve(c,H=>{b.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Wb,{role:"menu","aria-orientation":"vertical","data-state":tL(x.open),"data-radix-menu-content":"",dir:b.dir,...w,...v,ref:j,style:{outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,H=>{const q=H.target.closest("[data-radix-menu-content]")===H.currentTarget,W=H.ctrlKey||H.altKey||H.metaKey,re=H.key.length===1;q&&(H.key==="Tab"&&H.preventDefault(),!W&&re&&z(H.key));const je=A.current;if(H.target!==je||!DZ.includes(H.key))return;H.preventDefault();const Pe=C().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);PM.includes(H.key)&&Pe.reverse(),tJ(Pe)}),onBlur:ve(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(S.current),k.current="")}),onPointerMove:ve(t.onPointerMove,Kh(H=>{const Y=H.target,q=$.current!==H.clientX;if(H.currentTarget.contains(Y)&&q){const W=H.clientX>$.current?"right":"left";N.current=W,$.current=H.clientX}}))})})})})})})});VM.displayName=vs;var WZ="MenuGroup",Dj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ve.div,{role:"group",...r,ref:e})});Dj.displayName=WZ;var KZ="MenuLabel",UM=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ve.div,{...r,ref:e})});UM.displayName=KZ;var Dg="MenuItem",KC="menu.itemSelect",fv=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=p.useRef(null),a=Hf(Dg,t.__scopeMenu),l=Rj(Dg,t.__scopeMenu),c=dt(e,o),u=p.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const m=new CustomEvent(KC,{bubbles:!0,cancelable:!0});f.addEventListener(KC,g=>r==null?void 0:r(g),{once:!0}),bb(f,m),m.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx($M,{...s,ref:c,disabled:n,onClick:ve(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:ve(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ve(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||o_.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});fv.displayName=Dg;var $M=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,a=Rj(Dg,n),l=OM(n),c=p.useRef(null),u=dt(e,c),[d,f]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const y=c.current;y&&g((y.textContent??"").trim())},[o.children]),i.jsx(Wh.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(kj,{asChild:!0,...l,focusable:!r,children:i.jsx(Ve.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:ve(t.onPointerMove,Kh(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,Kh(y=>a.onItemLeave(y))),onFocus:ve(t.onFocus,()=>f(!0)),onBlur:ve(t.onBlur,()=>f(!1))})})})}),GZ="MenuCheckboxItem",BM=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(KM,{scope:t.__scopeMenu,checked:n,children:i.jsx(fv,{role:"menuitemcheckbox","aria-checked":Og(n)?"mixed":n,...s,ref:e,"data-state":Mj(n),onSelect:ve(s.onSelect,()=>r==null?void 0:r(Og(n)?!0:!n),{checkForDefaultPrevented:!1})})})});BM.displayName=GZ;var zM="MenuRadioGroup",[QZ,YZ]=Hl(zM,{value:void 0,onValueChange:()=>{}}),qM=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=Kn(r);return i.jsx(QZ,{scope:t.__scopeMenu,value:n,onValueChange:o,children:i.jsx(Dj,{...s,ref:e})})});qM.displayName=zM;var HM="MenuRadioItem",WM=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=YZ(HM,t.__scopeMenu),o=n===s.value;return i.jsx(KM,{scope:t.__scopeMenu,checked:o,children:i.jsx(fv,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Mj(o),onSelect:ve(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});WM.displayName=HM;var Oj="MenuItemIndicator",[KM,XZ]=Hl(Oj,{checked:!1}),GM=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=XZ(Oj,n);return i.jsx(Ns,{present:r||Og(o.checked)||o.checked===!0,children:i.jsx(Ve.span,{...s,ref:e,"data-state":Mj(o.checked)})})});GM.displayName=Oj;var ZZ="MenuSeparator",QM=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Ve.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});QM.displayName=ZZ;var JZ="MenuArrow",YM=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=hv(n);return i.jsx(Kb,{...s,...r,ref:e})});YM.displayName=JZ;var eJ="MenuSub",[jle,XM]=Hl(eJ),Ld="MenuSubTrigger",ZM=p.forwardRef((t,e)=>{const n=Wl(Ld,t.__scopeMenu),r=Hf(Ld,t.__scopeMenu),s=XM(Ld,t.__scopeMenu),o=Rj(Ld,t.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(Aj,{asChild:!0,...u,children:i.jsx($M,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":tL(n.open),...t,ref:xy(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Kh(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ve(t.onPointerLeave,Kh(f=>{var g,y;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(y=n.content)==null?void 0:y.dataset.side,x=v==="right",b=x?-5:5,w=m[x?"left":"right"],E=m[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:w,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:w,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,f=>{var g;const m=o.searchRef.current!=="";t.disabled||m&&f.key===" "||OZ[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});ZM.displayName=Ld;var JM="MenuSubContent",eL=p.forwardRef((t,e)=>{const n=LM(vs,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Wl(vs,t.__scopeMenu),a=Hf(vs,t.__scopeMenu),l=XM(JM,t.__scopeMenu),c=p.useRef(null),u=dt(e,c);return i.jsx(Wh.Provider,{scope:t.__scopeMenu,children:i.jsx(Ns,{present:r||o.open,children:i.jsx(Wh.Slot,{scope:t.__scopeMenu,children:i.jsx(Pj,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ve(t.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{var g;const f=d.currentTarget.contains(d.target),m=MZ[a.dir].includes(d.key);f&&m&&(o.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});eL.displayName=JM;function tL(t){return t?"open":"closed"}function Og(t){return t==="indeterminate"}function Mj(t){return Og(t)?"indeterminate":t?"checked":"unchecked"}function tJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function nJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function rJ(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=nJ(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function sJ(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o].x,c=e[o].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}function iJ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return sJ(n,e)}function Kh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var oJ=MM,aJ=Aj,lJ=FM,cJ=VM,uJ=Dj,dJ=UM,hJ=fv,fJ=BM,mJ=qM,pJ=WM,gJ=GM,yJ=QM,vJ=YM,xJ=ZM,wJ=eL,Lj="DropdownMenu",[_J,Nle]=js(Lj,[DM]),Rr=DM(),[bJ,nL]=_J(Lj),rL=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,c=Rr(e),u=p.useRef(null),[d=!1,f]=bi({prop:s,defaultProp:o,onChange:a});return i.jsx(bJ,{scope:e,triggerId:$s(),triggerRef:u,contentId:$s(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:i.jsx(oJ,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};rL.displayName=Lj;var sL="DropdownMenuTrigger",iL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=nL(sL,n),a=Rr(n);return i.jsx(aJ,{asChild:!0,...a,children:i.jsx(Ve.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:xy(e,o.triggerRef),onPointerDown:ve(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ve(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});iL.displayName=sL;var EJ="DropdownMenuPortal",oL=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Rr(e);return i.jsx(lJ,{...r,...n})};oL.displayName=EJ;var aL="DropdownMenuContent",lL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nL(aL,n),o=Rr(n),a=p.useRef(!1);return i.jsx(cJ,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lL.displayName=aL;var jJ="DropdownMenuGroup",NJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(uJ,{...s,...r,ref:e})});NJ.displayName=jJ;var SJ="DropdownMenuLabel",cL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(dJ,{...s,...r,ref:e})});cL.displayName=SJ;var TJ="DropdownMenuItem",uL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(hJ,{...s,...r,ref:e})});uL.displayName=TJ;var CJ="DropdownMenuCheckboxItem",dL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(fJ,{...s,...r,ref:e})});dL.displayName=CJ;var kJ="DropdownMenuRadioGroup",AJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(mJ,{...s,...r,ref:e})});AJ.displayName=kJ;var IJ="DropdownMenuRadioItem",hL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(pJ,{...s,...r,ref:e})});hL.displayName=IJ;var RJ="DropdownMenuItemIndicator",fL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(gJ,{...s,...r,ref:e})});fL.displayName=RJ;var PJ="DropdownMenuSeparator",mL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(yJ,{...s,...r,ref:e})});mL.displayName=PJ;var DJ="DropdownMenuArrow",OJ=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(vJ,{...s,...r,ref:e})});OJ.displayName=DJ;var MJ="DropdownMenuSubTrigger",pL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(xJ,{...s,...r,ref:e})});pL.displayName=MJ;var LJ="DropdownMenuSubContent",gL=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rr(n);return i.jsx(wJ,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gL.displayName=LJ;var FJ=rL,VJ=iL,UJ=oL,yL=lL,vL=cL,xL=uL,wL=dL,_L=hL,bL=fL,EL=mL,jL=pL,NL=gL;const mv=FJ,pv=VJ,$J=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(jL,{ref:s,className:me("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(Cb,{className:"ml-auto h-4 w-4"})]}));$J.displayName=jL.displayName;const BJ=p.forwardRef(({className:t,...e},n)=>i.jsx(NL,{ref:n,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));BJ.displayName=NL.displayName;const Wf=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(UJ,{children:i.jsx(yL,{ref:r,sideOffset:e,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Wf.displayName=yL.displayName;const lr=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(xL,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));lr.displayName=xL.displayName;const zJ=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(wL,{ref:s,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(bL,{children:i.jsx(jh,{className:"h-4 w-4"})})}),e]}));zJ.displayName=wL.displayName;const qJ=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(_L,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(bL,{children:i.jsx(VR,{className:"h-2 w-2 fill-current"})})}),e]}));qJ.displayName=_L.displayName;const SL=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(vL,{ref:r,className:me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));SL.displayName=vL.displayName;const a_=p.forwardRef(({className:t,...e},n)=>i.jsx(EL,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));a_.displayName=EL.displayName;const HJ={theme:"light",setTheme:()=>null},TL=p.createContext(HJ);function WJ({children:t,defaultTheme:e="light",storageKey:n="ui-theme",...r}){const[s,o]=p.useState(()=>localStorage.getItem(n)||e);p.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),o(l)}};return i.jsx(TL.Provider,{...r,value:a,children:t})}const KJ=()=>{const t=p.useContext(TL);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function GJ(){const[t,e]=p.useState(""),{currentUser:n,logout:r}=Dn(),{theme:s,setTheme:o}=KJ(),a=pr(),{toast:l}=Yt(),c=()=>n!=null&&n.displayName?n.displayName.split(" ").map(d=>d[0]).join("").toUpperCase().substring(0,2):"U",u=async()=>{try{await r(),l({title:"Logged out",description:"You have been successfully logged out"}),a("/login")}catch{l({title:"Error",description:"Failed to log out",variant:"destructive"})}};return i.jsx("header",{className:"border-b bg-card",children:i.jsxs("div",{className:"flex h-16 items-center px-4 md:px-6",children:[i.jsx("div",{className:"hidden md:flex flex-1 items-center space-x-2",children:i.jsxs("div",{className:"relative w-full max-w-sm",children:[i.jsx(jy,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(ue,{placeholder:"Search...",value:t,onChange:d=>e(d.target.value),className:"pl-8"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>o(s==="light"?"dark":"light"),children:s==="light"?i.jsx(p6,{className:"h-5 w-5"}):i.jsx(_6,{className:"h-5 w-5"})}),i.jsx(K,{variant:"ghost",size:"icon",children:i.jsx(X3,{className:"h-5 w-5"})}),i.jsxs(mv,{children:[i.jsx(pv,{asChild:!0,children:i.jsx(K,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:i.jsxs(gj,{className:"h-8 w-8",children:[i.jsx(yj,{src:(n==null?void 0:n.photoURL)||void 0}),i.jsx(vj,{children:c()})]})})}),i.jsxs(Wf,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(SL,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:n==null?void 0:n.displayName}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:n==null?void 0:n.email})]})}),i.jsx(a_,{}),i.jsx(lr,{onClick:()=>a("/profile"),children:"Profile"}),i.jsx(lr,{onClick:()=>a("/settings"),children:"Settings"}),i.jsx(a_,{}),i.jsx(lr,{onClick:u,children:"Log out"})]})]})]})]})})}function QJ(){return i.jsxs("div",{className:"flex h-screen overflow-hidden",children:[i.jsx(xZ,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(GJ,{}),i.jsx("main",{className:"flex-1 overflow-auto bg-background p-4 md:p-6",children:i.jsx("div",{className:"animate-fade-in max-w-[1400px] mx-auto",children:i.jsx(nE,{})})})]})]})}const _e=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));_e.displayName="Card";const Be=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("flex flex-col space-y-1.5 p-6",t),...e}));Be.displayName="CardHeader";const ze=p.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:me("text-2xl font-semibold leading-none tracking-tight",t),...e}));ze.displayName="CardTitle";const Xt=p.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Xt.displayName="CardDescription";const De=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("p-6 pt-0",t),...e}));De.displayName="CardContent";const gv=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("flex items-center p-6 pt-0",t),...e}));gv.displayName="CardFooter";function Zm({title:t,value:e,period:n,status:r="neutral",icon:s,className:o,description:a,processCounts:l}){return i.jsxs(_e,{className:me("relative overflow-hidden hover:shadow-md transition-all duration-200 border-l-4",r==="positive"&&"border-l-green-500",r==="negative"&&"border-l-red-500",r==="neutral"&&"border-l-blue-500",o),children:[i.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1",children:i.jsx("div",{className:me("h-full w-full bg-gradient-to-r",r==="positive"&&"from-green-500/10 to-green-500/40",r==="negative"&&"from-red-500/10 to-red-500/40",r==="neutral"&&"from-blue-500/10 to-blue-500/40")})}),i.jsxs(De,{className:"p-6 flex flex-col h-full min-h-[200px]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("span",{className:me("text-2xl font-semibold",r==="positive"&&"text-green-600",r==="negative"&&"text-red-600",r==="neutral"&&"text-blue-600"),children:e}),n&&i.jsx("span",{className:"text-xs text-muted-foreground pb-1",children:n})]}),a&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a})]}),s&&i.jsx("div",{className:me("rounded-full p-2.5",r==="positive"&&"bg-green-100 text-green-600",r==="negative"&&"bg-red-100 text-red-600",r==="neutral"&&"bg-blue-100 text-blue-600"),children:s})]}),l&&l.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"flex-1 space-y-3",children:l.map((c,u)=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:c.name}),i.jsx("span",{className:"text-sm font-semibold",children:c.count})]}),i.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:me("h-full rounded-full transition-all duration-500",r==="positive"&&"bg-green-500",r==="negative"&&"bg-red-500",r==="neutral"&&"bg-blue-500"),style:{width:`${c.count/e*100}%`}})})]},u))})]})]})]})}const rs="leads",Fj="notes",Mg=async()=>{try{const t=Dt(et(Ee,rs),Tr("createdAt","desc"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting leads:",t),t}},Kf=async t=>{try{const e=await un(Le(Ee,rs,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting lead:",e),e}},CL=async t=>{try{const e=Le(et(Ee,rs)),n={...t,stageHistory:[],createdAt:wt(),updatedAt:wt()};await us(e,n);const r=await un(e);return{id:r.id,...r.data()}}catch(e){throw console.error("Error creating lead:",e),e}},kL=async(t,e)=>{try{await tn(Le(Ee,rs,t),{...e,updatedAt:wt()})}catch(n){throw console.error("Error updating lead:",n),n}},YJ=async t=>{try{await zl(Le(Ee,rs,t))}catch(e){throw console.error("Error deleting lead:",e),e}},XJ=async t=>{try{const e=rj(Ee);let n=0;for(const r of t){const s=Le(et(Ee,rs)),o={...r,status:"active",stageHistory:[],createdAt:wt(),updatedAt:wt(),createdBy:r.createdBy||"import"};e.set(s,o),n++}return await e.commit(),n}catch(e){throw console.error("Error importing leads:",e),e}},ZJ=async(t,e)=>{try{await tn(Le(Ee,rs,t),{currentProcessId:e,currentStageId:null,updatedAt:wt()})}catch(n){throw console.error("Error assigning process to lead:",n),n}},JJ=async(t,e,n,r,s)=>{try{console.log(`Updating lead ${t} to stage ${e} in process ${n}`);const o=await un(Le(Ee,rs,t));if(!o.exists())throw new Error("Lead not found");const a=o.data(),l={stageId:e,processId:n,timestamp:ft.now(),notes:r,updatedBy:s};console.log(`Current lead state: processId=${a.currentProcessId}, stageId=${a.currentStageId}`),console.log(`Updating to: processId=${n}, stageId=${e}`);const c=a.stageHistory||[],u={currentStageId:e,currentProcessId:n,stageHistory:[...c,l],updatedAt:wt()};await tn(Le(Ee,rs,t),u),console.log(`Successfully updated lead ${t} stage to ${e}`);const d=await un(Le(Ee,rs,t));if(d.exists()){const f=d.data();console.log(`Verification - lead now has: processId=${f.currentProcessId}, stageId=${f.currentStageId}`)}}catch(o){throw console.error("Error updating lead stage:",o),o}},ew=async t=>{try{const e=Dt(et(Ee,rs,t,Fj),Tr("createdAt","desc"));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting lead notes:",e),e}},eee=async(t,e,n="System")=>{try{const r=Le(et(Ee,rs,t,Fj)),s={content:e,createdAt:wt(),createdBy:n};return await us(r,s),{id:r.id,...s,createdAt:ft.now()}}catch(r){throw console.error("Error adding lead note:",r),r}},tee=async(t,e)=>{try{await zl(Le(Ee,rs,t,Fj,e))}catch(n){throw console.error("Error deleting note:",n),n}};var gt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const a of s)o[a]=a;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of o)a[l]=s[l];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.push(a);return o},t.find=(s,o)=>{for(const a of s)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(gt||(gt={}));var l_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(l_||(l_={}));const Te=gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$o=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},fe=gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nee=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ss extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof ss))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ss.create=t=>new ss(t);const xu=(t,e)=>{let n;switch(t.code){case fe.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,gt.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${gt.joinValues(t.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${gt.joinValues(t.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${gt.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:gt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case fe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case fe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=e.defaultError,gt.assertNever(t)}return{message:n}};let AL=xu;function ree(t){AL=t}function Lg(){return AL}const Fg=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],a={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(a,{data:e,defaultError:l}).message;return{...s,path:o,message:l}},see=[];function Ne(t,e){const n=Lg(),r=Fg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===xu?void 0:xu].filter(s=>!!s)});t.common.issues.push(r)}class mr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return We;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const o=await s.key,a=await s.value;r.push({key:o,value:a})}return mr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:a}=s;if(o.status==="aborted"||a.status==="aborted")return We;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}}const We=Object.freeze({status:"aborted"}),Nc=t=>({status:"dirty",value:t}),Cr=t=>({status:"valid",value:t}),c_=t=>t.status==="aborted",u_=t=>t.status==="dirty",Gh=t=>t.status==="valid",Qh=t=>typeof Promise<"u"&&t instanceof Promise;function Vg(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function IL(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Fe||(Fe={}));var Fd,Vd;class Si{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const GC=(t,e)=>{if(Gh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ss(t.common.issues);return this._error=n,this._error}}};function Je(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>{var c,u;const{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},description:s}}class st{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $o(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:$o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mr,ctx:{common:e.parent.common,data:e.data,parsedType:$o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Qh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$o(e)},o=this._parseSync({data:e,path:s.path,parent:s});return GC(s,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$o(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Qh(s)?s:Promise.resolve(s));return GC(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const a=e(s),l=()=>o.addIssue({code:fe.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Gs({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _i.create(this,this._def)}nullable(){return ka.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bs.create(this,this._def)}promise(){return _u.create(this,this._def)}or(e){return Jh.create([this,e],this._def)}and(e){return ef.create(this,e,this._def)}transform(e){return new Gs({...Je(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new of({...Je(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new Vj({typeName:He.ZodBranded,type:this,...Je(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new af({...Je(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Gf.create(this,e)}readonly(){return lf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const iee=/^c[^\s-]{8,}$/i,oee=/^[0-9a-z]+$/,aee=/^[0-9A-HJKMNP-TV-Z]{26}$/,lee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cee=/^[a-z0-9_-]{21}$/i,uee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let tw;const fee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mee=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,pee=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gee=new RegExp(`^${RL}$`);function PL(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function yee(t){return new RegExp(`^${PL(t)}$`)}function DL(t){let e=`${RL}T${PL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function vee(t,e){return!!((e==="v4"||!e)&&fee.test(t)||(e==="v6"||!e)&&mee.test(t))}class Ls extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const o=this._getOrReturnCtx(e);return Ne(o,{code:fe.invalid_type,expected:Te.string,received:o.parsedType}),We}const r=new mr;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?Ne(s,{code:fe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&Ne(s,{code:fe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")dee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"email",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")tw||(tw=new RegExp(hee,"u")),tw.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"emoji",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")lee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"uuid",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")cee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"nanoid",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")iee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")oee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"cuid2",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")aee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ulid",code:fe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ne(s,{validation:"url",code:fe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"regex",code:fe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?DL(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?gee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?yee(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?uee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"duration",code:fe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?vee(e.data,o.version)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"ip",code:fe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?pee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ne(s,{validation:"base64",code:fe.invalid_string,message:o.message}),r.dirty()):gt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:fe.invalid_string,...Fe.errToObj(r)})}_addCheck(e){return new Ls({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Fe.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Fe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Fe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Fe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Fe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Fe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Fe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Fe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Fe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Fe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Fe.errToObj(n)})}nonempty(e){return this.min(1,Fe.errToObj(e))}trim(){return new Ls({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ls({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ls({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ls.create=t=>{var e;return new Ls({checks:[],typeName:He.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Je(t)})};function xee(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return o%a/Math.pow(10,s)}class Sa extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const o=this._getOrReturnCtx(e);return Ne(o,{code:fe.invalid_type,expected:Te.number,received:o.parsedType}),We}let r;const s=new mr;for(const o of this._def.checks)o.kind==="int"?gt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?xee(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.not_finite,message:o.message}),s.dirty()):gt.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Fe.toString(n))}setLimit(e,n,r,s){return new Sa({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(e){return new Sa({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Fe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&gt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Sa.create=t=>new Sa({checks:[],typeName:He.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Je(t)});class Ta extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Te.bigint){const o=this._getOrReturnCtx(e);return Ne(o,{code:fe.invalid_type,expected:Te.bigint,received:o.parsedType}),We}let r;const s=new mr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ne(r,{code:fe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):gt.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Fe.toString(n))}setLimit(e,n,r,s){return new Ta({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(e){return new Ta({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Fe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ta.create=t=>{var e;return new Ta({checks:[],typeName:He.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Je(t)})};class Yh extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.boolean,received:r.parsedType}),We}return Cr(e.data)}}Yh.create=t=>new Yh({typeName:He.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Je(t)});class kl extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const o=this._getOrReturnCtx(e);return Ne(o,{code:fe.invalid_type,expected:Te.date,received:o.parsedType}),We}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Ne(o,{code:fe.invalid_date}),We}const r=new mr;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),Ne(s,{code:fe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):gt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Fe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Fe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}kl.create=t=>new kl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:He.ZodDate,...Je(t)});class Ug extends st{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.symbol,received:r.parsedType}),We}return Cr(e.data)}}Ug.create=t=>new Ug({typeName:He.ZodSymbol,...Je(t)});class Xh extends st{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.undefined,received:r.parsedType}),We}return Cr(e.data)}}Xh.create=t=>new Xh({typeName:He.ZodUndefined,...Je(t)});class Zh extends st{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.null,received:r.parsedType}),We}return Cr(e.data)}}Zh.create=t=>new Zh({typeName:He.ZodNull,...Je(t)});class wu extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return Cr(e.data)}}wu.create=t=>new wu({typeName:He.ZodAny,...Je(t)});class ul extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cr(e.data)}}ul.create=t=>new ul({typeName:He.ZodUnknown,...Je(t)});class po extends st{_parse(e){const n=this._getOrReturnCtx(e);return Ne(n,{code:fe.invalid_type,expected:Te.never,received:n.parsedType}),We}}po.create=t=>new po({typeName:He.ZodNever,...Je(t)});class $g extends st{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.void,received:r.parsedType}),We}return Cr(e.data)}}$g.create=t=>new $g({typeName:He.ZodVoid,...Je(t)});class Bs extends st{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Te.array)return Ne(n,{code:fe.invalid_type,expected:Te.array,received:n.parsedType}),We;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(a||l)&&(Ne(n,{code:a?fe.too_big:fe.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ne(n,{code:fe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ne(n,{code:fe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>s.type._parseAsync(new Si(n,a,n.path,l)))).then(a=>mr.mergeArray(r,a));const o=[...n.data].map((a,l)=>s.type._parseSync(new Si(n,a,n.path,l)));return mr.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Bs({...this._def,minLength:{value:e,message:Fe.toString(n)}})}max(e,n){return new Bs({...this._def,maxLength:{value:e,message:Fe.toString(n)}})}length(e,n){return new Bs({...this._def,exactLength:{value:e,message:Fe.toString(n)}})}nonempty(e){return this.min(1,e)}}Bs.create=(t,e)=>new Bs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...Je(e)});function dc(t){if(t instanceof nn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=_i.create(dc(r))}return new nn({...t._def,shape:()=>e})}else return t instanceof Bs?new Bs({...t._def,type:dc(t.element)}):t instanceof _i?_i.create(dc(t.unwrap())):t instanceof ka?ka.create(dc(t.unwrap())):t instanceof Ti?Ti.create(t.items.map(e=>dc(e))):t}class nn extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=gt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Te.object){const u=this._getOrReturnCtx(e);return Ne(u,{code:fe.invalid_type,expected:Te.object,received:u.parsedType}),We}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof po&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||l.push(u);const c=[];for(const u of a){const d=o[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Si(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof po){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Ne(s,{code:fe.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Si(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>mr.mergeObjectSync(r,u)):mr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Fe.errToObj,new nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o,a,l;const c=(a=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Fe.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nn({...this._def,catchall:e})}pick(e){const n={};return gt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}omit(e){const n={};return gt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}deepPartial(){return dc(this)}partial(e){const n={};return gt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new nn({...this._def,shape:()=>n})}required(e){const n={};return gt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof _i;)o=o._def.innerType;n[r]=o}}),new nn({...this._def,shape:()=>n})}keyof(){return OL(gt.objectKeys(this.shape))}}nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:po.create(),typeName:He.ZodObject,...Je(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:po.create(),typeName:He.ZodObject,...Je(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:po.create(),typeName:He.ZodObject,...Je(e)});class Jh extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const a=o.map(l=>new ss(l.ctx.common.issues));return Ne(n,{code:fe.invalid_union,unionErrors:a}),We}if(n.common.async)return Promise.all(r.map(async o=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let o;const a=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const l=a.map(c=>new ss(c));return Ne(n,{code:fe.invalid_union,unionErrors:l}),We}}get options(){return this._def.options}}Jh.create=(t,e)=>new Jh({options:t,typeName:He.ZodUnion,...Je(e)});const Ui=t=>t instanceof nf?Ui(t.schema):t instanceof Gs?Ui(t.innerType()):t instanceof rf?[t.value]:t instanceof Ca?t.options:t instanceof sf?gt.objectValues(t.enum):t instanceof of?Ui(t._def.innerType):t instanceof Xh?[void 0]:t instanceof Zh?[null]:t instanceof _i?[void 0,...Ui(t.unwrap())]:t instanceof ka?[null,...Ui(t.unwrap())]:t instanceof Vj||t instanceof lf?Ui(t.unwrap()):t instanceof af?Ui(t._def.innerType):[];class yv extends st{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.object)return Ne(n,{code:fe.invalid_type,expected:Te.object,received:n.parsedType}),We;const r=this.discriminator,s=n.data[r],o=this.optionsMap.get(s);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(Ne(n,{code:fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const o of n){const a=Ui(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,o)}}return new yv({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Je(r)})}}function d_(t,e){const n=$o(t),r=$o(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&r===Te.object){const s=gt.objectKeys(e),o=gt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of o){const c=d_(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===Te.array&&r===Te.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const a=t[o],l=e[o],c=d_(a,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Te.date&&r===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ef extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,a)=>{if(c_(o)||c_(a))return We;const l=d_(o.value,a.value);return l.valid?((u_(o)||u_(a))&&n.dirty(),{status:n.value,value:l.data}):(Ne(r,{code:fe.invalid_intersection_types}),We)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ef.create=(t,e,n)=>new ef({left:t,right:e,typeName:He.ZodIntersection,...Je(n)});class Ti extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return Ne(r,{code:fe.invalid_type,expected:Te.array,received:r.parsedType}),We;if(r.data.length<this._def.items.length)return Ne(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&r.data.length>this._def.items.length&&(Ne(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((a,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Si(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>mr.mergeArray(n,a)):mr.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Ti({...this._def,rest:e})}}Ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ti({items:t,typeName:He.ZodTuple,rest:null,...Je(e)})};class tf extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.object)return Ne(r,{code:fe.invalid_type,expected:Te.object,received:r.parsedType}),We;const s=[],o=this._def.keyType,a=this._def.valueType;for(const l in r.data)s.push({key:o._parse(new Si(r,l,r.path,l)),value:a._parse(new Si(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?mr.mergeObjectAsync(n,s):mr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof st?new tf({keyType:e,valueType:n,typeName:He.ZodRecord,...Je(r)}):new tf({keyType:Ls.create(),valueType:e,typeName:He.ZodRecord,...Je(n)})}}class Bg extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return Ne(r,{code:fe.invalid_type,expected:Te.map,received:r.parsedType}),We;const s=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Si(r,l,r.path,[u,"key"])),value:o._parse(new Si(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return We;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}Bg.create=(t,e,n)=>new Bg({valueType:e,keyType:t,typeName:He.ZodMap,...Je(n)});class Al extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return Ne(r,{code:fe.invalid_type,expected:Te.set,received:r.parsedType}),We;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ne(r,{code:fe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ne(r,{code:fe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return We;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>o._parse(new Si(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new Al({...this._def,minSize:{value:e,message:Fe.toString(n)}})}max(e,n){return new Al({...this._def,maxSize:{value:e,message:Fe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Al.create=(t,e)=>new Al({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...Je(e)});class $c extends st{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.function)return Ne(n,{code:fe.invalid_type,expected:Te.function,received:n.parsedType}),We;function r(l,c){return Fg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Lg(),xu].filter(u=>!!u),issueData:{code:fe.invalid_arguments,argumentsError:c}})}function s(l,c){return Fg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Lg(),xu].filter(u=>!!u),issueData:{code:fe.invalid_return_type,returnTypeError:c}})}const o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof _u){const l=this;return Cr(async function(...c){const u=new ss([]),d=await l._def.args.parseAsync(c,o).catch(g=>{throw u.addIssue(r(c,g)),u}),f=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(f,o).catch(g=>{throw u.addIssue(s(f,g)),u})})}else{const l=this;return Cr(function(...c){const u=l._def.args.safeParse(c,o);if(!u.success)throw new ss([r(c,u.error)]);const d=Reflect.apply(a,this,u.data),f=l._def.returns.safeParse(d,o);if(!f.success)throw new ss([s(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $c({...this._def,args:Ti.create(e).rest(ul.create())})}returns(e){return new $c({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $c({args:e||Ti.create([]).rest(ul.create()),returns:n||ul.create(),typeName:He.ZodFunction,...Je(r)})}}class nf extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nf.create=(t,e)=>new nf({getter:t,typeName:He.ZodLazy,...Je(e)});class rf extends st{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ne(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}rf.create=(t,e)=>new rf({value:t,typeName:He.ZodLiteral,...Je(e)});function OL(t,e){return new Ca({values:t,typeName:He.ZodEnum,...Je(e)})}class Ca extends st{constructor(){super(...arguments),Fd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ne(n,{expected:gt.joinValues(r),received:n.parsedType,code:fe.invalid_type}),We}if(Vg(this,Fd)||IL(this,Fd,new Set(this._def.values)),!Vg(this,Fd).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ne(n,{received:n.data,code:fe.invalid_enum_value,options:r}),We}return Cr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ca.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ca.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Fd=new WeakMap;Ca.create=OL;class sf extends st{constructor(){super(...arguments),Vd.set(this,void 0)}_parse(e){const n=gt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const s=gt.objectValues(n);return Ne(r,{expected:gt.joinValues(s),received:r.parsedType,code:fe.invalid_type}),We}if(Vg(this,Vd)||IL(this,Vd,new Set(gt.getValidEnumValues(this._def.values))),!Vg(this,Vd).has(e.data)){const s=gt.objectValues(n);return Ne(r,{received:r.data,code:fe.invalid_enum_value,options:s}),We}return Cr(e.data)}get enum(){return this._def.values}}Vd=new WeakMap;sf.create=(t,e)=>new sf({values:t,typeName:He.ZodNativeEnum,...Je(e)});class _u extends st{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return Ne(n,{code:fe.invalid_type,expected:Te.promise,received:n.parsedType}),We;const r=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return Cr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_u.create=(t,e)=>new _u({type:t,typeName:He.ZodPromise,...Je(e)});class Gs extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:a=>{Ne(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const a=s.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return We;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?We:c.status==="dirty"||n.value==="dirty"?Nc(c.value):c});{if(n.value==="aborted")return We;const l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?We:l.status==="dirty"||n.value==="dirty"?Nc(l.value):l}}if(s.type==="refinement"){const a=l=>{const c=s.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?We:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?We:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gh(a))return a;const l=s.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Gh(a)?Promise.resolve(s.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);gt.assertNever(s)}}Gs.create=(t,e,n)=>new Gs({schema:t,typeName:He.ZodEffects,effect:e,...Je(n)});Gs.createWithPreprocess=(t,e,n)=>new Gs({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...Je(n)});class _i extends st{_parse(e){return this._getType(e)===Te.undefined?Cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_i.create=(t,e)=>new _i({innerType:t,typeName:He.ZodOptional,...Je(e)});class ka extends st{_parse(e){return this._getType(e)===Te.null?Cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ka.create=(t,e)=>new ka({innerType:t,typeName:He.ZodNullable,...Je(e)});class of extends st{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}of.create=(t,e)=>new of({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Je(e)});class af extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qh(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ss(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ss(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}af.create=(t,e)=>new af({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Je(e)});class zg extends st{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return Ne(r,{code:fe.invalid_type,expected:Te.nan,received:r.parsedType}),We}return{status:"valid",value:e.data}}}zg.create=t=>new zg({typeName:He.ZodNaN,...Je(t)});const wee=Symbol("zod_brand");class Vj extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Gf extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?We:o.status==="dirty"?(n.dirty(),Nc(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?We:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Gf({in:e,out:n,typeName:He.ZodPipeline})}}class lf extends st{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Gh(s)&&(s.value=Object.freeze(s.value)),s);return Qh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}lf.create=(t,e)=>new lf({innerType:t,typeName:He.ZodReadonly,...Je(e)});function ML(t,e={},n){return t?wu.create().superRefine((r,s)=>{var o,a;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(a=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...u,fatal:c})}}):wu.create()}const _ee={object:nn.lazycreate};var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const bee=(t,e={message:`Input not instance of ${t.name}`})=>ML(n=>n instanceof t,e),Sc=Ls.create,LL=Sa.create,Eee=zg.create,jee=Ta.create,FL=Yh.create,Nee=kl.create,See=Ug.create,Tee=Xh.create,Cee=Zh.create,kee=wu.create,Aee=ul.create,Iee=po.create,Ree=$g.create,Pee=Bs.create,VL=nn.create,Dee=nn.strictCreate,Oee=Jh.create,Mee=yv.create,Lee=ef.create,Fee=Ti.create,Vee=tf.create,Uee=Bg.create,$ee=Al.create,Bee=$c.create,zee=nf.create,qee=rf.create,UL=Ca.create,Hee=sf.create,Wee=_u.create,QC=Gs.create,Kee=_i.create,Gee=ka.create,Qee=Gs.createWithPreprocess,Yee=Gf.create,Xee=()=>Sc().optional(),Zee=()=>LL().optional(),Jee=()=>FL().optional(),$L={string:t=>Ls.create({...t,coerce:!0}),number:t=>Sa.create({...t,coerce:!0}),boolean:t=>Yh.create({...t,coerce:!0}),bigint:t=>Ta.create({...t,coerce:!0}),date:t=>kl.create({...t,coerce:!0})},ete=We;var Ht=Object.freeze({__proto__:null,defaultErrorMap:xu,setErrorMap:ree,getErrorMap:Lg,makeIssue:Fg,EMPTY_PATH:see,addIssueToContext:Ne,ParseStatus:mr,INVALID:We,DIRTY:Nc,OK:Cr,isAborted:c_,isDirty:u_,isValid:Gh,isAsync:Qh,get util(){return gt},get objectUtil(){return l_},ZodParsedType:Te,getParsedType:$o,ZodType:st,datetimeRegex:DL,ZodString:Ls,ZodNumber:Sa,ZodBigInt:Ta,ZodBoolean:Yh,ZodDate:kl,ZodSymbol:Ug,ZodUndefined:Xh,ZodNull:Zh,ZodAny:wu,ZodUnknown:ul,ZodNever:po,ZodVoid:$g,ZodArray:Bs,ZodObject:nn,ZodUnion:Jh,ZodDiscriminatedUnion:yv,ZodIntersection:ef,ZodTuple:Ti,ZodRecord:tf,ZodMap:Bg,ZodSet:Al,ZodFunction:$c,ZodLazy:nf,ZodLiteral:rf,ZodEnum:Ca,ZodNativeEnum:sf,ZodPromise:_u,ZodEffects:Gs,ZodTransformer:Gs,ZodOptional:_i,ZodNullable:ka,ZodDefault:of,ZodCatch:af,ZodNaN:zg,BRAND:wee,ZodBranded:Vj,ZodPipeline:Gf,ZodReadonly:lf,custom:ML,Schema:st,ZodSchema:st,late:_ee,get ZodFirstPartyTypeKind(){return He},coerce:$L,any:kee,array:Pee,bigint:jee,boolean:FL,date:Nee,discriminatedUnion:Mee,effect:QC,enum:UL,function:Bee,instanceof:bee,intersection:Lee,lazy:zee,literal:qee,map:Uee,nan:Eee,nativeEnum:Hee,never:Iee,null:Cee,nullable:Gee,number:LL,object:VL,oboolean:Jee,onumber:Zee,optional:Kee,ostring:Xee,pipeline:Yee,preprocess:Qee,promise:Wee,record:Vee,set:$ee,strictObject:Dee,string:Sc,symbol:See,transformer:QC,tuple:Fee,undefined:Tee,union:Oee,unknown:Aee,void:Ree,NEVER:ete,ZodIssueCode:fe,quotelessJson:nee,ZodError:ss}),Qf=t=>t.type==="checkbox",tl=t=>t instanceof Date,br=t=>t==null;const BL=t=>typeof t=="object";var _n=t=>!br(t)&&!Array.isArray(t)&&BL(t)&&!tl(t),zL=t=>_n(t)&&t.target?Qf(t.target)?t.target.checked:t.target.value:t,tte=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,qL=(t,e)=>t.has(tte(e)),nte=t=>{const e=t.constructor&&t.constructor.prototype;return _n(e)&&e.hasOwnProperty("isPrototypeOf")},Uj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Uj&&(t instanceof Blob||t instanceof FileList))&&(n||_n(t)))if(e=n?[]:{},!n&&!nte(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Dr(t[r]));else return t;return e}var vv=t=>Array.isArray(t)?t.filter(Boolean):[],pn=t=>t===void 0,ye=(t,e,n)=>{if(!e||!_n(t))return n;const r=vv(e.split(/[,[\].]+?/)).reduce((s,o)=>br(s)?s:s[o],t);return pn(r)||r===t?pn(t[e])?n:t[e]:r},hs=t=>typeof t=="boolean",$j=t=>/^\w*$/.test(t),HL=t=>vv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),bt=(t,e,n)=>{let r=-1;const s=$j(e)?[e]:HL(e),o=s.length,a=o-1;for(;++r<o;){const l=s[r];let c=n;if(r!==a){const u=t[l];c=_n(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const qg={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ms={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Li={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},WL=se.createContext(null),xv=()=>se.useContext(WL),rte=t=>{const{children:e,...n}=t;return se.createElement(WL.Provider,{value:n},e)};var KL=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(s,o,{get:()=>{const a=o;return e._proxyFormState[a]!==Ms.all&&(e._proxyFormState[a]=!r||Ms.all),n&&(n[a]=!0),t[a]}});return s},Or=t=>_n(t)&&!Object.keys(t).length,GL=(t,e,n,r)=>{n(t);const{name:s,...o}=t;return Or(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(a=>e[a]===(!r||Ms.all))},sh=t=>Array.isArray(t)?t:[t],QL=(t,e,n)=>!t||!e||t===e||sh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function Bj(t){const e=se.useRef(t);e.current=t,se.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function ste(t){const e=xv(),{control:n=e.control,disabled:r,name:s,exact:o}=t||{},[a,l]=se.useState(n._formState),c=se.useRef(!0),u=se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=se.useRef(s);return d.current=s,Bj({disabled:r,next:f=>c.current&&QL(d.current,f.name,o)&&GL(f,u.current,n._updateFormState)&&l({...n._formState,...f}),subject:n._subjects.state}),se.useEffect(()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),KL(a,n,u.current,!1)}var fi=t=>typeof t=="string",YL=(t,e,n,r,s)=>fi(t)?(r&&e.watch.add(t),ye(n,t,s)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),ye(n,o))):(r&&(e.watchAll=!0),n);function ite(t){const e=xv(),{control:n=e.control,name:r,defaultValue:s,disabled:o,exact:a}=t||{},l=se.useRef(r);l.current=r,Bj({disabled:o,subject:n._subjects.values,next:d=>{QL(l.current,d.name,a)&&u(Dr(YL(l.current,n._names,d.values||n._formValues,!1,s)))}});const[c,u]=se.useState(n._getWatch(r,s));return se.useEffect(()=>n._removeUnmounted()),c}function ote(t){const e=xv(),{name:n,disabled:r,control:s=e.control,shouldUnregister:o}=t,a=qL(s._names.array,n),l=ite({control:s,name:n,defaultValue:ye(s._formValues,n,ye(s._defaultValues,n,t.defaultValue)),exact:!0}),c=ste({control:s,name:n,exact:!0}),u=se.useRef(s.register(n,{...t.rules,value:l,...hs(t.disabled)?{disabled:t.disabled}:{}}));return se.useEffect(()=>{const d=s._options.shouldUnregister||o,f=(m,g)=>{const y=ye(s._fields,m);y&&y._f&&(y._f.mount=g)};if(f(n,!0),d){const m=Dr(ye(s._options.defaultValues,n));bt(s._defaultValues,n,m),pn(ye(s._formValues,n))&&bt(s._formValues,n,m)}return()=>{(a?d&&!s._state.action:d)?s.unregister(n):f(n,!1)}},[n,s,a,o]),se.useEffect(()=>{ye(s._fields,n)&&s._updateDisabledField({disabled:r,fields:s._fields,name:n,value:ye(s._fields,n)._f.value})},[r,n,s]),{field:{name:n,value:l,...hs(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:se.useCallback(d=>u.current.onChange({target:{value:zL(d),name:n},type:qg.CHANGE}),[n]),onBlur:se.useCallback(()=>u.current.onBlur({target:{value:ye(s._formValues,n),name:n},type:qg.BLUR}),[n,s]),ref:se.useCallback(d=>{const f=ye(s._fields,n);f&&d&&(f._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:m=>d.setCustomValidity(m),reportValidity:()=>d.reportValidity()})},[s._fields,n])},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!ye(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ye(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ye(c.validatingFields,n)},error:{enumerable:!0,get:()=>ye(c.errors,n)}})}}const ate=t=>t.render(ote(t));var XL=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},YC=t=>({isOnSubmit:!t||t===Ms.onSubmit,isOnBlur:t===Ms.onBlur,isOnChange:t===Ms.onChange,isOnAll:t===Ms.all,isOnTouch:t===Ms.onTouched}),XC=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ih=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const o=ye(t,s);if(o){const{_f:a,...l}=o;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(ih(l,e))break}else if(_n(l)&&ih(l,e))break}}};var lte=(t,e,n)=>{const r=sh(ye(t,n));return bt(r,"root",e[n]),bt(t,n,r),t},zj=t=>t.type==="file",Yi=t=>typeof t=="function",Hg=t=>{if(!Uj)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},kp=t=>fi(t),qj=t=>t.type==="radio",Wg=t=>t instanceof RegExp;const ZC={value:!1,isValid:!1},JC={value:!0,isValid:!0};var ZL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!pn(t[0].attributes.value)?pn(t[0].value)||t[0].value===""?JC:{value:t[0].value,isValid:!0}:JC:ZC}return ZC};const ek={isValid:!1,value:null};var JL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,ek):ek;function tk(t,e,n="validate"){if(kp(t)||Array.isArray(t)&&t.every(kp)||hs(t)&&!t)return{type:n,message:kp(t)?t:"",ref:e}}var ic=t=>_n(t)&&!Wg(t)?t:{value:t,message:""},nk=async(t,e,n,r,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:m,validate:g,name:y,valueAsNumber:v,mount:x,disabled:b}=t._f,w=ye(e,y);if(!x||b)return{};const E=a?a[0]:o,C=I=>{r&&E.reportValidity&&(E.setCustomValidity(hs(I)?"":I||""),E.reportValidity())},R={},L=qj(o),A=Qf(o),j=L||A,S=(v||zj(o))&&pn(o.value)&&pn(w)||Hg(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,k=XL.bind(null,y,n,R),O=(I,N,$,U=Li.maxLength,V=Li.minLength)=>{const z=I?N:$;R[y]={type:I?U:V,message:z,ref:o,...k(I?U:V,z)}};if(s?!Array.isArray(w)||!w.length:l&&(!j&&(S||br(w))||hs(w)&&!w||A&&!ZL(a).isValid||L&&!JL(a).isValid)){const{value:I,message:N}=kp(l)?{value:!!l,message:l}:ic(l);if(I&&(R[y]={type:Li.required,message:N,ref:E,...k(Li.required,N)},!n))return C(N),R}if(!S&&(!br(d)||!br(f))){let I,N;const $=ic(f),U=ic(d);if(!br(w)&&!isNaN(w)){const V=o.valueAsNumber||w&&+w;br($.value)||(I=V>$.value),br(U.value)||(N=V<U.value)}else{const V=o.valueAsDate||new Date(w),z=Y=>new Date(new Date().toDateString()+" "+Y),F=o.type=="time",H=o.type=="week";fi($.value)&&w&&(I=F?z(w)>z($.value):H?w>$.value:V>new Date($.value)),fi(U.value)&&w&&(N=F?z(w)<z(U.value):H?w<U.value:V<new Date(U.value))}if((I||N)&&(O(!!I,$.message,U.message,Li.max,Li.min),!n))return C(R[y].message),R}if((c||u)&&!S&&(fi(w)||s&&Array.isArray(w))){const I=ic(c),N=ic(u),$=!br(I.value)&&w.length>+I.value,U=!br(N.value)&&w.length<+N.value;if(($||U)&&(O($,I.message,N.message),!n))return C(R[y].message),R}if(m&&!S&&fi(w)){const{value:I,message:N}=ic(m);if(Wg(I)&&!w.match(I)&&(R[y]={type:Li.pattern,message:N,ref:o,...k(Li.pattern,N)},!n))return C(N),R}if(g){if(Yi(g)){const I=await g(w,e),N=tk(I,E);if(N&&(R[y]={...N,...k(Li.validate,N.message)},!n))return C(N.message),R}else if(_n(g)){let I={};for(const N in g){if(!Or(I)&&!n)break;const $=tk(await g[N](w,e),E,N);$&&(I={...$,...k(N,$.message)},C($.message),n&&(R[y]=I))}if(!Or(I)&&(R[y]={ref:E,...I},!n))return R}}return C(!0),R};function cte(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=pn(t)?r++:t[e[r++]];return t}function ute(t){for(const e in t)if(t.hasOwnProperty(e)&&!pn(t[e]))return!1;return!0}function An(t,e){const n=Array.isArray(e)?e:$j(e)?[e]:HL(e),r=n.length===1?t:cte(t,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(_n(r)&&Or(r)||Array.isArray(r)&&ute(r))&&An(t,n.slice(0,-1)),t}var nw=()=>{let t=[];return{get observers(){return t},next:s=>{for(const o of t)o.next&&o.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(o=>o!==s)}}),unsubscribe:()=>{t=[]}}},h_=t=>br(t)||!BL(t);function Bo(t,e){if(h_(t)||h_(e))return t===e;if(tl(t)&&tl(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const o=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(tl(o)&&tl(a)||_n(o)&&_n(a)||Array.isArray(o)&&Array.isArray(a)?!Bo(o,a):o!==a)return!1}}return!0}var e4=t=>t.type==="select-multiple",dte=t=>qj(t)||Qf(t),rw=t=>Hg(t)&&t.isConnected,t4=t=>{for(const e in t)if(Yi(t[e]))return!0;return!1};function Kg(t,e={}){const n=Array.isArray(t);if(_n(t)||n)for(const r in t)Array.isArray(t[r])||_n(t[r])&&!t4(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Kg(t[r],e[r])):br(t[r])||(e[r]=!0);return e}function n4(t,e,n){const r=Array.isArray(t);if(_n(t)||r)for(const s in t)Array.isArray(t[s])||_n(t[s])&&!t4(t[s])?pn(e)||h_(n[s])?n[s]=Array.isArray(t[s])?Kg(t[s],[]):{...Kg(t[s])}:n4(t[s],br(e)?{}:e[s],n[s]):n[s]=!Bo(t[s],e[s]);return n}var bd=(t,e)=>n4(t,e,Kg(e)),r4=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>pn(t)?t:e?t===""?NaN:t&&+t:n&&fi(t)?new Date(t):r?r(t):t;function sw(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return zj(e)?e.files:qj(e)?JL(t.refs).value:e4(e)?[...e.selectedOptions].map(({value:n})=>n):Qf(e)?ZL(t.refs).value:r4(pn(e.value)?t.ref.value:e.value,t)}var hte=(t,e,n,r)=>{const s={};for(const o of t){const a=ye(e,o);a&&bt(s,o,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Ed=t=>pn(t)?t:Wg(t)?t.source:_n(t)?Wg(t.value)?t.value.source:t.value:t;const rk="AsyncFunction";var fte=t=>(!t||!t.validate)&&!!(Yi(t.validate)&&t.validate.constructor.name===rk||_n(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===rk)),mte=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function sk(t,e,n){const r=ye(t,n);if(r||$j(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),a=ye(e,o),l=ye(t,o);if(a&&!Array.isArray(a)&&n!==o)return{name:n};if(l&&l.type)return{name:o,error:l};s.pop()}return{name:n}}var pte=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,gte=(t,e)=>!vv(ye(t,e)).length&&An(t,e);const yte={mode:Ms.onSubmit,reValidateMode:Ms.onChange,shouldFocusError:!0};function vte(t={}){let e={...yte,...t},n={submitCount:0,isDirty:!1,isLoading:Yi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=_n(e.defaultValues)||_n(e.values)?Dr(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Dr(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:nw(),array:nw(),state:nw()},m=YC(e.mode),g=YC(e.reValidateMode),y=e.criteriaMode===Ms.all,v=M=>B=>{clearTimeout(u),u=setTimeout(M,B)},x=async M=>{if(!t.disabled&&(d.isValid||M)){const B=e.resolver?Or((await j()).errors):await k(r,!0);B!==n.isValid&&f.state.next({isValid:B})}},b=(M,B)=>{!t.disabled&&(d.isValidating||d.validatingFields)&&((M||Array.from(l.mount)).forEach(X=>{X&&(B?bt(n.validatingFields,X,B):An(n.validatingFields,X))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Or(n.validatingFields)}))},w=(M,B=[],X,de,pe=!0,le=!0)=>{if(de&&X&&!t.disabled){if(a.action=!0,le&&Array.isArray(ye(r,M))){const ke=X(ye(r,M),de.argA,de.argB);pe&&bt(r,M,ke)}if(le&&Array.isArray(ye(n.errors,M))){const ke=X(ye(n.errors,M),de.argA,de.argB);pe&&bt(n.errors,M,ke),gte(n.errors,M)}if(d.touchedFields&&le&&Array.isArray(ye(n.touchedFields,M))){const ke=X(ye(n.touchedFields,M),de.argA,de.argB);pe&&bt(n.touchedFields,M,ke)}d.dirtyFields&&(n.dirtyFields=bd(s,o)),f.state.next({name:M,isDirty:I(M,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bt(o,M,B)},E=(M,B)=>{bt(n.errors,M,B),f.state.next({errors:n.errors})},C=M=>{n.errors=M,f.state.next({errors:n.errors,isValid:!1})},R=(M,B,X,de)=>{const pe=ye(r,M);if(pe){const le=ye(o,M,pn(X)?ye(s,M):X);pn(le)||de&&de.defaultChecked||B?bt(o,M,B?le:sw(pe._f)):U(M,le),a.mount&&x()}},L=(M,B,X,de,pe)=>{let le=!1,ke=!1;const $e={name:M};if(!t.disabled){const tt=!!(ye(r,M)&&ye(r,M)._f&&ye(r,M)._f.disabled);if(!X||de){d.isDirty&&(ke=n.isDirty,n.isDirty=$e.isDirty=I(),le=ke!==$e.isDirty);const Ye=tt||Bo(ye(s,M),B);ke=!!(!tt&&ye(n.dirtyFields,M)),Ye||tt?An(n.dirtyFields,M):bt(n.dirtyFields,M,!0),$e.dirtyFields=n.dirtyFields,le=le||d.dirtyFields&&ke!==!Ye}if(X){const Ye=ye(n.touchedFields,M);Ye||(bt(n.touchedFields,M,X),$e.touchedFields=n.touchedFields,le=le||d.touchedFields&&Ye!==X)}le&&pe&&f.state.next($e)}return le?$e:{}},A=(M,B,X,de)=>{const pe=ye(n.errors,M),le=d.isValid&&hs(B)&&n.isValid!==B;if(t.delayError&&X?(c=v(()=>E(M,X)),c(t.delayError)):(clearTimeout(u),c=null,X?bt(n.errors,M,X):An(n.errors,M)),(X?!Bo(pe,X):pe)||!Or(de)||le){const ke={...de,...le&&hs(B)?{isValid:B}:{},errors:n.errors,name:M};n={...n,...ke},f.state.next(ke)}},j=async M=>{b(M,!0);const B=await e.resolver(o,e.context,hte(M||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(M),B},S=async M=>{const{errors:B}=await j(M);if(M)for(const X of M){const de=ye(B,X);de?bt(n.errors,X,de):An(n.errors,X)}else n.errors=B;return B},k=async(M,B,X={valid:!0})=>{for(const de in M){const pe=M[de];if(pe){const{_f:le,...ke}=pe;if(le){const $e=l.array.has(le.name),tt=pe._f&&fte(pe._f);tt&&d.validatingFields&&b([de],!0);const Ye=await nk(pe,o,y,e.shouldUseNativeValidation&&!B,$e);if(tt&&d.validatingFields&&b([de]),Ye[le.name]&&(X.valid=!1,B))break;!B&&(ye(Ye,le.name)?$e?lte(n.errors,Ye,le.name):bt(n.errors,le.name,Ye[le.name]):An(n.errors,le.name))}!Or(ke)&&await k(ke,B,X)}}return X.valid},O=()=>{for(const M of l.unMount){const B=ye(r,M);B&&(B._f.refs?B._f.refs.every(X=>!rw(X)):!rw(B._f.ref))&&Pe(M)}l.unMount=new Set},I=(M,B)=>!t.disabled&&(M&&B&&bt(o,M,B),!Bo(q(),s)),N=(M,B,X)=>YL(M,l,{...a.mount?o:pn(B)?s:fi(M)?{[M]:B}:B},X,B),$=M=>vv(ye(a.mount?o:s,M,t.shouldUnregister?ye(s,M,[]):[])),U=(M,B,X={})=>{const de=ye(r,M);let pe=B;if(de){const le=de._f;le&&(!le.disabled&&bt(o,M,r4(B,le)),pe=Hg(le.ref)&&br(B)?"":B,e4(le.ref)?[...le.ref.options].forEach(ke=>ke.selected=pe.includes(ke.value)):le.refs?Qf(le.ref)?le.refs.length>1?le.refs.forEach(ke=>(!ke.defaultChecked||!ke.disabled)&&(ke.checked=Array.isArray(pe)?!!pe.find($e=>$e===ke.value):pe===ke.value)):le.refs[0]&&(le.refs[0].checked=!!pe):le.refs.forEach(ke=>ke.checked=ke.value===pe):zj(le.ref)?le.ref.value="":(le.ref.value=pe,le.ref.type||f.values.next({name:M,values:{...o}})))}(X.shouldDirty||X.shouldTouch)&&L(M,pe,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&Y(M)},V=(M,B,X)=>{for(const de in B){const pe=B[de],le=`${M}.${de}`,ke=ye(r,le);(l.array.has(M)||_n(pe)||ke&&!ke._f)&&!tl(pe)?V(le,pe,X):U(le,pe,X)}},z=(M,B,X={})=>{const de=ye(r,M),pe=l.array.has(M),le=Dr(B);bt(o,M,le),pe?(f.array.next({name:M,values:{...o}}),(d.isDirty||d.dirtyFields)&&X.shouldDirty&&f.state.next({name:M,dirtyFields:bd(s,o),isDirty:I(M,le)})):de&&!de._f&&!br(le)?V(M,le,X):U(M,le,X),XC(M,l)&&f.state.next({...n}),f.values.next({name:a.mount?M:void 0,values:{...o}})},F=async M=>{a.mount=!0;const B=M.target;let X=B.name,de=!0;const pe=ye(r,X),le=()=>B.type?sw(pe._f):zL(M),ke=$e=>{de=Number.isNaN($e)||tl($e)&&isNaN($e.getTime())||Bo($e,ye(o,X,$e))};if(pe){let $e,tt;const Ye=le(),yr=M.type===qg.BLUR||M.type===qg.FOCUS_OUT,Ss=!mte(pe._f)&&!e.resolver&&!ye(n.errors,X)&&!pe._f.deps||pte(yr,ye(n.touchedFields,X),n.isSubmitted,g,m),Ri=XC(X,l,yr);bt(o,X,Ye),yr?(pe._f.onBlur&&pe._f.onBlur(M),c&&c(0)):pe._f.onChange&&pe._f.onChange(M);const za=L(X,Ye,yr,!1),ei=!Or(za)||Ri;if(!yr&&f.values.next({name:X,type:M.type,values:{...o}}),Ss)return d.isValid&&(t.mode==="onBlur"?yr&&x():x()),ei&&f.state.next({name:X,...Ri?{}:za});if(!yr&&Ri&&f.state.next({...n}),e.resolver){const{errors:wo}=await j([X]);if(ke(Ye),de){const Ql=sk(n.errors,r,X),ti=sk(wo,r,Ql.name||X);$e=ti.error,X=ti.name,tt=Or(wo)}}else b([X],!0),$e=(await nk(pe,o,y,e.shouldUseNativeValidation))[X],b([X]),ke(Ye),de&&($e?tt=!1:d.isValid&&(tt=await k(r,!0)));de&&(pe._f.deps&&Y(pe._f.deps),A(X,tt,$e,za))}},H=(M,B)=>{if(ye(n.errors,B)&&M.focus)return M.focus(),1},Y=async(M,B={})=>{let X,de;const pe=sh(M);if(e.resolver){const le=await S(pn(M)?M:pe);X=Or(le),de=M?!pe.some(ke=>ye(le,ke)):X}else M?(de=(await Promise.all(pe.map(async le=>{const ke=ye(r,le);return await k(ke&&ke._f?{[le]:ke}:ke)}))).every(Boolean),!(!de&&!n.isValid)&&x()):de=X=await k(r);return f.state.next({...!fi(M)||d.isValid&&X!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:X}:{},errors:n.errors}),B.shouldFocus&&!de&&ih(r,H,M?pe:l.mount),de},q=M=>{const B={...a.mount?o:s};return pn(M)?B:fi(M)?ye(B,M):M.map(X=>ye(B,X))},W=(M,B)=>({invalid:!!ye((B||n).errors,M),isDirty:!!ye((B||n).dirtyFields,M),error:ye((B||n).errors,M),isValidating:!!ye(n.validatingFields,M),isTouched:!!ye((B||n).touchedFields,M)}),re=M=>{M&&sh(M).forEach(B=>An(n.errors,B)),f.state.next({errors:M?n.errors:{}})},je=(M,B,X)=>{const de=(ye(r,M,{_f:{}})._f||{}).ref,pe=ye(n.errors,M)||{},{ref:le,message:ke,type:$e,...tt}=pe;bt(n.errors,M,{...tt,...B,ref:de}),f.state.next({name:M,errors:n.errors,isValid:!1}),X&&X.shouldFocus&&de&&de.focus&&de.focus()},Re=(M,B)=>Yi(M)?f.values.subscribe({next:X=>M(N(void 0,B),X)}):N(M,B,!0),Pe=(M,B={})=>{for(const X of M?sh(M):l.mount)l.mount.delete(X),l.array.delete(X),B.keepValue||(An(r,X),An(o,X)),!B.keepError&&An(n.errors,X),!B.keepDirty&&An(n.dirtyFields,X),!B.keepTouched&&An(n.touchedFields,X),!B.keepIsValidating&&An(n.validatingFields,X),!e.shouldUnregister&&!B.keepDefaultValue&&An(s,X);f.values.next({values:{...o}}),f.state.next({...n,...B.keepDirty?{isDirty:I()}:{}}),!B.keepIsValid&&x()},xe=({disabled:M,name:B,field:X,fields:de,value:pe})=>{if(hs(M)&&a.mount||M){const le=M?void 0:pn(pe)?sw(X?X._f:ye(de,B)._f):pe;bt(o,B,le),L(B,le,!1,!1,!0)}},Q=(M,B={})=>{let X=ye(r,M);const de=hs(B.disabled)||hs(t.disabled);return bt(r,M,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:M}},name:M,mount:!0,...B}}),l.mount.add(M),X?xe({field:X,disabled:hs(B.disabled)?B.disabled:t.disabled,name:M,value:B.value}):R(M,!0,B.value),{...de?{disabled:B.disabled||t.disabled}:{},...e.progressive?{required:!!B.required,min:Ed(B.min),max:Ed(B.max),minLength:Ed(B.minLength),maxLength:Ed(B.maxLength),pattern:Ed(B.pattern)}:{},name:M,onChange:F,onBlur:F,ref:pe=>{if(pe){Q(M,B),X=ye(r,M);const le=pn(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ke=dte(le),$e=X._f.refs||[];if(ke?$e.find(tt=>tt===le):le===X._f.ref)return;bt(r,M,{_f:{...X._f,...ke?{refs:[...$e.filter(rw),le,...Array.isArray(ye(s,M))?[{}]:[]],ref:{type:le.type,name:M}}:{ref:le}}}),R(M,!1,void 0,le)}else X=ye(r,M,{}),X._f&&(X._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(qL(l.array,M)&&a.action)&&l.unMount.add(M)}}},ce=()=>e.shouldFocusError&&ih(r,H,l.mount),P=M=>{hs(M)&&(f.state.next({disabled:M}),ih(r,(B,X)=>{const de=ye(r,X);de&&(B.disabled=de._f.disabled||M,Array.isArray(de._f.refs)&&de._f.refs.forEach(pe=>{pe.disabled=de._f.disabled||M}))},0,!1))},Z=(M,B)=>async X=>{let de;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let pe=Dr(o);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:le,values:ke}=await j();n.errors=le,pe=ke}else await k(r);if(An(n.errors,"root"),Or(n.errors)){f.state.next({errors:{}});try{await M(pe,X)}catch(le){de=le}}else B&&await B({...n.errors},X),ce(),setTimeout(ce);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(n.errors)&&!de,submitCount:n.submitCount+1,errors:n.errors}),de)throw de},J=(M,B={})=>{ye(r,M)&&(pn(B.defaultValue)?z(M,Dr(ye(s,M))):(z(M,B.defaultValue),bt(s,M,Dr(B.defaultValue))),B.keepTouched||An(n.touchedFields,M),B.keepDirty||(An(n.dirtyFields,M),n.isDirty=B.defaultValue?I(M,Dr(ye(s,M))):I()),B.keepError||(An(n.errors,M),d.isValid&&x()),f.state.next({...n}))},we=(M,B={})=>{const X=M?Dr(M):s,de=Dr(X),pe=Or(M),le=pe?s:de;if(B.keepDefaultValues||(s=X),!B.keepValues){if(B.keepDirtyValues){const ke=new Set([...l.mount,...Object.keys(bd(s,o))]);for(const $e of Array.from(ke))ye(n.dirtyFields,$e)?bt(le,$e,ye(o,$e)):z($e,ye(le,$e))}else{if(Uj&&pn(M))for(const ke of l.mount){const $e=ye(r,ke);if($e&&$e._f){const tt=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if(Hg(tt)){const Ye=tt.closest("form");if(Ye){Ye.reset();break}}}}r={}}o=t.shouldUnregister?B.keepDefaultValues?Dr(s):{}:Dr(le),f.array.next({values:{...le}}),f.values.next({values:{...le}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,a.watch=!!t.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Bo(M,s)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:B.keepDirtyValues?B.keepDefaultValues&&o?bd(s,o):n.dirtyFields:B.keepDefaultValues&&M?bd(s,M):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},mt=(M,B)=>we(Yi(M)?M(o):M,B);return{control:{register:Q,unregister:Pe,getFieldState:W,handleSubmit:Z,setError:je,_executeSchema:j,_getWatch:N,_getDirty:I,_updateValid:x,_removeUnmounted:O,_updateFieldArray:w,_updateDisabledField:xe,_getFieldArray:$,_reset:we,_resetDefaultValues:()=>Yi(e.defaultValues)&&e.defaultValues().then(M=>{mt(M,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:M=>{n={...n,...M}},_disableForm:P,_subjects:f,_proxyFormState:d,_setErrors:C,get _fields(){return r},get _formValues(){return o},get _state(){return a},set _state(M){a=M},get _defaultValues(){return s},get _names(){return l},set _names(M){l=M},get _formState(){return n},set _formState(M){n=M},get _options(){return e},set _options(M){e={...e,...M}}},trigger:Y,register:Q,handleSubmit:Z,watch:Re,setValue:z,getValues:q,reset:mt,resetField:J,clearErrors:re,unregister:Pe,setError:je,setFocus:(M,B={})=>{const X=ye(r,M),de=X&&X._f;if(de){const pe=de.refs?de.refs[0]:de.ref;pe.focus&&(pe.focus(),B.shouldSelect&&pe.select())}},getFieldState:W}}function bu(t={}){const e=se.useRef(),n=se.useRef(),[r,s]=se.useState({isDirty:!1,isValidating:!1,isLoading:Yi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Yi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...vte(t),formState:r});const o=e.current.control;return o._options=t,Bj({subject:o._subjects.state,next:a=>{GL(a,o._proxyFormState,o._updateFormState,!0)&&s({...o._formState})}}),se.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),se.useEffect(()=>{if(o._proxyFormState.isDirty){const a=o._getDirty();a!==r.isDirty&&o._subjects.state.next({isDirty:a})}},[o,r.isDirty]),se.useEffect(()=>{t.values&&!Bo(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,s(a=>({...a}))):o._resetDefaultValues()},[t.values,o]),se.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),se.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),se.useEffect(()=>{t.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[t.shouldUnregister,o]),se.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[r]),e.current.formState=KL(r,o),e.current}const ik=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ye(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},s4=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?ik(r.ref,n,t):r.refs&&r.refs.forEach(s=>ik(s,n,t))}},xte=(t,e)=>{e.shouldUseNativeValidation&&s4(t,e);const n={};for(const r in t){const s=ye(e.fields,r),o=Object.assign(t[r]||{},{ref:s&&s.ref});if(wte(e.names||Object.keys(t),r)){const a=Object.assign({},ye(n,r));bt(a,"root",o),bt(n,r,a)}else bt(n,r,o)}return n},wte=(t,e)=>t.some(n=>n.startsWith(e+"."));var _te=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,o=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[a]={message:l.message,type:l.code}}else n[a]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[a].types,u=c&&c[r.code];n[a]=XL(a,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},Eu=function(t,e,n){return n===void 0&&(n={}),function(r,s,o){try{return Promise.resolve(function(a,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return o.shouldUseNativeValidation&&s4({},o),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(a){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(a))return{values:{},errors:xte(_te(a.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw a}))}catch(a){return Promise.reject(a)}}},bte="Label",i4=p.forwardRef((t,e)=>i.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));i4.displayName=bte;var o4=i4;const Ete=Ru("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=p.forwardRef(({className:t,...e},n)=>i.jsx(o4,{ref:n,className:me(Ete(),t),...e}));ne.displayName=o4.displayName;const ju=rte,a4=p.createContext({}),Wt=({...t})=>i.jsx(a4.Provider,{value:{name:t.name},children:i.jsx(ate,{...t})}),wv=()=>{const t=p.useContext(a4),e=p.useContext(l4),{getFieldState:n,formState:r}=xv(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},l4=p.createContext({}),Ot=p.forwardRef(({className:t,...e},n)=>{const r=p.useId();return i.jsx(l4.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:me("space-y-2",t),...e})})});Ot.displayName="FormItem";const Mt=p.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=wv();return i.jsx(ne,{ref:n,className:me(r&&"text-destructive",t),htmlFor:s,...e})});Mt.displayName="FormLabel";const Lt=p.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:o}=wv();return i.jsx(ao,{ref:e,id:r,"aria-describedby":n?`${s} ${o}`:`${s}`,"aria-invalid":!!n,...t})});Lt.displayName="FormControl";const Nu=p.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=wv();return i.jsx("p",{ref:n,id:r,className:me("text-sm text-muted-foreground",t),...e})});Nu.displayName="FormDescription";const Ft=p.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:o}=wv(),a=s?String(s==null?void 0:s.message):e;return a?i.jsx("p",{ref:r,id:o,className:me("text-sm font-medium text-destructive",t),...n,children:a}):null});Ft.displayName="FormMessage";function ok(t,[e,n]){return Math.min(n,Math.max(e,t))}function Hj(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var jte=[" ","Enter","ArrowUp","ArrowDown"],Nte=[" ","Enter"],Yf="Select",[_v,bv,Ste]=wy(Yf),[Ku,Sle]=js(Yf,[Ste,Mu]),Ev=Mu(),[Tte,Ua]=Ku(Yf),[Cte,kte]=Ku(Yf),c4=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:g,form:y}=t,v=Ev(e),[x,b]=p.useState(null),[w,E]=p.useState(null),[C,R]=p.useState(!1),L=zf(u),[A=!1,j]=bi({prop:r,defaultProp:s,onChange:o}),[S,k]=bi({prop:a,defaultProp:l,onChange:c}),O=p.useRef(null),I=x?y||!!x.closest("form"):!0,[N,$]=p.useState(new Set),U=Array.from(N).map(V=>V.props.value).join(";");return i.jsx(qb,{...v,children:i.jsxs(Tte,{required:g,scope:e,trigger:x,onTriggerChange:b,valueNode:w,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:$s(),value:S,onValueChange:k,open:A,onOpenChange:j,dir:L,triggerPointerDownPosRef:O,disabled:m,children:[i.jsx(_v.Provider,{scope:e,children:i.jsx(Cte,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(V=>{$(z=>new Set(z).add(V))},[]),onNativeOptionRemove:p.useCallback(V=>{$(z=>{const F=new Set(z);return F.delete(V),F})},[]),children:n})}),I?i.jsxs(D4,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:S,onChange:V=>k(V.target.value),disabled:m,form:y,children:[S===void 0?i.jsx("option",{value:""}):null,Array.from(N)]},U):null]})})};c4.displayName=Yf;var u4="SelectTrigger",d4=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=Ev(n),a=Ua(u4,n),l=a.disabled||r,c=dt(e,a.onTriggerChange),u=bv(n),d=p.useRef("touch"),[f,m,g]=O4(v=>{const x=u().filter(E=>!E.disabled),b=x.find(E=>E.value===a.value),w=M4(x,v,b);w!==void 0&&a.onValueChange(w.value)}),y=v=>{l||(a.onOpenChange(!0),g()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(Hb,{asChild:!0,...o,children:i.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":P4(a.value)?"":void 0,...s,ref:c,onClick:ve(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&y(v)}),onPointerDown:ve(s.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:ve(s.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&jte.includes(v.key)&&(y(),v.preventDefault())})})})});d4.displayName=u4;var h4="SelectValue",f4=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=t,c=Ua(h4,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,f=dt(e,c.onValueNodeChange);return Fn(()=>{u(d)},[u,d]),i.jsx(Ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:P4(c.value)?i.jsx(i.Fragment,{children:a}):o})});f4.displayName=h4;var Ate="SelectIcon",m4=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});m4.displayName=Ate;var Ite="SelectPortal",p4=t=>i.jsx(yf,{asChild:!0,...t});p4.displayName=Ite;var Il="SelectContent",g4=p.forwardRef((t,e)=>{const n=Ua(Il,t.__scopeSelect),[r,s]=p.useState();if(Fn(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Ml.createPortal(i.jsx(y4,{scope:t.__scopeSelect,children:i.jsx(_v.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(v4,{...t,ref:e})});g4.displayName=Il;var ks=10,[y4,$a]=Ku(Il),Rte="SelectContentImpl",v4=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:x,...b}=t,w=Ua(Il,n),[E,C]=p.useState(null),[R,L]=p.useState(null),A=dt(e,xe=>C(xe)),[j,S]=p.useState(null),[k,O]=p.useState(null),I=bv(n),[N,$]=p.useState(!1),U=p.useRef(!1);p.useEffect(()=>{if(E)return wj(E)},[E]),xj();const V=p.useCallback(xe=>{const[Q,...ce]=I().map(J=>J.ref.current),[P]=ce.slice(-1),Z=document.activeElement;for(const J of xe)if(J===Z||(J==null||J.scrollIntoView({block:"nearest"}),J===Q&&R&&(R.scrollTop=0),J===P&&R&&(R.scrollTop=R.scrollHeight),J==null||J.focus(),document.activeElement!==Z))return},[I,R]),z=p.useCallback(()=>V([j,E]),[V,j,E]);p.useEffect(()=>{N&&z()},[N,z]);const{onOpenChange:F,triggerPointerDownPosRef:H}=w;p.useEffect(()=>{if(E){let xe={x:0,y:0};const Q=P=>{var Z,J;xe={x:Math.abs(Math.round(P.pageX)-(((Z=H.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(P.pageY)-(((J=H.current)==null?void 0:J.y)??0))}},ce=P=>{xe.x<=10&&xe.y<=10?P.preventDefault():E.contains(P.target)||F(!1),document.removeEventListener("pointermove",Q),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",ce,{capture:!0})}}},[E,F,H]),p.useEffect(()=>{const xe=()=>F(!1);return window.addEventListener("blur",xe),window.addEventListener("resize",xe),()=>{window.removeEventListener("blur",xe),window.removeEventListener("resize",xe)}},[F]);const[Y,q]=O4(xe=>{const Q=I().filter(Z=>!Z.disabled),ce=Q.find(Z=>Z.ref.current===document.activeElement),P=M4(Q,xe,ce);P&&setTimeout(()=>P.ref.current.focus())}),W=p.useCallback((xe,Q,ce)=>{const P=!U.current&&!ce;(w.value!==void 0&&w.value===Q||P)&&(S(xe),P&&(U.current=!0))},[w.value]),re=p.useCallback(()=>E==null?void 0:E.focus(),[E]),je=p.useCallback((xe,Q,ce)=>{const P=!U.current&&!ce;(w.value!==void 0&&w.value===Q||P)&&O(xe)},[w.value]),Re=r==="popper"?f_:x4,Pe=Re===f_?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(y4,{scope:n,content:E,viewport:R,onViewportChange:L,itemRefCallback:W,selectedItem:j,onItemLeave:re,itemTextRefCallback:je,focusSelectedItem:z,selectedItemText:k,position:r,isPositioned:N,searchRef:Y,children:i.jsx(uv,{as:ao,allowPinchZoom:!0,children:i.jsx(lv,{asChild:!0,trapped:w.open,onMountAutoFocus:xe=>{xe.preventDefault()},onUnmountAutoFocus:ve(s,xe=>{var Q;(Q=w.trigger)==null||Q.focus({preventScroll:!0}),xe.preventDefault()}),children:i.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:xe=>xe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(Re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:xe=>xe.preventDefault(),...b,...Pe,onPlaced:()=>$(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ve(b.onKeyDown,xe=>{const Q=xe.ctrlKey||xe.altKey||xe.metaKey;if(xe.key==="Tab"&&xe.preventDefault(),!Q&&xe.key.length===1&&q(xe.key),["ArrowUp","ArrowDown","Home","End"].includes(xe.key)){let P=I().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(xe.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(xe.key)){const Z=xe.target,J=P.indexOf(Z);P=P.slice(J+1)}setTimeout(()=>V(P)),xe.preventDefault()}})})})})})})});v4.displayName=Rte;var Pte="SelectItemAlignedPosition",x4=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=Ua(Il,n),a=$a(Il,n),[l,c]=p.useState(null),[u,d]=p.useState(null),f=dt(e,A=>d(A)),m=bv(n),g=p.useRef(!1),y=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:b,focusSelectedItem:w}=a,E=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&v&&x&&b){const A=o.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),S=o.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(o.dir!=="rtl"){const Z=k.left-j.left,J=S.left-Z,we=A.left-J,mt=A.width+we,gr=Math.max(mt,j.width),kn=window.innerWidth-ks,Hr=ok(J,[ks,Math.max(ks,kn-gr)]);l.style.minWidth=mt+"px",l.style.left=Hr+"px"}else{const Z=j.right-k.right,J=window.innerWidth-S.right-Z,we=window.innerWidth-A.right-J,mt=A.width+we,gr=Math.max(mt,j.width),kn=window.innerWidth-ks,Hr=ok(J,[ks,Math.max(ks,kn-gr)]);l.style.minWidth=mt+"px",l.style.right=Hr+"px"}const O=m(),I=window.innerHeight-ks*2,N=v.scrollHeight,$=window.getComputedStyle(u),U=parseInt($.borderTopWidth,10),V=parseInt($.paddingTop,10),z=parseInt($.borderBottomWidth,10),F=parseInt($.paddingBottom,10),H=U+V+N+F+z,Y=Math.min(x.offsetHeight*5,H),q=window.getComputedStyle(v),W=parseInt(q.paddingTop,10),re=parseInt(q.paddingBottom,10),je=A.top+A.height/2-ks,Re=I-je,Pe=x.offsetHeight/2,xe=x.offsetTop+Pe,Q=U+V+xe,ce=H-Q;if(Q<=je){const Z=O.length>0&&x===O[O.length-1].ref.current;l.style.bottom="0px";const J=u.clientHeight-v.offsetTop-v.offsetHeight,we=Math.max(Re,Pe+(Z?re:0)+J+z),mt=Q+we;l.style.height=mt+"px"}else{const Z=O.length>0&&x===O[0].ref.current;l.style.top="0px";const we=Math.max(je,U+v.offsetTop+(Z?W:0)+Pe)+ce;l.style.height=we+"px",v.scrollTop=Q-je+v.offsetTop}l.style.margin=`${ks}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,l,u,v,x,b,o.dir,r]);Fn(()=>E(),[E]);const[C,R]=p.useState();Fn(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const L=p.useCallback(A=>{A&&y.current===!0&&(E(),w==null||w(),y.current=!1)},[E,w]);return i.jsx(Ote,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:L,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(Ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});x4.displayName=Pte;var Dte="SelectPopperPosition",f_=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ks,...o}=t,a=Ev(n);return i.jsx(Wb,{...a,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});f_.displayName=Dte;var[Ote,Wj]=Ku(Il,{}),m_="SelectViewport",w4=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=$a(m_,n),a=Wj(m_,n),l=dt(e,o.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(_v.Slot,{scope:n,children:i.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ve(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const g=Math.abs(c.current-d.scrollTop);if(g>0){const y=window.innerHeight-ks*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),b=Math.max(v,x);if(b<y){const w=b+g,E=Math.min(y,w),C=w-E;f.style.height=E+"px",f.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});w4.displayName=m_;var _4="SelectGroup",[Mte,Lte]=Ku(_4),Fte=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$s();return i.jsx(Mte,{scope:n,id:s,children:i.jsx(Ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Fte.displayName=_4;var b4="SelectLabel",E4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lte(b4,n);return i.jsx(Ve.div,{id:s.id,...r,ref:e})});E4.displayName=b4;var Gg="SelectItem",[Vte,j4]=Ku(Gg),N4=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=t,l=Ua(Gg,n),c=$a(Gg,n),u=l.value===r,[d,f]=p.useState(o??""),[m,g]=p.useState(!1),y=dt(e,w=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,w,r,s)}),v=$s(),x=p.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Vte,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{f(E=>E||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(_v.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(Ve.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:ve(a.onFocus,()=>g(!0)),onBlur:ve(a.onBlur,()=>g(!1)),onClick:ve(a.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:ve(a.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:ve(a.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:ve(a.onPointerMove,w=>{var E;x.current=w.pointerType,s?(E=c.onItemLeave)==null||E.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(a.onPointerLeave,w=>{var E;w.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:ve(a.onKeyDown,w=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(Nte.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});N4.displayName=Gg;var Ud="SelectItemText",S4=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,a=Ua(Ud,n),l=$a(Ud,n),c=j4(Ud,n),u=kte(Ud,n),[d,f]=p.useState(null),m=dt(e,b=>f(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),g=d==null?void 0:d.textContent,y=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Fn(()=>(v(y),()=>x(y)),[v,x,y]),i.jsxs(i.Fragment,{children:[i.jsx(Ve.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ml.createPortal(o.children,a.valueNode):null]})});S4.displayName=Ud;var T4="SelectItemIndicator",C4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return j4(T4,n).isSelected?i.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});C4.displayName=T4;var p_="SelectScrollUpButton",k4=p.forwardRef((t,e)=>{const n=$a(p_,t.__scopeSelect),r=Wj(p_,t.__scopeSelect),[s,o]=p.useState(!1),a=dt(e,r.onScrollButtonChange);return Fn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(I4,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});k4.displayName=p_;var g_="SelectScrollDownButton",A4=p.forwardRef((t,e)=>{const n=$a(g_,t.__scopeSelect),r=Wj(g_,t.__scopeSelect),[s,o]=p.useState(!1),a=dt(e,r.onScrollButtonChange);return Fn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(I4,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});A4.displayName=g_;var I4=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=$a("SelectScrollButton",n),a=p.useRef(null),l=bv(n),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Fn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ve(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ve(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ve(s.onPointerLeave,()=>{c()})})}),Ute="SelectSeparator",R4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});R4.displayName=Ute;var y_="SelectArrow",$te=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ev(n),o=Ua(y_,n),a=$a(y_,n);return o.open&&a.position==="popper"?i.jsx(Kb,{...s,...r,ref:e}):null});$te.displayName=y_;function P4(t){return t===""||t===void 0}var D4=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),o=dt(e,s),a=Hj(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&d){const f=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(f)}},[a,n]),i.jsx(vf,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});D4.displayName="BubbleSelect";function O4(t){const e=Kn(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function M4(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Bte(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Bte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zte=c4,L4=d4,qte=f4,Hte=m4,Wte=p4,F4=g4,Kte=w4,V4=E4,U4=N4,Gte=S4,Qte=C4,$4=k4,B4=A4,z4=R4;const sn=zte,on=qte,Zt=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(L4,{ref:r,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(Hte,{asChild:!0,children:i.jsx(Tb,{className:"h-4 w-4 opacity-50"})})]}));Zt.displayName=L4.displayName;const q4=p.forwardRef(({className:t,...e},n)=>i.jsx($4,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(J3,{className:"h-4 w-4"})}));q4.displayName=$4.displayName;const H4=p.forwardRef(({className:t,...e},n)=>i.jsx(B4,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Tb,{className:"h-4 w-4"})}));H4.displayName=B4.displayName;const Jt=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(Wte,{children:i.jsxs(F4,{ref:s,className:me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(q4,{}),i.jsx(Kte,{className:me("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(H4,{})]})}));Jt.displayName=F4.displayName;const Yte=p.forwardRef(({className:t,...e},n)=>i.jsx(V4,{ref:n,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Yte.displayName=V4.displayName;const Oe=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(U4,{ref:r,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Qte,{children:i.jsx(jh,{className:"h-4 w-4"})})}),i.jsx(Gte,{children:e})]}));Oe.displayName=U4.displayName;const Xte=p.forwardRef(({className:t,...e},n)=>i.jsx(z4,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));Xte.displayName=z4.displayName;const kr=p.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:me("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));kr.displayName="Textarea";const Zte=Ht.object({name:Ht.string().min(2,{message:"Name must be at least 2 characters"}),email:Ht.string().email({message:"Invalid email address"}),phone:Ht.string().optional(),address:Ht.string().optional(),source:Ht.string().optional(),status:Ht.enum(["active","inactive","converted","lost"]).optional(),notes:Ht.string().optional(),assignedTo:Ht.string().optional()});function Jte({lead:t,onSubmit:e,onCancel:n}){const[r,s]=p.useState(!1),o={name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",address:(t==null?void 0:t.address)||"",source:(t==null?void 0:t.source)||"",status:(t==null?void 0:t.status)||"active",notes:(t==null?void 0:t.notes)||"",assignedTo:(t==null?void 0:t.assignedTo)||""},a=bu({resolver:Eu(Zte),defaultValues:o}),l=async c=>{try{s(!0),e({name:c.name,email:c.email,phone:c.phone,address:c.address,source:c.source,status:c.status||"active",notes:c.notes,assignedTo:c.assignedTo,stageHistory:(t==null?void 0:t.stageHistory)||[],createdBy:(t==null?void 0:t.createdBy)||"currentUser"})}catch(u){console.error("Error submitting form:",u)}finally{s(!1)}};return i.jsx(ju,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Wt,{control:a.control,name:"name",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Name"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"John Doe",...c})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"email",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Email"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"john@example.com",...c})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"phone",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Phone"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"+1 (555) 123-4567",...c})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"source",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Source"}),i.jsxs(sn,{onValueChange:c.onChange,defaultValue:c.value,children:[i.jsx(Lt,{children:i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select a source"})})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"website",children:"Website"}),i.jsx(Oe,{value:"referral",children:"Referral"}),i.jsx(Oe,{value:"social",children:"Social Media"}),i.jsx(Oe,{value:"email",children:"Email"}),i.jsx(Oe,{value:"call",children:"Call"}),i.jsx(Oe,{value:"other",children:"Other"})]})]}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"status",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Status"}),i.jsxs(sn,{onValueChange:c.onChange,defaultValue:c.value,children:[i.jsx(Lt,{children:i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select status"})})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"active",children:"Active"}),i.jsx(Oe,{value:"inactive",children:"Inactive"}),i.jsx(Oe,{value:"converted",children:"Converted"}),i.jsx(Oe,{value:"lost",children:"Lost"})]})]}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"assignedTo",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Assigned To"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"User ID",...c})}),i.jsx(Nu,{children:"User responsible for this lead"}),i.jsx(Ft,{})]})})]}),i.jsx(Wt,{control:a.control,name:"address",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Address"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"123 Main St, City, Country",...c})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:a.control,name:"notes",render:({field:c})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Notes"}),i.jsx(Lt,{children:i.jsx(kr,{placeholder:"Additional information about this lead",className:"resize-none",...c})}),i.jsx(Ft,{})]})}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(K,{variant:"outline",type:"button",onClick:n,children:"Cancel"}),i.jsx(K,{type:"submit",disabled:r,children:r?"Saving...":t?"Update Lead":"Add Lead"})]})]})})}function xt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Aa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const W4=6048e5,ene=864e5,Jm=43200,ak=1440;let tne={};function Gu(){return tne}function Su(t,e){var l,c,u,d;const n=Gu(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=xt(t),o=s.getDay(),a=(o<r?7:0)+o-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Qg(t){return Su(t,{weekStartsOn:1})}function K4(t){const e=xt(t),n=e.getFullYear(),r=Aa(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Qg(r),o=Aa(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Qg(o);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function lk(t){const e=xt(t);return e.setHours(0,0,0,0),e}function Yg(t){const e=xt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function nne(t,e){const n=lk(t),r=lk(e),s=+n-Yg(n),o=+r-Yg(r);return Math.round((s-o)/ene)}function rne(t){const e=K4(t),n=Aa(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Qg(n)}function Ap(t,e){const n=xt(t),r=xt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function sne(t){return Aa(t,Date.now())}function ine(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function one(t){if(!ine(t)&&typeof t!="number")return!1;const e=xt(t);return!isNaN(Number(e))}function ane(t,e){const n=xt(t),r=xt(e),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function lne(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function cne(t,e){return+xt(t)-+xt(e)}function une(t){const e=xt(t);return e.setHours(23,59,59,999),e}function dne(t){const e=xt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function hne(t){const e=xt(t);return+une(e)==+dne(e)}function fne(t,e){const n=xt(t),r=xt(e),s=Ap(n,r),o=Math.abs(ane(n,r));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let l=Ap(n,r)===-s;hne(xt(t))&&o===1&&Ap(t,r)===1&&(l=!1),a=s*(o-Number(l))}return a===0?0:a}function mne(t,e,n){const r=cne(t,e)/1e3;return lne(n==null?void 0:n.roundingMethod)(r)}function pne(t){const e=xt(t),n=Aa(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gne(t,e){var l,c;const n=Gu(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,s=xt(t),o=s.getDay(),a=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}const yne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vne=(t,e,n)=>{let r;const s=yne[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function iw(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const xne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_ne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bne={date:iw({formats:xne,defaultWidth:"full"}),time:iw({formats:wne,defaultWidth:"full"}),dateTime:iw({formats:_ne,defaultWidth:"full"})},Ene={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jne=(t,e,n,r)=>Ene[t];function jd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const Nne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Sne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ane={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ine=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rne={ordinalNumber:Ine,era:jd({values:Nne,defaultWidth:"wide"}),quarter:jd({values:Sne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jd({values:Tne,defaultWidth:"wide"}),day:jd({values:Cne,defaultWidth:"wide"}),dayPeriod:jd({values:kne,defaultWidth:"wide",formattingValues:Ane,defaultFormattingWidth:"wide"})};function Nd(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const a=o[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Dne(l,f=>f.test(a)):Pne(l,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function Pne(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Dne(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function One(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const Mne=/^(\d+)(th|st|nd|rd)?/i,Lne=/\d+/i,Fne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Vne={any:[/^b/i,/^(a|c)/i]},Une={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$ne={any:[/1/i,/2/i,/3/i,/4/i]},Bne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Hne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Wne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gne={ordinalNumber:One({matchPattern:Mne,parsePattern:Lne,valueCallback:t=>parseInt(t,10)}),era:Nd({matchPatterns:Fne,defaultMatchWidth:"wide",parsePatterns:Vne,defaultParseWidth:"any"}),quarter:Nd({matchPatterns:Une,defaultMatchWidth:"wide",parsePatterns:$ne,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Nd({matchPatterns:Bne,defaultMatchWidth:"wide",parsePatterns:zne,defaultParseWidth:"any"}),day:Nd({matchPatterns:qne,defaultMatchWidth:"wide",parsePatterns:Hne,defaultParseWidth:"any"}),dayPeriod:Nd({matchPatterns:Wne,defaultMatchWidth:"any",parsePatterns:Kne,defaultParseWidth:"any"})},G4={code:"en-US",formatDistance:vne,formatLong:bne,formatRelative:jne,localize:Rne,match:Gne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qne(t){const e=xt(t);return nne(e,pne(e))+1}function Yne(t){const e=xt(t),n=+Qg(e)-+rne(e);return Math.round(n/W4)+1}function Q4(t,e){var d,f,m,g;const n=xt(t),r=n.getFullYear(),s=Gu(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=Aa(t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const l=Su(a,e),c=Aa(t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const u=Su(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function Xne(t,e){var l,c,u,d;const n=Gu(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Q4(t,e),o=Aa(t,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Su(o,e)}function Zne(t,e){const n=xt(t),r=+Su(n,e)-+Xne(n,e);return Math.round(r/W4)+1}function Tt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ko={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Tt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Tt(n+1,2)},d(t,e){return Tt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Tt(t.getHours()%12||12,e.length)},H(t,e){return Tt(t.getHours(),e.length)},m(t,e){return Tt(t.getMinutes(),e.length)},s(t,e){return Tt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Tt(s,e.length)}},oc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ck={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ko.y(t,e)},Y:function(t,e,n,r){const s=Q4(t,r),o=s>0?s:1-s;if(e==="YY"){const a=o%100;return Tt(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Tt(o,e.length)},R:function(t,e){const n=K4(t);return Tt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Tt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ko.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Zne(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Tt(s,e.length)},I:function(t,e,n){const r=Yne(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Tt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ko.d(t,e)},D:function(t,e,n){const r=Qne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Tt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Tt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Tt(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Tt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=oc.noon:r===0?s=oc.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=oc.evening:r>=12?s=oc.afternoon:r>=4?s=oc.morning:s=oc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ko.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ko.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ko.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ko.s(t,e)},S:function(t,e){return ko.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return dk(r);case"XXXX":case"XX":return Ya(r);case"XXXXX":case"XXX":default:return Ya(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return dk(r);case"xxxx":case"xx":return Ya(r);case"xxxxx":case"xxx":default:return Ya(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uk(r,":");case"OOOO":default:return"GMT"+Ya(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uk(r,":");case"zzzz":default:return"GMT"+Ya(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Tt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Tt(r,e.length)}};function uk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+e+Tt(o,2)}function dk(t,e){return t%60===0?(t>0?"-":"+")+Tt(Math.abs(t)/60,2):Ya(t,e)}function Ya(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Tt(Math.trunc(r/60),2),o=Tt(r%60,2);return n+s+e+o}const hk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Y4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Jne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return hk(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",hk(r,e)).replace("{{time}}",Y4(s,e))},ere={p:Y4,P:Jne},tre=/^D+$/,nre=/^Y+$/,rre=["D","DD","YY","YYYY"];function sre(t){return tre.test(t)}function ire(t){return nre.test(t)}function ore(t,e,n){const r=are(t,e,n);if(console.warn(r),rre.includes(t))throw new RangeError(r)}function are(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ure=/^'([^]*?)'?$/,dre=/''/g,hre=/[a-zA-Z]/;function ir(t,e,n){var d,f,m,g;const r=Gu(),s=r.locale??G4,o=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,l=xt(t);if(!one(l))throw new RangeError("Invalid time value");let c=e.match(cre).map(y=>{const v=y[0];if(v==="p"||v==="P"){const x=ere[v];return x(y,s.formatLong)}return y}).join("").match(lre).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:fre(y)};if(ck[v])return{isToken:!0,value:y};if(v.match(hre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:a,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(ire(v)||sre(v))&&ore(v,e,String(t));const x=ck[v[0]];return x(l,v,s.localize,u)}).join("")}function fre(t){const e=t.match(ure);return e?e[1].replace(dre,"'"):t}function mre(t,e,n){const r=Gu(),s=(n==null?void 0:n.locale)??r.locale??G4,o=2520,a=Ap(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,u;a>0?(c=xt(e),u=xt(t)):(c=xt(t),u=xt(e));const d=mne(u,c),f=(Yg(u)-Yg(c))/1e3,m=Math.round((d-f)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<ak){const y=Math.round(m/60);return s.formatDistance("aboutXHours",y,l)}else{if(m<o)return s.formatDistance("xDays",1,l);if(m<Jm){const y=Math.round(m/ak);return s.formatDistance("xDays",y,l)}else if(m<Jm*2)return g=Math.round(m/Jm),s.formatDistance("aboutXMonths",g,l)}if(g=fne(u,c),g<12){const y=Math.round(m/Jm);return s.formatDistance("xMonths",y,l)}else{const y=g%12,v=Math.trunc(g/12);return y<3?s.formatDistance("aboutXYears",v,l):y<9?s.formatDistance("overXYears",v,l):s.formatDistance("almostXYears",v+1,l)}}function Xg(t,e){return mre(t,sne(t),e)}function pre(t,e){const n=+xt(t),[r,s]=[+xt(e.start),+xt(e.end)].sort((o,a)=>o-a);return n>=r&&n<=s}const Xf="leadProcesses",Kl="leadStages",Qu=async()=>{try{const t=Dt(et(Ee,Xf),Tr("order"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting processes:",t),t}},gre=async t=>{try{const e=await un(Le(Ee,Xf,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting process:",e),e}},yre=async t=>{try{const e=Le(et(Ee,Xf));await us(e,{...t,createdAt:new Date,updatedAt:new Date});const n=await un(e);return{id:n.id,...n.data()}}catch(e){throw console.error("Error creating process:",e),e}},fk=async(t,e)=>{try{await tn(Le(Ee,Xf,t),{...e,updatedAt:new Date})}catch(n){throw console.error("Error updating process:",n),n}},vre=async t=>{try{const e=rj(Ee);e.delete(Le(Ee,Xf,t)),(await Ia(t)).forEach(r=>{e.delete(Le(Ee,Kl,r.id))}),await e.commit()}catch(e){throw console.error("Error deleting process:",e),e}},Ia=async t=>{try{const e=Dt(et(Ee,Kl),Tr("order"));return(await Et(e)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.processId===t)}catch(e){throw console.error("Error getting stages:",e),e}},xre=async t=>{try{const e=await un(Le(Ee,Kl,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting stage:",e),e}},wre=async(t,e)=>{try{const n=Le(et(Ee,Kl));await us(n,{...e,processId:t,createdAt:new Date,updatedAt:new Date});const r=await un(n);return{id:r.id,...r.data()}}catch(n){throw console.error("Error creating stage:",n),n}},mk=async(t,e)=>{try{await tn(Le(Ee,Kl,t),{...e,updatedAt:new Date})}catch(n){throw console.error("Error updating stage:",n),n}},_re=async t=>{try{await zl(Le(Ee,Kl,t))}catch(e){throw console.error("Error deleting stage:",e),e}},bre=async(t,e)=>{try{const n=rj(Ee);e.forEach((r,s)=>{n.update(Le(Ee,Kl,r),{order:s+1,updatedAt:new Date})}),await n.commit()}catch(n){throw console.error("Error reordering stages:",n),n}};function Ere({leadId:t}){var y,v,x,b;const[e,n]=p.useState(null),[r,s]=p.useState(!0),[o,a]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState([]);p.useEffect(()=>{async function w(){if(t)try{s(!0);const E=await Kf(t),C=await Qu();if(a(C),E!=null&&E.currentProcessId){const A=await Ia(E.currentProcessId);c(A)}const R={...E,process:C.find(A=>A.id===(E==null?void 0:E.currentProcessId)),stage:E!=null&&E.currentStageId?(await Ia(E.currentProcessId)).find(A=>A.id===E.currentStageId):void 0,lastLogin:new Date(Date.now()-2*24*60*60*1e3),documentCount:{total:5,verified:2,pending:1,missing:2}};n(R);const L=[{action:"Logged into portal",date:new Date(Date.now()-2*24*60*60*1e3),type:"login"},{action:"Uploaded ID document",date:new Date(Date.now()-4*24*60*60*1e3),type:"document"},{action:"Stage updated to Document Verification",date:new Date(Date.now()-7*24*60*60*1e3),type:"status"}];d(L)}catch(E){console.error("Error loading lead portal data:",E)}finally{s(!1)}}w()},[t]);const f=w=>w?ir(w,"MMM d, yyyy"):"Never",m=w=>`/lead-portal/${w}`,g=async()=>{if(e!=null&&e.id)try{alert("Portal reminder sent to lead")}catch(w){console.error("Error sending portal reminder:",w)}};return r?i.jsx(_e,{className:"min-h-[200px] flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Loading portal data..."})})}):e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs(_e,{children:[i.jsx(Be,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(ze,{className:"text-xl",children:"Lead Portal Status"}),i.jsx(K,{size:"sm",variant:"outline",asChild:!0,children:i.jsxs("a",{href:m(e.id),target:"_blank",rel:"noopener noreferrer",children:[i.jsx($R,{className:"h-4 w-4 mr-2"}),"View Portal"]})})]})}),i.jsxs(De,{children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Portal Access"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(at,{variant:e.lastLogin?"default":"destructive",children:e.lastLogin?"Active":"Inactive"}),i.jsx("span",{className:"text-sm font-medium",children:e.lastLogin?"Account active":"Never logged in"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Last Login"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ys,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm font-medium",children:f(e.lastLogin)})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Documents"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Xd,{className:"h-4 w-4 text-gray-400"}),i.jsxs("span",{className:"text-sm font-medium",children:[((y=e.documentCount)==null?void 0:y.verified)||0," verified / ",((v=e.documentCount)==null?void 0:v.total)||0," total"]})]})]})]}),i.jsxs("div",{className:"mt-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Current Process"}),i.jsx(at,{variant:"outline",className:"font-normal",children:((x=e.process)==null?void 0:x.name)||"No process assigned"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Current Stage"}),i.jsx(at,{variant:"outline",className:"font-normal",children:((b=e.stage)==null?void 0:b.name)||"No stage assigned"})]}),i.jsxs("div",{className:"flex justify-between pt-2",children:[i.jsx(K,{variant:"outline",size:"sm",onClick:g,children:"Send Reminder"}),i.jsxs(K,{variant:"outline",size:"sm",children:[i.jsx(yl,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]})]})]})]})]}),i.jsxs(_e,{children:[i.jsx(Be,{className:"pb-2",children:i.jsx(ze,{className:"text-xl",children:"Recent Portal Activity"})}),i.jsx(De,{children:u.length>0?i.jsx("div",{className:"space-y-4",children:u.map((w,E)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:`p-2 rounded-full mr-3 ${w.type==="login"?"bg-blue-100":w.type==="document"?"bg-green-100":w.type==="message"?"bg-purple-100":"bg-amber-100"}`,children:[w.type==="login"&&i.jsx(Sh,{className:"h-4 w-4 text-blue-600"}),w.type==="document"&&i.jsx(Xd,{className:"h-4 w-4 text-green-600"}),w.type==="message"&&i.jsx(Sh,{className:"h-4 w-4 text-purple-600"}),w.type==="status"&&i.jsx(Ib,{className:"h-4 w-4 text-amber-600"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:w.action}),i.jsx("p",{className:"text-xs text-gray-500",children:ir(w.date,"MMM d, yyyy")})]})]},E))}):i.jsx("div",{className:"text-center py-6",children:i.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"})})})]})]}):i.jsx(_e,{className:"min-h-[200px] flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"No lead data found"})})})}const jre={apiKey:"AIzaSyBqwZcpuOKZ9uCVZEBgynbxaaH_dtr_AMk",authDomain:"crm-pro-e2df3.firebaseapp.com",projectId:"crm-pro-e2df3",storageBucket:"crm-pro-e2df3.firebasestorage.app",messagingSenderId:"201619768522",appId:"1:201619768522:web:62bb56cd9422ac2fac2033",measurementId:"placeholder-measurement-id"},Kj=iE().length?Vu():Ly(jre),as=BE(Kj);V2(Kj);const Nre=dj(Kj);async function X4(){try{const e=(await Et(et(as,"leads"))).docs.map(f=>({id:f.id,...f.data()})),r=(await Et(et(as,"tasks"))).docs.map(f=>({id:f.id,...f.data()})),s=e.filter(f=>f.status==="active").length,o=e.filter(f=>f.status==="converted").length,a=r.filter(f=>!f.completed).length,l=Math.floor(s*.85),c=Math.floor(o*.75),u=Math.floor(a*1.2),d=Math.floor(e.length*.8);return{totalLeads:e.length,activeLeads:s,convertedLeads:o,pendingTasks:a,previousPeriodStats:{totalLeads:d,activeLeads:l,convertedLeads:c,pendingTasks:u}}}catch(t){return console.error("Error fetching dashboard stats:",t),{totalLeads:0,activeLeads:0,convertedLeads:0,pendingTasks:0}}}async function Sre(t=5,e=!1){try{const n=et(as,"leads"),r=Dt(n,Tr("createdAt","desc"),X0(t*2));let o=(await Et(r)).docs.map(a=>{const l=a.data();return{id:a.id,...l,firstName:l.firstName||(l.name?l.name.split(" ")[0]:""),lastName:l.lastName||(l.name?l.name.split(" ").slice(1).join(" "):"")}});if(e){const a=new Date,l=Su(a),c=gne(a);o=o.filter(u=>{var f;const d=(f=u.createdAt)!=null&&f.toDate?u.createdAt.toDate():new Date(u.createdAt);return pre(d,{start:l,end:c})})}return o.slice(0,t)}catch(n){return console.error("Error fetching recent leads:",n),[]}}async function Tre(){try{return(await Et(et(as,"leads"))).docs.map(r=>r.data()).reduce((r,s)=>{const o=s.source||"Unknown";return r[o]=(r[o]||0)+1,r},{})}catch(t){return console.error("Error fetching leads by source:",t),{}}}async function Cre(t=10){try{const e=await Et(Dt(et(as,"leads"),Tr("createdAt","desc"),X0(t))),n=await Et(Dt(et(as,"tasks"),Tr("createdAt","desc"),X0(t))),r=e.docs.map(a=>{var d;const l=a.data(),c={id:a.id,...l,firstName:l.firstName||(l.name?l.name.split(" ")[0]:""),lastName:l.lastName||(l.name?l.name.split(" ").slice(1).join(" "):"")},u=c.name||`${c.firstName} ${c.lastName}`.trim();return{id:`lead-${c.id}`,type:"lead_created",title:`New Lead: ${u}`,timestamp:c.createdAt,relativeTime:Xg((d=c.createdAt)!=null&&d.toDate?c.createdAt.toDate():new Date(c.createdAt),{addSuffix:!0}),data:c}}),s=n.docs.map(a=>{var c;const l={id:a.id,...a.data()};return{id:`task-${l.id}`,type:"task_created",title:`Task Created: ${l.title}`,timestamp:l.createdAt,relativeTime:Xg((c=l.createdAt)!=null&&c.toDate?l.createdAt.toDate():new Date(l.createdAt),{addSuffix:!0}),data:l}});return[...r,...s].sort((a,l)=>{var d,f;const c=(d=a.timestamp)!=null&&d.toDate?a.timestamp.toDate():new Date(a.timestamp);return((f=l.timestamp)!=null&&f.toDate?l.timestamp.toDate():new Date(l.timestamp)).getTime()-c.getTime()}).slice(0,t)}catch(e){return console.error("Error fetching lead timeline:",e),[]}}function xs({className:t,...e}){return i.jsx("div",{className:me("animate-pulse rounded-md bg-muted",t),...e})}function kre({limit:t=5,thisWeekOnly:e=!1,title:n="Recent Leads",description:r="Recently added or updated leads"}){const[s,o]=p.useState([]),[a,l]=p.useState(!0);p.useEffect(()=>{(async()=>{try{l(!0);const m=await Sre(t,e);o(m)}catch(m){console.error("Error fetching recent leads:",m)}finally{l(!1)}})()},[t,e]);const c=f=>{switch(f.toLowerCase()){case"active":return"bg-blue-500 hover:bg-blue-600";case"converted":return"bg-green-500 hover:bg-green-600";case"inactive":return"bg-gray-500 hover:bg-gray-600";case"lost":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-400 hover:bg-gray-500"}},u=f=>{const m=["bg-blue-100 text-blue-700","bg-green-100 text-green-700","bg-purple-100 text-purple-700","bg-amber-100 text-amber-700","bg-rose-100 text-rose-700","bg-indigo-100 text-indigo-700"],g=f.split("").reduce((y,v)=>y+v.charCodeAt(0),0);return m[g%m.length]},d=f=>{if(!f)return"Unknown";try{const m=f!=null&&f.toDate?f.toDate():new Date(f);return Xg(m,{addSuffix:!0})}catch{return"Invalid date"}};return i.jsxs(_e,{className:"h-full overflow-hidden border border-border/40 hover:shadow-md transition-all duration-200",children:[i.jsxs(Be,{className:"bg-card",children:[i.jsxs(ze,{className:"flex items-center gap-2",children:[i.jsx(Sh,{className:"h-4 w-4 text-primary"}),n]}),i.jsx(Xt,{children:r})]}),i.jsx(De,{children:a?i.jsx("div",{className:"space-y-3",children:Array.from({length:t}).map((f,m)=>i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(xs,{className:"h-12 w-12 rounded-full"}),i.jsxs("div",{className:"space-y-2 flex-1",children:[i.jsx(xs,{className:"h-4 w-3/4"}),i.jsx(xs,{className:"h-3 w-1/2"})]})]},m))}):s.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-muted-foreground",children:"No leads found"})}):i.jsxs("div",{className:"space-y-4",children:[s.map(f=>{var v,x;const m=f.name||`${f.firstName||""} ${f.lastName||""}`.trim(),g=f.name?f.name.split(" ").map(b=>b[0]).slice(0,2).join("").toUpperCase():`${((v=f.firstName)==null?void 0:v[0])||""}${((x=f.lastName)==null?void 0:x[0])||""}`.toUpperCase(),y=u(m||"Unknown");return i.jsxs("div",{className:"flex items-start justify-between group hover:bg-primary/5 p-2 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-medium ${y}`,children:g||"U"}),i.jsxs("div",{children:[i.jsx(yn,{to:`/leads/${f.id}`,className:"font-medium hover:underline text-primary",children:m||"Unnamed Lead"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:f.email||f.phone||"No contact info"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx(at,{className:`${c(f.status||"")} text-white`,children:f.status||"Unknown"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:d(f.createdAt)})]})]})]}),i.jsx(yn,{to:`/leads/${f.id}`,children:i.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Cb,{className:"h-4 w-4"})})})]},f.id)}),i.jsx("div",{className:"pt-2",children:i.jsx(yn,{to:"/leads",children:i.jsx(K,{variant:"outline",size:"sm",className:"w-full hover:bg-primary hover:text-primary-foreground transition-colors",children:"View all leads"})})})]})})]})}function Are(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];function u(f){const{scope:m,children:g,...y}=f,v=(m==null?void 0:m[t][c])||l,x=p.useMemo(()=>y,Object.values(y));return i.jsx(v.Provider,{value:x,children:g})}function d(f,m){const g=(m==null?void 0:m[t][c])||l,y=p.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,Ire(s,...e)]}function Ire(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Gj="Progress",Qj=100,[Rre,Tle]=Are(Gj),[Pre,Dre]=Rre(Gj),Z4=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=Ore,...a}=t;(s||s===0)&&!pk(s)&&console.error(Mre(`${s}`,"Progress"));const l=pk(s)?s:Qj;r!==null&&!gk(r,l)&&console.error(Lre(`${r}`,"Progress"));const c=gk(r,l)?r:null,u=Zg(c)?o(c,l):void 0;return i.jsx(Pre,{scope:n,value:c,max:l,children:i.jsx(Ve.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Zg(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":tF(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});Z4.displayName=Gj;var J4="ProgressIndicator",eF=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Dre(J4,n);return i.jsx(Ve.div,{"data-state":tF(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});eF.displayName=J4;function Ore(t,e){return`${Math.round(t/e*100)}%`}function tF(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Zg(t){return typeof t=="number"}function pk(t){return Zg(t)&&!isNaN(t)&&t>0}function gk(t,e){return Zg(t)&&!isNaN(t)&&t<=e&&t>=0}function Mre(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Qj}\`.`}function Lre(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Qj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nF=Z4,Fre=eF;const to=p.forwardRef(({className:t,value:e,indicatorClassName:n,...r},s)=>i.jsx(nF,{ref:s,className:me("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:i.jsx(Fre,{className:me("h-full w-full flex-1 bg-primary transition-all",n),style:{transform:`translateX(-${100-(e||0)}%)`}})}));to.displayName=nF.displayName;const ow={"CSV Import":{bg:"bg-blue-500",hover:"bg-blue-600",text:"text-blue-500"},Socialmedia:{bg:"bg-emerald-500",hover:"bg-emerald-600",text:"text-emerald-500"},Unknown:{bg:"bg-violet-500",hover:"bg-violet-600",text:"text-violet-500"},Website:{bg:"bg-amber-500",hover:"bg-amber-600",text:"text-amber-500"},Referral:{bg:"bg-rose-500",hover:"bg-rose-600",text:"text-rose-500"},"Email Campaign":{bg:"bg-indigo-500",hover:"bg-indigo-600",text:"text-indigo-500"},"Cold Call":{bg:"bg-fuchsia-500",hover:"bg-fuchsia-600",text:"text-fuchsia-500"},Event:{bg:"bg-cyan-500",hover:"bg-cyan-600",text:"text-cyan-500"},Partner:{bg:"bg-teal-500",hover:"bg-teal-600",text:"text-teal-500"}},aw={bg:"bg-slate-500",hover:"bg-slate-600",text:"text-slate-500"};function Vre(){const[t,e]=p.useState([]),[n,r]=p.useState(!0),[s,o]=p.useState(0);return p.useEffect(()=>{(async()=>{try{r(!0);const l=await Tre(),c=Object.values(l).reduce((d,f)=>d+f,0);o(c);const u=Object.entries(l).map(([d,f])=>{const m=ow[d]||aw;return{name:d,count:f,percentage:c>0?Math.round(f/c*100):0,color:m.bg,hoverColor:m.hover}}).sort((d,f)=>f.count-d.count);e(u)}catch(l){console.error("Error fetching leads by source:",l)}finally{r(!1)}})()},[]),i.jsxs(_e,{className:"h-full overflow-hidden border border-border/40 hover:shadow-md transition-all duration-200",children:[i.jsxs(Be,{className:"bg-card",children:[i.jsxs(ze,{className:"flex items-center gap-2",children:[i.jsx(LR,{className:"h-4 w-4 text-primary"}),"Leads by Source"]}),i.jsx(Xt,{children:"Distribution of leads by their source"})]}),i.jsx(De,{children:n?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,l)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(xs,{className:"h-4 w-24"}),i.jsx(xs,{className:"h-4 w-12"})]}),i.jsx(xs,{className:"h-2 w-full"})]},l))}):t.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-muted-foreground",children:"No source data available"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-card shadow-sm border border-border/60 p-3 rounded-lg transition-all hover:border-primary/20",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Leads"}),i.jsx("p",{className:"text-2xl font-bold",children:s})]}),i.jsxs("div",{className:"bg-card shadow-sm border border-border/60 p-3 rounded-lg transition-all hover:border-primary/20",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sources"}),i.jsx("p",{className:"text-2xl font-bold",children:t.length})]})]}),i.jsx("div",{className:"space-y-3",children:t.map(a=>{var l,c;return i.jsxs("div",{className:"space-y-1 group",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-3 h-3 ${a.color} rounded-full mr-2`}),i.jsx("span",{className:`text-sm font-medium ${((l=ow[a.name])==null?void 0:l.text)||aw.text}`,children:a.name})]}),i.jsxs("div",{className:`text-sm font-medium ${((c=ow[a.name])==null?void 0:c.text)||aw.text}`,children:[a.count," (",a.percentage,"%)"]})]}),i.jsx(to,{value:a.percentage,className:"h-2.5 bg-secondary/20",indicatorClassName:`${a.color} transition-all duration-300`})]},a.name)})})]})})]})}const Ure={lead_created:{icon:i.jsx(Pb,{className:"h-4 w-4"}),color:"bg-blue-500",bgColor:"bg-blue-50",textColor:"text-blue-700",label:"New Lead"},task_created:{icon:i.jsx(Wi,{className:"h-4 w-4"}),color:"bg-emerald-500",bgColor:"bg-emerald-50",textColor:"text-emerald-700",label:"New Task"},message_sent:{icon:i.jsx(kb,{className:"h-4 w-4"}),color:"bg-violet-500",bgColor:"bg-violet-50",textColor:"text-violet-700",label:"Message"},meeting_scheduled:{icon:i.jsx(yl,{className:"h-4 w-4"}),color:"bg-amber-500",bgColor:"bg-amber-50",textColor:"text-amber-700",label:"Meeting"}},$re={icon:i.jsx(Sb,{className:"h-4 w-4"}),color:"bg-gray-500",bgColor:"bg-gray-50",textColor:"text-gray-700",label:"Activity"};function Bre(){const[t,e]=p.useState([]),[n,r]=p.useState(!0);p.useEffect(()=>{(async()=>{try{r(!0);const a=await Cre(7);e(a)}catch(a){console.error("Error fetching timeline events:",a)}finally{r(!1)}})()},[]);const s=o=>Ure[o]||$re;return i.jsxs(_e,{className:"h-full overflow-hidden border border-border/40 hover:shadow-md transition-all duration-200",children:[i.jsxs(Be,{className:"bg-card",children:[i.jsxs(ze,{className:"flex items-center gap-2",children:[i.jsx(ys,{className:"h-4 w-4 text-primary"}),"Lead Timeline"]}),i.jsx(Xt,{children:"Recent lead activities and updates"})]}),i.jsx(De,{className:"p-4 pt-0",children:n?i.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((o,a)=>i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx(xs,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{className:"space-y-2 flex-1",children:[i.jsx(xs,{className:"h-4 w-3/4"}),i.jsx(xs,{className:"h-3 w-1/2"})]})]},a))}):t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ys,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),i.jsx("p",{className:"text-muted-foreground",children:"No recent activity found"})]}):i.jsxs("div",{className:"relative space-y-6",children:[i.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-px bg-border"}),t.map(o=>{const a=s(o.type);return i.jsxs("div",{className:"relative flex gap-4 pl-2",children:[i.jsx("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full ${a.color} flex items-center justify-center text-white shadow-sm`,children:a.icon}),i.jsxs("div",{className:"flex-1 -mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:o.title}),i.jsx(at,{variant:"secondary",className:`${a.bgColor} ${a.textColor} border-0`,children:a.label})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[i.jsx(ys,{className:"h-3 w-3"}),i.jsx("span",{children:o.relativeTime})]}),o.type==="lead_created"&&i.jsxs("div",{className:`${a.bgColor} rounded-lg p-3 text-sm space-y-2`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:o.data.email})]}),o.data.source&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(l6,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:o.data.source})]})]})]})]},o.id)})]})})]})}function zre(){const[t,e]=p.useState(0),[n,r]=p.useState(0),[s,o]=p.useState(!0);p.useEffect(()=>{(async()=>{try{o(!0);const c=await X4();e(c.totalLeads),r(c.activeLeads)}catch(c){console.error("Error fetching overview data:",c)}finally{o(!1)}})()},[]);const a=t>0?Math.round(n/t*100):0;return i.jsxs(_e,{className:"h-full",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Overview"}),i.jsx(Xt,{children:"Quick overview of your leads and conversion"})]}),i.jsx(De,{className:"space-y-4",children:s?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-4 w-full bg-muted rounded animate-pulse"}),i.jsx("div",{className:"h-4 w-2/3 bg-muted rounded animate-pulse"}),i.jsx("div",{className:"h-6 w-full bg-muted rounded animate-pulse mt-4"}),i.jsx("div",{className:"h-16 w-full bg-muted rounded animate-pulse mt-4"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Active Leads"}),i.jsx("p",{className:"text-2xl font-bold",children:n})]}),i.jsx("div",{children:i.jsxs(at,{variant:a>50?"default":"destructive",children:[a,"% of total"]})})]}),i.jsx(to,{value:a,className:"h-2"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Leads"}),i.jsx("p",{className:"text-xl font-bold",children:t})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion Rate"}),i.jsxs("p",{className:"text-xl font-bold",children:[a,"%"]})]})]}),i.jsxs("div",{className:"pt-4",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Lead Status"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-sm",children:"Active"}),i.jsx("p",{className:"text-sm font-medium",children:n})]}),i.jsx(to,{value:a,className:"h-1"}),i.jsxs("div",{className:"flex justify-between mt-2",children:[i.jsx("p",{className:"text-sm",children:"Inactive"}),i.jsx("p",{className:"text-sm font-medium",children:t-n})]}),i.jsx(to,{value:100-a,className:"h-1"})]})]})]})})]})}let qre=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const Hre=async(t,e,n,r,s,o)=>{try{console.log("Sending message with data:",{leadId:t,senderId:e,senderName:n,senderType:r,messageLength:s.length,attachmentsCount:(o==null?void 0:o.length)||0});const a=et(as,"messages"),c={id:qre(),leadId:t,senderId:e,senderName:n,senderType:r,message:s,timestamp:wt(),read:!1,attachments:o||[]};console.log("Created message data object:",JSON.stringify(c));const u=await ov(a,c);return console.log(`Message sent with ID: ${u.id} for lead: ${t}, senderType: ${r}`),r==="lead"&&await rF(t,!0),u.id}catch(a){throw console.error("Error sending message:",a),a}},Wre=(t,e)=>{try{console.log(`Setting up message subscription for leadId: ${t}`);const n=et(as,"messages");console.log(`Query path: ${n.path}`);const r=Dt(n,Ct("leadId","==",t),Tr("timestamp","asc"));return console.log("Query parameters:",{collectionPath:n.path,whereField:"leadId",whereValue:t,orderByField:"timestamp",direction:"asc"}),MQ(r,o=>{console.log(`onSnapshot triggered with ${o.size} documents`);const a=[];o.forEach(l=>{const c=l.data();console.log(`Document ${l.id} data:`,{id:l.id,dataSenderId:c.senderId,dataSenderType:c.senderType,dataMessage:c.message?c.message.substring(0,20)+(c.message.length>20?"...":""):null});const u=c.timestamp?c.timestamp:{toDate:()=>new Date};a.push({...c,id:l.id,timestamp:u})}),a.sort((l,c)=>{var f,m,g,y;const u=((m=(f=l.timestamp)==null?void 0:f.toDate)==null?void 0:m.call(f))||new Date,d=((y=(g=c.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date;return u.getTime()-d.getTime()}),console.log(`Sending ${a.length} messages to callback`),e(a)},o=>{console.error("Error in message subscription:",o)})}catch(n){throw console.error("Error subscribing to messages:",n),n}},Kre=async(t,e)=>{try{const n=et(as,"messages"),r=Dt(n,Ct("leadId","==",t),Ct("senderType","==",e==="lead"?"representative":"lead"),Ct("read","==",!1)),o=(await Et(r)).docs.map(async a=>{await tn(Le(as,"messages",a.id),{read:!0})});await Promise.all(o),e==="representative"&&await rF(t,!1)}catch(n){throw console.error("Error marking messages as read:",n),n}},Gre=async()=>{try{console.log("getLeadsWithUnreadMessages: Starting to fetch leads with unread messages");const t=et(as,"unreadMessages");console.log("getLeadsWithUnreadMessages: Collection path:",t.path);const e=Dt(t,Ct("unreadCount",">",0)),n=await Et(e);console.log(`getLeadsWithUnreadMessages: Query returned ${n.size} documents`);const r=[];return n.forEach(s=>{console.log(`getLeadsWithUnreadMessages: Lead ${s.id} has ${s.data().unreadCount} unread messages`),r.push(s.id)}),console.log(`getLeadsWithUnreadMessages: Returning ${r.length} lead IDs:`,r),r}catch(t){throw console.error("Error getting leads with unread messages:",t),t}},rF=async(t,e)=>{try{if(console.log(`updateUnreadCountForLead: ${e?"Incrementing":"Resetting"} unread count for lead ${t}`),!t){console.error("updateUnreadCountForLead: Invalid leadId provided");return}const n=Le(as,"unreadMessages",t);console.log(`updateUnreadCountForLead: Checking document at ${n.path}`);const r=await un(n);let s=0;if(r.exists()){const a=r.data().unreadCount||0;console.log(`updateUnreadCountForLead: Current count for lead ${t} is ${a}`),s=e?a+1:0,await tn(n,{unreadCount:s,lastUpdated:wt()}),console.log(`updateUnreadCountForLead: Updated unread count for lead ${t} to ${s}`)}else console.log(`updateUnreadCountForLead: No existing document for lead ${t}, creating new one`),s=e?1:0,await us(n,{leadId:t,unreadCount:s,lastUpdated:wt()}),console.log(`updateUnreadCountForLead: Created unread message entry for lead ${t} with count ${s}`);const o=await un(n);o.exists()?console.log(`updateUnreadCountForLead: Verification - document exists with count ${o.data().unreadCount}`):console.error("updateUnreadCountForLead: Verification failed - document does not exist after update")}catch(n){console.error("Error updating unread count:",n)}},Qre=async()=>{try{console.log("getAllUnreadMessages: Starting to fetch unread messages");const t=await Gre();if(console.log(`getAllUnreadMessages: Found ${t.length} leads with unread messages:`,t),t.length===0)return console.log("getAllUnreadMessages: No leads with unread messages found, returning empty array"),[];const e=et(as,"messages"),n=[];for(const r of t){console.log(`getAllUnreadMessages: Fetching unread messages for lead ${r}`);const s=Dt(e,Ct("leadId","==",r),Ct("senderType","==","lead"),Ct("read","==",!1),Tr("timestamp","desc")),o=await Et(s);console.log(`getAllUnreadMessages: Found ${o.size} unread messages for lead ${r}`);let a="Unknown Lead";o.forEach(l=>{const c=l.data();console.log(`getAllUnreadMessages: Processing message ${l.id} for lead ${r}`,{senderId:c.senderId,senderName:c.senderName,senderType:c.senderType,timestamp:c.timestamp,read:c.read}),(!a||a==="Unknown Lead")&&(a=c.senderName||"Unknown Lead"),n.push({id:l.id,leadId:c.leadId,leadName:a,message:c.message,timestamp:c.timestamp,sender:c.senderName,isRead:!1})})}return console.log(`getAllUnreadMessages: Total unread messages found: ${n.length}`),n.sort((r,s)=>{var l,c,u,d;const o=((c=(l=r.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l))||new Date;return(((d=(u=s.timestamp)==null?void 0:u.toDate)==null?void 0:d.call(u))||new Date).getTime()-o.getTime()}),n}catch(t){return console.error("Error getting all unread messages:",t),[]}};function Yre({limit:t=5}){const[e,n]=p.useState([]),[r,s]=p.useState(!0);p.useEffect(()=>{const l=async()=>{try{console.log("UnreadMessages component: Starting to fetch unread messages"),s(!0);const u=await Qre();console.log("UnreadMessages component: Received unread messages:",u),n(u.slice(0,t)),console.log(`UnreadMessages component: Set ${Math.min(u.length,t)} messages to state`)}catch(u){console.error("Error fetching unread messages:",u)}finally{s(!1),console.log("UnreadMessages component: Finished loading")}};l();const c=setInterval(l,3e4);return()=>{clearInterval(c)}},[t]);const o=l=>l.length>80?`${l.substring(0,80)}...`:l,a=l=>{if(!l)return"Unknown";try{const c=l!=null&&l.toDate?l.toDate():new Date(l);return Xg(c,{addSuffix:!0})}catch{return"Invalid date"}};return i.jsxs(_e,{className:"h-full overflow-hidden border border-border/40 hover:shadow-md transition-all duration-200",children:[i.jsx(Be,{className:"bg-card",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Nh,{className:"h-4 w-4 text-primary"}),e.length>0&&i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),i.jsxs("div",{children:[i.jsx(ze,{children:"Unread Messages"}),i.jsx(Xt,{children:"Messages that need your attention"})]})]}),e.length>0&&i.jsxs(at,{variant:"secondary",className:me("rounded-full px-2.5 py-0.5 font-medium","bg-red-50 text-red-700 hover:bg-red-100","border border-red-200/50"),children:[e.length," new"]})]})}),i.jsx(De,{children:r?i.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((l,c)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(xs,{className:"h-4 w-32"}),i.jsx(xs,{className:"h-4 w-16"})]}),i.jsx(xs,{className:"h-12 w-full"})]},c))}):e.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx(kb,{className:"h-10 w-10 text-muted-foreground mb-2 opacity-20"}),i.jsx("p",{className:"text-muted-foreground",children:"No unread messages"})]}):i.jsxs("div",{className:"space-y-4",children:[e.map(l=>i.jsxs("div",{className:"relative border rounded-lg p-3 space-y-2 bg-card/50 hover:bg-primary/5 transition-colors group",children:[i.jsx("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-2 h-2 bg-red-500 rounded-full"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(yn,{to:`/leads/${l.leadId}`,className:"font-medium hover:underline text-sm text-primary",children:l.leadName}),i.jsx("span",{className:"text-xs text-muted-foreground",children:a(l.timestamp)})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(l.message)}),i.jsx("div",{className:"flex justify-end pt-1",children:i.jsx(yn,{to:`/leads/${l.leadId}?tab=messages`,children:i.jsx(K,{variant:"outline",size:"sm",className:"hover:bg-blue-500/90 hover:text-white hover:border-blue-500 transition-all duration-200",children:"Reply"})})})]},l.id)),i.jsx("div",{className:"pt-2",children:i.jsx(yn,{to:"/messages",children:i.jsx(K,{variant:"outline",size:"sm",className:"w-full hover:bg-blue-500/90 hover:text-white hover:border-blue-500 transition-all duration-200",children:"View all messages"})})})]})})]})}let ep;const Xre=new Uint8Array(16);function Zre(){if(!ep&&(ep=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ep))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ep(Xre)}const Un=[];for(let t=0;t<256;++t)Un.push((t+256).toString(16).slice(1));function Jre(t,e=0){return Un[t[e+0]]+Un[t[e+1]]+Un[t[e+2]]+Un[t[e+3]]+"-"+Un[t[e+4]]+Un[t[e+5]]+"-"+Un[t[e+6]]+Un[t[e+7]]+"-"+Un[t[e+8]]+Un[t[e+9]]+"-"+Un[t[e+10]]+Un[t[e+11]]+Un[t[e+12]]+Un[t[e+13]]+Un[t[e+14]]+Un[t[e+15]]}const ese=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yk={randomUUID:ese};function tse(t,e,n){if(yk.randomUUID&&!e&&!t)return yk.randomUUID();t=t||{};const r=t.random||(t.rng||Zre)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Jre(r)}function nse(t,e){const n=()=>{if(typeof window>"u")return e;try{const a=window.localStorage.getItem(t);return a?JSON.parse(a):e}catch(a){return console.warn(`Error reading localStorage key "${t}":`,a),e}},[r,s]=p.useState(n),o=a=>{try{const l=a instanceof Function?a(r):a;s(l),typeof window<"u"&&window.localStorage.setItem(t,JSON.stringify(l))}catch(l){console.warn(`Error setting localStorage key "${t}":`,l)}};return p.useEffect(()=>{const a=l=>{l.key===t&&l.newValue&&s(JSON.parse(l.newValue))};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[t]),[r,o]}const vk=[{id:"stats-leads",title:"Total Leads",description:"Total number of leads in the system",componentType:"LeadStats",row:1,order:1,width:3},{id:"stats-active-leads",title:"Active Leads",description:"Number of active leads",componentType:"LeadStats",row:1,order:2,width:3},{id:"stats-converted-leads",title:"Converted Leads",description:"Number of converted leads",componentType:"LeadStats",row:1,order:3,width:3},{id:"stats-pending-tasks",title:"Pending Tasks",description:"Number of pending tasks",componentType:"LeadStats",row:1,order:4,width:3},{id:"overview",title:"Overview",description:"Quick overview of your leads and tasks",componentType:"Overview",row:2,order:1,width:6},{id:"recent-leads",title:"Recent Leads",description:"Recently added or updated leads",componentType:"RecentLeads",row:2,order:2,width:6},{id:"new-leads-this-week",title:"New Leads This Week",description:"Leads added during the current week",componentType:"NewLeadsThisWeek",row:3,order:1,width:6},{id:"lead-timeline",title:"Lead Timeline",description:"Timeline of recent lead activities",componentType:"LeadTimeline",row:3,order:2,width:6},{id:"unread-messages",title:"Unread Messages",description:"Messages that need your attention",componentType:"UnreadMessages",row:4,order:1,width:6},{id:"leads-by-source",title:"Leads by Source",description:"Distribution of leads by their source",componentType:"LeadsBySource",row:4,order:2,width:6}],rse=p.createContext(void 0);function sF({children:t}){const[e,n]=nse("dashboard-layout",vk),[r,s]=p.useState(e);p.useEffect(()=>{n(r)},[r,n]);const o=d=>{s(d)},a=()=>{s(vk)},l=(d,f)=>{s(m=>{const g=m.findIndex(E=>E.id===d),y=m.findIndex(E=>E.id===f);if(g===-1||y===-1)return m;const v=m[g],x=m[y];if(v.row===x.row){const E=[...m];return E.splice(g,1),E.splice(y,0,v),E.filter(R=>R.row===v.row).forEach((R,L)=>{R.order=L+1}),E}const b=m.map(E=>E.id===d?{...E,row:x.row,order:x.order}:E),w=b.filter(E=>E.row===x.row);return w.sort((E,C)=>E.order-C.order),w.forEach((E,C)=>{E.order=C+1}),b})},c=d=>{const f={...d,id:tse()};s(m=>[...m,f])},u=d=>{s(f=>f.filter(m=>m.id!==d))};return i.jsx(rse.Provider,{value:{layout:r,updateLayout:o,resetToDefaultLayout:a,moveItem:l,addItem:c,removeItem:u},children:t})}const sse="processes",xk=async()=>{try{const t=Dt(et(Ee,sse),Tr("createdAt","desc"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting processes:",t),t}},ise=()=>{const[t,e]=p.useState({totalLeads:0,activeLeads:0,convertedLeads:0,pendingTasks:0,processCounts:[],activeProcessCounts:[]}),[n,r]=p.useState(!0),[s,o]=p.useState([]),[a,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState({totalLeads:0,appliedCandidates:0,followUp:0,converted:0,serviceFeesPending:0,serviceFeesCollected:0}),[m,g]=p.useState(!1),[y,v]=p.useState(null),[x,b]=p.useState(!1),[w,E]=p.useState(!0),[C,R]=p.useState([]),{currentUser:L}=Dn();p.useEffect(()=>{(async()=>{try{r(!0);const[k,O]=await Promise.all([X4(),xk()]),I=O.map(N=>({name:N.name,count:0}));e({...k,processCounts:I,activeProcessCounts:I,previousPeriodStats:k.previousPeriodStats}),R(O)}catch(k){console.error("Error fetching dashboard data:",k)}finally{r(!1)}})()},[]),p.useEffect(()=>{(async()=>{try{r(!0);const[k,O]=await Promise.all([Mg(),xk()]);o(k);const I=new Map,N=new Map;O.forEach(Y=>{I.set(Y.name,0),N.set(Y.name,0)}),k.forEach(Y=>{if(Y.currentProcessId){const q=O.find(W=>W.id===Y.currentProcessId);q&&(I.set(q.name,(I.get(q.name)||0)+1),Y.status==="active"&&N.set(q.name,(N.get(q.name)||0)+1))}});const $=Array.from(I.entries()).map(([Y,q])=>({name:Y,count:q})).filter(Y=>Y.count>0).sort((Y,q)=>q.count-Y.count),U=Array.from(N.entries()).map(([Y,q])=>({name:Y,count:q})).filter(Y=>Y.count>0).sort((Y,q)=>q.count-Y.count),V=k.length,z=k.filter(Y=>Y.status==="active").length,F=k.filter(Y=>Y.status==="converted").length,H=k.reduce((Y,q)=>{var W;if(q.assignedTo===(L==null?void 0:L.uid)){const re=((W=q.tasks)==null?void 0:W.some(je=>!je.completed))||!1;return Y+(re?1:0)}return Y},0);e({totalLeads:V,activeLeads:z,convertedLeads:F,pendingTasks:H,processCounts:$,activeProcessCounts:U,previousPeriodStats:t.previousPeriodStats}),R(O)}catch(k){console.error("Error loading dashboard data:",k)}finally{r(!1)}})()},[L]),[{id:"1",label:"Total Leads",value:d.totalLeads,count:d.totalLeads,color:"blue"},{id:"2",label:"Applied Candidates",value:d.appliedCandidates,count:d.appliedCandidates,color:"green"},{id:"3",label:"Follow Up",value:d.followUp,count:d.followUp,color:"yellow"},{id:"4",label:"Lead Converted",value:d.converted,count:d.converted,color:"purple"},{id:"5",label:"Service Fees Pending",value:d.serviceFeesPending,count:d.serviceFeesPending,color:"indigo"},{id:"6",label:"Service Fees Collected",value:d.serviceFeesCollected,count:d.serviceFeesCollected,color:"pink"}].reduce((S,k)=>S+k.value,0),s.filter(S=>S.status==="active").length,c.length,Math.floor(c.length*.3),Math.floor(c.length*.3),c.length,a.filter(S=>S.status==="pending").length,Math.floor(a.filter(S=>S.status==="pending").length*.2),Math.floor(a.filter(S=>S.status==="pending").length*.3),a.filter(S=>S.status==="pending").length,s.length>0&&Math.round(d.converted/d.totalLeads*100);const j=async S=>{try{await CL(S);const k=await Mg();o(k),g(!1)}catch(k){console.error("Error adding lead:",k)}};return n?i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dashboard"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Loading dashboard data..."})]})}):i.jsxs(sF,{children:[i.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[i.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs(K,{variant:"outline",size:"sm",onClick:()=>E(!w),children:[w?"Disable":"Enable"," Drag & Drop"]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsx(yn,{to:"/leads",className:"block hover:opacity-90 transition-opacity",children:i.jsx(Zm,{title:"Total Leads in Process",value:t.totalLeads,status:t.previousPeriodStats?t.totalLeads>=t.previousPeriodStats.totalLeads?"positive":"negative":"neutral",icon:i.jsx(Sh,{className:"h-4 w-4"}),description:"Leads currently in various processes",processCounts:t.processCounts})}),i.jsx(yn,{to:"/leads?status=active",className:"block hover:opacity-90 transition-opacity",children:i.jsx(Zm,{title:"Active Leads",value:t.activeLeads,status:t.previousPeriodStats?t.activeLeads>=t.previousPeriodStats.activeLeads?"positive":"negative":"neutral",icon:i.jsx(Wi,{className:"h-4 w-4"}),description:"Leads actively being processed",processCounts:t.activeProcessCounts})}),i.jsx(yn,{to:"/leads?status=converted",className:"block hover:opacity-90 transition-opacity",children:i.jsx(Zm,{title:"Converted Leads",value:t.convertedLeads,status:t.previousPeriodStats?t.convertedLeads>=t.previousPeriodStats.convertedLeads?"positive":"negative":"neutral",icon:i.jsx(b6,{className:"h-4 w-4"}),description:"Successfully converted leads"})}),i.jsx(yn,{to:"/tasks",className:"block hover:opacity-90 transition-opacity",children:i.jsx(Zm,{title:"My Pending Tasks",value:t.pendingTasks,status:"neutral",icon:i.jsx(Z3,{className:"h-4 w-4"}),description:"Tasks pending from your assigned leads"})})]}),i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:[i.jsxs(_e,{className:"col-span-1",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Recent Leads"}),i.jsx(Xt,{children:"Your most recent lead acquisitions"})]}),i.jsx(De,{children:i.jsx(kre,{})})]}),i.jsxs(_e,{className:"col-span-1",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Unread Messages"}),i.jsx(Xt,{children:"Recent unread communications"})]}),i.jsx(De,{children:i.jsx(Yre,{})})]}),i.jsxs(_e,{className:"col-span-1",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Lead Timeline"}),i.jsx(Xt,{children:"Recent lead activities"})]}),i.jsx(De,{children:i.jsx(Bre,{})})]})]}),i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:[i.jsxs(_e,{className:"col-span-2",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Leads by Source"}),i.jsx(Xt,{children:"Distribution of leads across different sources"})]}),i.jsx(De,{children:i.jsx(Vre,{})})]}),i.jsxs(_e,{className:"col-span-1",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Overview"}),i.jsx(Xt,{children:"Activity overview"})]}),i.jsx(De,{children:i.jsx(zre,{})})]})]})]}),i.jsx(t_,{open:m,onOpenChange:g,children:i.jsxs(Pg,{children:[i.jsxs(n_,{children:[i.jsx(r_,{children:"Add New Lead"}),i.jsx(s_,{children:"Fill in the details to create a new lead"})]}),i.jsx(Jte,{onSubmit:j,onCancel:()=>g(!1)})]})}),i.jsx(t_,{open:x,onOpenChange:b,children:i.jsxs(Pg,{children:[i.jsxs(n_,{children:[i.jsx(r_,{children:"Lead Portal Stats"}),i.jsx(s_,{children:"Detailed statistics for the selected lead"})]}),y&&i.jsx(Ere,{leadId:y.id})]})})]})},Qs=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:me("w-full caption-bottom text-sm",t),...e})}));Qs.displayName="Table";const Ys=p.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:me("[&_tr]:border-b",t),...e}));Ys.displayName="TableHeader";const Xs=p.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:me("[&_tr:last-child]:border-0",t),...e}));Xs.displayName="TableBody";const ose=p.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:me("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));ose.displayName="TableFooter";const Ut=p.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:me("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Ut.displayName="TableRow";const Me=p.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:me("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Me.displayName="TableHead";const Ie=p.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:me("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ie.displayName="TableCell";const ase=p.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:me("mt-4 text-sm text-muted-foreground",t),...e}));ase.displayName="TableCaption";const Cn=Nj,iF=Sj,lse=Tj,da=Bf,oF=p.forwardRef(({className:t,...e},n)=>i.jsx(Ff,{ref:n,className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));oF.displayName=Ff.displayName;const bn=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(lse,{children:[i.jsx(oF,{}),i.jsxs(Vf,{ref:r,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Ll,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bn.displayName=Vf.displayName;const En=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});En.displayName="DialogHeader";const dr=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});dr.displayName="DialogFooter";const jn=p.forwardRef(({className:t,...e},n)=>i.jsx(Uf,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",t),...e}));jn.displayName=Uf.displayName;const Gl=p.forwardRef(({className:t,...e},n)=>i.jsx($f,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Gl.displayName=$f.displayName;var aF="AlertDialog",[cse,Cle]=js(aF,[dM]),vo=dM(),lF=t=>{const{__scopeAlertDialog:e,...n}=t,r=vo(e);return i.jsx(Nj,{...r,...n,modal:!0})};lF.displayName=aF;var use="AlertDialogTrigger",dse=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=vo(n);return i.jsx(Sj,{...s,...r,ref:e})});dse.displayName=use;var hse="AlertDialogPortal",cF=t=>{const{__scopeAlertDialog:e,...n}=t,r=vo(e);return i.jsx(Tj,{...r,...n})};cF.displayName=hse;var fse="AlertDialogOverlay",uF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=vo(n);return i.jsx(Ff,{...s,...r,ref:e})});uF.displayName=fse;var Bc="AlertDialogContent",[mse,pse]=cse(Bc),dF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,o=vo(n),a=p.useRef(null),l=dt(e,a),c=p.useRef(null);return i.jsx(dZ,{contentName:Bc,titleName:hF,docsSlug:"alert-dialog",children:i.jsx(mse,{scope:n,cancelRef:c,children:i.jsxs(Vf,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ve(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(_b,{children:r}),i.jsx(yse,{contentRef:a})]})})})});dF.displayName=Bc;var hF="AlertDialogTitle",fF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=vo(n);return i.jsx(Uf,{...s,...r,ref:e})});fF.displayName=hF;var mF="AlertDialogDescription",pF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=vo(n);return i.jsx($f,{...s,...r,ref:e})});pF.displayName=mF;var gse="AlertDialogAction",gF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=vo(n);return i.jsx(Bf,{...s,...r,ref:e})});gF.displayName=gse;var yF="AlertDialogCancel",vF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=pse(yF,n),o=vo(n),a=dt(e,s);return i.jsx(Bf,{...o,...r,ref:a})});vF.displayName=yF;var yse=({contentRef:t})=>{const e=`\`${Bc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Bc}\` by passing a \`${mF}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Bc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},vse=lF,xse=cF,xF=uF,wF=dF,_F=gF,bF=vF,EF=fF,jF=pF;const NF=vse,wse=xse,SF=p.forwardRef(({className:t,...e},n)=>i.jsx(xF,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));SF.displayName=xF.displayName;const Yj=p.forwardRef(({className:t,...e},n)=>i.jsxs(wse,{children:[i.jsx(SF,{}),i.jsx(wF,{ref:n,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Yj.displayName=wF.displayName;const Xj=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});Xj.displayName="AlertDialogHeader";const Zj=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Zj.displayName="AlertDialogFooter";const Jj=p.forwardRef(({className:t,...e},n)=>i.jsx(EF,{ref:n,className:me("text-lg font-semibold",t),...e}));Jj.displayName=EF.displayName;const eN=p.forwardRef(({className:t,...e},n)=>i.jsx(jF,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));eN.displayName=jF.displayName;const tN=p.forwardRef(({className:t,...e},n)=>i.jsx(_F,{ref:n,className:me(mj(),t),...e}));tN.displayName=_F.displayName;const nN=p.forwardRef(({className:t,...e},n)=>i.jsx(bF,{ref:n,className:me(mj({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));nN.displayName=bF.displayName;const _se=Ru("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ws=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:me(_se({variant:e}),t),...n}));ws.displayName="Alert";const no=p.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:me("mb-1 font-medium leading-none tracking-tight",t),...e}));no.displayName="AlertTitle";const _s=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("text-sm [&_p]:leading-relaxed",t),...e}));_s.displayName="AlertDescription";function bse({open:t,onOpenChange:e,onImportComplete:n}){const[r,s]=p.useState(null),[o,a]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState([]),[f,m]=p.useState([]),[g,y]=p.useState(!1),[v,x]=p.useState(-1),[b,w]=p.useState(-1),[E,C]=p.useState(-1),[R,L]=p.useState(-1),[A,j]=p.useState(0),{toast:S}=Yt(),{currentUser:k}=Dn(),O=U=>{if(c(null),U.target.files&&U.target.files.length>0){const V=U.target.files[0];if(V.type!=="text/csv"&&!V.name.endsWith(".csv")){c("Please upload a CSV file"),s(null);return}s(V),I(V)}},I=U=>{const V=new FileReader;V.onload=z=>{var F;try{if(!((F=z.target)!=null&&F.result))throw new Error("Failed to read file");const H=z.target.result,Y=N(H);if(Y.length===0)throw new Error("CSV file is empty");const q=Y[0];m(q),d(Y.slice(1)),q.forEach((W,re)=>{const je=W.toLowerCase();je.includes("name")?x(re):je.includes("email")?w(re):je.includes("phone")?C(re):(je.includes("address")||je.includes("location"))&&L(re)}),y(!0)}catch(H){console.error("Error parsing CSV:",H),c(`Error parsing CSV: ${H instanceof Error?H.message:"Unknown error"}`)}},V.onerror=()=>{c("Error reading the file")},V.readAsText(U)},N=U=>{const V=[],z=U.split(/\r\n|\n/);for(let F=0;F<z.length;F++){if(z[F].trim()==="")continue;const H=[];let Y=!1,q="";for(let W=0;W<z[F].length;W++){const re=z[F][W];re==='"'?Y=!Y:re===","&&!Y?(H.push(q.trim()),q=""):q+=re}H.push(q.trim()),V.push(H)}return V},$=async()=>{if(v===-1||b===-1||u.length===0){c("Please specify at least the Name and Email columns");return}try{a(!0),j(10);const U=u.map(z=>!z[v]||!z[b]?null:{name:z[v],email:z[b],phone:E>=0?z[E]:"",address:R>=0?z[R]:"",source:"CSV Import",status:"active",createdBy:(k==null?void 0:k.uid)||"system"}).filter(z=>z!==null);if(U.length===0)throw new Error("No valid leads found in the CSV");j(50);const V=await XJ(U);j(100),S({title:"Import Successful",description:`Successfully imported ${V} leads`}),n(),e(!1)}catch(U){console.error("Error importing leads:",U),c(`Error importing leads: ${U instanceof Error?U.message:"Unknown error"}`)}finally{a(!1)}};return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"sm:max-w-[600px]",children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Import Leads from CSV"}),i.jsx(Gl,{children:"Upload a CSV file with lead information. The file should have columns for Name, Email, Phone, and Address."})]}),l&&i.jsxs(ws,{variant:"destructive",children:[i.jsx(vl,{className:"h-4 w-4"}),i.jsx(no,{children:"Error"}),i.jsx(_s,{children:l})]}),g?i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsx("h3",{className:"font-medium",children:"CSV Preview"}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"name-column",children:"Name Column"}),i.jsxs("select",{id:"name-column",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:v,onChange:U=>x(Number(U.target.value)),children:[i.jsx("option",{value:"-1",children:"Select column"}),f.map((U,V)=>i.jsx("option",{value:V,children:U},V))]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"email-column",children:"Email Column"}),i.jsxs("select",{id:"email-column",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:b,onChange:U=>w(Number(U.target.value)),children:[i.jsx("option",{value:"-1",children:"Select column"}),f.map((U,V)=>i.jsx("option",{value:V,children:U},V))]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"phone-column",children:"Phone Column"}),i.jsxs("select",{id:"phone-column",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:E,onChange:U=>C(Number(U.target.value)),children:[i.jsx("option",{value:"-1",children:"Select column"}),f.map((U,V)=>i.jsx("option",{value:V,children:U},V))]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"address-column",children:"Address Column"}),i.jsxs("select",{id:"address-column",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:R,onChange:U=>L(Number(U.target.value)),children:[i.jsx("option",{value:"-1",children:"Select column"}),f.map((U,V)=>i.jsx("option",{value:V,children:U},V))]})]})]}),i.jsx("div",{className:"border rounded-md overflow-auto max-h-48",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsx("tr",{className:"bg-muted border-b",children:f.map((U,V)=>i.jsxs("th",{className:"px-4 py-2 text-left",children:[U,V===v&&i.jsx("span",{className:"ml-1 text-primary",children:"(Name)"}),V===b&&i.jsx("span",{className:"ml-1 text-primary",children:"(Email)"}),V===E&&i.jsx("span",{className:"ml-1 text-primary",children:"(Phone)"}),V===R&&i.jsx("span",{className:"ml-1 text-primary",children:"(Address)"})]},V))})}),i.jsxs("tbody",{children:[u.slice(0,5).map((U,V)=>i.jsx("tr",{className:"border-b",children:U.map((z,F)=>i.jsx("td",{className:"px-4 py-2",children:z},F))},V)),u.length>5&&i.jsx("tr",{children:i.jsxs("td",{colSpan:f.length,className:"px-4 py-2 text-center text-muted-foreground",children:["...and ",u.length-5," more rows"]})})]})]})}),o&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Importing leads..."}),i.jsxs("span",{children:[A,"%"]})]}),i.jsx(to,{value:A,className:"h-2"})]})]}):i.jsx("div",{className:"grid gap-4 py-4",children:i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"csv-file",children:"Select CSV File"}),i.jsxs("div",{className:"border-2 border-dashed rounded-md p-6 text-center",children:[i.jsx(i6,{className:"mx-auto h-12 w-12 text-muted-foreground"}),i.jsxs("div",{className:"mt-4 flex text-sm leading-6 text-muted-foreground",children:[i.jsxs("label",{htmlFor:"csv-file",className:"relative cursor-pointer rounded-md bg-transparent font-semibold text-primary hover:text-primary/80",children:[i.jsx("span",{children:"Upload a file"}),i.jsx(ue,{id:"csv-file",type:"file",accept:".csv",className:"sr-only",onChange:O})]}),i.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),i.jsx("p",{className:"text-xs leading-5 text-muted-foreground",children:"CSV file up to 10MB"})]})]})}),i.jsx(dr,{children:g?i.jsxs(i.Fragment,{children:[i.jsxs(K,{variant:"outline",onClick:()=>{y(!1),s(null),d([]),m([])},children:[i.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Cancel"]}),i.jsx(K,{onClick:$,disabled:o||v===-1||b===-1,children:o?i.jsxs("span",{className:"flex items-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Importing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(jh,{className:"mr-2 h-4 w-4"}),"Import Leads"]})})]}):i.jsx(K,{variant:"outline",onClick:()=>e(!1),children:"Cancel"})})]})})}const Ese=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,o]=p.useState(""),[a,l]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,g]=p.useState("createdAt"),[y,v]=p.useState("desc"),[x,b]=p.useState(!1),[w,E]=p.useState(null),[C,R]=p.useState({name:"",email:"",phone:"",source:""}),L=pr(),{toast:A}=Yt(),{currentUser:j}=Dn(),S=async()=>{try{l(!0);const z=await Mg();e(z),r(z)}catch(z){console.error("Error loading leads:",z),A({title:"Error",description:"Failed to load leads",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{S()},[A]),p.useEffect(()=>{if(!s.trim()){r(t);return}const z=s.toLowerCase(),F=t.filter(H=>H.name.toLowerCase().includes(z)||H.email&&H.email.toLowerCase().includes(z)||H.phone&&H.phone.toLowerCase().includes(z));r(F)},[s,t]);const k=z=>{m===z?v(y==="asc"?"desc":"asc"):(g(z),v("desc"))};p.useEffect(()=>{const z=[...n].sort((F,H)=>{if(!F[m]&&!H[m])return 0;if(!F[m])return 1;if(!H[m])return-1;let Y=0;if(m==="createdAt"||m==="updatedAt"){const q=F[m]&&typeof F[m].toDate=="function"?F[m].toDate():new Date(F[m]),W=H[m]&&typeof H[m].toDate=="function"?H[m].toDate():new Date(H[m]);Y=q.getTime()-W.getTime()}else{const q=String(F[m]).toLowerCase(),W=String(H[m]).toLowerCase();Y=q.localeCompare(W)}return y==="asc"?Y:-Y});r(z)},[m,y]);const O=async()=>{try{if(!C.name||!C.email){A({title:"Validation Error",description:"Name and email are required",variant:"destructive"});return}const z={...C,status:"active",createdBy:(j==null?void 0:j.uid)||"unknown"},F=await CL(z);e([F,...t]),R({name:"",email:"",phone:"",source:""}),u(!1),A({title:"Lead created",description:`Lead "${F.name}" has been created`}),L(`/leads/${F.id}`)}catch(z){console.error("Error creating lead:",z),A({title:"Error",description:"Failed to create lead",variant:"destructive"})}},I=z=>{E(z),b(!0)},N=async()=>{if(w)try{await YJ(w.id),e(t.filter(z=>z.id!==w.id)),A({title:"Lead deleted",description:`Lead "${w.name}" has been deleted successfully`}),b(!1),E(null)}catch(z){console.error("Error deleting lead:",z),A({title:"Error",description:"Failed to delete lead",variant:"destructive"})}},$=z=>{switch(z){case"active":return"bg-green-500";case"inactive":return"bg-gray-500";case"converted":return"bg-blue-500";case"lost":return"bg-red-500";default:return"bg-gray-500"}},U=z=>{if(!z)return"N/A";try{const F=z&&typeof z.toDate=="function"?z.toDate():new Date(z);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(F)}catch{return"Invalid date"}},V=()=>{S(),A({title:"Import Complete",description:"Leads have been successfully imported"})};return i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Leads"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(K,{onClick:()=>f(!0),variant:"outline",className:"flex items-center gap-2",children:[i.jsx(Rb,{className:"h-4 w-4"}),"Import"]}),i.jsxs(K,{onClick:()=>u(!0),className:"flex items-center gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Add Lead"]})]})]}),i.jsxs(_e,{children:[i.jsx(Be,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"All Leads"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(jy,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(ue,{placeholder:"Search leads...",className:"pl-8",value:s,onChange:z=>o(z.target.value)})]})]})}),i.jsx(De,{children:a?i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{children:"Loading leads..."})}):n.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-muted-foreground",children:"No leads found"}),i.jsx(K,{onClick:()=>u(!0),variant:"outline",className:"mt-4",children:"Add your first lead"})]}):i.jsx("div",{className:"rounded-md border",children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{className:"cursor-pointer",onClick:()=>k("name"),children:i.jsxs("div",{className:"flex items-center",children:["Name",i.jsx(jx,{className:"ml-2 h-4 w-4"})]})}),i.jsx(Me,{children:"Email"}),i.jsx(Me,{children:"Phone"}),i.jsx(Me,{className:"cursor-pointer",onClick:()=>k("status"),children:i.jsxs("div",{className:"flex items-center",children:["Status",i.jsx(jx,{className:"ml-2 h-4 w-4"})]})}),i.jsx(Me,{className:"cursor-pointer",onClick:()=>k("createdAt"),children:i.jsxs("div",{className:"flex items-center",children:["Created",i.jsx(jx,{className:"ml-2 h-4 w-4"})]})}),i.jsx(Me,{className:"text-right",children:"Actions"})]})}),i.jsx(Xs,{children:n.map(z=>i.jsxs(Ut,{children:[i.jsx(Ie,{className:"font-medium",children:i.jsx(yn,{to:`/leads/${z.id}`,className:"text-blue-500 hover:underline",children:z.name})}),i.jsx(Ie,{children:i.jsxs("div",{className:"text-sm",children:[z.email,z.phone&&i.jsx("div",{className:"text-gray-500",children:z.phone})]})}),i.jsx(Ie,{children:z.source||"Not specified"}),i.jsx(Ie,{children:i.jsx(at,{className:$(z.status),children:z.status.charAt(0).toUpperCase()+z.status.slice(1)})}),i.jsx(Ie,{children:U(z.createdAt)}),i.jsx(Ie,{children:i.jsxs(mv,{children:[i.jsx(pv,{asChild:!0,children:i.jsx(K,{variant:"ghost",size:"icon",children:i.jsx(UR,{className:"h-4 w-4"})})}),i.jsxs(Wf,{align:"end",children:[i.jsxs(lr,{onClick:()=>L(`/leads/${z.id}`),children:[i.jsx(Ey,{className:"h-4 w-4 mr-2"}),"View"]}),i.jsxs(lr,{onClick:()=>L(`/leads/${z.id}/edit`),children:[i.jsx(au,{className:"h-4 w-4 mr-2"}),"Edit"]}),i.jsxs(lr,{className:"text-red-600",onClick:()=>I(z),children:[i.jsx(ma,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},z.id))})]})})})]}),i.jsx(Cn,{open:c,onOpenChange:u,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Add New Lead"}),i.jsx(Gl,{children:"Create a new lead to track in your pipeline"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Name *"}),i.jsx(ue,{id:"name",value:C.name,onChange:z=>R({...C,name:z.target.value}),placeholder:"Enter lead's full name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email *"}),i.jsx(ue,{id:"email",type:"email",value:C.email,onChange:z=>R({...C,email:z.target.value}),placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"phone",children:"Phone"}),i.jsx(ue,{id:"phone",value:C.phone,onChange:z=>R({...C,phone:z.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"source",children:"Lead Source"}),i.jsx(ue,{id:"source",value:C.source,onChange:z=>R({...C,source:z.target.value}),placeholder:"e.g., Website, Referral, etc."})]})]}),i.jsxs(dr,{children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{variant:"outline",children:"Cancel"})}),i.jsx(K,{onClick:O,children:"Create Lead"})]})]})}),i.jsx(NF,{open:x,onOpenChange:b,children:i.jsxs(Yj,{children:[i.jsxs(Xj,{children:[i.jsx(Jj,{children:"Are you sure you want to delete this lead?"}),i.jsxs(eN,{children:["This will permanently delete ",w==null?void 0:w.name,"'s information and all associated data. This action cannot be undone."]})]}),i.jsxs(Zj,{children:[i.jsx(nN,{onClick:()=>E(null),children:"Cancel"}),i.jsx(tN,{onClick:N,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),i.jsx(bse,{open:d,onOpenChange:f,onImportComplete:V})]})};var rN="Tabs",[jse,kle]=js(rN,[Wu]),TF=Wu(),[Nse,sN]=jse(rN),CF=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=zf(l),[f,m]=bi({prop:r,onChange:s,defaultProp:o});return i.jsx(Nse,{scope:n,baseId:$s(),value:f,onValueChange:m,orientation:a,dir:d,activationMode:c,children:i.jsx(Ve.div,{dir:d,"data-orientation":a,...u,ref:e})})});CF.displayName=rN;var kF="TabsList",AF=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=sN(kF,n),a=TF(n);return i.jsx(Cj,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Ve.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});AF.displayName=kF;var IF="TabsTrigger",RF=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,a=sN(IF,n),l=TF(n),c=OF(a.baseId,r),u=MF(a.baseId,r),d=r===a.value;return i.jsx(kj,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(Ve.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:ve(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:ve(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:ve(t.onFocus,()=>{const f=a.activationMode!=="manual";!d&&!s&&f&&a.onValueChange(r)})})})});RF.displayName=IF;var PF="TabsContent",DF=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=t,l=sN(PF,n),c=OF(l.baseId,r),u=MF(l.baseId,r),d=r===l.value,f=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Ns,{present:s||d,children:({present:m})=>i.jsx(Ve.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});DF.displayName=PF;function OF(t,e){return`${t}-trigger-${e}`}function MF(t,e){return`${t}-content-${e}`}var Sse=CF,LF=AF,FF=RF,VF=DF;const Ba=Sse,xo=p.forwardRef(({className:t,...e},n)=>i.jsx(LF,{ref:n,className:me("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));xo.displayName=LF.displayName;const kt=p.forwardRef(({className:t,...e},n)=>i.jsx(FF,{ref:n,className:me("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));kt.displayName=FF.displayName;const At=p.forwardRef(({className:t,...e},n)=>i.jsx(VF,{ref:n,className:me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));At.displayName=VF.displayName;const Tse=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"IVR System"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your interactive voice response system"})]}),i.jsxs(ws,{className:"bg-blue-50 border-blue-200",children:[i.jsx(_1,{className:"h-4 w-4 text-blue-500"}),i.jsx(no,{className:"text-blue-700",children:"Information"}),i.jsx(_s,{className:"text-blue-600",children:"Your IVR system is currently active and handling calls. View analytics and manage settings below."})]}),i.jsxs(Ba,{defaultValue:"dashboard",className:"space-y-4",children:[i.jsxs(xo,{className:"grid w-full sm:w-auto grid-cols-4 sm:grid-cols-5 h-auto p-1",children:[i.jsx(kt,{value:"dashboard",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Dashboard"}),i.jsx(kt,{value:"calls",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Calls"}),i.jsx(kt,{value:"flows",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Flows"}),i.jsx(kt,{value:"recordings",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Recordings"}),i.jsx(kt,{value:"settings",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Settings"})]}),i.jsxs(At,{value:"dashboard",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Total Calls"}),i.jsx(y6,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"320"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Average Duration"}),i.jsx(ys,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"3m 42s"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"-0:15 from last month"})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Completion Rate"}),i.jsx(G3,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"87%"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"+3% from last month"})]})]})]}),i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Recent Calls"})}),i.jsxs(De,{children:[i.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(t=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-muted/50 hover:bg-muted transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:i.jsx(zR,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium",children:["+1 (555) 123-456",t]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Today, 10:2",t," AM"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:["2:1",t," min"]}),i.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(_1,{className:"h-4 w-4"})})]})]},t))}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx(K,{variant:"outline",size:"sm",children:"View All Calls"})})]})]})]}),i.jsx(At,{value:"calls",className:"space-y-4 min-h-[300px]",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Call History"})}),i.jsxs(De,{children:[i.jsx("p",{className:"text-muted-foreground",children:"Access your detailed call logs and history here."}),i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx("p",{className:"text-muted-foreground",children:"Call data is loading..."})})]})]})}),i.jsx(At,{value:"flows",className:"space-y-4 min-h-[300px]",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"IVR Flows"})}),i.jsxs(De,{children:[i.jsx("p",{className:"text-muted-foreground",children:"Set up and manage your IVR call flows and menus."}),i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx(K,{children:"Create New Flow"})})]})]})}),i.jsx(At,{value:"recordings",className:"space-y-4 min-h-[300px]",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Call Recordings"})}),i.jsxs(De,{children:[i.jsx("p",{className:"text-muted-foreground",children:"Access and manage your saved call recordings."}),i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx("p",{className:"text-muted-foreground",children:"No recordings available"})})]})]})}),i.jsx(At,{value:"settings",className:"space-y-4 min-h-[300px]",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"IVR Settings"})}),i.jsxs(De,{children:[i.jsx("p",{className:"text-muted-foreground",children:"Configure your IVR system settings and preferences."}),i.jsx(gn,{className:"my-4"}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Business Hours"}),i.jsx("div",{className:"flex gap-2 items-center",children:i.jsx(K,{variant:"outline",size:"sm",children:"Configure"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Voice Settings"}),i.jsx("div",{className:"flex gap-2 items-center",children:i.jsx(K,{variant:"outline",size:"sm",children:"Manage"})})]})]})})]})]})})]})]}),jv="invoices",Cse=async()=>{try{const t=Dt(et(Ee,jv),Tr("createdAt","desc"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting invoices:",t),t}},kse=async t=>{try{const e=new Date().getTime(),n=Math.random().toString(36).substring(2,7).toUpperCase(),r=`INV-${e.toString().slice(-6)}-${n}`,s=Le(et(Ee,jv)),o={...t,invoiceNumber:r,createdAt:wt(),updatedAt:wt()};await us(s,o);const a=await un(s);return{id:a.id,...a.data()}}catch(e){throw console.error("Error creating invoice:",e),e}},UF=async(t,e)=>{try{await tn(Le(Ee,jv,t),{status:e,updatedAt:wt()})}catch(n){throw console.error("Error updating invoice status:",n),n}},Ase=async t=>{try{const e=Dt(et(Ee,jv),Ct("leadId","==",t),Tr("createdAt","desc"));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting invoices by lead ID:",e),e}},Ise={0:"0%",15:"15%",18:"18%"},$F=({invoice:t,open:e,onOpenChange:n})=>{if(!t)return null;const r=c=>{if(!c)return"N/A";try{return c instanceof ft?c.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):typeof c=="object"&&c!==null&&"toDate"in c&&typeof c.toDate=="function"?c.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(u){return console.error("Error formatting date:",u),"Invalid date"}},s=c=>{switch(c.toLowerCase()){case"paid":return"success";case"pending":return"warning";case"overdue":return"destructive";default:return"secondary"}},o=()=>{const c=document.getElementById("invoice-print-content");if(c){const u=document.body.innerHTML;document.body.innerHTML=c.innerHTML,window.print(),document.body.innerHTML=u,window.location.reload()}},a=()=>{alert("PDF download functionality would be implemented here with a library like jsPDF")},l=c=>Ise[c]||`${c}%`;return i.jsx(Cn,{open:e,onOpenChange:n,children:i.jsxs(bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(En,{children:i.jsxs(jn,{className:"flex justify-between items-center",children:[i.jsxs("span",{children:["Invoice #",t.invoiceNumber]}),i.jsx(at,{variant:s(t.status),children:t.status.toUpperCase()})]})}),i.jsxs("div",{id:"invoice-print-content",className:"space-y-6 py-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:"INVOICE"}),i.jsxs("p",{children:["Invoice #: ",t.invoiceNumber]}),i.jsxs("p",{children:["Created: ",r(t.createdAt)]}),i.jsxs("p",{children:["Due Date: ",r(t.dueDate)]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h3",{className:"font-bold text-lg",children:"CRM Pro"}),i.jsx("p",{children:"123 Business Street"}),i.jsx("p",{children:"Business City, 12345"}),i.jsx("p",{children:"contact@crmpro.com"})]})]}),i.jsx(gn,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"From:"}),i.jsx("p",{className:"font-bold",children:"CRM Pro"}),i.jsx("p",{children:"123 Business Street"}),i.jsx("p",{children:"Business City, 12345"}),i.jsx("p",{children:"contact@crmpro.com"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"To:"}),i.jsx("p",{className:"font-bold",children:t.customerName||"N/A"}),i.jsx("p",{children:t.customerEmail||"N/A"}),t.customerPhone&&i.jsx("p",{children:t.customerPhone}),t.customerAddress&&i.jsx("p",{children:t.customerAddress})]})]}),i.jsx(gn,{}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-4",children:"Invoice Items"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Description"}),i.jsx("th",{className:"border p-2 text-right",children:"Qty"}),i.jsx("th",{className:"border p-2 text-right",children:"Price"}),i.jsx("th",{className:"border p-2 text-right",children:"Amount"}),i.jsx("th",{className:"border p-2 text-right",children:"Tax"})]})}),i.jsx("tbody",{children:t.items.map(c=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-2",children:c.description}),i.jsx("td",{className:"border p-2 text-right",children:c.quantity}),i.jsxs("td",{className:"border p-2 text-right",children:["$",c.price.toFixed(2)]}),i.jsxs("td",{className:"border p-2 text-right",children:["$",c.amount.toFixed(2)]}),i.jsx("td",{className:"border p-2 text-right",children:c.isTaxable?i.jsxs(i.Fragment,{children:[l(c.taxRate)," ($",c.taxAmount.toFixed(2),")"]}):"Non-taxable"})]},c.id))})]})})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("div",{className:"w-1/2 space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",t.subtotal.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax Amount:"}),i.jsxs("span",{children:["$",t.taxAmount.toFixed(2)]})]}),i.jsx(gn,{}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",t.total.toFixed(2)]})]})]})}),t.notes&&i.jsxs(i.Fragment,{children:[i.jsx(gn,{}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"Notes"}),i.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})]})]}),t.terms&&i.jsxs(i.Fragment,{children:[i.jsx(gn,{}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"Terms and Conditions"}),i.jsx("p",{className:"whitespace-pre-wrap",children:t.terms})]})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>n(!1),children:"Close"}),i.jsxs(K,{variant:"outline",onClick:o,className:"gap-2",children:[i.jsx(Ab,{className:"h-4 w-4"})," Print"]}),i.jsxs(K,{variant:"outline",onClick:a,className:"gap-2",children:[i.jsx(s6,{className:"h-4 w-4"})," Download PDF"]})]})]})})},Rse={paid:"bg-green-100 text-green-800 hover:bg-green-200",pending:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",overdue:"bg-red-100 text-red-800 hover:bg-red-200",draft:"bg-gray-100 text-gray-800 hover:bg-gray-200"},Pse=()=>{const t=pr(),{toast:e}=Yt(),[n,r]=p.useState(""),[s,o]=p.useState([]),[a,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState(!0),[m,g]=p.useState(null),[y,v]=p.useState(!1),[x,b]=p.useState({total:0,paid:0,pending:0,overdue:0});p.useEffect(()=>{(async()=>{try{f(!0);const S=await Cse();l(S),u(S)}catch(S){console.error("Error fetching invoices:",S),e({title:"Error loading invoices",description:S.message||"Failed to load invoices",variant:"destructive"})}finally{f(!1)}})()},[e]),p.useEffect(()=>{if(!n.trim())u(a);else{const j=n.toLowerCase(),S=a.filter(k=>k.invoiceNumber.toLowerCase().includes(j)||k.customerName.toLowerCase().includes(j)||k.customerEmail.toLowerCase().includes(j)||k.status.toLowerCase().includes(j));u(S)}},[n,a]),p.useEffect(()=>{const j=c.reduce((I,N)=>I+N.total,0),S=c.filter(I=>I.status==="paid").reduce((I,N)=>I+N.total,0),k=c.filter(I=>I.status==="pending").reduce((I,N)=>I+N.total,0),O=c.filter(I=>I.status==="overdue").reduce((I,N)=>I+N.total,0);b({total:j,paid:S,pending:k,overdue:O})},[c]);const w=j=>{o(S=>S.includes(j)?S.filter(k=>k!==j):[...S,j])},E=()=>{s.length===c.length?o([]):o(c.map(j=>j.id))},C=j=>{g(j),v(!0)},R=async(j,S)=>{try{await UF(j,S);const k=a.map(O=>O.id===j?{...O,status:S}:O);l(k),e({title:"Status updated",description:`Invoice status changed to ${S}`})}catch(k){console.error("Error updating invoice status:",k),e({title:"Error updating status",description:k.message||"Failed to update invoice status",variant:"destructive"})}},L=j=>{t(`/leads/${j}`)},A=j=>{if(!j)return"N/A";try{return j instanceof ft?j.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):j&&typeof j=="object"&&j!==null&&"toDate"in j&&typeof j.toDate=="function"?j.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(S){return console.error("Error formatting date:",S),"Invalid date"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Invoices"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your customer invoices"})]}),i.jsxs(K,{className:"gap-2",onClick:()=>t("/leads"),children:[i.jsx(qn,{className:"h-4 w-4"}),"Create Invoice"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Total Revenue"}),i.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(De,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:["$",x.total.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.length," invoices"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Paid"}),i.jsx(Wi,{className:"h-4 w-4 text-green-500"})]}),i.jsxs(De,{children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",x.paid.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.filter(j=>j.status==="paid").length," invoices"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Pending"}),i.jsx(Wi,{className:"h-4 w-4 text-yellow-500"})]}),i.jsxs(De,{children:[i.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:["$",x.pending.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.filter(j=>j.status==="pending").length," invoices"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ze,{className:"text-sm font-medium",children:"Overdue"}),i.jsx(Wi,{className:"h-4 w-4 text-red-500"})]}),i.jsxs(De,{children:[i.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",x.overdue.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.filter(j=>j.status==="overdue").length," invoices"]})]})]})]}),i.jsxs(_e,{className:"overflow-hidden shadow-sm",children:[i.jsxs("div",{className:"border-b bg-white px-4 py-3 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative w-[300px]",children:[i.jsx(jy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ue,{placeholder:"Search invoices...",className:"pl-9 h-9",value:n,onChange:j=>r(j.target.value)})]}),i.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(a6,{className:"h-3.5 w-3.5"}),"Filters"]}),i.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(w6,{className:"h-3.5 w-3.5"}),"Advanced"]})]}),i.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(ig,{className:"h-3.5 w-3.5"}),"Export"]})]}),i.jsx(De,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{className:"w-[50px]",children:i.jsx("div",{className:"flex items-center",children:i.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:s.length===c.length&&c.length>0,onChange:E})})}),i.jsx(Me,{children:"Invoice #"}),i.jsx(Me,{children:"Customer"}),i.jsx(Me,{children:"Amount"}),i.jsx(Me,{children:"Status"}),i.jsx(Me,{children:"Date"}),i.jsx(Me,{children:"Due Date"}),i.jsx(Me,{className:"w-[80px]"})]})}),i.jsx(Xs,{children:d?i.jsx(Ut,{children:i.jsx(Ie,{colSpan:8,className:"text-center py-8",children:"Loading invoices..."})}):c.length===0?i.jsx(Ut,{children:i.jsx(Ie,{colSpan:8,className:"text-center py-8",children:n?"No invoices match your search.":"No invoices found."})}):c.map(j=>i.jsxs(Ut,{className:"hover:bg-muted/30",children:[i.jsx(Ie,{children:i.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:s.includes(j.id),onChange:()=>w(j.id)})}),i.jsx(Ie,{className:"font-medium",children:j.invoiceNumber}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(S6,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:j.customerName})]})}),i.jsxs(Ie,{children:["$",j.total.toFixed(2)]}),i.jsx(Ie,{children:i.jsx(at,{variant:"outline",className:Rse[j.status],children:j.status.charAt(0).toUpperCase()+j.status.slice(1)})}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(yl,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:A(j.createdAt)})]})}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(yl,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:A(j.dueDate)})]})}),i.jsx(Ie,{children:i.jsxs(mv,{children:[i.jsx(pv,{asChild:!0,children:i.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",children:i.jsx(UR,{className:"h-4 w-4"})})}),i.jsxs(Wf,{align:"end",children:[i.jsxs(lr,{onClick:()=>C(j),children:[i.jsx(Ey,{className:"h-4 w-4 mr-2"})," View Details"]}),i.jsx(lr,{onClick:()=>L(j.leadId),children:"View Lead"}),i.jsxs(lr,{children:[i.jsx(ig,{className:"h-4 w-4 mr-2"})," Download PDF"]}),i.jsxs(lr,{children:[i.jsx(Ab,{className:"h-4 w-4 mr-2"})," Print Invoice"]}),j.status!=="paid"&&i.jsx(lr,{onClick:()=>R(j.id,"paid"),children:"Mark as Paid"}),j.status==="paid"&&i.jsx(lr,{onClick:()=>R(j.id,"pending"),children:"Mark as Pending"})]})]})})]},j.id))})]})})})]}),i.jsx($F,{invoice:m,open:y,onOpenChange:v})]})},Dse=()=>{const[t,e]=p.useState("month");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reports"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"View and analyze your business performance"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(yl,{className:"h-4 w-4"}),i.jsxs(sn,{value:t,onValueChange:e,children:[i.jsx(Zt,{className:"w-[120px] border-0 p-0 h-auto font-normal",children:i.jsx(on,{})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"day",children:"Today"}),i.jsx(Oe,{value:"week",children:"This Week"}),i.jsx(Oe,{value:"month",children:"This Month"}),i.jsx(Oe,{value:"quarter",children:"This Quarter"}),i.jsx(Oe,{value:"year",children:"This Year"})]})]})]}),i.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(ig,{className:"h-4 w-4"}),"Export"]})]})]}),i.jsxs(Ba,{defaultValue:"overview",className:"space-y-6",children:[i.jsxs(xo,{className:"grid w-full sm:w-auto grid-cols-3 sm:grid-cols-4 h-auto p-1",children:[i.jsx(kt,{value:"overview",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Overview"}),i.jsx(kt,{value:"leads",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Leads"}),i.jsx(kt,{value:"sales",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Sales"}),i.jsx(kt,{value:"performance",className:"data-[state=active]:bg-primary data-[state=active]:text-white py-2",children:"Performance"})]}),i.jsxs(At,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsx(Be,{className:"pb-2",children:i.jsx(ze,{className:"text-sm font-medium",children:"Total Leads"})}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"1,091"}),i.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[i.jsx("span",{className:"text-xs mr-1",children:""})," 12% from last month"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsx(Be,{className:"pb-2",children:i.jsx(ze,{className:"text-sm font-medium",children:"Conversion Rate"})}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"8.4%"}),i.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[i.jsx("span",{className:"text-xs mr-1",children:""})," 2.1% from last month"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsx(Be,{className:"pb-2",children:i.jsx(ze,{className:"text-sm font-medium",children:"Avg. Response Time"})}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"1.2h"}),i.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[i.jsx("span",{className:"text-xs mr-1",children:""})," 15% faster than last month"]})]})]}),i.jsxs(_e,{className:"hover:shadow-card-hover transition-all duration-200",children:[i.jsx(Be,{className:"pb-2",children:i.jsx(ze,{className:"text-sm font-medium",children:"Revenue"})}),i.jsxs(De,{children:[i.jsx("div",{className:"text-2xl font-bold",children:"$24,500"}),i.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[i.jsx("span",{className:"text-xs mr-1",children:""})," 18% from last month"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(_e,{children:[i.jsxs(Be,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Lead Acquisition"}),i.jsx(x1,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Xt,{children:"New leads over time"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[300px] flex items-center justify-center bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"Chart Visualization"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Lead acquisition trend showing growth patterns over the selected time period"})]})})})]}),i.jsxs(_e,{children:[i.jsxs(Be,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Conversion Funnel"}),i.jsx(w1,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Xt,{children:"Lead journey stages"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[300px] flex items-center justify-center bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"Chart Visualization"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Conversion funnel showing progress from lead generation to closing"})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(_e,{children:[i.jsxs(Be,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Lead Sources"}),i.jsx(LR,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Xt,{children:"Where your leads come from"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[250px] flex items-center justify-center bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"Chart Visualization"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Pie chart showing distribution of lead sources"})]})})})]}),i.jsxs(_e,{children:[i.jsxs(Be,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Response Times"}),i.jsx(x1,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Xt,{children:"Lead response time analysis"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[250px] flex items-center justify-center bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"Chart Visualization"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Line chart showing response time performance"})]})})})]}),i.jsxs(_e,{children:[i.jsxs(Be,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Revenue by Service"}),i.jsx(w1,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Xt,{children:"Revenue breakdown"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[250px] flex items-center justify-center bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"Chart Visualization"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Bar chart showing revenue distribution by service type"})]})})})]})]})]}),i.jsx(At,{value:"leads",className:"space-y-4 min-h-[500px]",children:i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Lead Analytics"}),i.jsx(Xt,{children:"Detailed lead performance metrics"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[500px] flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-16 w-16 text-muted-foreground mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-medium",children:"Lead Performance Dashboard"}),i.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:"Detailed lead analytics would be displayed here, including conversion rates, source effectiveness, and lead quality metrics."})]})})})]})}),i.jsx(At,{value:"sales",className:"space-y-4 min-h-[500px]",children:i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Sales Performance"}),i.jsx(Xt,{children:"Revenue and sales metrics"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[500px] flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-16 w-16 text-muted-foreground mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-medium",children:"Sales Analytics Dashboard"}),i.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:"Comprehensive sales data would be displayed here, including revenue trends, sales by product/service, and forecasting."})]})})})]})}),i.jsx(At,{value:"performance",className:"space-y-4 min-h-[500px]",children:i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Team Performance"}),i.jsx(Xt,{children:"Agent and team productivity metrics"})]}),i.jsx(De,{children:i.jsx("div",{className:"h-[500px] flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx(Fi,{className:"h-16 w-16 text-muted-foreground mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-medium",children:"Performance Analytics"}),i.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mt-2",children:"Team and individual performance metrics would be displayed here, including conversion rates, response times, and customer satisfaction scores."})]})})})]})})]})]})},Ose=[{id:1,name:"User Settings",path:"/settings/user",adminOnly:!0},{id:2,name:"Abroad Invoice Settings",path:"/settings/invoice",adminOnly:!0},{id:3,name:"Documents Checklist",path:"/settings/documents",adminOnly:!0},{id:4,name:"Bulk Emailers",path:"/settings/bulk-emailers",adminOnly:!0},{id:5,name:"Brevo Email Integration",path:"/settings/brevo",adminOnly:!0},{id:6,name:"Leads Setting",path:"/settings/leads",adminOnly:!0},{id:7,name:"Triggers",path:"/settings/triggers",adminOnly:!0},{id:8,name:"Task Reminder Checklist",path:"/settings/task-reminder",adminOnly:!0},{id:9,name:"Birthday Wishes",path:"/settings/birthday-wishes",adminOnly:!0},{id:10,name:"Company Settings",path:"/settings/company",adminOnly:!0},{id:11,name:"Social Media Integration",path:"/settings/social-media",adminOnly:!0}],Mse=()=>{const{currentUser:t}=Dn(),e=(t==null?void 0:t.role)==="admin";return p.useEffect(()=>{console.log("Settings page - Current user role:",t==null?void 0:t.role)},[t]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings Control Panel"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage system settings and configurations"})]}),!e&&i.jsxs(ws,{variant:"destructive",className:"mb-4",children:[i.jsx(Ib,{className:"h-4 w-4 mr-2"}),i.jsx(_s,{children:"You need administrator privileges to access most settings. Please contact your system administrator for assistance."})]}),i.jsx("div",{className:"bg-white rounded-md shadow",children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{className:"w-[80px]",children:"Sr No."}),i.jsx(Me,{children:"Setting Name"}),i.jsx(Me,{className:"w-[120px]",children:"Access Level"}),i.jsx(Me,{className:"text-right w-[100px]",children:"Action"})]})}),i.jsx(Xs,{children:Ose.map(n=>i.jsxs(Ut,{className:n.adminOnly&&!e?"bg-gray-50":"",children:[i.jsx(Ie,{className:"font-medium",children:n.id}),i.jsxs(Ie,{children:[n.name,n.adminOnly&&!e&&i.jsx(E1,{className:"h-3 w-3 ml-2 inline text-amber-500"})]}),i.jsx(Ie,{children:n.adminOnly?i.jsx(at,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"Admin Only"}):i.jsx(at,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"All Users"})}),i.jsx(Ie,{className:"text-right",children:i.jsx(K,{variant:n.adminOnly&&!e?"outline":"default",size:"sm",className:n.adminOnly&&!e?"text-gray-400 hover:text-gray-500 w-20":"bg-blue-500 hover:bg-blue-600 w-20",asChild:!0,disabled:n.adminOnly&&!e,children:i.jsx(yn,{to:e||!n.adminOnly?n.path:"#",children:n.adminOnly&&!e?i.jsxs(i.Fragment,{children:[i.jsx(E1,{className:"h-4 w-4 mr-1"}),"Locked"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ey,{className:"h-4 w-4 mr-1"}),"View"]})})})})]},n.id))})]})})]})},Lse=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,o]=p.useState(!1),[a,l]=p.useState(""),{login:c,currentUser:u}=Dn(),d=pr(),{toast:f}=Yt(),m=()=>{setTimeout(()=>{u&&(console.log("Forcing navigation to dashboard"),d("/"))},500)};p.useEffect(()=>{u&&(console.log("User already logged in, redirecting to dashboard"),d("/"))},[u,d]);const g=async y=>{if(y.preventDefault(),!t||!n){l("Please enter both email and password");return}try{l(""),o(!0);const v=await c(t,n);f({title:"Login successful",description:"Welcome back!",variant:"default"}),d("/"),m()}catch(v){l(v.code==="auth/user-not-found"||v.code==="auth/wrong-password"?"Invalid email or password":"Failed to log in"),f({title:"Login failed",description:v.code==="auth/user-not-found"||v.code==="auth/wrong-password"?"Invalid email or password":"An error occurred during login",variant:"destructive"})}finally{o(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"CRM Pro Login"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your account"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[i.jsx("div",{className:"rounded-md shadow-sm -space-y-px",children:i.jsxs("div",{className:"space-y-4",children:[a&&i.jsx("div",{className:"bg-red-50 p-4 rounded text-red-500 text-sm",children:a}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"email",children:"Email address"}),i.jsx(ue,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"mt-1",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"password",children:"Password"}),i.jsx(ue,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"mt-1",placeholder:"Enter your password"})]})]})}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("div",{className:"text-sm",children:i.jsx(yn,{to:"/forgot-password",className:"text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})}),i.jsx("div",{children:i.jsx(K,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600",disabled:s,children:s?"Signing in...":"Sign in"})}),i.jsx("div",{className:"text-center text-sm",children:i.jsxs("p",{children:["Don't have an account?"," ",i.jsx(yn,{to:"/signup",className:"text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]})]})})},Fse=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,o]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(!1),[d,f]=p.useState(""),{signup:m}=Dn(),g=pr(),{toast:y}=Yt(),v=async x=>{if(x.preventDefault(),!t||!n||!s||!a){f("Please fill in all fields");return}if(s!==a){f("Passwords do not match");return}if(s.length<6){f("Password must be at least 6 characters");return}try{f(""),u(!0),await m(n,s,t),y({title:"Account created",description:"Your account has been successfully created!",variant:"default"}),g("/")}catch(b){b.code==="auth/email-already-in-use"?f("Email already in use"):f("Failed to create an account"),y({title:"Sign up failed",description:b.code==="auth/email-already-in-use"?"Email already in use":"An error occurred during signup",variant:"destructive"})}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign up to get started with CRM Pro"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[i.jsx("div",{className:"rounded-md shadow-sm -space-y-px",children:i.jsxs("div",{className:"space-y-4",children:[d&&i.jsx("div",{className:"bg-red-50 p-4 rounded text-red-500 text-sm",children:d}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"displayName",children:"Full Name"}),i.jsx(ue,{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:t,onChange:x=>e(x.target.value),className:"mt-1",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"email",children:"Email address"}),i.jsx(ue,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:x=>r(x.target.value),className:"mt-1",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"password",children:"Password"}),i.jsx(ue,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:s,onChange:x=>o(x.target.value),className:"mt-1",placeholder:"Create a password"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsx(ue,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:x=>l(x.target.value),className:"mt-1",placeholder:"Confirm your password"})]})]})}),i.jsx("div",{children:i.jsx(K,{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600",disabled:c,children:c?"Creating account...":"Sign up"})}),i.jsx("div",{className:"text-center text-sm",children:i.jsxs("p",{children:["Already have an account?"," ",i.jsx(yn,{to:"/login",className:"text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]})]})})},Vse=()=>{const t=Ma();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Use=()=>{const{logout:t}=Dn(),e=pr(),{toast:n}=Yt();return p.useEffect(()=>{(async()=>{try{await t(),n({title:"Logged out successfully",description:"You have been logged out of your account.",variant:"default"}),e("/login")}catch(s){console.error("Error logging out:",s),n({title:"Logout failed",description:"There was an error logging out. Please try again.",variant:"destructive"}),e("/")}})()},[t,e,n]),i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logging out..."}),i.jsx("p",{children:"Please wait while we log you out."})]})})},Qn=({title:t,description:e,children:n})=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(K,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",asChild:!0,children:i.jsxs(yn,{to:"/settings",children:[i.jsx(ou,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Back to settings"})]})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t}),e&&i.jsx("p",{className:"text-muted-foreground mt-1",children:e})]})]}),i.jsx("div",{className:"bg-white rounded-md shadow p-6",children:n})]});var iN="Switch",[$se,Ale]=js(iN),[Bse,zse]=$se(iN),BF=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,g]=p.useState(null),y=dt(e,E=>g(E)),v=p.useRef(!1),x=m?d||!!m.closest("form"):!0,[b=!1,w]=bi({prop:s,defaultProp:o,onChange:u});return i.jsxs(Bse,{scope:n,checked:b,disabled:l,children:[i.jsx(Ve.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":HF(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:ve(t.onClick,E=>{w(C=>!C),x&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})}),x&&i.jsx(qse,{control:m,bubbles:!v.current,name:r,value:c,checked:b,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});BF.displayName=iN;var zF="SwitchThumb",qF=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=zse(zF,n);return i.jsx(Ve.span,{"data-state":HF(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});qF.displayName=zF;var qse=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,o=p.useRef(null),a=Hj(n),l=$b(e);return p.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[a,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function HF(t){return t?"checked":"unchecked"}var WF=BF,Hse=qF;const ht=p.forwardRef(({className:t,...e},n)=>i.jsx(WF,{className:me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(Hse,{className:me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ht.displayName=WF.displayName;function Wse({open:t,onOpenChange:e,user:n,onSave:r}){const[s,o]=p.useState(n),[a,l]=p.useState(null);p.useEffect(()=>{n&&o(n)},[n]);const c=f=>{const{name:m,value:g}=f.target;o(y=>y?{...y,[m]:g}:null)},u=f=>{f.preventDefault(),s&&n&&(r({...s,logo:a}),e(!1))},d=()=>!n||!s?i.jsx("p",{children:"No user data available"}):i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Name:"}),i.jsx(ue,{id:"name",name:"name",value:s.name,onChange:c})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"username",children:"Username:"}),i.jsx(ue,{id:"username",name:"username",value:s.username,onChange:c})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email Id:"}),i.jsx(ue,{id:"email",name:"email",type:"email",value:s.email||"",onChange:c})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"phoneNumber",children:"Phone Number:"}),i.jsx(ue,{id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber||"",onChange:c})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"sourceForLeads",children:"Source for Leads:"}),i.jsx(ue,{id:"sourceForLeads",name:"sourceForLeads",placeholder:"Type Here...",value:s.sourceForLeads||"",onChange:c})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"reportsTo",children:"Select Manager whom this User will report:"}),i.jsxs(sn,{value:s.reportsTo||"",onValueChange:f=>o({...s,reportsTo:f}),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select a user to report to"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"dinisha_davis",children:"Dinisha Davis"}),i.jsx(Oe,{value:"uma_vinod",children:"Uma Vinod"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(K,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Submit"})})]});return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsxs(En,{children:[i.jsx(jn,{className:"text-center text-xl text-red-500",children:"Change Details"}),i.jsx(da,{className:"absolute right-4 top-4"})]}),d()]})})}function Kse({open:t,onOpenChange:e,userId:n,userName:r}){const[s,o]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(""),[d,f]=p.useState(""),[m,g]=p.useState(!1),{toast:y}=Yt(),v=async()=>{if(f(""),!s||!a||!c){f("All password fields are required");return}if(a!==c){f("New passwords do not match");return}if(a.length<6){f("Password must be at least 6 characters");return}try{g(!0);const x=Rs.currentUser;if(!x||!x.email){f("No authenticated user found");return}const b=Ul.credential(x.email,s);await uW(x,b),await fW(x,a),y({title:"Password changed",description:"Your password has been updated successfully"}),e(!1),o(""),l(""),u("")}catch(x){console.error("Error changing password:",x),x.code==="auth/wrong-password"?f("Current password is incorrect"):x.code==="auth/too-many-requests"?f("Too many unsuccessful attempts. Please try again later"):f("Failed to change password. Please try again"),y({title:"Password change failed",description:x.code==="auth/wrong-password"?"Current password is incorrect":"An error occurred while changing password",variant:"destructive"})}finally{g(!1)}};return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsx(En,{className:"bg-red-500 p-4 -mx-6 -mt-6 rounded-t-lg",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(jn,{className:"text-white text-xl font-semibold",children:"Change Password"}),i.jsx(K,{variant:"ghost",size:"icon",className:"text-white hover:bg-red-600 rounded-full h-6 w-6",onClick:()=>e(!1),children:i.jsx(Ll,{className:"h-4 w-4"})})]})}),i.jsxs("div",{className:"p-2 pt-4",children:[d&&i.jsx("div",{className:"mb-4 text-red-500 bg-red-50 p-2 rounded border border-red-200",children:d}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"current-password",children:"Current Password:"}),i.jsx(ue,{id:"current-password",type:"password",placeholder:"Type Here...",value:s,onChange:x=>o(x.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"new-password",children:"New Password:"}),i.jsx(ue,{id:"new-password",type:"password",placeholder:"Type Here...",value:a,onChange:x=>l(x.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"retype-password",children:"Retype New Password:"}),i.jsx(ue,{id:"retype-password",type:"password",placeholder:"Type Here...",value:c,onChange:x=>u(x.target.value)})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(K,{type:"button",className:"bg-blue-500 hover:bg-blue-600",onClick:v,disabled:m,children:m?"Changing...":"Submit"})})]})]})]})})}const Yu="users",oh=new Map,Nv=async t=>{if(oh.has(t))return oh.get(t);try{console.log("Fetching user data for ID:",t);const e=await un(Le(Ee,Yu,t));if(e.exists()){const n=e.data(),r={id:e.id,...n,displayName:n.displayName||n.name||n.email||"Unknown User",name:n.name||n.displayName||n.email||"Unknown User"};return console.log("User data found:",r),oh.set(t,r),r}return console.log("No user found for ID:",t),null}catch(e){return console.error("Error getting user:",e),null}},KF=async()=>{try{return(await Et(et(Ee,Yu))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error getting users:",t),t}},Gse=async t=>{try{const e=Le(et(Ee,Yu));await us(e,{...t,createdAt:new Date,updatedAt:new Date});const n=await un(e);return{id:n.id,...n.data()}}catch(e){throw console.error("Error creating user:",e),e}},Qse=async(t,e)=>{try{await tn(Le(Ee,Yu,t),{...e,updatedAt:new Date}),oh.clear()}catch(n){throw console.error("Error updating user:",n),n}},Yse=async(t,e)=>{try{await tn(Le(Ee,Yu,t),{active:e,updatedAt:new Date}),oh.clear()}catch(n){throw console.error("Error updating user status:",n),n}},Xse=async t=>{try{const e=Dt(et(Ee,Yu),Ct("email","==",t)),n=await Et(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,displayName:s.displayName||s.name||s.email||"Unknown User",name:s.name||s.displayName||s.email||"Unknown User"}}return null}catch(e){return console.error("Error getting user by email:",e),null}};function Zse({open:t,onOpenChange:e,onUserAdded:n}){const[r,s]=p.useState({name:"",username:"",email:"",password:"",confirmPassword:"",phoneNumber:"",schoolCode:"",sourceForLeads:"",reportsTo:"",active:!0,role:"user"}),[o,a]=p.useState(!1),[l,c]=p.useState({}),{toast:u}=Yt(),d=v=>{const{name:x,value:b}=v.target;s(w=>({...w,[x]:b})),l[x]&&c(w=>{const E={...w};return delete E[x],E})},f=(v,x)=>{s(b=>({...b,[v]:x})),l[v]&&c(b=>{const w={...b};return delete w[v],w})},m=(v,x)=>{s(b=>({...b,[v]:x}))},g=()=>{const v={};r.name.trim()||(v.name="Name is required"),r.username.trim()||(v.username="Username is required"),r.email.trim()||(v.email="Email is required"),r.password||(v.password="Password is required");const x=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.email&&!x.test(r.email)&&(v.email="Invalid email format"),r.password&&r.password.length<6&&(v.password="Password must be at least 6 characters"),r.password!==r.confirmPassword&&(v.confirmPassword="Passwords do not match"),c(v),Object.keys(v).length===0},y=async v=>{if(v.preventDefault(),!!g())try{a(!0);const x=await hE(Rs,r.email,r.password);await R0(x.user,{displayName:r.name}),await Gse({name:r.name,username:r.username,email:r.email,phoneNumber:r.phoneNumber,schoolCode:r.schoolCode,sourceForLeads:r.sourceForLeads,reportsTo:r.reportsTo,active:r.active,role:r.role,createdAt:new Date}),u({title:"User created",description:`User ${r.name} has been successfully created`}),s({name:"",username:"",email:"",password:"",confirmPassword:"",phoneNumber:"",schoolCode:"",sourceForLeads:"",reportsTo:"",active:!0,role:"user"}),e(!1),n()}catch(x){console.error("Error creating user:",x),x.code==="auth/email-already-in-use"?(c({email:"Email is already in use"}),u({title:"Error",description:"Email is already in use",variant:"destructive"})):u({title:"Error",description:"Failed to create user",variant:"destructive"})}finally{a(!1)}};return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs(En,{children:[i.jsx(jn,{className:"text-center text-xl text-red-500",children:"Add New User"}),i.jsx(da,{className:"absolute right-4 top-4"})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{htmlFor:"name",children:["Full Name: ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ue,{id:"name",name:"name",value:r.name,onChange:d,placeholder:"Enter full name",className:l.name?"border-red-500":""}),l.name&&i.jsx("p",{className:"text-red-500 text-sm",children:l.name})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{htmlFor:"username",children:["Username: ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ue,{id:"username",name:"username",value:r.username,onChange:d,placeholder:"Enter username",className:l.username?"border-red-500":""}),l.username&&i.jsx("p",{className:"text-red-500 text-sm",children:l.username})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{htmlFor:"email",children:["Email: ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ue,{id:"email",name:"email",type:"email",value:r.email,onChange:d,placeholder:"Enter email address",className:l.email?"border-red-500":""}),l.email&&i.jsx("p",{className:"text-red-500 text-sm",children:l.email})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{htmlFor:"password",children:["Password: ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ue,{id:"password",name:"password",type:"password",value:r.password,onChange:d,placeholder:"Enter password",className:l.password?"border-red-500":""}),l.password&&i.jsx("p",{className:"text-red-500 text-sm",children:l.password})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ne,{htmlFor:"confirmPassword",children:["Confirm Password: ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ue,{id:"confirmPassword",name:"confirmPassword",type:"password",value:r.confirmPassword,onChange:d,placeholder:"Confirm password",className:l.confirmPassword?"border-red-500":""}),l.confirmPassword&&i.jsx("p",{className:"text-red-500 text-sm",children:l.confirmPassword})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"phoneNumber",children:"Phone Number:"}),i.jsx(ue,{id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:d,placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"schoolCode",children:"School Code:"}),i.jsx(ue,{id:"schoolCode",name:"schoolCode",value:r.schoolCode,onChange:d,placeholder:"Enter school code"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"sourceForLeads",children:"Source for Leads:"}),i.jsx(ue,{id:"sourceForLeads",name:"sourceForLeads",value:r.sourceForLeads,onChange:d,placeholder:"Enter source for leads"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"reportsTo",children:"Reports To:"}),i.jsxs(sn,{value:r.reportsTo,onValueChange:v=>f("reportsTo",v),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select manager"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"dinisha_davis",children:"Dinisha Davis"}),i.jsx(Oe,{value:"uma_vinod",children:"Uma Vinod"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"role",children:"Role:"}),i.jsxs(sn,{value:r.role,onValueChange:v=>f("role",v),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select role"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"user",children:"User"}),i.jsx(Oe,{value:"admin",children:"Admin"}),i.jsx(Oe,{value:"manager",children:"Manager"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"active",children:"Active:"}),i.jsx(ht,{id:"active",checked:r.active,onCheckedChange:v=>m("active",v)})]}),i.jsxs("div",{className:"flex justify-end pt-4",children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{type:"button",variant:"outline",className:"mr-2",disabled:o,children:"Cancel"})}),i.jsx(K,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",disabled:o,children:o?"Creating...":"Create User"})]})]})]})})}const GF=async(t,e,n)=>{try{const s=(await hE(Rs,t,e)).user.uid;return await us(Le(Ee,"users",s),{email:t,displayName:n,role:"admin",createdAt:new Date}),console.log(`Admin user created successfully with ID: ${s}`),s}catch(r){throw console.error("Error creating admin user:",r),r}},Jse=async t=>{try{const e=Le(Ee,"users",t);return(await un(e)).exists()?(await tn(e,{role:"admin"}),console.log(`User ${t} has been promoted to admin role`),!0):(console.error(`User with ID ${t} does not exist`),!1)}catch(e){throw console.error("Error promoting user to admin:",e),e}};typeof window<"u"&&(window.createAdmin=async(t,e,n)=>{try{return`Admin user created with ID: ${await GF(t,e,n)}`}catch(r){return console.error("Failed to create admin:",r),`Error: ${r}`}},window.promoteUserToAdmin=async t=>{try{return await Jse(t)?`User ${t} promoted to admin successfully`:`Failed to promote user ${t} to admin`}catch(e){return console.error("Failed to promote user:",e),`Error: ${e}`}});const eie=()=>{const t=pr(),{toast:e}=Yt(),[n,r]=p.useState([]),[s,o]=p.useState(!0),[a,l]=p.useState("general"),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,g]=p.useState(null),[y,v]=p.useState(!1),[x,b]=p.useState([]),[w,E]=p.useState(""),[C,R]=p.useState([]),[L,A]=p.useState("displayName"),[j,S]=p.useState("asc"),[k,O]=p.useState(""),[I,N]=p.useState(""),[$,U]=p.useState(""),[V,z]=p.useState(!1),{currentUser:F}=Dn(),H=async()=>{try{o(!0);const Z=(await KF()).map(J=>({id:J.id,name:J.name,username:J.username,active:J.active,email:J.email,phoneNumber:J.phoneNumber,schoolCode:J.schoolCode,sourceForLeads:J.sourceForLeads,reportsTo:J.reportsTo,role:J.role}));r(Z)}catch(P){console.error("Error fetching users:",P),e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{o(!1)}},Y=async()=>{try{o(!0);const P=await Et(et(Ee,"users")),Z=[];P.forEach(J=>{var mt;const we=J.data();Z.push({id:J.id,email:we.email||"",displayName:we.displayName||we.name||"",role:we.role||"user",createdAt:((mt=we.createdAt)==null?void 0:mt.toDate())||new Date})}),b(Z),R(Z)}catch(P){console.error("Error fetching admin users:",P),e({title:"Error",description:"Failed to load users. Please try again.",variant:"destructive"})}finally{o(!1)}};p.useEffect(()=>{a==="general"?H():a==="admin"&&Y()},[a,e]),p.useEffect(()=>{if(w.trim()==="")R(x);else{const P=w.toLowerCase(),Z=x.filter(J=>J.displayName.toLowerCase().includes(P)||J.email.toLowerCase().includes(P));R(Z)}},[x,w]),p.useEffect(()=>{const P=[...C].sort((Z,J)=>{if(L==="createdAt"){const we=Z[L],mt=J[L];return j==="asc"?we.getTime()-mt.getTime():mt.getTime()-we.getTime()}else{const we=String(Z[L]).toLowerCase(),mt=String(J[L]).toLowerCase();return j==="asc"?we.localeCompare(mt):mt.localeCompare(we)}});R(P)},[L,j]);const q=P=>{P===L?S(j==="asc"?"desc":"asc"):(A(P),S("asc"))},W=async P=>{try{const Z=n.find(J=>J.id===P);if(!Z)return;await Yse(P,!Z.active),r(n.map(J=>J.id===P?{...J,active:!J.active}:J)),e({title:"User status updated",description:`User ${Z.name} is now ${Z.active?"inactive":"active"}`})}catch{e({title:"Error",description:"Failed to update user status",variant:"destructive"})}},re=P=>{g(P),u(!0)},je=P=>{g(P),f(!0)},Re=P=>{t(`/settings/user/subcrm-settings/${P}`)},Pe=async P=>{try{const{logo:Z,...J}=P;await Qse(P.id,J),r(n.map(we=>we.id===P.id?{...P}:we)),e({title:"User updated",description:`User ${P.name} has been updated successfully`})}catch{e({title:"Error",description:"Failed to update user",variant:"destructive"})}},xe=async()=>{if(!k||!I||!$){e({title:"Error",description:"Please fill in all fields.",variant:"destructive"});return}try{o(!0);const P=await GF(k,I,$),J=(await un(Le(Ee,"users",P))).data();J&&b(we=>[...we,{id:P,email:J.email,displayName:J.displayName,role:J.role,createdAt:J.createdAt.toDate()}]),O(""),N(""),U(""),z(!1),e({title:"Success",description:`Admin user "${$}" created successfully.`,variant:"default"})}catch(P){e({title:"Error",description:`Failed to create admin user: ${P.message}`,variant:"destructive"})}finally{o(!1)}},Q=async(P,Z)=>{if(P===(F==null?void 0:F.uid)){e({title:"Error",description:"You cannot change your own role.",variant:"destructive"});return}try{o(!0),await tn(Le(Ee,"users",P),{role:Z}),b(J=>J.map(we=>we.id===P?{...we,role:Z}:we)),e({title:"Success",description:`User role updated to ${Z}.`,variant:"default"}),n.length>0&&H()}catch(J){console.error("Error updating role:",J),e({title:"Error",description:"Failed to update user role.",variant:"destructive"})}finally{o(!1)}},ce=n.length;return i.jsxs(Qn,{title:"User Management",description:"Manage user accounts, permissions, and admin roles",children:[i.jsxs(Ba,{defaultValue:"general",value:a,onValueChange:l,className:"w-full",children:[i.jsxs(xo,{className:"grid w-full grid-cols-2 mb-6",children:[i.jsx(kt,{value:"general",children:"General User Management"}),i.jsx(kt,{value:"admin",children:"Admin Role Management"})]}),i.jsxs(At,{value:"general",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-md shadow-md w-96",children:[i.jsx("h2",{className:"text-3xl font-bold mb-1",children:ce}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("p",{children:"Users"}),i.jsxs(K,{variant:"ghost",className:"text-white border border-white hover:bg-red-600",size:"sm",onClick:()=>v(!0),children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Add New"]})]})]})}),i.jsx("div",{className:"bg-white rounded-md shadow-md",children:s&&a==="general"?i.jsx("div",{className:"p-8 text-center",children:"Loading users..."}):i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{className:"bg-gray-50",children:[i.jsx(Me,{className:"w-16",children:"Sr No."}),i.jsx(Me,{children:"Name"}),i.jsx(Me,{children:"Username"}),i.jsx(Me,{children:"Role"}),i.jsx(Me,{className:"w-64",children:"Action"}),i.jsx(Me,{className:"w-48 text-center",children:"Status (Inactive/Active)"})]})}),i.jsx(Xs,{children:n.map((P,Z)=>i.jsxs(Ut,{className:"border-b",children:[i.jsx(Ie,{className:"font-medium",children:Z+1}),i.jsx(Ie,{children:P.name}),i.jsx(Ie,{children:P.username}),i.jsx(Ie,{children:P.role==="admin"?i.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-300",children:[i.jsx(j1,{className:"h-3 w-3 mr-1"}),"Admin"]}):i.jsx(at,{variant:"outline",children:"User"})}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",onClick:()=>je(P),children:"Change Password"}),i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",onClick:()=>Re(P.id),children:"Settings"}),i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",onClick:()=>re(P),children:"Edit Details"})]})}),i.jsx(Ie,{className:"text-center",children:i.jsx(ht,{checked:P.active,onCheckedChange:()=>W(P.id),className:"ml-auto mr-auto"})})]},P.id))})]})}),i.jsxs("div",{className:"mt-6 flex justify-end",children:[i.jsx(K,{variant:"outline",className:"border-blue-500 text-blue-500 mr-2",children:"Move to Other Branch"}),i.jsx(K,{variant:"default",className:"bg-blue-500 hover:bg-blue-600",children:"Export All Subcrm Data"})]})]}),i.jsx(At,{value:"admin",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[i.jsxs("div",{className:"relative w-full sm:w-64",children:[i.jsx(jy,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(ue,{placeholder:"Search users...",className:"pl-8",value:w,onChange:P=>E(P.target.value)}),w&&i.jsx(K,{variant:"ghost",className:"absolute right-0 top-0 h-full px-2",onClick:()=>E(""),children:i.jsx(Ll,{className:"h-4 w-4"})})]}),i.jsxs(Cn,{open:V,onOpenChange:z,children:[i.jsx(iF,{asChild:!0,children:i.jsxs(K,{variant:"default",className:"gap-2",children:[i.jsx(N1,{className:"h-4 w-4"}),"Create Admin User"]})}),i.jsxs(bn,{children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Create New Admin User"}),i.jsx(Gl,{children:"Create a new user with administrator privileges."})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Display Name"}),i.jsx(ue,{id:"name",placeholder:"John Doe",value:$,onChange:P=>U(P.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email"}),i.jsx(ue,{id:"email",type:"email",placeholder:"admin@example.com",value:k,onChange:P=>O(P.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"password",children:"Password"}),i.jsx(ue,{id:"password",type:"password",value:I,onChange:P=>N(P.target.value)})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),i.jsx(K,{onClick:xe,disabled:s,children:"Create Admin"})]})]})]})]}),i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"User Roles"}),i.jsx(Xt,{children:"Manage access levels for system users. Be careful when changing roles."})]}),i.jsx(De,{children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{className:"w-[250px]",children:i.jsxs(K,{variant:"ghost",className:"text-left font-semibold p-0 h-auto",onClick:()=>q("displayName"),children:["Name",i.jsx(Nx,{className:"ml-2 h-4 w-4 inline"})]})}),i.jsx(Me,{children:i.jsxs(K,{variant:"ghost",className:"text-left font-semibold p-0 h-auto",onClick:()=>q("email"),children:["Email",i.jsx(Nx,{className:"ml-2 h-4 w-4 inline"})]})}),i.jsx(Me,{className:"w-[150px]",children:i.jsxs(K,{variant:"ghost",className:"text-left font-semibold p-0 h-auto",onClick:()=>q("role"),children:["Role",i.jsx(Nx,{className:"ml-2 h-4 w-4 inline"})]})}),i.jsx(Me,{className:"w-[120px]",children:"Actions"})]})}),i.jsx(Xs,{children:s&&a==="admin"?i.jsx(Ut,{children:i.jsx(Ie,{colSpan:4,className:"text-center py-4",children:"Loading users..."})}):C.length===0?i.jsx(Ut,{children:i.jsx(Ie,{colSpan:4,className:"text-center py-4",children:"No users found."})}):C.map(P=>i.jsxs(Ut,{children:[i.jsx(Ie,{className:"font-medium",children:P.displayName}),i.jsx(Ie,{children:P.email}),i.jsx(Ie,{children:P.role==="admin"?i.jsxs(at,{className:"bg-blue-100 text-blue-800 border-blue-300",children:[i.jsx(j1,{className:"h-3 w-3 mr-1"}),"Admin"]}):i.jsx(at,{variant:"outline",children:"User"})}),i.jsx(Ie,{children:(F==null?void 0:F.uid)!==P.id?P.role==="admin"?i.jsxs(K,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>Q(P.id,"user"),children:[i.jsx(N6,{className:"h-4 w-4"}),"Demote"]}):i.jsxs(K,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>Q(P.id,"admin"),children:[i.jsx(N1,{className:"h-4 w-4"}),"Promote"]}):i.jsx(at,{variant:"outline",className:"bg-gray-100",children:"Current User"})})]},P.id))})]})})]})]})})]}),m&&i.jsxs(i.Fragment,{children:[i.jsx(Wse,{user:m,open:c,onOpenChange:u,onSave:Pe}),i.jsx(Kse,{user:m,open:d,onOpenChange:f})]}),i.jsx(Zse,{open:y,onOpenChange:v,onUserAdded:H})]})},tie=()=>i.jsx(Qn,{title:"Abroad Channel Settings",description:"Configure channel settings for abroad programs",children:i.jsx("p",{children:"Channel settings configuration will go here."})}),nie=()=>i.jsx(Qn,{title:"Invoice Settings",description:"Configure invoice settings for abroad programs",children:i.jsx("p",{children:"Invoice settings configuration will go here."})}),rie=()=>i.jsx(Qn,{title:"Abroad Questions",description:"Manage questions for abroad programs",children:i.jsx("p",{children:"Questions settings configuration will go here."})}),Sv="documentRequirements",sie=async t=>{try{return{id:(await ov(et(Ee,Sv),{...t,createdAt:wt(),updatedAt:wt()})).id,...t,createdAt:ft.now(),updatedAt:ft.now()}}catch(e){throw console.error("Error creating document requirement:",e),e}},Ip=async(t,e)=>{try{const n=Dt(et(Ee,Sv),Ct("processId","==",t),Ct("stageId","==",e));return(await Et(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error getting document requirements:",n),n}},iie=async(t,e)=>{try{const n=Le(Ee,Sv,t);return await tn(n,{...e,updatedAt:wt()}),!0}catch(n){throw console.error("Error updating document requirement:",n),n}},oie=async t=>{try{return await zl(Le(Ee,Sv,t)),!0}catch(e){throw console.error("Error deleting document requirement:",e),e}},aie="leadDocuments",lie=async t=>{try{const e=Dt(et(Ee,aie),Ct("leadId","==",t));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting lead documents:",e),e}},cie=()=>{var j;const{toast:t}=Yt(),[e,n]=p.useState(!0),[r,s]=p.useState([]),[o,a]=p.useState({}),[l,c]=p.useState([]),[u,d]=p.useState(!1),[f,m]=p.useState(null),[g,y]=p.useState(""),[v,x]=p.useState(""),[b,w]=p.useState({name:"",description:"",required:!0,fileTypes:[],maxSizeInMB:10,processId:"",stageId:""});p.useEffect(()=>{(async()=>{try{n(!0);const k=await Qu();s(k);const O={};await Promise.all(k.map(async I=>{const N=await Ia(I.id);O[I.id]=N})),a(O)}catch(k){console.error("Error loading processes and stages:",k),t({title:"Error",description:"Failed to load processes and stages",variant:"destructive"})}finally{n(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(!g||!v){c([]);return}try{const k=await Ip(g,v);c(k)}catch(k){console.error("Error loading document requirements:",k),t({title:"Error",description:"Failed to load document requirements",variant:"destructive"})}})()},[g,v,t]);const E=S=>{y(S),x(""),w(k=>({...k,processId:S,stageId:""}))},C=S=>{x(S),w(k=>({...k,stageId:S}))},R=S=>{S?(m(S),w({name:S.name,description:S.description,required:S.required,fileTypes:S.fileTypes,maxSizeInMB:S.maxSizeInMB,processId:S.processId,stageId:S.stageId}),y(S.processId),x(S.stageId)):(m(null),w({name:"",description:"",required:!0,fileTypes:["pdf","jpg","png"],maxSizeInMB:10,processId:g,stageId:v})),d(!0)},L=async()=>{try{if(!b.processId||!b.stageId){t({title:"Validation Error",description:"Please select both process and stage",variant:"destructive"});return}if(!b.name){t({title:"Validation Error",description:"Name is required",variant:"destructive"});return}f?(await iie(f.id,b),t({title:"Success",description:"Document requirement updated successfully"})):(await sie(b),t({title:"Success",description:"Document requirement created successfully"})),d(!1);const S=await Ip(b.processId,b.stageId);c(S)}catch(S){console.error("Error saving document requirement:",S),t({title:"Error",description:"Failed to save document requirement",variant:"destructive"})}},A=async S=>{if(window.confirm("Are you sure you want to delete this requirement?"))try{if(await oie(S),t({title:"Success",description:"Document requirement deleted successfully"}),g&&v){const k=await Ip(g,v);c(k)}}catch(k){console.error("Error deleting document requirement:",k),t({title:"Error",description:"Failed to delete document requirement",variant:"destructive"})}};return i.jsx(Qn,{title:"Documents Checklist",description:"Manage document requirements for different lead stages",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Process"}),i.jsxs(sn,{value:g,onValueChange:E,children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select a process"})}),i.jsx(Jt,{children:r.map(S=>i.jsx(Oe,{value:S.id,children:S.name},S.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Stage"}),i.jsxs(sn,{value:v,onValueChange:C,disabled:!g,children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select a stage"})}),i.jsx(Jt,{children:(j=o[g])==null?void 0:j.map(S=>i.jsx(Oe,{value:S.id,children:S.name},S.id))})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Document Requirements"}),i.jsxs(K,{onClick:()=>R(),className:"flex items-center gap-2",children:[i.jsx(qn,{className:"h-4 w-4"})," Add Requirement"]})]}),i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{children:"Name"}),i.jsx(Me,{children:"Description"}),i.jsx(Me,{children:"Required"}),i.jsx(Me,{children:"File Types"}),i.jsx(Me,{children:"Max Size"}),i.jsx(Me,{children:"Actions"})]})}),i.jsx(Xs,{children:l.map(S=>i.jsxs(Ut,{children:[i.jsx(Ie,{children:S.name}),i.jsx(Ie,{children:S.description}),i.jsx(Ie,{children:i.jsx(at,{variant:S.required?"default":"secondary",children:S.required?"Required":"Optional"})}),i.jsx(Ie,{children:S.fileTypes.join(", ")}),i.jsxs(Ie,{children:[S.maxSizeInMB,"MB"]}),i.jsxs(Ie,{className:"space-x-2",children:[i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>R(S),children:i.jsx(au,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>A(S.id),children:i.jsx(ma,{className:"h-4 w-4 text-red-500"})})]})]},S.id))})]})]}),i.jsx(Cn,{open:u,onOpenChange:d,children:i.jsxs(bn,{children:[i.jsx(En,{children:i.jsx(jn,{children:f?"Edit Requirement":"Add Requirement"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Name"}),i.jsx(ue,{id:"name",value:b.name,onChange:S=>w(k=>({...k,name:S.target.value})),placeholder:"Enter requirement name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"description",children:"Description"}),i.jsx(kr,{id:"description",value:b.description,onChange:S=>w(k=>({...k,description:S.target.value})),placeholder:"Enter requirement description"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"fileTypes",children:"Allowed File Types"}),i.jsx(ue,{id:"fileTypes",value:b.fileTypes.join(", "),onChange:S=>w(k=>({...k,fileTypes:S.target.value.split(",").map(O=>O.trim())})),placeholder:"pdf, jpg, png"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Enter file extensions separated by commas"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"maxSize",children:"Maximum File Size (MB)"}),i.jsx(ue,{id:"maxSize",type:"number",value:b.maxSizeInMB,onChange:S=>w(k=>({...k,maxSizeInMB:parseInt(S.target.value)||0})),min:"1"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ht,{id:"required",checked:b.required,onCheckedChange:S=>w(k=>({...k,required:S}))}),i.jsx(ne,{htmlFor:"required",children:"Required Document"})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(K,{onClick:L,children:f?"Update":"Create"})]})]})})]})})},uie="modulepreload",die=function(t){return"/"+t},wk={},Rl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=die(c),c in wk)return;wk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":uie,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Xu="emailTemplates",v_=async()=>{try{const t=Dt(et(Ee,Xu),Tr("createdAt","desc"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting email templates:",t),t}},QF=async t=>{try{const e=await un(Le(Ee,Xu,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting email template:",e),e}},YF=async t=>{try{const e=Le(et(Ee,Xu)),n={...t,createdAt:wt(),updatedAt:wt()};await us(e,n);const r=await un(e);return{id:r.id,...r.data()}}catch(e){throw console.error("Error creating email template:",e),e}},XF=async(t,e)=>{try{await tn(Le(Ee,Xu,t),{...e,updatedAt:wt()})}catch(n){throw console.error("Error updating email template:",n),n}},ZF=async t=>{try{await zl(Le(Ee,Xu,t))}catch(e){throw console.error("Error deleting email template:",e),e}},JF=async(t,e)=>{try{await tn(Le(Ee,Xu,t),{isActive:e,updatedAt:wt()})}catch(n){throw console.error("Error toggling template status:",n),n}},hie=Object.freeze(Object.defineProperty({__proto__:null,createTemplate:YF,deleteTemplate:ZF,getAllTemplates:v_,getTemplateById:QF,toggleTemplateStatus:JF,updateTemplate:XF},Symbol.toStringTag,{value:"Module"})),Fs="emailCampaigns",Tc=async()=>{try{const t=Dt(et(Ee,Fs),Tr("createdAt","desc"));return(await Et(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting email campaigns:",t),t}},Tv=async t=>{try{const e=await un(Le(Ee,Fs,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting email campaign:",e),e}},eV=async t=>{try{const e=Le(et(Ee,Fs)),n={...t,sentCount:0,openCount:0,createdAt:wt(),updatedAt:wt()};await us(e,n);const r=await un(e);return{id:r.id,...r.data()}}catch(e){throw console.error("Error creating email campaign:",e),e}},tV=async(t,e)=>{try{await tn(Le(Ee,Fs,t),{...e,updatedAt:wt()})}catch(n){throw console.error("Error updating email campaign:",n),n}},nV=async t=>{try{await zl(Le(Ee,Fs,t))}catch(e){throw console.error("Error deleting email campaign:",e),e}},rV=async t=>{try{const e=await Tv(t);if(!e)throw new Error("Campaign not found");await tn(Le(Ee,Fs,t),{status:"sending",updatedAt:wt()});try{const n=(await Rl(async()=>{const{default:c}=await Promise.resolve().then(()=>RV);return{default:c}},void 0)).default,{isBrevoConfigured:r,sendCustomEmail:s}=await Rl(async()=>{const{isBrevoConfigured:c,sendCustomEmail:u}=await Promise.resolve().then(()=>fN);return{isBrevoConfigured:c,sendCustomEmail:u}},void 0);if(!r())throw new Error("Brevo email service is not configured");console.log(`[DEBUG] Preparing to send campaign ${t} to ${e.recipients.length} recipients`);const o=e.recipients.map(c=>({email:c,name:c.split("@")[0]})),a=fie(e.body,t);if(console.log(`[DEBUG] Enhanced email with tracking pixels for campaign ${t}`),await tn(Le(Ee,Fs,t),{trackingEnabled:!0,openCount:0}),console.log(`[DEBUG] Set tracking flags in database for campaign ${t}`),!await s(o,e.subject,a,void 0,void 0,t))throw new Error("Failed to send campaign emails");await tn(Le(Ee,Fs,t),{status:"sent",sentDate:ft.now(),sentCount:e.recipients.length,updatedAt:wt()}),console.log(`Campaign ${t} sent successfully to ${e.recipients.length} recipients`)}catch(n){throw console.error("Error sending campaign emails:",n),await tn(Le(Ee,Fs,t),{status:"failed",updatedAt:wt()}),n}}catch(e){throw console.error("Error sending campaign:",e),e}},fie=(t,e)=>{const n=`<img src="${window.location.origin}/api/track-email-open?campaignId=${e}" alt="" width="1" height="1" style="display:none;" />`,s=`<img src="http://localhost:3002/api/track-email-open?campaignId=${e}" alt="" width="1" height="1" style="display:none;" />`,o=n+s;let a=t;return a.includes("<html")||(a=`<html><body>${a}</body></html>`),console.log(`[DEBUG] Adding tracking pixels to email for campaign ${e}`),a.includes("</body>")?a.replace("</body>",`${o}</body>`):a.includes("</html>")?a.replace("</html>",`${o}</html>`):`${a}${o}`},mie=async(t,e)=>{try{await tn(Le(Ee,Fs,t),{status:"scheduled",scheduledDate:ft.fromDate(e),updatedAt:wt()})}catch(n){throw console.error("Error scheduling campaign:",n),n}},pie=async()=>{try{const t=await Tc();return{total:t.length,sent:t.filter(e=>e.status==="sent").length,scheduled:t.filter(e=>e.status==="scheduled").length,draft:t.filter(e=>e.status==="draft").length}}catch(t){throw console.error("Error getting campaign statistics:",t),t}},gie=async t=>{try{const e=await Tv(t);if(!e)throw new Error("Campaign not found");const n=(e.openCount||0)+1;await tn(Le(Ee,Fs,t),{openCount:n,updatedAt:wt()}),console.log(`Tracked open for campaign ${t}. New open count: ${n}`)}catch(e){throw console.error("Error tracking email open:",e),e}},yie=t=>`<img src="${`${window.location.origin}/api/track-email-open?campaignId=${t}`}" alt="" width="1" height="1" style="display:none;" />`,sV=async(t,e=1)=>{try{console.log(`Manually updating open count for campaign ${t} by ${e}`);const r=await fetch(`http://localhost:3002/admin/test-tracking/${t}`);if(!r.ok){const o=await r.json();return console.error("Error manually updating open count:",o),!1}const s=await r.json();return console.log("Manual update response:",s),!0}catch(n){return console.error("Error manually updating open count:",n),!1}},iV=async(t,e)=>{try{const{sendCustomEmail:n}=await Rl(async()=>{const{sendCustomEmail:c}=await Promise.resolve().then(()=>fN);return{sendCustomEmail:c}},void 0),r=await Rl(()=>Promise.resolve().then(()=>RV),void 0);console.log(`Sending test email with tracking for campaign ${t} to ${e}`);const o=`http://localhost:3002/api/track-email-open?campaignId=${t}`,a=`
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.5; }
            .container { max-width: 600px; margin: 0 auto; padding: 20px; }
            .header { background-color: #f5f5f5; padding: 10px; text-align: center; }
            .content { padding: 20px 0; }
            .footer { font-size: 12px; color: #666; text-align: center; margin-top: 20px; }
            @media (max-width: 1px) { body::after { content: url('${o}'); display: none; }}
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h2>Email Tracking Test</h2>
            </div>
            
            <div class="content">
              <p>Hello,</p>
              <p>This is a test email to verify that email tracking is working correctly in your CRM system.</p>
              <p>When you open this email, it should register as an "open" in your campaign statistics.</p>
              <p>If you're seeing this email but the open count isn't increasing, please check the following:</p>
              <ul>
                <li>Verify that your backend server is running</li>
                <li>Make sure your email client allows images to load</li>
                <li>Check the backend server logs for any errors</li>
              </ul>
              <p>Campaign ID being tracked: <strong>${t}</strong></p>
            </div>
            
            <div class="footer">
              <p>This is an automated test email from your CRM system.</p>
            </div>
          </div>
          
          <!-- Multiple tracking methods for redundancy -->
          <img src="${o}" width="1" height="1" alt="" style="display:none;">
          <div style="background-image:url('${o}');height:1px;width:1px;position:absolute;"></div>
        </body>
      </html>
    `;return await n([{email:e,name:"Test Recipient"}],"CRM Email Tracking Test",a,void 0,void 0,t)?(console.log(`Test email sent successfully to ${e}`),!0):(console.error(`Failed to send test email to ${e}`),!1)}catch(n){return console.error("Error sending test email:",n),!1}},vie=Object.freeze(Object.defineProperty({__proto__:null,createCampaign:eV,deleteCampaign:nV,getAllCampaigns:Tc,getCampaignById:Tv,getCampaignStatistics:pie,getTrackingPixelHtml:yie,manuallyUpdateOpenCount:sV,scheduleCampaign:mie,sendCampaign:rV,sendTestEmailWithTracking:iV,trackEmailOpen:gie,updateCampaign:tV},Symbol.toStringTag,{value:"Module"})),xie=async()=>{try{const t=await Rl(()=>Promise.resolve().then(()=>vie),void 0),e=await Rl(()=>Promise.resolve().then(()=>hie),void 0),n=await t.getAllCampaigns(),r=await e.getAllTemplates();return oV(n,r)}catch(t){return console.error("Error getting email statistics:",t),{templates:{total:0,active:0,inactive:0},campaigns:{total:0,sent:0,scheduled:0,draft:0,failed:0},totalEmailsSent:0,totalOpens:0,openRate:0}}},oV=(t,e)=>{const n=e.length,r=e.filter(g=>g.isActive).length,s=n-r,o=t.length,a=t.filter(g=>g.status==="sent").length,l=t.filter(g=>g.status==="scheduled").length,c=t.filter(g=>g.status==="draft").length,u=t.filter(g=>g.status==="failed").length,d=t.reduce((g,y)=>g+(y.sentCount||0),0),f=t.reduce((g,y)=>g+(y.openCount||0),0),m=d>0?Math.round(f/d*100):0;return{templates:{total:n,active:r,inactive:s},campaigns:{total:o,sent:a,scheduled:l,draft:c,failed:u},totalEmailsSent:d,totalOpens:f,openRate:m}},_k=({value:t,onChange:e})=>{const n=r=>{const s={bold:()=>{var a;const o=(a=window.getSelection())==null?void 0:a.toString();if(o){const l=t.replace(o,`<strong>${o}</strong>`);e(l)}},italic:()=>{var a;const o=(a=window.getSelection())==null?void 0:a.toString();if(o){const l=t.replace(o,`<em>${o}</em>`);e(l)}},underline:()=>{var a;const o=(a=window.getSelection())==null?void 0:a.toString();if(o){const l=t.replace(o,`<u>${o}</u>`);e(l)}},link:()=>{var l;const o=(l=window.getSelection())==null?void 0:l.toString(),a=prompt("Enter URL:","https://");if(o&&a){const c=t.replace(o,`<a href="${a}" target="_blank">${o}</a>`);e(c)}},image:()=>{const o=prompt("Enter image URL:","https://"),a=prompt("Enter image alt text:","");if(o){const l=`<img src="${o}" alt="${a||""}" style="max-width: 100%; height: auto;" />`;e(t+l)}},heading:()=>{var a;const o=(a=window.getSelection())==null?void 0:a.toString();if(o){const l=t.replace(o,`<h2>${o}</h2>`);e(l)}},bullet:()=>{e(t+`
<ul>
  <li>List item</li>
  <li>List item</li>
</ul>`)},number:()=>{e(t+`
<ol>
  <li>List item</li>
  <li>List item</li>
</ol>`)},hr:()=>{e(t+`
<hr />
`)},variable:()=>{var c;const o=["{{firstName}}","{{lastName}}","{{email}}","{{company}}","{{phone}}"],a=(c=window.getSelection())==null?void 0:c.toString(),l=prompt("Select a variable:",o.join(", "));if(l&&o.includes(l))if(a){const u=t.replace(a,l);e(u)}else e(t+l)}};s[r]&&s[r]()};return i.jsxs("div",{className:"border rounded-md",children:[i.jsxs("div",{className:"border-b px-3 py-2 flex items-center gap-2 bg-muted/50 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-1 border-r pr-2",children:[i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Bold",onClick:()=>n("bold"),children:i.jsx("span",{className:"font-bold",children:"B"})}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Italic",onClick:()=>n("italic"),children:i.jsx("span",{className:"italic",children:"I"})}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Underline",onClick:()=>n("underline"),children:i.jsx("span",{className:"underline",children:"U"})})]}),i.jsxs("div",{className:"flex items-center gap-1 border-r pr-2",children:[i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Heading",onClick:()=>n("heading"),children:"H"}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Bulleted List",onClick:()=>n("bullet"),children:" List"}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Numbered List",onClick:()=>n("number"),children:"1. List"})]}),i.jsxs("div",{className:"flex items-center gap-1 border-r pr-2",children:[i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Insert Link",onClick:()=>n("link"),children:"Link"}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Insert Image",onClick:()=>n("image"),children:"Image"}),i.jsx("button",{className:"p-1 hover:bg-muted rounded",title:"Horizontal Rule",onClick:()=>n("hr"),children:"Line"})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("button",{className:"p-1 hover:bg-muted rounded text-blue-600",title:"Insert Variable",onClick:()=>n("variable"),children:"Variables"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 border-b",children:[i.jsx(kr,{value:t,onChange:r=>e(r.target.value),className:"border-0 focus-visible:ring-0 h-64 resize-none font-mono text-sm",placeholder:"Write your email content here..."}),i.jsx("div",{className:"p-4 border-l h-64 overflow-auto",children:i.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t}})})]}),i.jsx("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:i.jsx("p",{children:"Use HTML tags for advanced formatting. Available variables: firstName, lastName, email, company, phone (surrounded by double curly braces)."})})]})},wie=()=>{const[t,e]=p.useState("email-templates"),[n,r]=p.useState([]),[s,o]=p.useState([]),[a,l]=p.useState(null),[c,u]=p.useState(!0),[d,f]=p.useState(!1),[m,g]=p.useState(null),[y,v]=p.useState({name:"",subject:"",body:"",isActive:!0}),[x,b]=p.useState(!1),[w,E]=p.useState(null),[C,R]=p.useState({name:"",subject:"",body:"",recipients:[],status:"draft",scheduledDate:null}),[L,A]=p.useState(null),[j,S]=p.useState(""),{toast:k}=Yt(),O=pr(),{currentUser:I}=Dn();p.useEffect(()=>{(async()=>{try{u(!0);const[Z,J,we]=await Promise.all([v_(),Tc(),xie()]);r(Z),o(J),l(we)}catch(Z){console.error("Error loading email data:",Z),k({title:"Error",description:"Failed to load email data",variant:"destructive"})}finally{u(!1)}})()},[k]);const N=async(P,Z)=>{try{await JF(P,Z),r(n.map(J=>J.id===P?{...J,isActive:Z}:J)),k({title:"Success",description:`Template ${Z?"activated":"deactivated"} successfully`})}catch(J){console.error("Error toggling template status:",J),k({title:"Error",description:"Failed to update template status",variant:"destructive"})}},$=P=>{g(P),v({name:P.name,subject:P.subject,body:P.body,isActive:P.isActive}),f(!0)},U=async P=>{if(confirm("Are you sure you want to delete this template?"))try{await ZF(P),r(n.filter(Z=>Z.id!==P)),k({title:"Success",description:"Template deleted successfully"})}catch(Z){console.error("Error deleting template:",Z),k({title:"Error",description:"Failed to delete template",variant:"destructive"})}},V=async()=>{try{if(!y.name||!y.subject||!y.body){k({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}u(!0),m?await XF(m.id,{name:y.name,subject:y.subject,body:y.body,isActive:y.isActive}):await YF({name:y.name,subject:y.subject,body:y.body,isActive:y.isActive,createdBy:(I==null?void 0:I.uid)||""});const P=await v_();r(P),k({title:"Success",description:m?"Template updated successfully":"Template created successfully"}),v({name:"",subject:"",body:"",isActive:!0}),g(null),f(!1)}catch(P){console.error("Error saving template:",P),k({title:"Error",description:"Failed to save template",variant:"destructive"})}finally{u(!1)}},z=()=>{g(null),v({name:"",subject:"",body:"",isActive:!0}),f(!0)},F=P=>{if(!P)return"N/A";try{const Z=typeof P=="object"&&"toDate"in P&&typeof P.toDate=="function"?P.toDate():new Date(P);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(Z)}catch{return"Invalid date"}},H=P=>{E(P),R({name:P.name,subject:P.subject,body:P.body,recipients:P.recipients,status:P.status,scheduledDate:null}),b(!0)},Y=()=>{E(null),R({name:"",subject:"",body:"",recipients:[],status:"draft",scheduledDate:null}),A(null),S(""),b(!0)},q=async()=>{try{if(u(!0),!C.name.trim()){k({title:"Missing information",description:"Please enter a campaign name",variant:"destructive"}),u(!1);return}if(!C.subject.trim()){k({title:"Missing information",description:"Please enter an email subject",variant:"destructive"}),u(!1);return}if(!C.body.trim()){k({title:"Missing information",description:"Please enter email content",variant:"destructive"}),u(!1);return}if(!(C.recipients&&C.recipients.length>0)){k({title:"Missing information",description:"Please add at least one recipient",variant:"destructive"}),u(!1);return}w?await tV(w.id,{name:C.name,subject:C.subject,body:C.body,recipients:C.recipients,status:C.status}):await eV({name:C.name,subject:C.subject,body:C.body,recipients:C.recipients,status:"draft",createdBy:(I==null?void 0:I.uid)||""});const P=await Tc();o(P),k({title:"Success",description:w?"Campaign updated successfully":"Campaign created successfully"}),R({name:"",subject:"",body:"",recipients:[],status:"draft",scheduledDate:null}),A(null),S(""),E(null),b(!1)}catch(P){console.error("Error saving campaign:",P),k({title:"Error",description:"Failed to save campaign",variant:"destructive"})}finally{u(!1)}},W=async()=>{if(L)try{const P=await QF(L);P&&(R({...C,subject:P.subject,body:P.body}),k({title:"Template Loaded",description:`Template "${P.name}" has been loaded`}))}catch(P){console.error("Error loading template:",P),k({title:"Error",description:"Failed to load template",variant:"destructive"})}},re=()=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j)){k({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}C.recipients.includes(j)?k({title:"Duplicate Email",description:"This email is already in the recipients list",variant:"destructive"}):(R({...C,recipients:[...C.recipients,j]}),S(""))},je=P=>{R({...C,recipients:C.recipients.filter(Z=>Z!==P)})},Re=async P=>{if(confirm("Are you sure you want to delete this campaign?"))try{await nV(P),o(s.filter(Z=>Z.id!==P)),k({title:"Success",description:"Campaign deleted successfully"})}catch(Z){console.error("Error deleting campaign:",Z),k({title:"Error",description:"Failed to delete campaign",variant:"destructive"})}},Pe=async P=>{if(!confirm("Are you sure you want to send this campaign now? This will send emails to all recipients."))return;const{isBrevoConfigured:Z}=await Rl(async()=>{const{isBrevoConfigured:J}=await Promise.resolve().then(()=>fN);return{isBrevoConfigured:J}},void 0);if(!Z()){k({title:"Error",description:"Brevo email service is not configured. Please configure it in the Email Settings page first.",variant:"destructive"});return}try{u(!0);const J=await Tv(P);if(!J)throw new Error("Campaign not found");if(J.recipients.length===0){k({title:"Error",description:"This campaign has no recipients. Please add recipients before sending.",variant:"destructive"}),u(!1);return}if(!J.subject||!J.body){k({title:"Error",description:"Campaign is missing subject or body content. Please complete the campaign before sending.",variant:"destructive"}),u(!1);return}console.log(`Sending campaign "${J.name}" to ${J.recipients.length} recipients`),await rV(P);const we=await Tc();o(we),k({title:"Success",description:`Campaign "${J.name}" is being sent to ${J.recipients.length} recipients.`}),k({title:"Email Delivery",description:"It may take a few minutes for all emails to be delivered. Please check the browser console for delivery status.",variant:"default"})}catch(J){console.error("Error sending campaign:",J);let we="Failed to send campaign";J instanceof Error&&(we=J.message||we),k({title:"Error",description:we,variant:"destructive"})}finally{u(!1)}},xe=P=>{const Z={draft:"bg-gray-100 text-gray-800 border-gray-200",scheduled:"bg-blue-100 text-blue-800 border-blue-200",sending:"bg-yellow-100 text-yellow-800 border-yellow-200",sent:"bg-green-100 text-green-800 border-green-200",failed:"bg-red-100 text-red-800 border-red-200"};return i.jsx(at,{variant:"outline",className:Z[P]||Z.draft,children:P.charAt(0).toUpperCase()+P.slice(1)})},Q=async P=>{try{u(!0),await sV(P,1);const Z=await Tc();o(Z);const J=await oV(Z,n);l(J),k({title:"Success",description:"Manually updated tracking count"})}catch(Z){console.error("Error updating tracking count:",Z),k({title:"Error",description:"Failed to update tracking count",variant:"destructive"})}finally{u(!1)}},ce=async P=>{try{u(!0);const Z=prompt("Enter email address for test:","");if(!Z){u(!1);return}const J=await iV(P,Z);k(J?{title:"Success",description:`Test email sent to ${Z}`}:{title:"Error",description:"Failed to send test email",variant:"destructive"})}catch(Z){console.error("Error sending test email:",Z),k({title:"Error",description:"Failed to send test email",variant:"destructive"})}finally{u(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(K,{variant:"outline",size:"sm",onClick:()=>O("/settings"),className:"gap-2",children:[i.jsx(ou,{className:"h-4 w-4"}),"Back"]}),i.jsx("h1",{className:"text-2xl font-semibold",children:"Bulk Emailers"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Configure and manage bulk email campaigns and templates"}),i.jsxs(Ba,{defaultValue:"email-templates",onValueChange:e,value:t,children:[i.jsxs(xo,{className:"mb-4",children:[i.jsx(kt,{value:"email-templates",children:"Email Templates"}),i.jsx(kt,{value:"email-campaigns",children:"Email Campaigns"}),i.jsx(kt,{value:"statistics",children:"Statistics"})]}),i.jsxs(At,{value:"email-templates",children:[i.jsxs("div",{className:"flex justify-between mb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-medium mb-1",children:[n.length," Email Templates"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage reusable email templates"})]}),i.jsxs(K,{onClick:z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Create Template"]})]}),n.length===0?i.jsxs(_e,{className:"p-8 text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No templates yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first email template to get started with bulk emails"}),i.jsxs(K,{onClick:z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Create Template"]})]}):i.jsx("div",{className:"overflow-hidden rounded-md border",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-muted/50",children:[i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"ID"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Template Name"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Subject"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Last Edited"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y",children:n.map((P,Z)=>i.jsxs("tr",{className:"hover:bg-muted/50",children:[i.jsx("td",{className:"py-3 px-4",children:Z+1}),i.jsx("td",{className:"py-3 px-4",children:P.name}),i.jsx("td",{className:"py-3 px-4",children:P.subject}),i.jsx("td",{className:"py-3 px-4",children:F(P.updatedAt)}),i.jsx("td",{className:"py-3 px-4",children:i.jsx(ht,{checked:P.isActive,onCheckedChange:J=>N(P.id,J)})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>$(P),children:i.jsx(au,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>U(P.id),children:i.jsx(ma,{className:"h-4 w-4"})})]})})]},P.id))})]})}),i.jsx(Cn,{open:d,onOpenChange:f,children:i.jsxs(bn,{className:"sm:max-w-[800px]",children:[i.jsx(En,{children:i.jsx(jn,{children:m?"Edit Email Template":"Create Email Template"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"template-name",children:"Template Name"}),i.jsx(ue,{id:"template-name",value:y.name,onChange:P=>v({...y,name:P.target.value}),placeholder:"e.g., Welcome Email"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"template-subject",children:"Email Subject"}),i.jsx(ue,{id:"template-subject",value:y.subject,onChange:P=>v({...y,subject:P.target.value}),placeholder:"e.g., Welcome to our platform"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"template-body",children:"Email Content"}),i.jsx(_k,{value:y.body,onChange:P=>v({...y,body:P})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ht,{id:"template-active",checked:y.isActive,onCheckedChange:P=>v({...y,isActive:P})}),i.jsx(ne,{htmlFor:"template-active",children:"Active"})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(K,{onClick:V,children:m?"Update Template":"Create Template"})]})]})})]}),i.jsxs(At,{value:"email-campaigns",children:[i.jsxs("div",{className:"flex justify-between mb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-medium mb-1",children:[s.length," Email Campaigns"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage your email campaigns"})]}),i.jsxs(K,{onClick:Y,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Create Campaign"]})]}),s.length===0?i.jsxs(_e,{className:"p-8 text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No campaigns yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first email campaign to start reaching your audience"}),i.jsxs(K,{onClick:Y,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Create Campaign"]})]}):i.jsx("div",{className:"overflow-hidden rounded-md border",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-muted/50",children:[i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"ID"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Campaign Name"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Recipients"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Analytics"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y",children:s.map((P,Z)=>i.jsxs("tr",{className:"hover:bg-muted/50",children:[i.jsx("td",{className:"py-3 px-4",children:Z+1}),i.jsx("td",{className:"py-3 px-4",children:P.name}),i.jsx("td",{className:"py-3 px-4",children:P.recipients&&P.recipients.length||0}),i.jsxs("td",{className:"py-3 px-4",children:[P.status==="sent"&&F(P.sentDate),P.status==="scheduled"&&F(P.scheduledDate),(P.status==="draft"||P.status==="failed")&&"-"]}),i.jsx("td",{className:"py-3 px-4",children:xe(P.status)}),i.jsx("td",{className:"py-3 px-4",children:P.status==="sent"?i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["Sent: ",P.sentCount]}),i.jsxs("div",{children:["Opens: ",P.openCount]}),i.jsxs("div",{children:["Rate: ",P.sentCount?(P.openCount/P.sentCount*100).toFixed(1):0,"%"]})]}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"Not available"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="draft"&&i.jsxs(i.Fragment,{children:[i.jsx(K,{variant:"outline",size:"sm",onClick:()=>Pe(P.id),className:"text-xs",children:"Send"}),i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>H(P),children:i.jsx(au,{className:"h-4 w-4"})})]}),i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>Re(P.id),children:i.jsx(ma,{className:"h-4 w-4"})})]})})]},P.id))})]})}),i.jsx(Cn,{open:x,onOpenChange:b,children:i.jsxs(bn,{className:"sm:max-w-[800px]",children:[i.jsx(En,{children:i.jsx(jn,{children:w?"Edit Email Campaign":"Create Email Campaign"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"campaign-name",children:"Campaign Name"}),i.jsx(ue,{id:"campaign-name",value:C.name,onChange:P=>R({...C,name:P.target.value}),placeholder:"e.g., Monthly Newsletter"})]}),!w&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Use Template (Optional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:L||"",onChange:P=>A(P.target.value||null),children:[i.jsx("option",{value:"",children:"Select a template"}),n.filter(P=>P.isActive).map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]}),i.jsx(K,{variant:"outline",onClick:W,disabled:!L,children:"Load"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"campaign-subject",children:"Email Subject"}),i.jsx(ue,{id:"campaign-subject",value:C.subject,onChange:P=>R({...C,subject:P.target.value}),placeholder:"e.g., Your Monthly Update"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"campaign-body",children:"Email Content"}),i.jsx(_k,{value:C.body,onChange:P=>R({...C,body:P})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Recipients"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx(ue,{value:j,onChange:P=>S(P.target.value),placeholder:"Enter email address",onKeyDown:P=>P.key==="Enter"&&re()}),i.jsx(K,{variant:"outline",onClick:re,children:"Add"})]}),i.jsx("div",{className:"border rounded-md p-2 min-h-[100px] max-h-[200px] overflow-y-auto",children:C.recipients.length===0?i.jsx("p",{className:"text-sm text-muted-foreground text-center p-4",children:"No recipients added yet"}):i.jsx("div",{className:"flex flex-wrap gap-2",children:C.recipients.map(P=>i.jsxs(at,{variant:"secondary",className:"flex items-center gap-1",children:[P,i.jsx("button",{className:"ml-1 hover:bg-muted rounded-full",onClick:()=>je(P),children:""})]},P))})})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),i.jsx(K,{onClick:q,children:w?"Update Campaign":"Create Campaign"})]})]})})]}),i.jsxs(At,{value:"statistics",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-medium mb-1",children:"Email Statistics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Analytics and performance metrics for your email campaigns"})]}),a?i.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(_e,{className:"p-5",children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Templates"}),i.jsx("div",{className:"text-2xl font-semibold",children:a.templates.total}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[a.templates.active," active"]})]}),i.jsxs(_e,{className:"p-5",children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Campaigns"}),i.jsx("div",{className:"text-2xl font-semibold",children:a.campaigns.total}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[a.campaigns.sent," sent  ",a.campaigns.scheduled," scheduled  ",a.campaigns.draft," draft"]})]}),i.jsxs(_e,{className:"p-5",children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Emails Sent"}),i.jsx("div",{className:"text-2xl font-semibold",children:a.totalEmailsSent})]}),i.jsxs(_e,{className:"p-5",children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Open Rate"}),i.jsxs("div",{className:"text-2xl font-semibold",children:[a.openRate,"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[a.totalOpens," emails opened"]})]})]}):i.jsx("div",{className:"flex items-center justify-center h-40",children:i.jsx("p",{className:"text-muted-foreground",children:"Loading statistics..."})}),i.jsx("h3",{className:"text-lg font-medium mt-8 mb-4",children:"Email Opens by Campaign"}),s.filter(P=>P.status==="sent").length>0?i.jsx("div",{className:"overflow-hidden rounded-md border",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-muted/50",children:[i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Campaign"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Sent Date"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Emails Sent"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Emails Opened"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Open Rate"})]})}),i.jsx("tbody",{className:"divide-y",children:s.filter(P=>P.status==="sent").sort((P,Z)=>{if(!P.sentDate||!Z.sentDate)return 0;const J=we=>{try{return typeof we=="object"&&"toDate"in we&&typeof we.toDate=="function"?we.toDate().getTime():new Date(we).getTime()}catch{return 0}};return J(Z.sentDate)-J(P.sentDate)}).map(P=>i.jsxs("tr",{className:"hover:bg-muted/50",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:P.name}),i.jsx("td",{className:"py-3 px-4",children:F(P.sentDate)}),i.jsx("td",{className:"py-3 px-4",children:P.sentCount}),i.jsx("td",{className:"py-3 px-4",children:P.openCount}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${P.sentCount?Math.min(100,P.openCount/P.sentCount*100):0}%`}})}),i.jsxs("span",{children:[P.sentCount?(P.openCount/P.sentCount*100).toFixed(1):0,"%"]}),i.jsx(K,{variant:"outline",size:"sm",className:"ml-2 text-xs",onClick:()=>Q(P.id),disabled:c,children:"Force Update"})]})})]},P.id))})]})}):i.jsxs(_e,{className:"p-8 text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No sent campaigns yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Send a campaign to start tracking opens and engagement"})]}),i.jsxs("div",{className:"mt-8 p-4 bg-muted rounded-md",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"About Email Open Tracking"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Email opens are tracked using a small invisible pixel embedded in each email. Some email clients may block images or tracking pixels, resulting in underreported open rates. For the most accurate results, always use A/B testing and multiple metrics to measure campaign success."})]}),i.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950 rounded-md",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Tools"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"These links can help test and debug the email tracking functionality:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Test tracking pixel: "}),i.jsx("a",{href:"http://localhost:3002/test-tracking",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open test page"})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Manually track campaign open: "}),s.filter(P=>P.status==="sent").slice(0,3).map(P=>i.jsxs("a",{href:`http://localhost:3002/admin/test-tracking/${P.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline mr-4",children:[P.name.substring(0,15),"..."]},P.id))]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Send test email: "}),s.filter(P=>P.status==="sent").slice(0,3).map(P=>i.jsxs(K,{variant:"outline",size:"sm",className:"mr-4 text-xs",onClick:()=>ce(P.id),disabled:c,children:["Test ",P.name.substring(0,10),"..."]},P.id))]})]})]}),i.jsx("h3",{className:"text-lg font-medium mt-8 mb-4",children:"Recent Activity"}),s.length>0?i.jsx("div",{className:"overflow-hidden rounded-md border",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-muted/50",children:[i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Campaign"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-left font-medium text-xs uppercase tracking-wider",children:"Performance"})]})}),i.jsx("tbody",{className:"divide-y",children:s.slice(0,5).map(P=>i.jsxs("tr",{className:"hover:bg-muted/50",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:P.name}),i.jsxs("td",{className:"py-3 px-4",children:[P.status==="sent"&&F(P.sentDate),P.status==="scheduled"&&F(P.scheduledDate),(P.status==="draft"||P.status==="failed")&&F(P.createdAt)]}),i.jsx("td",{className:"py-3 px-4",children:xe(P.status)}),i.jsx("td",{className:"py-3 px-4",children:P.status==="sent"?i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs("span",{children:["Opens: ",P.openCount,"/",P.sentCount]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",P.sentCount?(P.openCount/P.sentCount*100).toFixed(1):0,"%)"]})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})})]},P.id))})]})}):i.jsxs(_e,{className:"p-8 text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No campaign data yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create and send campaigns to see statistics"})]})]})]})]})},_ie=[{value:"blue",label:"Blue"},{value:"green",label:"Green"},{value:"red",label:"Red"},{value:"yellow",label:"Yellow"},{value:"purple",label:"Purple"},{value:"pink",label:"Pink"},{value:"orange",label:"Orange"},{value:"indigo",label:"Indigo"}],bie=()=>{const[t,e]=p.useState([]),[n,r]=p.useState({}),[s,o]=p.useState(!0),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,g]=p.useState(null),[y,v]=p.useState(null),[x,b]=p.useState(null),[w,E]=p.useState([]),[C,R]=p.useState(!1),[L,A]=p.useState("process"),[j,S]=p.useState(""),[k,O]=p.useState({}),{toast:I}=Yt(),[N,$]=p.useState({name:"",description:"",isActive:!0,order:0}),[U,V]=p.useState({name:"",description:"",color:"blue",isActive:!0,order:0});p.useEffect(()=>{(async()=>{try{o(!0);const ce=await Qu();e(ce);const P={};await Promise.all(ce.map(async Z=>{const J=await Ia(Z.id);P[Z.id]=J})),r(P),ce.length>0&&E([ce[0].id])}catch(ce){console.error("Error loading lead processes and stages:",ce),I({title:"Error",description:"Failed to load lead processes and stages",variant:"destructive"})}finally{o(!1)}})()},[I]);const z=Q=>{E(ce=>ce.includes(Q)?ce.filter(P=>P!==Q):[...ce,Q])},F=async Q=>{try{const ce=t.find(P=>P.id===Q);if(!ce)return;await fk(Q,{isActive:!ce.isActive}),e(t.map(P=>P.id===Q?{...P,isActive:!P.isActive}:P)),I({title:"Status updated",description:`Process "${ce.name}" is now ${ce.isActive?"inactive":"active"}`})}catch(ce){console.error("Error toggling process status:",ce),I({title:"Error",description:"Failed to update process status",variant:"destructive"})}},H=async(Q,ce)=>{var P;try{const Z=(P=n[Q])==null?void 0:P.find(J=>J.id===ce);if(!Z)return;await mk(ce,{isActive:!Z.isActive}),r({...n,[Q]:n[Q].map(J=>J.id===ce?{...J,isActive:!J.isActive}:J)}),I({title:"Status updated",description:`Stage "${Z.name}" is now ${Z.isActive?"inactive":"active"}`})}catch(Z){console.error("Error toggling stage status:",Z),I({title:"Error",description:"Failed to update stage status",variant:"destructive"})}},Y=Q=>{Q?(g(Q),$({name:Q.name,description:Q.description,isActive:Q.isActive,order:Q.order})):(g(null),$({name:"",description:"",isActive:!0,order:t.length+1})),u(!0)},q=(Q,ce)=>{var P;b(Q),ce?(v(ce),V({name:ce.name,description:ce.description,color:ce.color,isActive:ce.isActive,order:ce.order})):(v(null),V({name:"",description:"",color:"blue",isActive:!0,order:(((P=n[Q])==null?void 0:P.length)||0)+1})),f(!0)},W=(Q,ce)=>{A(Q),S(ce),R(!0)},re=async()=>{try{if(L==="process"){await vre(j),e(t.filter(ce=>ce.id!==j)),E(w.filter(ce=>ce!==j));const Q={...n};delete Q[j],r(Q),I({title:"Process deleted",description:"The process and its stages have been deleted"})}else{let Q="";Object.entries(n).forEach(([ce,P])=>{P.some(Z=>Z.id===j)&&(Q=ce)}),Q&&(await _re(j),r({...n,[Q]:n[Q].filter(ce=>ce.id!==j)}),I({title:"Stage deleted",description:"The stage has been deleted"}))}}catch(Q){console.error("Error deleting:",Q),I({title:"Error",description:"Failed to delete",variant:"destructive"})}finally{R(!1)}},je=async()=>{try{if(l(!0),m)await fk(m.id,{name:N.name,description:N.description,isActive:N.isActive,order:N.order}),e(t.map(Q=>Q.id===m.id?{...Q,name:N.name,description:N.description,isActive:N.isActive,order:N.order}:Q)),I({title:"Process updated",description:`Process "${N.name}" has been updated`});else{const Q=await yre({name:N.name,description:N.description,isActive:N.isActive,order:t.length+1});e([...t,Q]),r({...n,[Q.id]:[]}),E([...w,Q.id]),I({title:"Process created",description:`Process "${N.name}" has been created`})}}catch(Q){console.error("Error saving process:",Q),I({title:"Error",description:"Failed to save process",variant:"destructive"})}finally{l(!1),u(!1)}},Re=async()=>{var Q;if(x)try{if(l(!0),y)await mk(y.id,{name:U.name,description:U.description,color:U.color,isActive:U.isActive,order:U.order}),r({...n,[x]:n[x].map(ce=>ce.id===y.id?{...ce,name:U.name,description:U.description,color:U.color,isActive:U.isActive,order:U.order}:ce)}),I({title:"Stage updated",description:`Stage "${U.name}" has been updated`});else{const ce=await wre(x,{name:U.name,description:U.description,color:U.color,isActive:U.isActive,order:(((Q=n[x])==null?void 0:Q.length)||0)+1});r({...n,[x]:[...n[x]||[],ce]}),I({title:"Stage created",description:`Stage "${U.name}" has been created`})}}catch(ce){console.error("Error saving stage:",ce),I({title:"Error",description:"Failed to save stage",variant:"destructive"})}finally{l(!1),f(!1)}},Pe=async(Q,ce,P)=>{try{const Z=[...n[Q]].sort((we,mt)=>we.order-mt.order),J=Z.findIndex(we=>we.id===ce);if(P==="up"&&J>0){const we=[...Z];[we[J].order,we[J-1].order]=[we[J-1].order,we[J].order],r({...n,[Q]:we}),O({...k,[Q]:!0})}else if(P==="down"&&J<Z.length-1){const we=[...Z];[we[J].order,we[J+1].order]=[we[J+1].order,we[J].order],r({...n,[Q]:we}),O({...k,[Q]:!0})}}catch(Z){console.error("Error moving stage:",Z),I({title:"Error",description:"Failed to reorder stages",variant:"destructive"})}},xe=async()=>{try{l(!0);const Q=Object.entries(k).filter(([ce,P])=>P).map(async([ce])=>{const Z=[...n[ce]].sort((J,we)=>J.order-we.order).map(J=>J.id);return bre(ce,Z)});await Promise.all(Q),O({}),I({title:"All changes saved",description:"Your changes have been saved successfully"})}catch(Q){console.error("Error saving all changes:",Q),I({title:"Error",description:"Failed to save all changes",variant:"destructive"})}finally{l(!1)}};return i.jsxs(Qn,{title:"Leads Settings",description:"Configure lead processes and stages",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-md shadow-md w-96",children:[i.jsx("h2",{className:"text-3xl font-bold mb-1",children:t.length}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("p",{children:"Lead Processes"}),i.jsxs(K,{variant:"ghost",className:"text-white border border-white hover:bg-blue-600",size:"sm",onClick:()=>Y(),disabled:s||a,children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Add Process"]})]})]})}),s&&i.jsx("div",{className:"bg-white rounded-md shadow-md p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Loading processes and stages..."})}),!s&&i.jsxs("div",{className:"space-y-6",children:[t.map(Q=>{var ce;return i.jsxs("div",{className:"bg-white rounded-md shadow-md overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-4 border-b",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(K,{variant:"ghost",size:"sm",className:"p-1 mr-2",onClick:()=>z(Q.id),children:w.includes(Q.id)?i.jsx(Tb,{className:"h-5 w-5"}):i.jsx(Cb,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium",children:Q.name}),i.jsx("p",{className:"text-sm text-gray-500",children:Q.description})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(K,{variant:"outline",size:"sm",onClick:()=>Y(Q),disabled:a,children:[i.jsx(au,{className:"h-4 w-4 mr-1"})," Edit"]}),i.jsxs(K,{variant:"outline",size:"sm",className:"text-red-500 border-red-200 hover:bg-red-50",onClick:()=>W("process",Q.id),disabled:a,children:[i.jsx(ma,{className:"h-4 w-4 mr-1"})," Delete"]}),i.jsx(ht,{checked:Q.isActive,onCheckedChange:()=>F(Q.id),disabled:a})]})]}),w.includes(Q.id)&&i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h4",{className:"text-md font-medium",children:"Process Stages"}),i.jsxs(K,{size:"sm",onClick:()=>q(Q.id),disabled:a,children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Add Stage"]})]}),i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{className:"bg-gray-50",children:[i.jsx(Me,{className:"w-12",children:"Order"}),i.jsx(Me,{children:"Stage Name"}),i.jsx(Me,{children:"Description"}),i.jsx(Me,{className:"w-24",children:"Color"}),i.jsx(Me,{className:"w-28 text-center",children:"Status"}),i.jsx(Me,{className:"w-[180px]",children:"Actions"})]})}),i.jsxs(Xs,{children:[(ce=n[Q.id])==null?void 0:ce.sort((P,Z)=>P.order-Z.order).map(P=>i.jsxs(Ut,{children:[i.jsx(Ie,{children:P.order}),i.jsx(Ie,{className:"font-medium",children:P.name}),i.jsx(Ie,{children:P.description}),i.jsx(Ie,{children:i.jsx("div",{className:`w-6 h-6 rounded-full bg-${P.color}-500`})}),i.jsx(Ie,{className:"text-center",children:i.jsx(ht,{checked:P.isActive,onCheckedChange:()=>H(Q.id,P.id),disabled:a})}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",onClick:()=>q(Q.id,P),disabled:a,children:"Edit"}),i.jsx(K,{size:"sm",variant:"default",className:"bg-red-500 hover:bg-red-600 text-xs",onClick:()=>W("stage",P.id),disabled:a,children:"Delete"}),i.jsxs("div",{className:"flex flex-col space-y-1 ml-1",children:[i.jsx(K,{size:"icon",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>Pe(Q.id,P.id,"up"),disabled:a||P.order===1,children:i.jsx(Y3,{className:"h-4 w-4"})}),i.jsx(K,{size:"icon",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>Pe(Q.id,P.id,"down"),disabled:a||P.order===n[Q.id].length,children:i.jsx(Q3,{className:"h-4 w-4"})})]})]})})]},P.id)),!n[Q.id]||n[Q.id].length===0?i.jsx(Ut,{children:i.jsx(Ie,{colSpan:6,className:"text-center py-6 text-gray-500",children:'No stages defined yet. Click "Add Stage" to create your first stage.'})}):null]})]})]})]},Q.id)}),t.length===0&&!s&&i.jsxs("div",{className:"bg-white rounded-md shadow-md p-8 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"No lead processes defined yet."}),i.jsxs(K,{onClick:()=>Y(),className:"bg-blue-500 hover:bg-blue-600",disabled:a,children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Add Your First Process"]})]})]}),i.jsx(Cn,{open:c,onOpenChange:u,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsx(En,{children:i.jsx(jn,{children:m?"Edit Process":"Add New Process"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"processName",children:"Process Name"}),i.jsx(ue,{id:"processName",value:N.name,onChange:Q=>$({...N,name:Q.target.value}),placeholder:"e.g., Nursing Registration",disabled:a})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"processDescription",children:"Description"}),i.jsx(kr,{id:"processDescription",value:N.description,onChange:Q=>$({...N,description:Q.target.value}),placeholder:"Brief description of this process",rows:3,disabled:a})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"processActive",children:"Active"}),i.jsx(ht,{id:"processActive",checked:N.isActive,onCheckedChange:Q=>$({...N,isActive:Q}),disabled:a})]})]}),i.jsxs(dr,{children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{variant:"outline",disabled:a,children:"Cancel"})}),i.jsx(K,{onClick:je,disabled:!N.name||a,className:"bg-blue-500 hover:bg-blue-600",children:a?"Saving...":m?"Update Process":"Add Process"})]})]})}),i.jsx(Cn,{open:d,onOpenChange:f,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsx(En,{children:i.jsx(jn,{children:y?"Edit Stage":"Add New Stage"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"stageName",children:"Stage Name"}),i.jsx(ue,{id:"stageName",value:U.name,onChange:Q=>V({...U,name:Q.target.value}),placeholder:"e.g., Document Collection",disabled:a})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"stageDescription",children:"Description"}),i.jsx(kr,{id:"stageDescription",value:U.description,onChange:Q=>V({...U,description:Q.target.value}),placeholder:"Brief description of this stage",rows:3,disabled:a})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"stageColor",children:"Color"}),i.jsxs(sn,{value:U.color,onValueChange:Q=>V({...U,color:Q}),disabled:a,children:[i.jsx(Zt,{id:"stageColor",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-4 h-4 rounded-full bg-${U.color}-500`}),i.jsx(on,{placeholder:"Select color"})]})}),i.jsx(Jt,{children:_ie.map(Q=>i.jsx(Oe,{value:Q.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-4 h-4 rounded-full bg-${Q.value}-500`}),i.jsx("span",{children:Q.label})]})},Q.value))})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"stageActive",children:"Active"}),i.jsx(ht,{id:"stageActive",checked:U.isActive,onCheckedChange:Q=>V({...U,isActive:Q}),disabled:a})]})]}),i.jsxs(dr,{children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{variant:"outline",disabled:a,children:"Cancel"})}),i.jsx(K,{onClick:Re,disabled:!U.name||a,className:"bg-blue-500 hover:bg-blue-600",children:a?"Saving...":y?"Update Stage":"Add Stage"})]})]})}),i.jsx(Cn,{open:C,onOpenChange:R,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsx(En,{children:i.jsx(jn,{children:"Confirm Deletion"})}),i.jsx("div",{className:"py-4",children:i.jsxs("p",{children:["Are you sure you want to delete this ",L,"?",L==="process"&&" All associated stages will also be deleted.","This action cannot be undone."]})}),i.jsxs(dr,{children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{variant:"outline",disabled:a,children:"Cancel"})}),i.jsx(K,{onClick:re,variant:"destructive",disabled:a,children:a?"Deleting...":"Delete"})]})]})}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(K,{variant:"default",className:"bg-blue-500 hover:bg-blue-600",onClick:xe,disabled:s||a||Object.values(k).every(Q=>!Q),children:a?"Saving...":Object.values(k).some(Q=>Q)?"Save Stage Order Changes":"Save All Changes"})})]})},Eie=()=>i.jsx(Qn,{title:"Disk Space Capacity",description:"Monitor and manage disk space usage",children:i.jsx("p",{children:"Disk space capacity configuration will go here."})}),jie=()=>i.jsx(Qn,{title:"Triggers",description:"Configure automated triggers and actions",children:i.jsx("p",{children:"Triggers configuration will go here."})}),Nie=()=>i.jsx(Qn,{title:"Marketing Emailers Automation",description:"Configure automated marketing email campaigns",children:i.jsx("p",{children:"Marketing automation configuration will go here."})}),Sie=()=>i.jsx(Qn,{title:"Whatsapp Automation",description:"Configure automated WhatsApp messaging",children:i.jsx("p",{children:"WhatsApp automation configuration will go here."})}),Tie=()=>i.jsxs(Qn,{title:"Abroad Forms",description:"Manage forms for abroad programs",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"bg-green-500 text-white p-4 rounded-md shadow-md w-96",children:[i.jsx("h2",{className:"text-3xl font-bold mb-1",children:"5"}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("p",{children:"Forms"}),i.jsxs(K,{variant:"ghost",className:"text-white border border-white hover:bg-green-600",size:"sm",children:[i.jsx(qn,{className:"h-4 w-4 mr-1"})," Add New"]})]})]})}),i.jsx("div",{className:"bg-white rounded-md shadow",children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{className:"bg-gray-50",children:[i.jsx(Me,{className:"w-16",children:"Sr No."}),i.jsx(Me,{children:"Form Name"}),i.jsx(Me,{children:"Description"}),i.jsx(Me,{className:"w-32",children:"Fields"}),i.jsx(Me,{className:"w-32",children:"Actions"}),i.jsx(Me,{className:"w-32 text-center",children:"Status"})]})}),i.jsx(Xs,{children:[1,2,3,4,5].map(t=>i.jsxs(Ut,{children:[i.jsx(Ie,{children:t}),i.jsx(Ie,{children:`Form ${t}`}),i.jsx(Ie,{children:`Description for form ${t}`}),i.jsx(Ie,{children:Math.floor(Math.random()*10)+5}),i.jsx(Ie,{children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"Edit"}),i.jsx(K,{size:"sm",variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"View"}),i.jsx(K,{size:"sm",variant:"default",className:"bg-red-500 hover:bg-red-600 text-xs",children:"Delete"})]})}),i.jsx(Ie,{className:"text-center",children:i.jsx(ht,{checked:t%2===0})})]},t))})]})}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(K,{variant:"default",className:"bg-blue-500 hover:bg-blue-600",children:"Export Forms"})})]}),Cie=()=>i.jsx(Qn,{title:"Task Reminder Checklist",description:"Configure task reminder settings",children:i.jsx("p",{children:"Task reminder configuration will go here."})}),kie=()=>i.jsx(Qn,{title:"Add External Links",description:"Manage external link integrations",children:i.jsx("p",{children:"External links configuration will go here."})}),Aie=()=>i.jsx(Qn,{title:"Subcrm Login/Logout Details",description:"View and manage login activity",children:i.jsx("p",{children:"Login details configuration will go here."})}),Iie=()=>i.jsx(Qn,{title:"Birthday Wishes",description:"Configure automated birthday greeting messages",children:i.jsx("p",{children:"Birthday wishes configuration will go here."})});function Rie({userName:t,onBack:e}){const[n,r]=p.useState({payout:{payoutEnabled:!1,showInvoices:!1,myPayouts:"",otherPayouts:""},tasks:{taskHeadings:"",subcrmBoxes:"Nothing selected",selectSubcrmReports:"Sandra Biju, Amanda Mehta, Dinisha Davis, Uma Vinod",hideTaskSettings:"All SUBCRM status Active configured (Recommended for Internal Emp)",selectTags:"Show All Tags",preSelectedDashboard:"Nothing selected"},support:{supportMessage:!1,allowSubcrmToCreateTagsMasterData:!1,allowSubcrmToCreateSubcrm:!1,allowSubcrmToRemoveSubcrm:!1,blockExport:!1,blockSubcrmForward:!1,authenticateUsingOTP:!1,hideNumberFromLeadPage:!1,enableMarketing:!1,createDuplicateLeadsWhileForwarding:!1,createDuplicateLeadsIfComingFrom:"All",salesTarget:"",allowSubCRMAccessFrom:"",allowSubCRMAccessTo:"",defaultTag:"None"},college:{recommendationsAnalysis:!1,recommendationsHide:!1,applicationsAnalysis:!1,applicationsHide:!1},documents:{documents:"",documentsHide:!1,sopRename:"",sopHide:!1},banking:{accountName:"",accountNumber:"",bankName:"",branch:"",ifscCode:"",swiftCode:"",gstNumber:"",panNumber:""}}),s=(l,c,u)=>{r(d=>({...d,[l]:{...d[l],[c]:u}}))},o=(l,c,u)=>{r(d=>({...d,[l]:{...d[l],[c]:u}}))},a=(l,c,u)=>{r(d=>({...d,[l]:{...d[l],[c]:u}}))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[e?i.jsxs(K,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:e,children:[i.jsx(ou,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Back"})]}):i.jsx(K,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",asChild:!0,children:i.jsxs(yn,{to:"/settings/user",children:[i.jsx(ou,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Back to user settings"})]})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Abroad Subcrm Settings"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Control panel"})]})]}),i.jsxs("div",{className:"bg-white rounded-md shadow p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(ne,{htmlFor:"userName",children:"Remya Menon"}),i.jsx(ue,{id:"userName",value:t,readOnly:!0,className:"mt-1"})]}),i.jsx("div",{className:"border-b my-8"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Payout Enabled"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"payoutEnabled",className:"mr-2",children:"No"}),i.jsx(ht,{id:"payoutEnabled",checked:n.payout.payoutEnabled,onCheckedChange:l=>s("payout","payoutEnabled",l)}),i.jsx(ne,{htmlFor:"payoutEnabled",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Show Invoices"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"showInvoices",className:"mr-2",children:"No"}),i.jsx(ht,{id:"showInvoices",checked:n.payout.showInvoices,onCheckedChange:l=>s("payout","showInvoices",l)}),i.jsx(ne,{htmlFor:"showInvoices",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"My Payouts"}),i.jsx(ue,{value:n.payout.myPayouts,onChange:l=>o("payout","myPayouts",l.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Other Payouts"}),i.jsx(ue,{value:n.payout.otherPayouts,onChange:l=>o("payout","otherPayouts",l.target.value),placeholder:"0"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Tasks Headings"}),i.jsx(kr,{value:n.tasks.taskHeadings,onChange:l=>o("tasks","taskHeadings",l.target.value),className:"min-h-[80px]"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Subcrm Boxes (Select Process for Remya Menon)"}),i.jsxs(sn,{value:n.tasks.subcrmBoxes,onValueChange:l=>a("tasks","subcrmBoxes",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select process"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"Nothing selected",children:"Nothing selected"}),i.jsx(Oe,{value:"Process 1",children:"Process 1"}),i.jsx(Oe,{value:"Process 2",children:"Process 2"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Select Subcrm who reports to Remya Menon"}),i.jsxs(sn,{value:n.tasks.selectSubcrmReports,onValueChange:l=>a("tasks","selectSubcrmReports",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select users"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"Sandra Biju, Amanda Mehta, Dinisha Davis, Uma Vinod",children:"Sandra Biju, Amanda Mehta, Dinisha Davis, Uma Vinod"}),i.jsx(Oe,{value:"Sandra Biju",children:"Sandra Biju"}),i.jsx(Oe,{value:"Amanda Mehta",children:"Amanda Mehta"}),i.jsx(Oe,{value:"Dinisha Davis",children:"Dinisha Davis"}),i.jsx(Oe,{value:"Uma Vinod",children:"Uma Vinod"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Hide Task Settings"}),i.jsxs(sn,{value:n.tasks.hideTaskSettings,onValueChange:l=>a("tasks","hideTaskSettings",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select setting"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"All SUBCRM status Active configured (Recommended for Internal Emp)",children:"All SUBCRM status Active configured (Recommended for Internal Emp)"}),i.jsx(Oe,{value:"Option 1",children:"Option 1"}),i.jsx(Oe,{value:"Option 2",children:"Option 2"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Select Tags for Remya Menon"}),i.jsxs(sn,{value:n.tasks.selectTags,onValueChange:l=>a("tasks","selectTags",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select tags"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"Show All Tags",children:"Show All Tags"}),i.jsx(Oe,{value:"Tag 1",children:"Tag 1"}),i.jsx(Oe,{value:"Tag 2",children:"Tag 2"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Pre-selected Dashboard Filter for Remya Menon (Advanced)"}),i.jsxs(sn,{value:n.tasks.preSelectedDashboard,onValueChange:l=>a("tasks","preSelectedDashboard",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select filter"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"Nothing selected",children:"Nothing selected"}),i.jsx(Oe,{value:"Filter 1",children:"Filter 1"}),i.jsx(Oe,{value:"Filter 2",children:"Filter 2"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Support Message"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"supportMessage",className:"mr-2",children:"No"}),i.jsx(ht,{id:"supportMessage",checked:n.support.supportMessage,onCheckedChange:l=>s("support","supportMessage",l)}),i.jsx(ne,{htmlFor:"supportMessage",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Allow Subcrm to create Tags Master Data"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"allowSubcrmToCreateTagsMasterData",className:"mr-2",children:"No"}),i.jsx(ht,{id:"allowSubcrmToCreateTagsMasterData",checked:n.support.allowSubcrmToCreateTagsMasterData,onCheckedChange:l=>s("support","allowSubcrmToCreateTagsMasterData",l)}),i.jsx(ne,{htmlFor:"allowSubcrmToCreateTagsMasterData",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Allow Subcrm to create Subcrm"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"allowSubcrmToCreateSubcrm",className:"mr-2",children:"No"}),i.jsx(ht,{id:"allowSubcrmToCreateSubcrm",checked:n.support.allowSubcrmToCreateSubcrm,onCheckedChange:l=>s("support","allowSubcrmToCreateSubcrm",l)}),i.jsx(ne,{htmlFor:"allowSubcrmToCreateSubcrm",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Anyone can forward file to me"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"blockSubcrmForward",className:"mr-2",children:"No"}),i.jsx(ht,{id:"blockSubcrmForward",checked:!n.support.blockSubcrmForward,onCheckedChange:l=>s("support","blockSubcrmForward",!l)}),i.jsx(ne,{htmlFor:"blockSubcrmForward",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Enable Marketing"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"enableMarketing",className:"mr-2",children:"No"}),i.jsx(ht,{id:"enableMarketing",checked:n.support.enableMarketing,onCheckedChange:l=>s("support","enableMarketing",l)}),i.jsx(ne,{htmlFor:"enableMarketing",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Allow Subcrm to Remove Subcrm"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"allowSubcrmToRemoveSubcrm",className:"mr-2",children:"No"}),i.jsx(ht,{id:"allowSubcrmToRemoveSubcrm",checked:n.support.allowSubcrmToRemoveSubcrm,onCheckedChange:l=>s("support","allowSubcrmToRemoveSubcrm",l)}),i.jsx(ne,{htmlFor:"allowSubcrmToRemoveSubcrm",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Block Export"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"blockExport",className:"mr-2",children:"No"}),i.jsx(ht,{id:"blockExport",checked:n.support.blockExport,onCheckedChange:l=>s("support","blockExport",l)}),i.jsx(ne,{htmlFor:"blockExport",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Block Subcrm Forward"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"blockSubcrmForward2",className:"mr-2",children:"No"}),i.jsx(ht,{id:"blockSubcrmForward2",checked:n.support.blockSubcrmForward,onCheckedChange:l=>s("support","blockSubcrmForward",l)}),i.jsx(ne,{htmlFor:"blockSubcrmForward2",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Create Duplicate Leads while Forwarding"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"createDuplicateLeadsWhileForwarding",className:"mr-2",children:"No"}),i.jsx(ht,{id:"createDuplicateLeadsWhileForwarding",checked:n.support.createDuplicateLeadsWhileForwarding,onCheckedChange:l=>s("support","createDuplicateLeadsWhileForwarding",l)}),i.jsx(ne,{htmlFor:"createDuplicateLeadsWhileForwarding",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Authenticate while using OTP"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"authenticateUsingOTP",className:"mr-2",children:"No"}),i.jsx(ht,{id:"authenticateUsingOTP",checked:n.support.authenticateUsingOTP,onCheckedChange:l=>s("support","authenticateUsingOTP",l)}),i.jsx(ne,{htmlFor:"authenticateUsingOTP",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Hide Number From Lead Page"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"hideNumberFromLeadPage",className:"mr-2",children:"No"}),i.jsx(ht,{id:"hideNumberFromLeadPage",checked:n.support.hideNumberFromLeadPage,onCheckedChange:l=>s("support","hideNumberFromLeadPage",l)}),i.jsx(ne,{htmlFor:"hideNumberFromLeadPage",children:"Yes"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Create Duplicate Leads if coming from these subcrm's"}),i.jsxs(sn,{value:n.support.createDuplicateLeadsIfComingFrom,onValueChange:l=>a("support","createDuplicateLeadsIfComingFrom",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select option"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"All",children:"All"}),i.jsx(Oe,{value:"Some",children:"Some"}),i.jsx(Oe,{value:"None",children:"None"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Sales Target"}),i.jsx(ue,{value:n.support.salesTarget,onChange:l=>o("support","salesTarget",l.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Allow SubCRM Access Timings (From)"}),i.jsx(ue,{value:n.support.allowSubCRMAccessFrom,onChange:l=>o("support","allowSubCRMAccessFrom",l.target.value),type:"time"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Allow SubCRM Access Timings (To)"}),i.jsx(ue,{value:n.support.allowSubCRMAccessTo,onChange:l=>o("support","allowSubCRMAccessTo",l.target.value),type:"time"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Default Tag (Lead came from Login Page)"}),i.jsxs(sn,{value:n.support.defaultTag,onValueChange:l=>a("support","defaultTag",l),children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select tag"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"None",children:"None"}),i.jsx(Oe,{value:"Tag 1",children:"Tag 1"}),i.jsx(Oe,{value:"Tag 2",children:"Tag 2"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"College Recommendations Analysis"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"recommendationsAnalysis",className:"mr-2",children:"No"}),i.jsx(ht,{id:"recommendationsAnalysis",checked:n.college.recommendationsAnalysis,onCheckedChange:l=>s("college","recommendationsAnalysis",l)}),i.jsx(ne,{htmlFor:"recommendationsAnalysis",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"College Recommendations Hide"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"recommendationsHide",className:"mr-2",children:"No"}),i.jsx(ht,{id:"recommendationsHide",checked:n.college.recommendationsHide,onCheckedChange:l=>s("college","recommendationsHide",l)}),i.jsx(ne,{htmlFor:"recommendationsHide",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Documents"}),i.jsx(ue,{value:n.documents.documents,onChange:l=>o("documents","documents",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Documents Hide"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"documentsHide",className:"mr-2",children:"No"}),i.jsx(ht,{id:"documentsHide",checked:n.documents.documentsHide,onCheckedChange:l=>s("documents","documentsHide",l)}),i.jsx(ne,{htmlFor:"documentsHide",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"College Applications Analysis"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"applicationsAnalysis",className:"mr-2",children:"No"}),i.jsx(ht,{id:"applicationsAnalysis",checked:n.college.applicationsAnalysis,onCheckedChange:l=>s("college","applicationsAnalysis",l)}),i.jsx(ne,{htmlFor:"applicationsAnalysis",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"College Applications Hide"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"applicationsHide",className:"mr-2",children:"No"}),i.jsx(ht,{id:"applicationsHide",checked:n.college.applicationsHide,onCheckedChange:l=>s("college","applicationsHide",l)}),i.jsx(ne,{htmlFor:"applicationsHide",children:"Yes"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"SOP Rename"}),i.jsx(ue,{value:n.documents.sopRename,onChange:l=>o("documents","sopRename",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"SOP Hide"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{htmlFor:"sopHide",className:"mr-2",children:"No"}),i.jsx(ht,{id:"sopHide",checked:n.documents.sopHide,onCheckedChange:l=>s("documents","sopHide",l)}),i.jsx(ne,{htmlFor:"sopHide",children:"Yes"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Account Name:"}),i.jsx(ue,{value:n.banking.accountName,onChange:l=>o("banking","accountName",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Account Number:"}),i.jsx(ue,{value:n.banking.accountNumber,onChange:l=>o("banking","accountNumber",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Bank Name:"}),i.jsx(ue,{value:n.banking.bankName,onChange:l=>o("banking","bankName",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Branch:"}),i.jsx(ue,{value:n.banking.branch,onChange:l=>o("banking","branch",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"IFSC Code:"}),i.jsx(ue,{value:n.banking.ifscCode,onChange:l=>o("banking","ifscCode",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"Swift Code:"}),i.jsx(ue,{value:n.banking.swiftCode,onChange:l=>o("banking","swiftCode",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"GST Number:"}),i.jsx(ue,{value:n.banking.gstNumber,onChange:l=>o("banking","gstNumber",l.target.value)})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-medium mb-2",children:"PAN Number:"}),i.jsx(ue,{value:n.banking.panNumber,onChange:l=>o("banking","panNumber",l.target.value)})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx(K,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Submit"})})]})]})}const Pie=()=>{const{userId:t}=tE(),[e,n]=p.useState(null),[r,s]=p.useState(!0),{toast:o}=Yt();return p.useEffect(()=>{(async()=>{if(!t){s(!1);return}try{s(!0);const l=await Nv(t);l?n({id:l.id,name:l.name,username:l.username,active:l.active,email:l.email,phoneNumber:l.phoneNumber}):o({title:"User not found",description:"The requested user could not be found",variant:"destructive"})}catch(l){console.error("Error fetching user:",l),o({title:"Error",description:"Failed to load user data",variant:"destructive"})}finally{s(!1)}})()},[t,o]),r?i.jsx("div",{className:"p-8 text-center",children:"Loading user data..."}):e?i.jsx(Rie,{userName:e.name}):i.jsx("div",{className:"p-8",children:"User not found"})};function Die(){const[t,e]=p.useState(null),[n,r]=p.useState(!0),[s,o]=p.useState(!1),[a,l]=p.useState(null),[c,u]=p.useState(null),{toast:d}=Yt();p.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const y=await zO();e(y||{companyName:"",createdAt:new Date,updatedAt:new Date}),y!=null&&y.companyLogo&&u(y.companyLogo)}catch(y){console.error("Error loading settings:",y),d({title:"Error",description:"Failed to load settings",variant:"destructive"})}finally{r(!1)}},m=y=>{var x;const v=(x=y.target.files)==null?void 0:x[0];if(v){l(v);const b=new FileReader;b.onloadend=()=>{u(b.result)},b.readAsDataURL(v)}},g=async y=>{if(y.preventDefault(),!!t)try{o(!0),await sX(t,a||void 0),d({title:"Success",description:"Settings updated successfully"}),await f()}catch(v){console.error("Error saving settings:",v),d({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{o(!1)}};return n?i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx(b1,{className:"h-8 w-8 animate-spin"})}):i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Company Settings"})}),i.jsx(De,{children:i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"companyName",children:"Company Name"}),i.jsx(ue,{id:"companyName",value:(t==null?void 0:t.companyName)||"",onChange:y=>e(v=>v?{...v,companyName:y.target.value}:null),placeholder:"Enter company name",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"logo",children:"Company Logo"}),i.jsxs("div",{className:"flex items-center gap-4",children:[c&&i.jsx("div",{className:"relative w-32 h-32",children:i.jsx("img",{src:c,alt:"Company logo preview",className:"w-full h-full object-contain"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs(ne,{htmlFor:"logo-upload",className:"flex items-center gap-2 p-4 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary",children:[i.jsx(Rb,{className:"h-5 w-5"}),i.jsx("span",{children:"Click to upload logo"})]}),i.jsx(ue,{id:"logo-upload",type:"file",accept:"image/*",onChange:m,className:"hidden"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"primaryColor",children:"Primary Color"}),i.jsx(ue,{id:"primaryColor",type:"color",value:(t==null?void 0:t.primaryColor)||"#000000",onChange:y=>e(v=>v?{...v,primaryColor:y.target.value}:null)})]}),i.jsxs(K,{type:"submit",disabled:s,children:[s&&i.jsx(b1,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Settings"]})]})})]})}const Oie=()=>{const{currentUser:t}=Dn();return(t==null?void 0:t.role)==="admin"?i.jsx(Qn,{title:"Company Settings",description:"Customize your company branding and appearance",children:i.jsx(Die,{})}):i.jsx(Qn,{title:"Company Settings",description:"Customize your company branding and appearance",children:i.jsxs(ws,{variant:"destructive",children:[i.jsx(Ib,{className:"h-4 w-4 mr-2"}),i.jsx(_s,{children:"You need administrator privileges to access company settings. Please contact your system administrator for assistance."})]})})},Jg=et(Lf,"socialMediaIntegrations"),Mie=et(Lf,"socialMediaLeadForms");et(Lf,"socialMediaLeads");const Lie=t=>{const e={...t};for(const[n,r]of Object.entries(e))r instanceof ft&&(e[n]=r.toDate());return e},Fie=async()=>{try{return(await Et(Jg)).docs.map(e=>({id:e.id,...Lie(e.data())}))}catch(t){throw console.error("Error getting social media integrations:",t),t}},Vie=async t=>{try{return(await ov(Jg,{...t,lastUpdated:wt(),leadFormIds:t.leadFormIds||[]})).id}catch(e){throw console.error("Error adding social media integration:",e),e}},Uie=async t=>{try{const e=await ov(Mie,{...t,lastUpdated:wt(),leadsReceived:0}),n=await un(Le(Jg,t.integrationId));if(n.exists()){const s=n.data().leadFormIds||[];await tn(Le(Jg,t.integrationId),{leadFormIds:[...s,e.id]})}return e.id}catch(e){throw console.error("Error adding lead form:",e),e}},aV="your-facebook-app-id",$ie="your-facebook-app-secret",lV=window.location.origin+"/settings/social-media/callback",x_="social_media_oauth_state",w_="social_media_temp_platform",Tu={facebook:{authUrl:"https://www.facebook.com/v17.0/dialog/oauth",tokenUrl:"https://graph.facebook.com/v17.0/oauth/access_token",scope:"pages_show_list,pages_read_engagement,leads_retrieval,pages_manage_metadata",apiBaseUrl:"https://graph.facebook.com/v17.0"},instagram:{authUrl:"https://api.instagram.com/oauth/authorize",tokenUrl:"https://api.instagram.com/oauth/access_token",scope:"user_profile,user_media",apiBaseUrl:"https://graph.instagram.com"}},Bie=()=>{const t=new Uint32Array(8);return window.crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(8,"0")).join("")},zie=t=>{if(!Tu[t])throw new Error(`OAuth not configured for platform: ${t}`);const e=Tu[t],n=Bie();localStorage.setItem(x_,n),localStorage.setItem(w_,t);const r=new URLSearchParams({client_id:aV,redirect_uri:lV,state:n,scope:e.scope,response_type:"code"});window.location.href=`${e.authUrl}?${r.toString()}`},qie=async t=>{const e=t.get("code"),n=t.get("state"),r=localStorage.getItem(x_),s=localStorage.getItem(w_);if(localStorage.removeItem(x_),localStorage.removeItem(w_),!e||!n||n!==r||!s)throw new Error("Invalid OAuth callback parameters");const o=Tu[s],a=new URLSearchParams({client_id:aV,client_secret:$ie,redirect_uri:lV,code:e});try{const l=await fetch(`${o.tokenUrl}?${a.toString()}`,{method:"GET"});if(!l.ok)throw new Error("Failed to exchange code for token");const c=await l.json(),u=c.access_token,d=c.expires_in;return s==="facebook"?await Hie(u,new Date(Date.now()+d*1e3)):!1}catch(l){throw console.error("Error in OAuth callback:",l),l}},Hie=async(t,e)=>{var n,r;try{const s=await fetch(`${Tu.facebook.apiBaseUrl}/me/accounts?access_token=${t}`);if(!s.ok)throw new Error("Failed to fetch Facebook pages");const o=await s.json();if(!o.data||o.data.length===0)throw new Error("No Facebook pages found for this user");for(const a of o.data){const l=a.access_token,c=await fetch(`${Tu.facebook.apiBaseUrl}/${a.id}?fields=name,picture&access_token=${l}`);if(!c.ok){console.error(`Failed to fetch details for page ${a.id}`);continue}const u=await c.json();await Vie({platform:"facebook",pageId:a.id,pageName:a.name,pageImage:(r=(n=u.picture)==null?void 0:n.data)==null?void 0:r.url,accessToken:l,tokenExpiresAt:new Date(9999,11,31),status:"active",connectedBy:"current-user",connectedAt:new Date,lastUpdated:new Date})}return!0}catch(s){return console.error("Error connecting Facebook pages:",s),!1}},Wie=async(t,e)=>{try{const n=await fetch(`${Tu.facebook.apiBaseUrl}/${t}/leadgen_forms?access_token=${e}`);if(!n.ok)throw new Error(`Failed to fetch lead forms for page ${t}`);return(await n.json()).data||[]}catch(n){throw console.error("Error getting Facebook lead forms:",n),n}},bk=[{id:"firstName",label:"First Name",type:"text"},{id:"lastName",label:"Last Name",type:"text"},{id:"email",label:"Email",type:"email"},{id:"phone",label:"Phone",type:"phone"},{id:"company",label:"Company",type:"text"},{id:"jobTitle",label:"Job Title",type:"text"},{id:"leadSource",label:"Lead Source",type:"text"},{id:"notes",label:"Notes",type:"textarea"}];function Kie({open:t,onClose:e,onSave:n,formFields:r,platform:s}){const[o,a]=p.useState("mapping"),[l,c]=p.useState({}),[u,d]=p.useState(!1),f=()=>{const g={};for(const[y,v]of Object.entries(l)){const x=r.find(b=>b.name===y);x&&(g[v]=`[${x.label} value]`)}return g},m=async()=>{try{d(!0),await n(l),e()}catch(g){console.error("Error saving field mapping:",g)}finally{d(!1)}};return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"max-w-2xl",children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Configure Field Mapping"}),i.jsxs(Gl,{children:["Map fields from your ",s," lead form to your CRM fields."]})]}),i.jsxs(Ba,{value:o,onValueChange:a,className:"w-full",children:[i.jsxs(xo,{className:"grid w-full grid-cols-2",children:[i.jsx(kt,{value:"mapping",children:"Field Mapping"}),i.jsx(kt,{value:"preview",children:"Preview"})]}),i.jsxs(At,{value:"mapping",className:"space-y-4",children:[i.jsx("div",{className:"grid gap-4",children:r.map(g=>i.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[i.jsxs("div",{children:[i.jsx(ne,{children:g.label}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",g.type]})]}),i.jsxs(sn,{value:l[g.name]||"",onValueChange:y=>c(v=>({...v,[g.name]:y})),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select CRM field"})}),i.jsx(Jt,{children:bk.map(y=>i.jsx(Oe,{value:y.id,children:y.label},y.id))})]})]},g.name))}),r.length===0&&i.jsx(ws,{children:i.jsx(_s,{children:"No fields found in the lead form. Please make sure the form is properly configured."})})]}),i.jsx(At,{value:"preview",className:"space-y-4",children:i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Lead Preview in CRM"}),i.jsx("div",{className:"grid gap-2",children:Object.entries(f()).map(([g,y])=>{var v;return i.jsxs("div",{className:"grid grid-cols-2",children:[i.jsxs("span",{className:"text-muted-foreground",children:[(v=bk.find(x=>x.id===g))==null?void 0:v.label,":"]}),i.jsx("span",{children:y})]},g)})}),Object.keys(l).length===0&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No fields mapped yet. Map some fields to see how they will appear in your CRM."})]})})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:e,children:"Cancel"}),i.jsx(K,{onClick:m,disabled:u||Object.keys(l).length===0,children:"Save Mapping"})]})]})})}const tp={facebook:{icon:r6,name:"Facebook"},instagram:{icon:u6,name:"Instagram"},linkedin:{icon:h6,name:"LinkedIn"},twitter:{icon:E6,name:"Twitter"}},Gie=[{platform:"facebook",status:"Connected",lastSync:"2023-10-15",totalLeads:156},{platform:"instagram",status:"Disconnected",lastSync:"Never",totalLeads:0},{platform:"linkedin",status:"Connected",lastSync:"2023-10-12",totalLeads:78},{platform:"twitter",status:"Disconnected",lastSync:"Never",totalLeads:0}];function Ek(){const[t]=Pq(),{toast:e}=Yt(),[n,r]=p.useState(!0),[s,o]=p.useState([]),[a,l]=p.useState({}),[c,u]=p.useState(null),[d,f]=p.useState(null),[m,g]=p.useState(!1),[y,v]=p.useState(Gie),[x,b]=p.useState(!1),[w,E]=p.useState(null),[C,R]=p.useState(""),[L,A]=p.useState(""),[j,S]=p.useState({importComments:!1,importMessages:!1,autoSync:!1,syncInterval:"daily"});p.useEffect(()=>{k()},[]),p.useEffect(()=>{const V=t.get("code"),z=t.get("state");V&&z&&O()},[t]);const k=async()=>{try{r(!0);const V=await Fie();o(V);const z={};for(const F of V)F.platform==="facebook"&&(z[F.pageId]=await Wie(F.pageId,F.accessToken));l(z)}catch(V){console.error("Error loading integrations:",V),e({title:"Error",description:"Failed to load social media integrations",variant:"destructive"})}finally{r(!1)}},O=async()=>{try{await qie(t)&&(e({title:"Success",description:"Social media account connected successfully",variant:"default"}),await k())}catch(V){console.error("Error handling OAuth callback:",V),e({title:"Error",description:"Failed to connect social media account",variant:"destructive"})}},I=async()=>{if(!w){e({title:"Error",description:"Please select a platform to connect",variant:"destructive"});return}try{r(!0),await zie(w)}catch(V){console.error("Error connecting platform:",V),e({title:"Error",description:`Failed to connect to ${tp[w].name}`,variant:"destructive"})}finally{r(!1),b(!1),E(null),R(""),A("")}},N=V=>{v(z=>z.map(F=>F.platform===V?{...F,status:F.status==="Connected"?"Disconnected":"Connected"}:F))},$=async V=>{try{await Uie({platform:c.platform,integrationId:c.id,pageId:c.pageId,pageName:c.pageName,formId:d.id,formName:d.name,fieldMapping:V,status:"active",lastUpdated:new Date,createdAt:new Date,leadsReceived:0}),e({title:"Success",description:"Lead form mapping saved successfully",variant:"default"}),g(!1),await k()}catch(z){console.error("Error saving field mapping:",z),e({title:"Error",description:"Failed to save lead form mapping",variant:"destructive"})}},U=y.filter(V=>V.status==="Connected").length;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(yn,{to:"/settings",className:"text-gray-500 hover:text-gray-700",children:i.jsx(ou,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Social Media Integration"}),i.jsx("p",{className:"text-gray-500",children:"Connect and import leads from social media platforms"})]})]}),i.jsx(_e,{className:"p-6 bg-[#6366F1]",children:i.jsxs("div",{className:"flex justify-between items-center text-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-4xl font-bold",children:U}),i.jsx("div",{className:"mt-1",children:"Connected Platforms"})]}),i.jsxs(K,{variant:"secondary",size:"sm",className:"bg-white text-[#6366F1] hover:bg-gray-100",onClick:()=>b(!0),children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),"Connect New"]})]})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Platform Connections"}),i.jsx("div",{className:"bg-white rounded-lg border",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Sr. No."}),i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Platform"}),i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Status"}),i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Last Sync"}),i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Total Leads"}),i.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Actions"}),i.jsx("th",{className:"text-right p-4 font-medium text-gray-500",children:"Connection"})]})}),i.jsx("tbody",{children:y.map((V,z)=>i.jsxs("tr",{className:"border-b last:border-0",children:[i.jsx("td",{className:"p-4",children:z+1}),i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[se.createElement(tp[V.platform].icon,{className:"w-6 h-6"}),tp[V.platform].name]})}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-sm ${V.status==="Connected"?"bg-green-50 text-green-700":"bg-gray-50 text-gray-700"}`,children:V.status})}),i.jsx("td",{className:"p-4",children:V.lastSync}),i.jsx("td",{className:"p-4",children:V.totalLeads}),i.jsx("td",{className:"p-4",children:V.status==="Connected"&&i.jsx(K,{variant:"secondary",size:"sm",children:"Import Leads"})}),i.jsx("td",{className:"p-4 text-right",children:i.jsx(ht,{checked:V.status==="Connected",onCheckedChange:()=>N(V.platform)})})]},V.platform))})]})})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Connect to Social Media Platform"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-4 gap-4",children:Object.entries(tp).map(([V,z])=>i.jsxs("button",{className:`p-4 border rounded-lg flex flex-col items-center gap-2 ${w===V?"border-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>E(V),children:[se.createElement(z.icon,{className:"w-8 h-8"}),i.jsx("span",{className:"text-sm",children:z.name})]},V))}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"apiKey",children:"API Key"}),i.jsx(ue,{id:"apiKey",value:C,onChange:V=>R(V.target.value),placeholder:"Enter API key"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"apiSecret",children:"API Secret"}),i.jsx(ue,{id:"apiSecret",type:"password",value:L,onChange:V=>A(V.target.value),placeholder:"Enter API secret"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Import Settings"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{htmlFor:"importComments",children:"Import comments as notes"}),i.jsx(ht,{id:"importComments",checked:j.importComments,onCheckedChange:V=>S(z=>({...z,importComments:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{htmlFor:"importMessages",children:"Import messages"}),i.jsx(ht,{id:"importMessages",checked:j.importMessages,onCheckedChange:V=>S(z=>({...z,importMessages:V}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{htmlFor:"autoSync",children:"Auto-sync leads"}),i.jsx(ht,{id:"autoSync",checked:j.autoSync,onCheckedChange:V=>S(z=>({...z,autoSync:V}))})]}),j.autoSync&&i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"syncInterval",children:"Sync Interval"}),i.jsxs(sn,{value:j.syncInterval,onValueChange:V=>S(z=>({...z,syncInterval:V})),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select interval"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"hourly",children:"Hourly"}),i.jsx(Oe,{value:"daily",children:"Daily"}),i.jsx(Oe,{value:"weekly",children:"Weekly"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(K,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),i.jsx(K,{onClick:I,children:"Connect Platform"})]})]})]})}),m&&d&&i.jsx(Kie,{open:m,onClose:()=>g(!1),onSave:$,formFields:d.form_elements,platform:c.platform})]})}function cV(t,e){return function(){return t.apply(e,arguments)}}const{toString:Qie}=Object.prototype,{getPrototypeOf:oN}=Object,Cv=(t=>e=>{const n=Qie.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Js=t=>(t=t.toLowerCase(),e=>Cv(e)===t),kv=t=>e=>typeof e===t,{isArray:Zu}=Array,cf=kv("undefined");function Yie(t){return t!==null&&!cf(t)&&t.constructor!==null&&!cf(t.constructor)&&is(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const uV=Js("ArrayBuffer");function Xie(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uV(t.buffer),e}const Zie=kv("string"),is=kv("function"),dV=kv("number"),Av=t=>t!==null&&typeof t=="object",Jie=t=>t===!0||t===!1,Rp=t=>{if(Cv(t)!=="object")return!1;const e=oN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eoe=Js("Date"),toe=Js("File"),noe=Js("Blob"),roe=Js("FileList"),soe=t=>Av(t)&&is(t.pipe),ioe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||is(t.append)&&((e=Cv(t))==="formdata"||e==="object"&&is(t.toString)&&t.toString()==="[object FormData]"))},ooe=Js("URLSearchParams"),[aoe,loe,coe,uoe]=["ReadableStream","Request","Response","Headers"].map(Js),doe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zf(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Zu(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let l;for(r=0;r<a;r++)l=o[r],e.call(null,t[l],l,t)}}function hV(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fV=t=>!cf(t)&&t!==nl;function __(){const{caseless:t}=fV(this)&&this||{},e={},n=(r,s)=>{const o=t&&hV(e,s)||s;Rp(e[o])&&Rp(r)?e[o]=__(e[o],r):Rp(r)?e[o]=__({},r):Zu(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Zf(arguments[r],n);return e}const hoe=(t,e,n,{allOwnKeys:r}={})=>(Zf(e,(s,o)=>{n&&is(s)?t[o]=cV(s,n):t[o]=s},{allOwnKeys:r}),t),foe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),moe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},poe=(t,e,n,r)=>{let s,o,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)a=s[o],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&oN(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},goe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},yoe=t=>{if(!t)return null;if(Zu(t))return t;let e=t.length;if(!dV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},voe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&oN(Uint8Array)),xoe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},woe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},_oe=Js("HTMLFormElement"),boe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),jk=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Eoe=Js("RegExp"),mV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Zf(n,(s,o)=>{let a;(a=e(s,o,t))!==!1&&(r[o]=a||s)}),Object.defineProperties(t,r)},joe=t=>{mV(t,(e,n)=>{if(is(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(is(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Noe=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Zu(t)?r(t):r(String(t).split(e)),n},Soe=()=>{},Toe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Coe(t){return!!(t&&is(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const koe=t=>{const e=new Array(10),n=(r,s)=>{if(Av(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=Zu(r)?[]:{};return Zf(r,(a,l)=>{const c=n(a,s+1);!cf(c)&&(o[l]=c)}),e[s]=void 0,o}}return r};return n(t,0)},Aoe=Js("AsyncFunction"),Ioe=t=>t&&(Av(t)||is(t))&&is(t.then)&&is(t.catch),pV=((t,e)=>t?setImmediate:e?((n,r)=>(nl.addEventListener("message",({source:s,data:o})=>{s===nl&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),nl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",is(nl.postMessage)),Roe=typeof queueMicrotask<"u"?queueMicrotask.bind(nl):typeof process<"u"&&process.nextTick||pV,te={isArray:Zu,isArrayBuffer:uV,isBuffer:Yie,isFormData:ioe,isArrayBufferView:Xie,isString:Zie,isNumber:dV,isBoolean:Jie,isObject:Av,isPlainObject:Rp,isReadableStream:aoe,isRequest:loe,isResponse:coe,isHeaders:uoe,isUndefined:cf,isDate:eoe,isFile:toe,isBlob:noe,isRegExp:Eoe,isFunction:is,isStream:soe,isURLSearchParams:ooe,isTypedArray:voe,isFileList:roe,forEach:Zf,merge:__,extend:hoe,trim:doe,stripBOM:foe,inherits:moe,toFlatObject:poe,kindOf:Cv,kindOfTest:Js,endsWith:goe,toArray:yoe,forEachEntry:xoe,matchAll:woe,isHTMLForm:_oe,hasOwnProperty:jk,hasOwnProp:jk,reduceDescriptors:mV,freezeMethods:joe,toObjectSet:Noe,toCamelCase:boe,noop:Soe,toFiniteNumber:Toe,findKey:hV,global:nl,isContextDefined:fV,isSpecCompliantForm:Coe,toJSONObject:koe,isAsyncFn:Aoe,isThenable:Ioe,setImmediate:pV,asap:Roe};function Ze(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}te.inherits(Ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const gV=Ze.prototype,yV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{yV[t]={value:t}});Object.defineProperties(Ze,yV);Object.defineProperty(gV,"isAxiosError",{value:!0});Ze.from=(t,e,n,r,s,o)=>{const a=Object.create(gV);return te.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ze.call(a,t.message,e,n,r,s),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const Poe=null;function b_(t){return te.isPlainObject(t)||te.isArray(t)}function vV(t){return te.endsWith(t,"[]")?t.slice(0,-2):t}function Nk(t,e,n){return t?t.concat(e).map(function(s,o){return s=vV(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function Doe(t){return te.isArray(t)&&!t.some(b_)}const Ooe=te.toFlatObject(te,{},null,function(e){return/^is[A-Z]/.test(e)});function Iv(t,e,n){if(!te.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!te.isUndefined(x[v])});const r=n.metaTokens,s=n.visitor||d,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(e);if(!te.isFunction(s))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(te.isDate(y))return y.toISOString();if(!c&&te.isBlob(y))throw new Ze("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(y)||te.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,x){let b=y;if(y&&!x&&typeof y=="object"){if(te.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(te.isArray(y)&&Doe(y)||(te.isFileList(y)||te.endsWith(v,"[]"))&&(b=te.toArray(y)))return v=vV(v),b.forEach(function(E,C){!(te.isUndefined(E)||E===null)&&e.append(a===!0?Nk([v],C,o):a===null?v:v+"[]",u(E))}),!1}return b_(y)?!0:(e.append(Nk(x,v,o),u(y)),!1)}const f=[],m=Object.assign(Ooe,{defaultVisitor:d,convertValue:u,isVisitable:b_});function g(y,v){if(!te.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(y),te.forEach(y,function(b,w){(!(te.isUndefined(b)||b===null)&&s.call(e,b,te.isString(w)?w.trim():w,v,m))===!0&&g(b,v?v.concat(w):[w])}),f.pop()}}if(!te.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Sk(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function aN(t,e){this._pairs=[],t&&Iv(t,this,e)}const xV=aN.prototype;xV.append=function(e,n){this._pairs.push([e,n])};xV.toString=function(e){const n=e?function(r){return e.call(this,r,Sk)}:Sk;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Moe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wV(t,e,n){if(!e)return t;const r=n&&n.encode||Moe;te.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=te.isURLSearchParams(e)?e.toString():new aN(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Tk{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,function(r){r!==null&&e(r)})}}const _V={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Loe=typeof URLSearchParams<"u"?URLSearchParams:aN,Foe=typeof FormData<"u"?FormData:null,Voe=typeof Blob<"u"?Blob:null,Uoe={isBrowser:!0,classes:{URLSearchParams:Loe,FormData:Foe,Blob:Voe},protocols:["http","https","file","blob","url","data"]},lN=typeof window<"u"&&typeof document<"u",E_=typeof navigator=="object"&&navigator||void 0,$oe=lN&&(!E_||["ReactNative","NativeScript","NS"].indexOf(E_.product)<0),Boe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zoe=lN&&window.location.href||"http://localhost",qoe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lN,hasStandardBrowserEnv:$oe,hasStandardBrowserWebWorkerEnv:Boe,navigator:E_,origin:zoe},Symbol.toStringTag,{value:"Module"})),cr={...qoe,...Uoe};function Hoe(t,e){return Iv(t,new cr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return cr.isNode&&te.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Woe(t){return te.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Koe(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function bV(t){function e(n,r,s,o){let a=n[o++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=o>=n.length;return a=!a&&te.isArray(s)?s.length:a,c?(te.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!te.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],o)&&te.isArray(s[a])&&(s[a]=Koe(s[a])),!l)}if(te.isFormData(t)&&te.isFunction(t.entries)){const n={};return te.forEachEntry(t,(r,s)=>{e(Woe(r),s,n,0)}),n}return null}function Goe(t,e,n){if(te.isString(t))try{return(e||JSON.parse)(t),te.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Jf={transitional:_V,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=te.isObject(e);if(o&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return s?JSON.stringify(bV(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e)||te.isReadableStream(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Hoe(e,this.formSerializer).toString();if((l=te.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Iv(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),Goe(e)):e}],transformResponse:[function(e){const n=this.transitional||Jf.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(te.isResponse(e)||te.isReadableStream(e))return e;if(e&&te.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?Ze.from(l,Ze.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cr.classes.FormData,Blob:cr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],t=>{Jf.headers[t]={}});const Qoe=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yoe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&Qoe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Ck=Symbol("internals");function Sd(t){return t&&String(t).trim().toLowerCase()}function Pp(t){return t===!1||t==null?t:te.isArray(t)?t.map(Pp):String(t)}function Xoe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Zoe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lw(t,e,n,r,s){if(te.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!te.isString(e)){if(te.isString(r))return e.indexOf(r)!==-1;if(te.isRegExp(r))return r.test(e)}}function Joe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function eae(t,e){const n=te.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,a){return this[r].call(this,e,s,o,a)},configurable:!0})})}class qr{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(l,c,u){const d=Sd(c);if(!d)throw new Error("header name must be a non-empty string");const f=te.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=Pp(l))}const a=(l,c)=>te.forEach(l,(u,d)=>o(u,d,c));if(te.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(te.isString(e)&&(e=e.trim())&&!Zoe(e))a(Yoe(e),n);else if(te.isHeaders(e))for(const[l,c]of e.entries())o(c,l,r);else e!=null&&o(n,e,r);return this}get(e,n){if(e=Sd(e),e){const r=te.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Xoe(s);if(te.isFunction(n))return n.call(this,s,r);if(te.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Sd(e),e){const r=te.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||lw(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(a){if(a=Sd(a),a){const l=te.findKey(r,a);l&&(!n||lw(r,r[l],l,n))&&(delete r[l],s=!0)}}return te.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||lw(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return te.forEach(this,(s,o)=>{const a=te.findKey(r,o);if(a){n[a]=Pp(s),delete n[o];return}const l=e?Joe(o):String(o).trim();l!==o&&delete n[o],n[l]=Pp(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return te.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&te.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Ck]=this[Ck]={accessors:{}}).accessors,s=this.prototype;function o(a){const l=Sd(a);r[l]||(eae(s,a),r[l]=!0)}return te.isArray(e)?e.forEach(o):o(e),this}}qr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(qr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});te.freezeMethods(qr);function cw(t,e){const n=this||Jf,r=e||n,s=qr.from(r.headers);let o=r.data;return te.forEach(t,function(l){o=l.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function EV(t){return!!(t&&t.__CANCEL__)}function Ju(t,e,n){Ze.call(this,t??"canceled",Ze.ERR_CANCELED,e,n),this.name="CanceledError"}te.inherits(Ju,Ze,{__CANCEL__:!0});function jV(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ze("Request failed with status code "+n.status,[Ze.ERR_BAD_REQUEST,Ze.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function tae(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function nae(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[o];a||(a=u),n[s]=c,r[s]=u;let f=o,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),u-a<e)return;const g=d&&u-d;return g?Math.round(m*1e3/g):void 0}}function rae(t,e){let n=0,r=1e3/e,s,o;const a=(u,d=Date.now())=>{n=d,s=null,o&&(clearTimeout(o),o=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?a(u,d):(s=u,o||(o=setTimeout(()=>{o=null,a(s)},r-f)))},()=>s&&a(s)]}const ey=(t,e,n=3)=>{let r=0;const s=nae(50,250);return rae(o=>{const a=o.loaded,l=o.lengthComputable?o.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:o,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},n)},kk=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Ak=t=>(...e)=>te.asap(()=>t(...e)),sae=cr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,cr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(cr.origin),cr.navigator&&/(msie|trident)/i.test(cr.navigator.userAgent)):()=>!0,iae=cr.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const a=[t+"="+encodeURIComponent(e)];te.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),te.isString(r)&&a.push("path="+r),te.isString(s)&&a.push("domain="+s),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oae(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function aae(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function NV(t,e,n){let r=!oae(e);return t&&(r||n==!1)?aae(t,e):e}const Ik=t=>t instanceof qr?{...t}:t;function Pl(t,e){e=e||{};const n={};function r(u,d,f,m){return te.isPlainObject(u)&&te.isPlainObject(d)?te.merge.call({caseless:m},u,d):te.isPlainObject(d)?te.merge({},d):te.isArray(d)?d.slice():d}function s(u,d,f,m){if(te.isUndefined(d)){if(!te.isUndefined(u))return r(void 0,u,f,m)}else return r(u,d,f,m)}function o(u,d){if(!te.isUndefined(d))return r(void 0,d)}function a(u,d){if(te.isUndefined(d)){if(!te.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>s(Ik(u),Ik(d),f,!0)};return te.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=c[d]||s,m=f(t[d],e[d],d);te.isUndefined(m)&&f!==l||(n[d]=m)}),n}const SV=t=>{const e=Pl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=e;e.headers=a=qr.from(a),e.url=wV(NV(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(te.isFormData(n)){if(cr.hasStandardBrowserEnv||cr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(cr.hasStandardBrowserEnv&&(r&&te.isFunction(r)&&(r=r(e)),r||r!==!1&&sae(e.url))){const u=s&&o&&iae.read(o);u&&a.set(s,u)}return e},lae=typeof XMLHttpRequest<"u",cae=lae&&function(t){return new Promise(function(n,r){const s=SV(t);let o=s.data;const a=qr.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,m,g,y;function v(){g&&g(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function b(){if(!x)return;const E=qr.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:E,config:t,request:x};jV(function(A){n(A),v()},function(A){r(A),v()},R),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(r(new Ze("Request aborted",Ze.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new Ze("Network Error",Ze.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||_V;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),r(new Ze(C,R.clarifyTimeoutError?Ze.ETIMEDOUT:Ze.ECONNABORTED,t,x)),x=null},o===void 0&&a.setContentType(null),"setRequestHeader"in x&&te.forEach(a.toJSON(),function(C,R){x.setRequestHeader(R,C)}),te.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),l&&l!=="json"&&(x.responseType=s.responseType),u&&([m,y]=ey(u,!0),x.addEventListener("progress",m)),c&&x.upload&&([f,g]=ey(c),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(d=E=>{x&&(r(!E||E.type?new Ju(null,t,x):E),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const w=tae(s.url);if(w&&cr.protocols.indexOf(w)===-1){r(new Ze("Unsupported protocol "+w+":",Ze.ERR_BAD_REQUEST,t));return}x.send(o||null)})},uae=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ze?d:new Ju(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,o(new Ze(`timeout ${e} of ms exceeded`,Ze.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),t=null)};t.forEach(u=>u.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>te.asap(l),c}},dae=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},hae=async function*(t,e){for await(const n of fae(t))yield*dae(n,e)},fae=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Rk=(t,e,n,r)=>{const s=hae(t,e);let o=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let m=o+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Rv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TV=Rv&&typeof ReadableStream=="function",mae=Rv&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),CV=(t,...e)=>{try{return!!t(...e)}catch{return!1}},pae=TV&&CV(()=>{let t=!1;const e=new Request(cr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Pk=64*1024,j_=TV&&CV(()=>te.isReadableStream(new Response("").body)),ty={stream:j_&&(t=>t.body)};Rv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ty[e]&&(ty[e]=te.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ze(`Response type '${e}' is not supported`,Ze.ERR_NOT_SUPPORT,r)})})})(new Response);const gae=async t=>{if(t==null)return 0;if(te.isBlob(t))return t.size;if(te.isSpecCompliantForm(t))return(await new Request(cr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(te.isArrayBufferView(t)||te.isArrayBuffer(t))return t.byteLength;if(te.isURLSearchParams(t)&&(t=t+""),te.isString(t))return(await mae(t)).byteLength},yae=async(t,e)=>{const n=te.toFiniteNumber(t.getContentLength());return n??gae(e)},vae=Rv&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:o,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:m}=SV(t);u=u?(u+"").toLowerCase():"text";let g=uae([s,o&&o.toAbortSignal()],a),y;const v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let x;try{if(c&&pae&&n!=="get"&&n!=="head"&&(x=await yae(d,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),L;if(te.isFormData(r)&&(L=R.headers.get("content-type"))&&d.setContentType(L),R.body){const[A,j]=kk(x,ey(Ak(c)));r=Rk(R.body,Pk,A,j)}}te.isString(f)||(f=f?"include":"omit");const b="credentials"in Request.prototype;y=new Request(e,{...m,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:b?f:void 0});let w=await fetch(y);const E=j_&&(u==="stream"||u==="response");if(j_&&(l||E&&v)){const R={};["status","statusText","headers"].forEach(S=>{R[S]=w[S]});const L=te.toFiniteNumber(w.headers.get("content-length")),[A,j]=l&&kk(L,ey(Ak(l),!0))||[];w=new Response(Rk(w.body,Pk,A,()=>{j&&j(),v&&v()}),R)}u=u||"text";let C=await ty[te.findKey(ty,u)||"text"](w,t);return!E&&v&&v(),await new Promise((R,L)=>{jV(R,L,{data:C,headers:qr.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:y})})}catch(b){throw v&&v(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new Ze("Network Error",Ze.ERR_NETWORK,t,y),{cause:b.cause||b}):Ze.from(b,b&&b.code,t,y)}}),N_={http:Poe,xhr:cae,fetch:vae};te.forEach(N_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Dk=t=>`- ${t}`,xae=t=>te.isFunction(t)||t===null||t===!1,kV={getAdapter:t=>{t=te.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let o=0;o<e;o++){n=t[o];let a;if(r=n,!xae(n)&&(r=N_[(a=String(n)).toLowerCase()],r===void 0))throw new Ze(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+o]=r}if(!r){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Dk).join(`
`):" "+Dk(o[0]):"as no adapter specified";throw new Ze("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:N_};function uw(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ju(null,t)}function Ok(t){return uw(t),t.headers=qr.from(t.headers),t.data=cw.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kV.getAdapter(t.adapter||Jf.adapter)(t).then(function(r){return uw(t),r.data=cw.call(t,t.transformResponse,r),r.headers=qr.from(r.headers),r},function(r){return EV(r)||(uw(t),r&&r.response&&(r.response.data=cw.call(t,t.transformResponse,r.response),r.response.headers=qr.from(r.response.headers))),Promise.reject(r)})}const AV="1.8.4",Pv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Pv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Mk={};Pv.transitional=function(e,n,r){function s(o,a){return"[Axios v"+AV+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,l)=>{if(e===!1)throw new Ze(s(a," has been removed"+(n?" in "+n:"")),Ze.ERR_DEPRECATED);return n&&!Mk[a]&&(Mk[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,l):!0}};Pv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function wae(t,e,n){if(typeof t!="object")throw new Ze("options must be an object",Ze.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],a=e[o];if(a){const l=t[o],c=l===void 0||a(l,o,t);if(c!==!0)throw new Ze("option "+o+" must be "+c,Ze.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ze("Unknown option "+o,Ze.ERR_BAD_OPTION)}}const Dp={assertOptions:wae,validators:Pv},si=Dp.validators;class dl{constructor(e){this.defaults=e,this.interceptors={request:new Tk,response:new Tk}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Pl(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Dp.assertOptions(r,{silentJSONParsing:si.transitional(si.boolean),forcedJSONParsing:si.transitional(si.boolean),clarifyTimeoutError:si.transitional(si.boolean)},!1),s!=null&&(te.isFunction(s)?n.paramsSerializer={serialize:s}:Dp.assertOptions(s,{encode:si.function,serialize:si.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Dp.assertOptions(n,{baseUrl:si.spelling("baseURL"),withXsrfToken:si.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&te.merge(o.common,o[n.method]);o&&te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),n.headers=qr.concat(a,o);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,f=0,m;if(!c){const y=[Ok.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,u),m=y.length,d=Promise.resolve(n);f<m;)d=d.then(y[f++],y[f++]);return d}m=l.length;let g=n;for(f=0;f<m;){const y=l[f++],v=l[f++];try{g=y(g)}catch(x){v.call(this,x);break}}try{d=Ok.call(this,g)}catch(y){return Promise.reject(y)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=Pl(this.defaults,e);const n=NV(e.baseURL,e.url,e.allowAbsoluteUrls);return wV(n,e.params,e.paramsSerializer)}}te.forEach(["delete","get","head","options"],function(e){dl.prototype[e]=function(n,r){return this.request(Pl(r||{},{method:e,url:n,data:(r||{}).data}))}});te.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,l){return this.request(Pl(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}dl.prototype[e]=n(),dl.prototype[e+"Form"]=n(!0)});class cN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(l=>{r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,l){r.reason||(r.reason=new Ju(o,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new cN(function(s){e=s}),cancel:e}}}function _ae(t){return function(n){return t.apply(null,n)}}function bae(t){return te.isObject(t)&&t.isAxiosError===!0}const S_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(S_).forEach(([t,e])=>{S_[e]=t});function IV(t){const e=new dl(t),n=cV(dl.prototype.request,e);return te.extend(n,dl.prototype,e,{allOwnKeys:!0}),te.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return IV(Pl(t,s))},n}const Vt=IV(Jf);Vt.Axios=dl;Vt.CanceledError=Ju;Vt.CancelToken=cN;Vt.isCancel=EV;Vt.VERSION=AV;Vt.toFormData=Iv;Vt.AxiosError=Ze;Vt.Cancel=Vt.CanceledError;Vt.all=function(e){return Promise.all(e)};Vt.spread=_ae;Vt.isAxiosError=bae;Vt.mergeConfig=Pl;Vt.AxiosHeaders=qr;Vt.formToJSON=t=>bV(te.isHTMLForm(t)?new FormData(t):t);Vt.getAdapter=kV.getAdapter;Vt.HttpStatusCode=S_;Vt.default=Vt;class Eae{constructor(e=""){pm(this,"apiKey");pm(this,"apiUrl","https://api.brevo.com/v3");this.apiKey=e||void 0||"",this.apiKey||console.warn("Brevo API key is not set. Email functionality will not work.")}setApiKey(e){this.apiKey=e}async sendEmail(e){var n,r,s,o,a,l,c;try{if(!this.apiKey)throw new Error("Brevo API key is not set");const u={...e,trackOpens:!0,trackClicks:!0};if(e.campaignId&&(u.headers={...u.headers,"X-CRM-Campaign-ID":e.campaignId},u.htmlContent)){let f=u.htmlContent;f.includes("<html")||(f=`<html><body>${f}</body></html>`),f.includes("</body>")?f=f.replace("</body>",`<img src="${window.location.origin}/api/track-email-open?campaignId=${e.campaignId}" 
                   alt="" width="1" height="1" style="display:none;" /></body>`):f.includes("</html>")?f=f.replace("</html>",`<img src="${window.location.origin}/api/track-email-open?campaignId=${e.campaignId}" 
                   alt="" width="1" height="1" style="display:none;" /></html>`):f=`${f}<img src="${window.location.origin}/api/track-email-open?campaignId=${e.campaignId}" 
                                           alt="" width="1" height="1" style="display:none;" />`;const g=`<img src="http://localhost:3002/api/track-email-open?campaignId=${e.campaignId}" 
                                            alt="" width="1" height="1" style="display:none;" />`;f.includes("</body>")?f=f.replace("</body>",`${g}</body>`):f.includes("</html>")?f=f.replace("</html>",`${g}</html>`):f=`${f}${g}`,u.htmlContent=f,console.log(`Added tracking pixels for campaign ${e.campaignId}`)}if(u.to&&u.to.length>50){console.warn(`Brevo API: Large recipient list detected (${u.to.length}). Breaking into batches of 50.`);const f=[];for(let g=0;g<u.to.length;g+=50)f.push(u.to.slice(g,g+50));console.log(`Brevo API: Sending ${f.length} batches for bulk email.`);const m=[];for(let g=0;g<f.length;g++){const y={...u,to:f[g]};console.log(`Brevo API: Sending batch ${g+1}/${f.length} with ${f[g].length} recipients`);try{const v=await Vt.post(`${this.apiUrl}/smtp/email`,y,{headers:{accept:"application/json","api-key":this.apiKey,"content-type":"application/json"}});m.push(v.data.messageId),console.log(`Brevo API: Batch ${g+1} sent successfully with messageId: ${v.data.messageId}`)}catch(v){console.error(`Brevo API: Error sending batch ${g+1}:`,v),Vt.isAxiosError(v)&&console.error("Brevo API: Batch error details:",{status:(n=v.response)==null?void 0:n.status,statusText:(r=v.response)==null?void 0:r.statusText,data:(s=v.response)==null?void 0:s.data})}}return{messageId:m.join(",")}}console.log("Sending email with Brevo API, options:",JSON.stringify({sender:u.sender,to:u.to,subject:u.subject,recipientCount:u.to.length,trackOpens:u.trackOpens,trackClicks:u.trackClicks,campaignId:u.campaignId},null,2)),console.log("Using API key:",this.apiKey.substring(0,5)+"..."+this.apiKey.substring(this.apiKey.length-5));const d=await Vt.post(`${this.apiUrl}/smtp/email`,u,{headers:{accept:"application/json","api-key":this.apiKey,"content-type":"application/json"}});return console.log("Brevo API response:",d.status,d.statusText),console.log("Response data:",JSON.stringify(d.data,null,2)),{messageId:d.data.messageId}}catch(u){throw console.error("Error sending email via Brevo:",u),Vt.isAxiosError(u)&&console.error("Axios error details:",{status:(o=u.response)==null?void 0:o.status,statusText:(a=u.response)==null?void 0:a.statusText,data:(l=u.response)==null?void 0:l.data,headers:(c=u.response)==null?void 0:c.headers}),u}}async sendTemplateEmail(e){try{return await this.sendEmail(e)}catch(n){throw console.error("Error sending template email via Brevo:",n),n}}async getTemplates(){try{return(await Vt.get(`${this.apiUrl}/smtp/templates`,{headers:{accept:"application/json","api-key":this.apiKey},params:{templateStatus:"true"}})).data.templates}catch(e){throw console.error("Error fetching email templates from Brevo:",e),e}}async getEmailEvents(e=50,n,r,s){try{const o={limit:e};return n&&(o.startDate=n),r&&(o.endDate=r),s!==void 0&&(o.offset=s),(await Vt.get(`${this.apiUrl}/smtp/statistics/events`,{headers:{accept:"application/json","api-key":this.apiKey},params:o})).data.events}catch(o){throw console.error("Error fetching email events from Brevo:",o),o}}async createContact(e,n={},r=[]){try{await Vt.post(`${this.apiUrl}/contacts`,{email:e,attributes:n,listIds:r},{headers:{accept:"application/json","api-key":this.apiKey,"content-type":"application/json"}})}catch(s){throw console.error("Error creating contact in Brevo:",s),s}}}const zc=new Eae,RV=Object.freeze(Object.defineProperty({__proto__:null,default:zc},Symbol.toStringTag,{value:"Module"})),jae=Ht.object({apiKey:Ht.string().min(10,"API key must be at least 10 characters"),defaultSenderName:Ht.string().min(1,"Sender name is required"),defaultSenderEmail:Ht.string().email("Must be a valid email address"),replyToEmail:Ht.string().email("Must be a valid email address").optional()}),Nae=Ht.object({recipientEmail:Ht.string().email("Must be a valid email address"),recipientName:Ht.string().optional(),subject:Ht.string().min(1,"Subject is required"),message:Ht.string().min(1,"Message is required")}),Sae=()=>{const{toast:t}=Yt(),[e,n]=p.useState(!1),[r,s]=p.useState(!1),[o,a]=p.useState("config"),l=bu({resolver:Eu(jae),defaultValues:{apiKey:"",defaultSenderName:"",defaultSenderEmail:"",replyToEmail:""}}),c=bu({resolver:Eu(Nae),defaultValues:{recipientEmail:"",recipientName:"",subject:"Test Email from CRM Pro",message:"This is a test email sent from your CRM Pro application to verify Brevo integration."}});p.useEffect(()=>{(()=>{const m=localStorage.getItem("brevo_api_key"),g=localStorage.getItem("brevo_sender_name"),y=localStorage.getItem("brevo_sender_email"),v=localStorage.getItem("brevo_reply_to");m&&(l.setValue("apiKey",m),zc.setApiKey(m)),g&&l.setValue("defaultSenderName",g),y&&l.setValue("defaultSenderEmail",y),v&&l.setValue("replyToEmail",v),n(!!m&&!!g&&!!y)})()},[l]);const u=f=>{localStorage.setItem("brevo_api_key",f.apiKey),localStorage.setItem("brevo_sender_name",f.defaultSenderName),localStorage.setItem("brevo_sender_email",f.defaultSenderEmail),f.replyToEmail?localStorage.setItem("brevo_reply_to",f.replyToEmail):localStorage.removeItem("brevo_reply_to"),zc.setApiKey(f.apiKey),n(!0),t({title:"Configuration Saved",description:"Your Brevo email configuration has been saved successfully."})},d=async f=>{var m,g;try{if(s(!0),!l.getValues("defaultSenderEmail")){t({variant:"destructive",title:"Missing Sender Email",description:"Please enter a default sender email address in the configuration tab."}),s(!1);return}const y={name:l.getValues("defaultSenderName"),email:l.getValues("defaultSenderEmail")},v={name:f.recipientName||f.recipientEmail,email:f.recipientEmail},x=l.getValues("replyToEmail")?{email:l.getValues("replyToEmail")}:void 0,b={sender:y,to:[v],subject:f.subject,htmlContent:`<html><body><p>${f.message}</p><p>If you're seeing this email, your Brevo integration is working correctly!</p></body></html>`,textContent:`${f.message}

If you're seeing this email, your Brevo integration is working correctly!`,replyTo:x};console.log("Sending test email with options:",JSON.stringify(b,null,2));const w=await zc.sendEmail(b);t({title:"Test Email Sent",description:`A test email has been sent to ${f.recipientEmail} with messageId: ${w.messageId}`}),t({variant:"default",title:"Important Notes",description:"If you don't receive the email, please check: 1) Spam folder, 2) Verify your Brevo account is active, 3) Check Brevo sending limits and domain verification status."})}catch(y){console.error("Error sending test email:",y);let v=y.message||"An unknown error occurred";if((g=(m=y.response)==null?void 0:m.data)!=null&&g.code){const x=y.response.data.code;x==="unauthorized"?v="Invalid API key. Please check your Brevo API key and try again.":x==="invalid_parameter"?v="Invalid email parameters. Check sender and recipient email addresses.":x==="missing_parameter"?v="Missing required parameters. Make sure all fields are filled correctly.":v=`Brevo API error (${x}): ${y.response.data.message||v}`}t({variant:"destructive",title:"Failed to Send Test Email",description:v})}finally{s(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(yn,{to:"/settings",className:"mr-4",children:i.jsx(K,{variant:"outline",size:"icon",children:i.jsx(FR,{className:"h-4 w-4"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Brevo Email Configuration"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure Brevo to send emails from your CRM"})]})]}),!e&&i.jsxs(ws,{children:[i.jsx(vl,{className:"h-4 w-4"}),i.jsx(no,{children:"Not Configured"}),i.jsx(_s,{children:"You need to set up your Brevo API key before you can send emails. You can get your API key from your Brevo account settings."})]}),i.jsxs(Ba,{defaultValue:"config",value:o,onValueChange:a,children:[i.jsxs(xo,{children:[i.jsxs(kt,{value:"config",children:[i.jsx(v6,{className:"h-4 w-4 mr-2"}),"Configuration"]}),i.jsxs(kt,{value:"test",disabled:!e,children:[i.jsx(c0,{className:"h-4 w-4 mr-2"}),"Test Email"]})]}),i.jsx(At,{value:"config",children:i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Brevo API Configuration"}),i.jsx(Xt,{children:"Enter your Brevo API key and default sender information"})]}),i.jsx(De,{children:i.jsx(ju,{...l,children:i.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[i.jsx(Wt,{control:l.control,name:"apiKey",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Brevo API Key*"}),i.jsx(Lt,{children:i.jsx(ue,{...f,type:"password",placeholder:"Enter your Brevo API key"})}),i.jsx(Nu,{children:"You can find your API key in your Brevo account under SMTP & API"}),i.jsx(Ft,{})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Wt,{control:l.control,name:"defaultSenderName",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Default Sender Name*"}),i.jsx(Lt,{children:i.jsx(ue,{...f,placeholder:"Your Company Name"})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:l.control,name:"defaultSenderEmail",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Default Sender Email*"}),i.jsx(Lt,{children:i.jsx(ue,{...f,placeholder:"noreply@yourcompany.com"})}),i.jsx(Ft,{})]})})]}),i.jsx(Wt,{control:l.control,name:"replyToEmail",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Reply-To Email (Optional)"}),i.jsx(Lt,{children:i.jsx(ue,{...f,placeholder:"support@yourcompany.com"})}),i.jsx(Nu,{children:"If different from sender email, replies will go to this address"}),i.jsx(Ft,{})]})}),i.jsx(K,{type:"submit",children:"Save Configuration"})]})})})]})}),i.jsx(At,{value:"test",children:i.jsxs(_e,{children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Send Test Email"}),i.jsx(Xt,{children:"Verify your Brevo configuration by sending a test email"})]}),i.jsx(De,{children:i.jsx(ju,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Wt,{control:c.control,name:"recipientEmail",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Recipient Email*"}),i.jsx(Lt,{children:i.jsx(ue,{...f,placeholder:"recipient@example.com"})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:c.control,name:"recipientName",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Recipient Name (Optional)"}),i.jsx(Lt,{children:i.jsx(ue,{...f,placeholder:"Recipient Name"})}),i.jsx(Ft,{})]})})]}),i.jsx(Wt,{control:c.control,name:"subject",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Email Subject*"}),i.jsx(Lt,{children:i.jsx(ue,{...f})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:c.control,name:"message",render:({field:f})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Message*"}),i.jsx(Lt,{children:i.jsx(kr,{...f,rows:5,placeholder:"Type your message here"})}),i.jsx(Ft,{})]})}),i.jsx(K,{type:"submit",disabled:r,children:r?"Sending...":"Send Test Email"})]})})})]})})]})]})};var uN="Radio",[Tae,PV]=js(uN),[Cae,kae]=Tae(uN),DV=p.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:a,value:l="on",onCheck:c,form:u,...d}=t,[f,m]=p.useState(null),g=dt(e,x=>m(x)),y=p.useRef(!1),v=f?u||!!f.closest("form"):!0;return i.jsxs(Cae,{scope:n,checked:s,disabled:a,children:[i.jsx(Ve.button,{type:"button",role:"radio","aria-checked":s,"data-state":LV(s),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:ve(t.onClick,x=>{s||c==null||c(),v&&(y.current=x.isPropagationStopped(),y.current||x.stopPropagation())})}),v&&i.jsx(Aae,{control:f,bubbles:!y.current,name:r,value:l,checked:s,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});DV.displayName=uN;var OV="RadioIndicator",MV=p.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,o=kae(OV,n);return i.jsx(Ns,{present:r||o.checked,children:i.jsx(Ve.span,{"data-state":LV(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})})});MV.displayName=OV;var Aae=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,o=p.useRef(null),a=Hj(n),l=$b(e);return p.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[a,n,r]),i.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function LV(t){return t?"checked":"unchecked"}var Iae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dN="RadioGroup",[Rae,Ile]=js(dN,[Wu,PV]),FV=Wu(),VV=PV(),[Pae,Dae]=Rae(dN),UV=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:a=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...m}=t,g=FV(n),y=zf(u),[v,x]=bi({prop:o,defaultProp:s,onChange:f});return i.jsx(Pae,{scope:n,name:r,required:a,disabled:l,value:v,onValueChange:x,children:i.jsx(Cj,{asChild:!0,...g,orientation:c,dir:y,loop:d,children:i.jsx(Ve.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:y,...m,ref:e})})})});UV.displayName=dN;var $V="RadioGroupItem",BV=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,o=Dae($V,n),a=o.disabled||r,l=FV(n),c=VV(n),u=p.useRef(null),d=dt(e,u),f=o.value===s.value,m=p.useRef(!1);return p.useEffect(()=>{const g=v=>{Iae.includes(v.key)&&(m.current=!0)},y=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",y)}},[]),i.jsx(kj,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(DV,{disabled:a,required:o.required,checked:f,...c,...s,name:o.name,ref:d,onCheck:()=>o.onValueChange(s.value),onKeyDown:ve(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:ve(s.onFocus,()=>{var g;m.current&&((g=u.current)==null||g.click())})})})});BV.displayName=$V;var Oae="RadioGroupIndicator",zV=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=VV(n);return i.jsx(MV,{...s,...r,ref:e})});zV.displayName=Oae;var qV=UV,HV=BV,Mae=zV;const WV=p.forwardRef(({className:t,...e},n)=>i.jsx(qV,{className:me("grid gap-2",t),...e,ref:n}));WV.displayName=qV.displayName;const KV=p.forwardRef(({className:t,...e},n)=>i.jsx(HV,{ref:n,className:me("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(Mae,{className:"flex items-center justify-center",children:i.jsx(VR,{className:"h-2.5 w-2.5 fill-current text-current"})})}));KV.displayName=HV.displayName;const Lk=t=>{let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,m))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,l);return l},Lae=t=>t?Lk(t):Lk,Fae=t=>t;function Vae(t,e=Fae){const n=se.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return se.useDebugValue(n),n}const Fk=t=>{const e=Lae(t),n=r=>Vae(e,r);return Object.assign(n,e),n},Uae=t=>t?Fk(t):Fk,$ae=Uae(t=>({timestamp:Date.now(),refresh:()=>t({timestamp:Date.now()})})),Bae=()=>{const{timestamp:t,refresh:e}=$ae();return{timestamp:t,refresh:e}};function Vk({leadId:t,processId:e,stageId:n,showTooltip:r=!0,variant:s="default"}){const[o,a]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!0),{timestamp:f}=Bae();if(p.useEffect(()=>{(async()=>{if(!e||!n){a([]),c([]),d(!1);return}try{const[E,C]=await Promise.all([Ip(e,n),lie(t)]);a(E),c(C)}catch(E){console.error("Error loading document requirements:",E)}finally{d(!1)}})()},[t,e,n,f]),u||o.length===0)return null;const m=o.filter(w=>w.required),g=m.filter(w=>l.some(E=>E.requirementId===w.id)),y=m.length===g.length;if(!(m.length>g.length))return null;if(s==="dot"){const w=i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"});if(!r)return w;const E=m.filter(C=>!l.some(R=>R.requirementId===C.id));return i.jsx(uu,{children:i.jsxs(kh,{children:[i.jsx(Ah,{asChild:!0,children:w}),i.jsx(du,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Missing Required Documents:"}),i.jsx("ul",{className:"list-disc list-inside",children:E.map(C=>i.jsx("li",{className:"text-sm",children:C.name},C.id))})]})})]})})}const x=i.jsxs(at,{variant:y?"default":"destructive",className:"ml-2 flex items-center gap-1",children:[i.jsx(Wi,{className:"h-3 w-3"}),g.length,"/",m.length," Required"]});if(!r)return x;const b=m.filter(w=>!l.some(E=>E.requirementId===w.id));return i.jsx(uu,{children:i.jsxs(kh,{children:[i.jsx(Ah,{asChild:!0,children:x}),i.jsx(du,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Missing Required Documents:"}),i.jsx("ul",{className:"list-disc list-inside",children:b.map(w=>i.jsx("li",{className:"text-sm",children:w.name},w.id))})]})})]})})}function zae({leadId:t,onProcessSelected:e,onStageChanged:n}){var O,I,N,$,U,V,z,F,H,Y;const[r,s]=p.useState([]),[o,a]=p.useState({}),[l,c]=p.useState(null),[u,d]=p.useState(null),[f,m]=p.useState(!0),[g,y]=p.useState(!1),[v,x]=p.useState(!1),[b,w]=p.useState(""),[E,C]=p.useState(null),{toast:R}=Yt(),L=Dn();p.useEffect(()=>{(async()=>{try{m(!0);const W=await Kf(t);W&&(W.currentProcessId&&c(W.currentProcessId),W.currentStageId&&d(W.currentStageId));const re=await Qu();s(re.filter(Re=>Re.isActive));const je={};await Promise.all(re.map(async Re=>{const Pe=await Ia(Re.id);je[Re.id]=Pe.filter(xe=>xe.isActive)})),a(je)}catch(W){console.error("Error loading processes and stages:",W),R({title:"Error",description:"Failed to load lead processes and stages",variant:"destructive"})}finally{m(!1)}})()},[t,R]);const A=async q=>{var W;try{y(!0),await ZJ(t,q),c(q),d(null),e&&e(q),R({title:"Process assigned",description:`Lead process has been updated to "${(W=r.find(re=>re.id===q))==null?void 0:W.name}"`})}catch(re){console.error("Error selecting process:",re),R({title:"Error",description:"Failed to update lead process",variant:"destructive"})}finally{y(!1)}},j=q=>{C(q),w(""),x(!0)},S=async()=>{if(!(!E||!l))try{y(!0);const q=L.currentUser,W=q?q.uid:void 0;await JJ(t,E,l,b,W),d(E),n&&n(E),R({title:"Stage updated",description:"The lead's stage has been updated successfully"})}catch(q){console.error("Error updating stage:",q),R({title:"Error",description:"Failed to update lead stage",variant:"destructive"})}finally{y(!1),x(!1)}},k=()=>{if(!l||!u)return 0;const q=o[l]||[];if(q.length===0)return 0;const W=q.findIndex(re=>re.id===u);return W===-1?0:Math.round((W+1)/q.length*100)};return f?i.jsx("div",{className:"p-4 text-center",children:"Loading processes and stages..."}):r.length===0?i.jsx(_e,{children:i.jsx(De,{className:"p-6",children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("p",{className:"text-gray-500 mb-2",children:"No lead processes have been configured."}),i.jsx("p",{className:"text-sm text-gray-400",children:"Please set up processes and stages in the Lead Settings page."})]})})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(_e,{children:i.jsxs(De,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Select Lead Process"}),i.jsx(WV,{value:l||"",onValueChange:A,children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(q=>i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(KV,{value:q.id,id:`process-${q.id}`,className:"mt-1"}),i.jsxs("div",{className:"grid gap-1.5",children:[i.jsx(ne,{htmlFor:`process-${q.id}`,className:"font-medium cursor-pointer",children:q.name}),i.jsx("p",{className:"text-sm text-gray-500",children:q.description})]})]},q.id))})})]})}),l&&i.jsx(_e,{children:i.jsxs(De,{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Lead Progress"}),u&&i.jsxs("div",{className:"flex items-center mt-2 md:mt-0",children:[i.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Current Stage:"}),i.jsx(at,{className:`bg-${((I=(O=o[l])==null?void 0:O.find(q=>q.id===u))==null?void 0:I.color)||"blue"}-500`,children:(($=(N=o[l])==null?void 0:N.find(q=>q.id===u))==null?void 0:$.name)||"Unknown Stage"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx(to,{value:k(),className:"h-2"}),i.jsxs("div",{className:"flex justify-between mt-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Start"}),i.jsxs("span",{className:"text-xs text-gray-500",children:[k(),"% Complete"]}),i.jsx("span",{className:"text-xs text-gray-500",children:"Complete"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[i.jsx(ne,{className:"mb-2 md:mb-0",children:"Update Lead Stage"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(sn,{value:E||"",onValueChange:C,children:[i.jsx(Zt,{className:"w-full md:w-[250px]",children:i.jsx(on,{placeholder:"Select a stage"})}),i.jsx(Jt,{children:(U=o[l])==null?void 0:U.sort((q,W)=>q.order-W.order).map(q=>i.jsx(Oe,{value:q.id,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full bg-${q.color}-500`}),i.jsx("span",{children:q.name}),i.jsx(Vk,{leadId:t,processId:l,stageId:q.id,showTooltip:!1})]})},q.id))})]}),i.jsx(K,{onClick:()=>E&&j(E),disabled:!E||g,children:"Update"})]})]}),i.jsxs("div",{className:"border rounded-md p-4 mt-4",children:[i.jsx("h4",{className:"text-sm font-medium mb-3",children:"Stage Timeline"}),i.jsx("div",{className:"space-y-3",children:(V=o[l])==null?void 0:V.sort((q,W)=>q.order-W.order).map(q=>{var je,Re;const W=u?((Re=(je=o[l])==null?void 0:je.find(Pe=>Pe.id===u))==null?void 0:Re.order)>q.order:!1,re=q.id===u;return i.jsxs("div",{className:`flex items-start border-l-2 pl-4 py-2 ${W?"border-green-500":re?`border-${q.color}-500`:"border-gray-200"}`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${W?"bg-green-500":re?`bg-${q.color}-500`:"bg-gray-200"} mr-2`}),i.jsx("h5",{className:`text-sm font-medium ${W?"text-green-700":re?"text-gray-900":"text-gray-500"}`,children:q.name}),W&&i.jsx(at,{variant:"outline",className:"ml-2 bg-green-50 text-green-700 border-green-200",children:"Completed"}),re&&i.jsx(at,{variant:"outline",className:`ml-2 bg-${q.color}-50 text-${q.color}-700 border-${q.color}-200`,children:"Current"}),!W&&i.jsx(Vk,{leadId:t,processId:l,stageId:q.id})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-5",children:q.description})]}),i.jsx("div",{children:!W&&!re&&i.jsx(K,{variant:"outline",size:"sm",onClick:()=>j(q.id),disabled:g,children:"Move to this stage"})})]},q.id)})})]})]})]})}),i.jsx(Cn,{open:v,onOpenChange:x,children:i.jsxs(bn,{className:"sm:max-w-md",children:[i.jsx(En,{children:i.jsx(jn,{children:"Update Lead Stage"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Moving to stage:"}),i.jsxs("div",{className:"flex items-center p-2 bg-gray-50 rounded",children:[i.jsx("div",{className:`w-3 h-3 rounded-full bg-${((F=(z=o[l||""])==null?void 0:z.find(q=>q.id===E))==null?void 0:F.color)||"blue"}-500 mr-2`}),i.jsx("span",{className:"font-medium",children:((Y=(H=o[l||""])==null?void 0:H.find(q=>q.id===E))==null?void 0:Y.name)||"Unknown Stage"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"stageNote",children:"Note (optional):"}),i.jsx(kr,{id:"stageNote",value:b,onChange:q=>w(q.target.value),placeholder:"Add any notes about this stage update",rows:3,disabled:g})]})]}),i.jsxs(dr,{children:[i.jsx(da,{asChild:!0,children:i.jsx(K,{variant:"outline",disabled:g,children:"Cancel"})}),i.jsx(K,{onClick:S,disabled:g,className:"bg-blue-500 hover:bg-blue-600",children:g?"Updating...":"Update Stage"})]})]})})]})}const ny=async(t,e)=>{try{console.log(`Fetching document requirements for process: ${t}, stage: ${e||"none"}`);const n=et(Ee,"documentRequirements");let r;e?(r=Dt(n,Ct("processId","==",t),Ct("stageId","==",e)),console.log(`Querying for process-specific + stage-specific requirements: processId=${t}, stageId=${e}`)):(r=Dt(n,Ct("processId","==",t),Ct("stageId","==",null)),console.log(`Querying for process-level requirements (no stage): processId=${t}`));const s=await Et(r);console.log(`Query returned ${s.size} document requirements`);const o=[];if(!s.empty)return s.forEach(u=>{const d=u.data();if(d.show===!1){console.log(`Skipping requirement (show=false): ${u.id} - ${d.name}`);return}o.push({id:u.id,name:d.name,description:d.description||"",required:d.required!==void 0?d.required:!0,status:"not_submitted"}),console.log(`Found requirement: ${u.id} - ${d.name}`)}),console.log(`Found ${o.length} document requirements in database`),o;if(e){console.log("No stage-specific requirements found, trying process-level requirements");const u=Dt(n,Ct("processId","==",t),Ct("stageId","==",null)),d=await Et(u),f=Dt(n,Ct("processId","==",t),Ct("stageId","==",e),Ct("noDocumentsRequired","==",!0));if(!(await Et(f)).empty)return console.log('Found explicit "no documents required" marker for this stage'),[];if(!d.empty)return d.forEach(g=>{const y=g.data();if(y.show===!1){console.log(`Skipping process-level requirement (show=false): ${g.id} - ${y.name}`);return}o.push({id:g.id,name:y.name,description:y.description||"",required:y.required!==void 0?y.required:!0,status:"not_submitted"}),console.log(`Found process-level requirement: ${g.id} - ${y.name}`)}),console.log(`Found ${o.length} process-level document requirements`),o}let a=Dt(n,Ct("processId","==",t),Ct("noDocumentsRequired","==",!0));if(e&&(a=Dt(n,Ct("processId","==",t),Ct("stageId","==",e),Ct("noDocumentsRequired","==",!0))),!(await Et(a)).empty)return console.log('Found explicit "no documents required" marker'),[];if(t&&t!=="default"&&t!=="nursing-registration"&&t!=="insurance-application"&&t!=="mortgage-application"&&t!=="employment-application")return console.log(`No requirements found for real process ID ${t}, assuming no documents needed`),[];console.log("Using default document requirements based on process type");const c=[{id:"doc-1",name:"Identification Document",description:"Government issued photo ID (passport, driving license)",required:!0,status:"not_submitted"},{id:"doc-2",name:"Proof of Address",description:"Utility bill or bank statement issued within the last 3 months",required:!0,status:"not_submitted"}];return t==="nursing-registration"?[...c,{id:"doc-3",name:"Education Certificate",description:"Nursing degree or qualification certificate",required:!0,status:"not_submitted"},{id:"doc-4",name:"Passport Copy",description:"Full copy of current passport",required:!0,status:"not_submitted"},{id:"doc-5",name:"English Language Test Results",description:"IELTS or OET test results (must be less than 2 years old)",required:!0,status:"not_submitted"},{id:"doc-6",name:"Mark Sheet",description:"Academic transcripts showing grades and courses completed",required:!0,status:"not_submitted"},{id:"doc-7",name:"Passport Photos",description:"Recent passport-sized photographs (less than 6 months old)",required:!0,status:"not_submitted"},{id:"doc-8",name:"Transcripts",description:"Official academic transcripts from your nursing program",required:!0,status:"not_submitted"}]:t==="insurance-application"?[...c,{id:"doc-3",name:"Insurance Application Form",description:"Completed insurance application form with signature",required:!0,status:"not_submitted"},{id:"doc-4",name:"Medical Report",description:"Recent medical report if applying for health insurance",required:!1,status:"not_submitted"}]:t==="mortgage-application"?[...c,{id:"doc-3",name:"Mortgage Application Form",description:"Completed mortgage application with signature",required:!0,status:"not_submitted"},{id:"doc-4",name:"Proof of Income",description:"Last 3 months of pay slips or bank statements",required:!0,status:"not_submitted"},{id:"doc-5",name:"Property Details",description:"Information about the property you want to purchase",required:!0,status:"not_submitted"}]:t==="employment-application"?[...c,{id:"doc-3",name:"Resume/CV",description:"Current resume or curriculum vitae",required:!0,status:"not_submitted"},{id:"doc-4",name:"Education Certificates",description:"Copies of your educational qualifications",required:!0,status:"not_submitted"},{id:"doc-5",name:"Reference Letters",description:"Professional reference letters from previous employers",required:!1,status:"not_submitted"}]:c}catch(n){throw console.error("Error fetching document requirements:",n),console.error("Process ID:",t),console.error("Stage ID:",e),n}},GV=async t=>{try{console.log(`Fetching submitted documents for lead: ${t}`);const e=et(Ee,"leadDocuments"),n=Dt(e,Ct("leadId","==",t)),r=await Et(n);if(r.empty)return console.log("No submitted documents found for this lead"),[];const s=[];return r.forEach(o=>{const a=o.data();s.push({id:o.id,name:a.name,description:a.description||"",required:a.required!==void 0?a.required:!0,status:a.status||"pending",uploadedAt:a.uploadedAt?a.uploadedAt.toDate():null,fileUrl:a.fileUrl,fileType:a.fileType,notes:a.notes})}),console.log(`Found ${s.length} submitted documents`),s}catch(e){return console.error("Error fetching lead documents:",e),[]}},qae=async(t,e,n)=>{try{console.log(`Uploading ${n.name} for lead ${t}, document ${e}`)}catch(r){throw console.error("Error uploading document:",r),r}};function QV({leadId:t}){const[e,n]=p.useState(null),[r,s]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState(null),[u,d]=p.useState(null),[f,m]=p.useState(null),[g,y]=p.useState(""),[v,x]=p.useState(""),b=C=>{if(!C)return"N/A";try{return C&&typeof C.toDate=="function"?ir(C.toDate(),"MMM d, yyyy"):ir(new Date(C),"MMM d, yyyy")}catch{return"Invalid date"}};p.useEffect(()=>{(async()=>{try{a(!0);const R=await Kf(t);if(n(R),!R){console.error("Could not find lead data for ID:",t),a(!1);return}let L=R.currentProcessId||"default",A=R.currentStageId||null;d(L),m(A);let j="Default Process",S="";try{if(L&&L!=="default"){const $=await gre(L);if($&&(j=$.name),A){const U=await xre(A);U&&(S=U.name)}}}catch($){console.error("Error fetching process/stage details:",$)}y(j),x(S),console.log(`Lead ${t} process: ${L} (${j}), stage: ${A||"none"} (${S||"none"})`);let k=[];L?(console.log(`Fetching document requirements for lead ${t}'s process ${L} and stage ${A||"none"}`),k=await ny(L,A||void 0),console.log(`Received ${k.length} document requirements for lead ${t}`)):(console.log(`No process assigned for lead ${t}, using default document requirements`),k=await ny("default")),console.log(`Fetching submitted documents for lead ${t}`);const O=await GV(t);console.log(`Found ${O.length} submitted documents for lead ${t}`);const I=new Map;O.forEach($=>{I.set($.name.toLowerCase(),$),console.log(`Submitted document: ${$.name}, status: ${$.status}`)});const N=k.map($=>{const U=I.get($.name.toLowerCase());return U?(console.log(`Merging requirement ${$.name} with submitted document (status: ${U.status})`),{...$,status:U.status,uploadedAt:U.uploadedAt,fileUrl:U.fileUrl,fileType:U.fileType,notes:U.notes}):(console.log(`Document requirement ${$.name} has not been submitted yet`),$)});console.log(`Final document list for lead ${t}: ${N.length} documents`),s(N)}catch(R){console.error("Error fetching document data:",R)}finally{a(!1)}})()},[t]);const w=C=>{switch(C){case"approved":return i.jsx(at,{className:"bg-green-500",children:"Approved"});case"rejected":return i.jsx(at,{variant:"destructive",children:"Rejected"});case"pending":return i.jsx(at,{variant:"outline",className:"border-orange-500 text-orange-500",children:"Review Pending"});case"not_submitted":return i.jsx(at,{variant:"outline",children:"Not Submitted"});default:return i.jsx(at,{variant:"outline",children:"Unknown"})}},E=async(C,R)=>{if(!R.files||!R.files[0])return;const L=R.files[0];try{c(C),await qae(t,C,L),s(A=>A.map(j=>j.id===C?{...j,status:"pending",uploadedAt:new Date,fileUrl:URL.createObjectURL(L),fileType:L.type}:j)),R.value=""}catch(A){console.error("Error uploading document:",A)}finally{c(null)}};return o?i.jsx("div",{className:"text-center py-8",children:"Loading document requirements..."}):i.jsxs("div",{className:"space-y-4",children:[!e&&i.jsxs(ws,{variant:"destructive",children:[i.jsx(vl,{className:"h-4 w-4"}),i.jsx(no,{children:"Error"}),i.jsx(_s,{children:"Lead information could not be loaded."})]}),e&&r.length===0?i.jsx(i.Fragment,{children:u&&i.jsxs(ws,{children:[i.jsx(Xd,{className:"h-4 w-4"}),i.jsx(no,{children:"No Documents Required"}),i.jsxs(_s,{children:["There are no document requirements for this lead at the current stage.",i.jsx("br",{}),i.jsxs("span",{className:"text-muted-foreground text-xs",children:["Process: ",g,v?` / Stage: ${v}`:""]})]})]})}):i.jsxs(i.Fragment,{children:[e&&u&&i.jsxs(ws,{children:[i.jsx(Xd,{className:"h-4 w-4"}),i.jsx(no,{children:"Document Requirements"}),i.jsxs(_s,{children:["Showing requirements for: ",g,v?` / Stage: ${v}`:""]})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(C=>i.jsxs(_e,{className:`${C.required?"border-blue-200":"border-gray-200"}`,children:[i.jsx(Be,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx(ze,{className:"text-base",children:C.name}),i.jsx(Xt,{children:C.description})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[w(C.status),C.required&&i.jsx(at,{variant:"outline",className:"text-xs",children:"Required"})]})]})}),i.jsxs(De,{className:"pb-2 pt-0 text-sm",children:[C.uploadedAt&&i.jsxs("p",{className:"text-muted-foreground",children:["Uploaded: ",b(C.uploadedAt)]}),C.notes&&i.jsx("p",{className:"mt-1 text-muted-foreground",children:C.notes})]}),i.jsx(gv,{className:"pt-0",children:C.status==="not_submitted"||C.status==="rejected"?i.jsxs("div",{className:"w-full",children:[i.jsx("input",{type:"file",id:`file-${C.id}`,className:"w-full",onChange:R=>R.target.files&&E(C.id,R.target)}),i.jsxs(K,{className:"w-full mt-2",disabled:l===C.id,children:[i.jsx(Rb,{className:"h-4 w-4 mr-2"}),l===C.id?"Uploading...":"Upload Document"]})]}):i.jsxs("div",{className:"flex gap-2 w-full",children:[i.jsxs(K,{variant:"outline",className:"flex-1",disabled:!C.fileUrl,onClick:()=>C.fileUrl&&window.open(C.fileUrl,"_blank"),children:[i.jsx(Xd,{className:"h-4 w-4 mr-2"}),"View Document"]}),i.jsx("input",{type:"file",id:`file-replace-${C.id}`,className:"hidden",onChange:R=>R.target.files&&E(C.id,R.target)}),i.jsx("label",{htmlFor:`file-replace-${C.id}`,className:"flex-1",children:i.jsx(K,{className:"w-full",type:"button",disabled:l===C.id,children:"Replace"})})]})})]},C.id))})]})]})}function Hae({stageHistory:t,processes:e}){const[n,r]=p.useState([]),[s,o]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const c=await Promise.all(t.map(async u=>{var d;try{let f="System";if(u.updatedBy)try{const y=await Nv(u.updatedBy);f=(y==null?void 0:y.displayName)||(y==null?void 0:y.name)||(y==null?void 0:y.email)||"Unknown User"}catch(y){console.error("Error fetching user:",u.updatedBy,y),f="Unknown User"}const m=e[u.processId],g=(d=m==null?void 0:m.stages)==null?void 0:d[u.stageId];return{...u,userName:f,processName:(m==null?void 0:m.name)||"Unknown Process",stageName:(g==null?void 0:g.name)||"Unknown Stage"}}catch(f){return console.error("Error processing activity:",f),{...u,userName:"Error",processName:"Error",stageName:"Error"}}}));r(c)}catch(c){console.error("Error enriching activity data:",c)}finally{o(!1)}})()},[t,e]);const a=l=>{if(!l)return"N/A";try{const c=l.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(c)}catch{return"Invalid date"}};return s?i.jsx("div",{className:"text-center py-4",children:"Loading activity history..."}):n.length===0?i.jsx(_e,{children:i.jsxs(De,{className:"flex flex-col items-center justify-center py-8",children:[i.jsx(ys,{className:"h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Activity History"}),i.jsx("p",{className:"text-sm text-gray-600",children:"There is no activity history for this lead yet."})]})}):i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Activity History"})}),i.jsx(De,{children:i.jsx("div",{className:"space-y-4",children:n.map((l,c)=>i.jsx("div",{className:"border-l-2 border-blue-500 pl-4 py-2",children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:l.processName}),i.jsx(Sb,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium text-blue-600",children:l.stageName})]}),l.notes&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.notes}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(Pb,{className:"h-3 w-3"}),i.jsx("span",{children:l.userName}),i.jsx(ys,{className:"h-3 w-3 ml-2"}),i.jsx("span",{children:a(l.timestamp)})]})]})})},c))})})]})}const Dv="reminders",Wae=async t=>{try{const e=Le(et(Ee,Dv)),n=ft.now(),r={...t,status:"pending",createdAt:n,updatedAt:n};return await us(e,r),{id:e.id,...r}}catch(e){throw console.error("Error creating reminder:",e),e}},Kae=async t=>{try{const e=Dt(et(Ee,Dv),Ct("leadId","==",t),Tr("dueDate","desc"));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting reminders:",e),e}},Gae=async(t,e,n)=>{try{const r={status:e,updatedAt:ft.now()};e==="completed"&&n&&(r.completedAt=ft.now(),r.completedBy=n),await tn(Le(Ee,Dv,t),r)}catch(r){throw console.error("Error updating reminder status:",r),r}},Qae=async t=>{try{await zl(Le(Ee,Dv,t))}catch(e){throw console.error("Error deleting reminder:",e),e}},Uk=async()=>{if(!("Notification"in window))return console.log("This browser does not support notifications"),!1;try{const t=await Notification.requestPermission();return console.log("Notification permission status:",t),t==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}},Yae=VL({title:Sc().min(1,"Title is required"),description:Sc().optional(),dueDate:Sc().min(1,"Due date is required"),priority:UL(["low","medium","high"]),assignedTo:Sc().min(1,"Assignee is required"),notifyBefore:$L.number().min(0,"Must be a positive number").optional()});function Xae({leadId:t}){const[e,n]=p.useState([]),[r,s]=p.useState(!0),[o,a]=p.useState(!1),{currentUser:l}=Dn(),{toast:c}=Yt(),u=bu({resolver:Eu(Yae),defaultValues:{title:"",description:"",priority:"medium",assignedTo:(l==null?void 0:l.uid)||"",notifyBefore:30}});p.useEffect(()=>{d()},[t]),p.useEffect(()=>{Uk().then(x=>{x&&c({title:"Notifications Enabled",description:"You will receive notifications for your reminders."})})},[]);const d=async()=>{try{s(!0);const x=await Kae(t);n(x)}catch(x){console.error("Error loading reminders:",x),c({title:"Error",description:"Failed to load reminders",variant:"destructive"})}finally{s(!1)}},f=async x=>{try{if(!l)return;const b=new Date(x.dueDate),w=await Wae({leadId:t,title:x.title,description:x.description,dueDate:ft.fromDate(b),priority:x.priority,assignedTo:x.assignedTo,createdBy:l.uid,notifyBefore:x.notifyBefore});c({title:"Reminder created",description:"The reminder has been created successfully"}),Notification.permission!=="granted"&&await Uk(),u.reset(),a(!1),d()}catch(b){console.error("Error creating reminder:",b),c({title:"Error",description:"Failed to create reminder",variant:"destructive"})}},m=async(x,b)=>{try{if(!l)return;await Gae(x,b,l.uid),d(),c({title:"Status updated",description:`Reminder marked as ${b}`})}catch(w){console.error("Error updating reminder status:",w),c({title:"Error",description:"Failed to update reminder status",variant:"destructive"})}},g=async x=>{try{await Qae(x),d(),c({title:"Reminder deleted",description:"The reminder has been deleted successfully"})}catch(b){console.error("Error deleting reminder:",b),c({title:"Error",description:"Failed to delete reminder",variant:"destructive"})}},y=x=>{switch(x){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},v=x=>{switch(x){case"completed":return"bg-green-500";case"overdue":return"bg-red-500";case"pending":return"bg-yellow-500";default:return"bg-gray-500"}};return r?i.jsx("div",{className:"text-center py-4",children:"Loading reminders..."}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Reminders & Follow-ups"}),i.jsxs(Cn,{open:o,onOpenChange:a,children:[i.jsx(iF,{asChild:!0,children:i.jsxs(K,{children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})}),i.jsxs(bn,{children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Create New Reminder"}),i.jsx(Gl,{children:"Create a new reminder for this lead. All fields marked with * are required."})]}),i.jsx(ju,{...u,children:i.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-4",children:[i.jsx(Wt,{control:u.control,name:"title",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Title *"}),i.jsx(Lt,{children:i.jsx(ue,{...x})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:u.control,name:"description",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Description"}),i.jsx(Lt,{children:i.jsx(kr,{...x})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:u.control,name:"dueDate",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Due Date *"}),i.jsx(Lt,{children:i.jsx(ue,{type:"datetime-local",...x})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:u.control,name:"priority",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Priority *"}),i.jsxs(sn,{onValueChange:x.onChange,defaultValue:x.value,children:[i.jsx(Lt,{children:i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select priority"})})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"low",children:"Low"}),i.jsx(Oe,{value:"medium",children:"Medium"}),i.jsx(Oe,{value:"high",children:"High"})]})]}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:u.control,name:"notifyBefore",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Notify Before (minutes)"}),i.jsx(Lt,{children:i.jsx(ue,{type:"number",...x,value:x.value??"",onChange:b=>x.onChange(b.target.value===""?null:Number(b.target.value))})}),i.jsx(Ft,{})]})}),i.jsx("div",{className:"flex justify-end",children:i.jsx(K,{type:"submit",children:"Create Reminder"})})]})})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.length===0?i.jsx(_e,{children:i.jsxs(De,{className:"flex flex-col items-center justify-center py-8",children:[i.jsx(ys,{className:"h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Reminders"}),i.jsx("p",{className:"text-sm text-gray-600",children:"There are no reminders set for this lead yet."})]})}):e.map(x=>i.jsx(_e,{children:i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-medium",children:x.title}),i.jsx(at,{className:y(x.priority),children:x.priority}),i.jsx(at,{className:v(x.status),children:x.status})]}),x.description&&i.jsx("p",{className:"text-sm text-gray-600",children:x.description}),i.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(yl,{className:"h-4 w-4"}),i.jsx("span",{children:ir(x.dueDate.toDate(),"MMM d, yyyy h:mm a")})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[x.status!=="completed"&&i.jsx(K,{variant:"outline",size:"sm",onClick:()=>m(x.id,"completed"),children:"Complete"}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>g(x.id),children:i.jsx(ma,{className:"h-4 w-4 text-red-500"})})]})]})})},x.id))})]})}const $k=[{value:0,label:"0%"},{value:15,label:"15%"},{value:18,label:"18%"}],Zae=({open:t,onOpenChange:e,lead:n,onInvoiceCreated:r})=>{const{currentUser:s}=Dn(),{toast:o}=Yt(),[a,l]=p.useState(!1),[c,u]=p.useState(18),[d,f]=p.useState([{id:"1",description:"",quantity:1,price:0,amount:0,taxRate:c,taxAmount:0,isTaxable:!0}]),[m,g]=p.useState(0),[y,v]=p.useState(0),[x,b]=p.useState(0),[w,E]=p.useState(""),[C,R]=p.useState("Payment due within 30 days of invoice date."),[L,A]=p.useState(()=>{const N=new Date;return N.setDate(N.getDate()+30),N.toISOString().split("T")[0]});p.useEffect(()=>{const N=d.reduce((V,z)=>V+z.amount,0),$=d.reduce((V,z)=>V+(z.isTaxable?z.taxAmount:0),0),U=N+$;g(N),v($),b(U)},[d]);const j=(N,$,U)=>{const V=[...d];V[N]={...V[N],[$]:U},($==="quantity"||$==="price")&&(V[N].amount=V[N].quantity*V[N].price,V[N].isTaxable&&(V[N].taxAmount=V[N].amount*V[N].taxRate/100)),$==="taxRate"&&V[N].isTaxable&&(V[N].taxAmount=V[N].amount*V[N].taxRate/100),$==="isTaxable"&&(U?V[N].taxAmount=V[N].amount*V[N].taxRate/100:V[N].taxAmount=0),f(V)},S=()=>{f([...d,{id:(d.length+1).toString(),description:"",quantity:1,price:0,amount:0,taxRate:c,taxAmount:0,isTaxable:!0}])},k=N=>{d.length>1&&f(d.filter(($,U)=>U!==N))},O=N=>{if(u(N),d.length>0&&window.confirm("Would you like to apply this tax rate to all taxable items?")){const U=d.map(V=>{if(V.isTaxable){const z=V.amount*N/100;return{...V,taxRate:N,taxAmount:z}}return V});f(U)}},I=async()=>{if(!s){o({title:"Error",description:"You must be logged in to create invoices",variant:"destructive"});return}if(d.some(N=>!N.description)){o({title:"Validation Error",description:"All items must have a description",variant:"destructive"});return}try{l(!0);const N={customerName:n.name||"",customerEmail:n.email||"",customerPhone:n.phone||"",customerAddress:n.address||"",leadId:n.id,items:d,subtotal:m,taxAmount:y,total:x,notes:w,terms:C,dueDate:ft.fromDate(new Date(L)),status:"pending",createdBy:s.uid};await kse(N),o({title:"Success",description:"Invoice created successfully"}),e(!1),r()}catch(N){console.error("Error creating invoice:",N),o({title:"Error",description:N.message||"Failed to create invoice",variant:"destructive"})}finally{l(!1)}};return i.jsx(Cn,{open:t,onOpenChange:e,children:i.jsxs(bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(En,{children:[i.jsx(jn,{children:"Create New Invoice"}),i.jsxs(Gl,{children:["Create an invoice for lead ",n.name]})]}),i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Customer Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"customerName",children:"Name"}),i.jsx(ue,{id:"customerName",value:n.name,disabled:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"customerEmail",children:"Email"}),i.jsx(ue,{id:"customerEmail",value:n.email,disabled:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"customerPhone",children:"Phone"}),i.jsx(ue,{id:"customerPhone",value:n.phone||"",disabled:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"customerAddress",children:"Address"}),i.jsx(ue,{id:"customerAddress",value:n.address||"",disabled:!0})]})]})]}),i.jsx(gn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(ne,{htmlFor:"defaultTaxRate",children:"Default Tax Rate for New Items"}),i.jsx("div",{className:"w-40",children:i.jsxs(sn,{value:c.toString(),onValueChange:N=>O(Number(N)),children:[i.jsx(Zt,{id:"defaultTaxRate",children:i.jsx(on,{placeholder:"Select tax rate"})}),i.jsx(Jt,{children:$k.map(N=>i.jsx(Oe,{value:N.value.toString(),children:N.label},N.value))})]})})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"This rate will be applied to new items by default. You can adjust tax rates per item below."})]}),i.jsx(gn,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Invoice Items"}),i.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-1",children:[i.jsx(qn,{className:"h-4 w-4"})," Add Item"]})]}),i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{className:"w-[30%]",children:"Description"}),i.jsx(Me,{className:"w-[10%]",children:"Quantity"}),i.jsx(Me,{className:"w-[15%]",children:"Price"}),i.jsx(Me,{className:"w-[15%]",children:"Amount"}),i.jsx(Me,{className:"w-[10%]",children:"Taxable"}),i.jsx(Me,{className:"w-[10%]",children:"Tax Rate"}),i.jsx(Me,{className:"w-[5%]"})]})}),i.jsx(Xs,{children:d.map((N,$)=>i.jsxs(Ut,{children:[i.jsx(Ie,{children:i.jsx(ue,{value:N.description,onChange:U=>j($,"description",U.target.value),placeholder:"Item description"})}),i.jsx(Ie,{children:i.jsx(ue,{type:"number",min:"1",value:N.quantity,onChange:U=>j($,"quantity",parseInt(U.target.value)||0)})}),i.jsx(Ie,{children:i.jsx(ue,{type:"number",min:"0",step:"0.01",value:N.price,onChange:U=>j($,"price",parseFloat(U.target.value)||0)})}),i.jsx(Ie,{children:i.jsx(ue,{type:"text",value:N.amount.toFixed(2),disabled:!0})}),i.jsx(Ie,{children:i.jsx("div",{className:"flex justify-center",children:i.jsx(ht,{checked:N.isTaxable,onCheckedChange:U=>j($,"isTaxable",U)})})}),i.jsx(Ie,{children:i.jsxs(sn,{value:N.taxRate.toString(),onValueChange:U=>j($,"taxRate",Number(U)),disabled:!N.isTaxable,children:[i.jsx(Zt,{className:"w-full",children:i.jsx(on,{placeholder:"Select tax rate"})}),i.jsx(Jt,{children:$k.map(U=>i.jsx(Oe,{value:U.value.toString(),children:U.label},U.value))})]})}),i.jsx(Ie,{children:i.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>k($),disabled:d.length===1,children:i.jsx(ma,{className:"h-4 w-4 text-red-500"})})})]},N.id))})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"flex justify-end",children:i.jsxs("div",{className:"w-1/2 space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",m.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax Amount:"}),i.jsxs("span",{children:["$",y.toFixed(2)]})]}),i.jsx(gn,{}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",x.toFixed(2)]})]})]})})}),i.jsx(gn,{}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"dueDate",children:"Due Date"}),i.jsx(ue,{id:"dueDate",type:"date",value:L,onChange:N=>A(N.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"notes",children:"Notes"}),i.jsx(kr,{id:"notes",placeholder:"Any notes to include on the invoice",value:w,onChange:N=>E(N.target.value),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"terms",children:"Terms and Conditions"}),i.jsx(kr,{id:"terms",value:C,onChange:N=>R(N.target.value),rows:3})]})]})})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),i.jsx(K,{onClick:I,disabled:a,children:a?"Creating...":"Create Invoice"})]})]})})},Jae={paid:"bg-green-100 text-green-800 hover:bg-green-200",pending:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",overdue:"bg-red-100 text-red-800 hover:bg-red-200",draft:"bg-gray-100 text-gray-800 hover:bg-gray-200"},ele=({leadId:t,onViewInvoice:e})=>{const[n,r]=p.useState([]),[s,o]=p.useState(!0),{toast:a}=Yt();p.useEffect(()=>{(async()=>{try{o(!0);const d=await Ase(t);r(d)}catch(d){console.error("Error getting invoices by lead ID:",d),a({title:"Error loading invoices",description:d.message||"Failed to load invoices",variant:"destructive"})}finally{o(!1)}})()},[t,a]);const l=u=>{if(!u)return"N/A";try{return u instanceof ft?u.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(d){return console.error("Error formatting date:",d),"Invalid date"}},c=async(u,d)=>{try{await UF(u,d),r(n.map(f=>f.id===u?{...f,status:d}:f)),a({title:"Status updated",description:`Invoice status changed to ${d}`})}catch(f){console.error("Error updating invoice status:",f),a({title:"Error updating status",description:f.message||"Failed to update invoice status",variant:"destructive"})}};return s?i.jsx("div",{className:"p-4 text-center",children:"Loading invoices..."}):n.length===0?i.jsx(_e,{className:"p-6 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No invoices found for this lead"})}):i.jsx("div",{className:"space-y-4",children:i.jsxs(Qs,{children:[i.jsx(Ys,{children:i.jsxs(Ut,{children:[i.jsx(Me,{children:"Invoice #"}),i.jsx(Me,{children:"Date"}),i.jsx(Me,{children:"Due Date"}),i.jsx(Me,{className:"text-right",children:"Amount"}),i.jsx(Me,{children:"Status"}),i.jsx(Me,{className:"text-right",children:"Actions"})]})}),i.jsx(Xs,{children:n.map(u=>i.jsxs(Ut,{children:[i.jsx(Ie,{className:"font-medium",children:u.invoiceNumber}),i.jsx(Ie,{children:l(u.createdAt)}),i.jsx(Ie,{children:l(u.dueDate)}),i.jsxs(Ie,{className:"text-right",children:["$",u.total.toFixed(2)]}),i.jsx(Ie,{children:i.jsx(at,{variant:"outline",className:Jae[u.status],children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})}),i.jsx(Ie,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[i.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e(u),title:"View Details",children:i.jsx(Ey,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"icon",title:"Download",children:i.jsx(ig,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"icon",title:"Print",children:i.jsx(Ab,{className:"h-4 w-4"})}),i.jsxs(mv,{children:[i.jsx(pv,{asChild:!0,children:i.jsx(K,{variant:"ghost",size:"icon",children:i.jsx(n6,{className:"h-4 w-4"})})}),i.jsxs(Wf,{align:"end",children:[i.jsx(lr,{onClick:()=>c(u.id,"paid"),disabled:u.status==="paid",children:"Mark as Paid"}),i.jsx(lr,{onClick:()=>c(u.id,"pending"),disabled:u.status==="pending",children:"Mark as Pending"}),i.jsx(lr,{onClick:()=>c(u.id,"overdue"),disabled:u.status==="overdue",children:"Mark as Overdue"})]})]})]})})]},u.id))})]})})},tle=()=>{const t=localStorage.getItem("brevo_sender_name")||"CRM Pro",e=localStorage.getItem("brevo_sender_email")||"";return{name:t,email:e}},nle=()=>{const t=localStorage.getItem("brevo_reply_to");return t?{email:t}:void 0},hN=()=>{const t=localStorage.getItem("brevo_api_key"),e=localStorage.getItem("brevo_sender_email");return!!t&&!!e},YV=(t,e)=>{if(!e)return t;console.log(`Adding tracking pixels for campaign ${e}`);const n=`http://localhost:3002/api/track-email-open?campaignId=${e}`,r=`https://your-production-domain.com/api/track-email-open?campaignId=${e}`,s=`<img src="${n}" width="1" height="1" alt="" style="display:none;">`,o=`<div style="background-image:url('${n}');background-repeat:no-repeat;background-position:-9999px -9999px;height:1px;width:1px;"></div>`,a=`<style>@media (max-width: 1px) { body::after { content: url('${n}'); display: none; }}</style>`,l=`
    <!-- Email tracking pixels -->
    ${s}
    ${o}
    ${a}
    <!-- Additional tracking for redundancy -->
    <img src="${r}" width="1" height="1" alt="" style="display:none;">
  `;return t.includes("</body>")?t.replace("</body>",`${l}</body>`):t.includes("</html>")?t.replace("</html>",`${l}</html>`):`${t}${l}`},XV=async(t,e,n,r,s,o)=>{if(!hN())return console.warn("Brevo is not configured. Cannot send custom email."),!1;if(t.length===0)return console.warn("No recipients specified. Cannot send email."),!1;try{console.log("sendCustomEmail: Preparing to send email to",t.length,"recipients"),console.log("sendCustomEmail: First few recipients:",t.slice(0,3)),console.log("sendCustomEmail: Using campaignId:",o||"NONE");const a=tle();if(console.log("sendCustomEmail: Using sender:",a),!a.email)return console.error("sendCustomEmail: Sender email is missing"),!1;const l=YV(n,o),c=r||l.replace(/<[^>]*>?/gm,"");console.log("sendCustomEmail: Tracking pixels added for campaign:",o);const u={sender:a,to:t,subject:e,htmlContent:l,textContent:c,replyTo:nle(),attachments:s,trackOpens:!0,trackClicks:!0,campaignId:o,headers:{"X-Campaign-ID":o||"none","X-Tracking-Enabled":"true"}};console.log("sendCustomEmail: Sending email with options:",JSON.stringify({sender:u.sender,to:u.to.slice(0,3),subject:u.subject,recipientCount:t.length,campaignId:u.campaignId,trackOpens:u.trackOpens,trackClicks:u.trackClicks,headers:u.headers},null,2));const d=await zc.sendEmail(u);return console.log("sendCustomEmail: Email sent successfully with messageId:",d.messageId),!0}catch(a){return console.error("Error sending custom email:",a),a.response&&console.error("sendCustomEmail: API error response:",{status:a.response.status,statusText:a.response.statusText,data:a.response.data}),!1}},fN=Object.freeze(Object.defineProperty({__proto__:null,addTrackingPixelsToHtml:YV,isBrevoConfigured:hN,sendCustomEmail:XV},Symbol.toStringTag,{value:"Module"})),rle=Ht.object({portalCode:Ht.string().min(6,{message:"Portal code must be at least 6 characters"}),message:Ht.string().optional()});function sle({lead:t,onSuccess:e,onCancel:n}){const[r,s]=p.useState(!1),[o,a]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(null),f=t.portalCode||C1(8),m=bu({resolver:Eu(rle),defaultValues:{portalCode:f,message:`Dear ${t.name},

We are pleased to provide you with access to your personalized portal where you can track your application status and upload required documents.

Your portal access code is: ${f}

Please visit our portal at [portal-url] and use this code along with your email address (${t.email}) to log in.

If you have any questions, please don't hesitate to contact us.

Best regards,
Your Team`}}),g=async x=>{try{if(s(!0),d(null),!hN()){d("Email service is not configured. Please configure Brevo email settings first."),s(!1);return}const b={...t,portalCode:x.portalCode,portalAccessSent:!0,portalAccessSentAt:new Date};await kL(t.id,b);const w=`${window.location.origin}/lead-portal/${t.id}`,E=x.message.replace("[portal-url]",w),R=`
        <html>
          <head>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
              .container { max-width: 600px; margin: 0 auto; padding: 20px; }
              .header { background-color: #f5f5f5; padding: 20px; border-bottom: 3px solid #007bff; }
              .content { padding: 20px; }
              .code { font-size: 18px; font-weight: bold; background-color: #f0f0f0; padding: 10px; margin: 15px 0; border-radius: 5px; border-left: 4px solid #007bff; }
              .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #777; }
              .button { display: inline-block; background-color: #007bff; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; margin: 15px 0; }
            </style>
          </head>
          <body>
            <div class="container">
              <div class="header">
                <h2>Portal Access Details</h2>
              </div>
              <div class="content">
                ${E.replace(/\n/g,"<br>").replace(/\r/g,"").trim()}
                <div class="code">
                  Your Portal Access Code: ${x.portalCode}
                </div>
                <a href="${w}" class="button">Access Your Portal</a>
              </div>
              <div class="footer">
                <p>This is an automated message. Please do not reply to this email.</p>
              </div>
            </div>
          </body>
        </html>
      `;if(!await XV([{email:t.email,name:t.name}],"Your Portal Access Details",R,E,void 0,`portal-access-${t.id}`))throw new Error("Failed to send email");console.log("Portal access email sent to:",t.email),c(!0),e&&e()}catch(b){console.error("Error sending portal access:",b),d("Failed to send portal access. Please try again.")}finally{s(!1)}},y=()=>{navigator.clipboard.writeText(m.getValues().portalCode),a(!0),setTimeout(()=>a(!1),2e3)},v=()=>{const x=C1(8);m.setValue("portalCode",x),m.setValue("message",m.getValues().message.replace(m.getValues().portalCode,x))};return i.jsxs(_e,{className:"w-full",children:[i.jsxs(Be,{children:[i.jsx(ze,{children:"Send Portal Access"}),i.jsxs(Xt,{children:["Send portal access details to ",t.name," (",t.email,")"]})]}),i.jsxs(De,{children:[u&&i.jsxs(ws,{variant:"destructive",className:"mb-4",children:[i.jsx(no,{children:"Error"}),i.jsx(_s,{children:u})]}),l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center p-3 bg-green-50 text-green-700 rounded-md",children:[i.jsx(jh,{className:"h-5 w-5 mr-2"}),i.jsx("p",{children:"Portal access details sent successfully!"})]}),i.jsxs("div",{className:"border p-4 rounded-md",children:[i.jsx("h3",{className:"font-medium mb-2",children:"Access Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsx("div",{className:"text-muted-foreground",children:"Email:"}),i.jsx("div",{children:t.email}),i.jsx("div",{className:"text-muted-foreground",children:"Portal Code:"}),i.jsx("div",{children:m.getValues().portalCode})]})]}),i.jsx(K,{onClick:n,variant:"outline",className:"w-full",children:"Done"})]}):i.jsx(ju,{...m,children:i.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[i.jsx(Wt,{control:m.control,name:"portalCode",render:({field:x})=>i.jsxs(Ot,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(Mt,{children:"Portal Access Code"}),i.jsxs(K,{type:"button",variant:"ghost",size:"sm",onClick:v,className:"h-8 px-2 text-xs",children:[i.jsx(j6,{className:"h-3 w-3 mr-1"}),"Regenerate"]})]}),i.jsxs("div",{className:"flex",children:[i.jsx(Lt,{children:i.jsx(ue,{...x})}),i.jsx(K,{type:"button",variant:"outline",size:"sm",className:"ml-2",onClick:y,children:o?i.jsx(jh,{className:"h-4 w-4"}):i.jsx(t6,{className:"h-4 w-4"})})]}),i.jsx(Nu,{children:"This code will be used by the lead to access the portal"}),i.jsx(Ft,{})]})}),i.jsx(gn,{}),i.jsx(Wt,{control:m.control,name:"message",render:({field:x})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Email Message"}),i.jsx(Lt,{children:i.jsx(kr,{rows:10,...x})}),i.jsx(Nu,{children:"Customize the message that will be sent to the lead"}),i.jsx(Ft,{})]})})]})})]}),!l&&i.jsxs(gv,{className:"flex justify-between",children:[i.jsx(K,{variant:"outline",onClick:n,children:"Cancel"}),i.jsxs(K,{onClick:m.handleSubmit(g),disabled:r,children:[i.jsx(Nh,{className:"h-4 w-4 mr-2"}),r?"Sending...":"Send Access Email"]})]})]})}function ZV({leadId:t,lead:e,isLeadPortal:n=!1}){const[r,s]=p.useState([]),[o,a]=p.useState(""),[l,c]=p.useState(!0),[u,d]=p.useState(!1),[f,m]=p.useState(!1),[g,y]=p.useState([]),[v,x]=p.useState(null),[b,w]=p.useState("Representative"),E=p.useRef(null),{currentUser:C}=Dn();pr();const R=p.useRef(null),L=n?"lead":"representative",A=p.useCallback(async()=>{try{if(c(!0),await Kre(t,L),!n&&(e!=null&&e.assignedTo))try{const N=await Nv(e.assignedTo);N&&w(N.displayName||N.name||N.email||"Representative")}catch(N){console.error("Error fetching representative info:",N)}}catch(N){console.error("Error in initial message setup:",N),x("Failed to load messages. Please try again."),c(!1)}},[t,L,n,e]);p.useEffect(()=>{let N=null;return(async()=>{try{await A(),console.log(`Setting up message subscription for lead: ${t}, senderType: ${L}`),N=Wre(t,U=>{console.log(`Received ${U.length} messages in subscription update`),console.log("Messages data:",JSON.stringify(U.map(V=>({id:V.id,message:V.message,senderType:V.senderType,senderName:V.senderName})))),s(U),c(!1)})}catch(U){console.error("Error setting up message subscription:",U),x("Failed to connect to messaging service. Please refresh the page."),c(!1)}})(),()=>{console.log("Cleaning up message subscription"),N&&N()}},[t,A]),p.useEffect(()=>{const N=setTimeout(()=>{var $;($=E.current)==null||$.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(N)},[r]);const j=async()=>{if(!(!o.trim()&&g.length===0))try{d(!0);const N=n?t:(C==null?void 0:C.uid)||"unknown",$=n?(e==null?void 0:e.name)||"Lead":(C==null?void 0:C.displayName)||(C==null?void 0:C.email)||"Representative",U={id:`temp-${Date.now()}`,leadId:t,senderId:N,senderName:$,senderType:L,message:o,timestamp:{toDate:()=>new Date},read:!1,attachments:g};s(V=>[...V,U]),a(""),y([]),await Hre(t,N,$,L,o,g)}catch(N){console.error("Error sending message:",N),x("Failed to send message. Please try again.")}finally{d(!1)}},S=async N=>{const $=N.target.files;if(!(!$||$.length===0))try{m(!0);const U=Array.from($).map(async z=>{const F=z.name.split(".").pop()||"",H=`${(e==null?void 0:e.name.replace(/\s+/g,"-").toLowerCase())||"lead"}-${Date.now()}.${F}`,Y=`messages/${t}/${H}`,q=J0(Nre,Y),W=QY(q,z);return new Promise((re,je)=>{W.on("state_changed",Re=>{const Pe=Re.bytesTransferred/Re.totalBytes*100;console.log(`Upload progress: ${Pe}%`)},Re=>{console.error("Error uploading file:",Re),je(Re)},async()=>{const Re=await LO(W.snapshot.ref);re({fileName:z.name,fileUrl:Re,fileType:z.type})})})}),V=await Promise.all(U);y([...g,...V])}catch(U){console.error("Error uploading files:",U),x("Failed to upload files. Please try again.")}finally{m(!1),R.current&&(R.current.value="")}},k=N=>{y(g.filter(($,U)=>U!==N))},O=N=>N.startsWith("image/")?i.jsx(c6,{className:"h-4 w-4"}):i.jsx(o6,{className:"h-4 w-4"}),I=N=>{if(!N)return"Just now";try{return N.toDate&&typeof N.toDate=="function"?ir(N.toDate(),"MMM d, h:mm a"):N instanceof Date?ir(N,"MMM d, h:mm a"):typeof N=="number"?ir(new Date(N),"MMM d, h:mm a"):"Just now"}catch($){return console.error("Error formatting timestamp:",$,N),"Just now"}};return i.jsxs(_e,{className:"flex flex-col h-full max-h-[600px]",children:[i.jsx(Be,{className:"pb-3",children:i.jsx(ze,{children:n?`Chat with ${b}`:`Chat with ${(e==null?void 0:e.name)||"Lead"}`})}),i.jsxs(De,{className:"flex-1 overflow-hidden p-0",children:[v&&i.jsxs("div",{className:"bg-red-50 text-red-500 p-3 text-sm flex items-center",children:[i.jsx(vl,{className:"h-4 w-4 mr-2"}),v]}),i.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 border-b",children:"Messages are stored securely. Please do not share sensitive personal information."}),i.jsx("div",{className:"overflow-y-auto h-[350px] p-4",children:l?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Loading messages..."})}):r.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-3",children:i.jsx(c0,{className:"h-5 w-5 text-primary"})}),i.jsx("p",{className:"text-sm font-medium mb-1",children:"No messages yet"}),i.jsx("p",{className:"text-xs text-gray-500 max-w-[250px]",children:n?"Start a conversation with your representative.":"Start a conversation with this lead."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"px-2 py-1 text-xs text-gray-500 text-center",children:["Your messages appear on the right, received messages on the left.",i.jsx("br",{}),"Current user type: ",L]}),r.map((N,$)=>(console.log(`Rendering message ${$}:`,{msgId:N.id,msgSenderType:N.senderType,currentSenderType:L,isSentByCurrentUser:N.senderType===L}),i.jsx("div",{className:`flex ${N.senderType===L?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${N.senderType===L?"bg-blue-600 text-white shadow-sm":"bg-muted"}`,children:[i.jsxs("div",{className:"text-sm mb-1 flex justify-between",children:[i.jsx("span",{className:"font-medium",children:N.senderName}),i.jsx("span",{className:"text-xs opacity-80",children:N.senderType==="lead"?"(Lead)":"(Rep)"})]}),i.jsx("div",{className:"font-medium",children:N.message}),N.attachments&&N.attachments.length>0&&i.jsx("div",{className:"mt-2 space-y-2",children:N.attachments.map((U,V)=>i.jsxs("a",{href:U.fileUrl,target:"_blank",rel:"noopener noreferrer",className:`flex items-center p-2 rounded ${N.senderType===L?"bg-blue-700 text-white hover:bg-blue-800":"bg-gray-200 hover:bg-gray-300"}`,children:[O(U.fileType),i.jsx("span",{className:"ml-2 text-sm truncate",children:U.fileName})]},V))}),i.jsxs("div",{className:`flex items-center justify-end mt-1 text-xs ${N.senderType===L?"text-blue-100":"opacity-80"}`,children:[I(N.timestamp),N.read&&i.jsx(e6,{className:"h-3 w-3 ml-1"})]})]})},N.id||$))),i.jsx("div",{ref:E})]})})]}),i.jsx(gn,{}),g.length>0&&i.jsx("div",{className:"px-4 py-2 flex flex-wrap gap-2",children:g.map((N,$)=>i.jsxs("div",{className:"flex items-center bg-gray-100 rounded px-2 py-1 text-xs",children:[O(N.fileType),i.jsx("span",{className:"ml-2 max-w-[150px] truncate",children:N.fileName}),i.jsx("button",{onClick:()=>k($),className:"ml-1 text-gray-500 hover:text-gray-700",children:i.jsx(Ll,{className:"h-3 w-3"})})]},$))}),i.jsx(gv,{className:"pt-3 pb-4 px-4",children:i.jsxs("div",{className:"flex w-full items-end gap-2",children:[i.jsx(kr,{placeholder:"Type your message...",value:o,onChange:N=>a(N.target.value),className:"min-h-[80px] flex-1",onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),j())}}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(uu,{children:i.jsxs(kh,{children:[i.jsx(Ah,{asChild:!0,children:i.jsx(K,{type:"button",size:"icon",variant:"outline",onClick:()=>{var N;return(N=R.current)==null?void 0:N.click()},disabled:f,children:f?i.jsx(ys,{className:"h-4 w-4 animate-spin"}):i.jsx(g6,{className:"h-4 w-4"})})}),i.jsx(du,{children:i.jsx("p",{children:"Attach files"})})]})}),i.jsx(ue,{type:"file",ref:R,className:"hidden",onChange:S,multiple:!0}),i.jsx(uu,{children:i.jsxs(kh,{children:[i.jsx(Ah,{asChild:!0,children:i.jsx(K,{type:"button",size:"icon",onClick:j,disabled:u||o.trim()===""&&g.length===0,children:u?i.jsx(ys,{className:"h-4 w-4 animate-spin"}):i.jsx(c0,{className:"h-4 w-4"})})}),i.jsx(du,{children:i.jsx("p",{children:"Send message"})})]})})]})]})})]})}const ile=()=>{var kn,Hr;const{leadId:t}=tE(),[e,n]=p.useState(null),[r,s]=p.useState(!0),[o,a]=p.useState({}),[l,c]=p.useState([]),u=pr(),{toast:d}=Yt(),[f,m]=p.useState(!1),[g,y]=p.useState({name:"",email:"",phone:"",address:"",source:"",assignedTo:"unassigned"}),[v,x]=p.useState(!1),[b,w]=p.useState(null),[E,C]=p.useState(!1),[R,L]=p.useState(0),[A,j]=p.useState("Unassigned"),[S,k]=p.useState(0),[O,I]=p.useState(!1),{currentUser:N}=Dn(),[$,U]=p.useState([]),[V,z]=p.useState(""),[F,H]=p.useState(!1),[Y,q]=p.useState(!1),[W,re]=p.useState(null),[je,Re]=p.useState({});p.useEffect(()=>{(async()=>{if(!t){u("/leads");return}try{s(!0);const[B,X,de]=await Promise.all([Kf(t),Qu(),KF()]);if(c(de),B){n(B);const le=(await Promise.all(X.map(async ke=>{const $e=await Ia(ke.id);return{...ke,stages:$e.reduce((tt,Ye)=>({...tt,[Ye.id]:Ye}),{})}}))).reduce((ke,$e)=>({...ke,[$e.id]:$e}),{});console.log("Processes loaded:",JSON.stringify(le,null,2)),a(le)}else d({title:"Lead not found",description:"The requested lead could not be found",variant:"destructive"}),u("/leads")}catch(B){console.error("Error loading lead data:",B),d({title:"Error",description:"Failed to load lead data",variant:"destructive"})}finally{s(!1)}})()},[t,u,d]),p.useEffect(()=>{e&&y({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",source:e.source||"",assignedTo:e.assignedTo||"unassigned"})},[e]),p.useEffect(()=>{(async()=>{if(e!=null&&e.assignedTo)try{const B=await Nv(e.assignedTo);B&&j(B.displayName||B.email||B.name||"Unknown User")}catch(B){console.error("Error fetching assigned user:",B),j("Unknown User")}else j("Unassigned")})()},[e==null?void 0:e.assignedTo]),p.useEffect(()=>{const B=(()=>{if(!(e!=null&&e.currentProcessId)||!o[e.currentProcessId])return 0;const X=o[e.currentProcessId],de=Object.values(X.stages);if(de.length===0||!e.currentStageId)return 0;const le=de.sort((ke,$e)=>ke.order-$e.order).findIndex(ke=>ke.id===e.currentStageId);return le===-1?0:Math.round((le+1)/de.length*100)})();k(B)},[e==null?void 0:e.currentProcessId,e==null?void 0:e.currentStageId,o]),p.useEffect(()=>{(async()=>{if(t)try{const B=await ew(t);U(B||[])}catch(B){console.error("Error loading notes:",B),d({title:"Error",description:"Failed to load notes",variant:"destructive"})}})()},[t]),p.useEffect(()=>{const M=async()=>{const B=[...new Set($.map(de=>de.createdBy))],X={};for(const de of B){if(de==="System"){X[de]="System";continue}try{const pe=l.find(le=>le.email===de);if(pe)X[de]=pe.displayName||pe.name||de;else{const le=await Xse(de);le?X[de]=le.displayName||le.name||de:X[de]=de}}catch(pe){console.error(`Error fetching user details for ${de}:`,pe),X[de]=de}}Re(X)};$.length>0&&M()},[$,l]);const Pe=async M=>{e&&n({...e,currentProcessId:M,currentStageId:void 0})},xe=async M=>{e&&n({...e,currentStageId:M})},Q=()=>{x(!0)},ce=()=>{d({title:"Invoice Created",description:"The invoice has been successfully created"}),L(M=>M+1)},P=M=>{w(M),C(!0)},Z=M=>{if(!M)return"N/A";try{const B=M&&typeof M.toDate=="function"?M.toDate():new Date(M);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(B)}catch{return"Invalid date"}},J=()=>{m(!0)},we=async()=>{if(!(!e||!t))try{const M=g.assignedTo==="unassigned"?null:g.assignedTo;await kL(t,{...e,...g,assignedTo:M,updatedAt:ft.fromDate(new Date)}),n(B=>B?{...B,...g,assignedTo:M}:null),d({title:"Success",description:"Lead details updated successfully"}),m(!1)}catch(M){console.error("Error updating lead:",M),d({title:"Error",description:"Failed to update lead details",variant:"destructive"})}},mt=async()=>{if(!(!V.trim()||!t)){H(!0);try{await eee(t,V,(N==null?void 0:N.email)||"System"),z(""),q(!1);const M=await ew(t);U(M||[]),d({title:"Success",description:"Note added successfully"})}catch(M){console.error("Error adding note:",M),d({title:"Error",description:"Failed to add note",variant:"destructive"})}finally{H(!1)}}},gr=async()=>{if(!(!W||!t))try{await tee(t,W.id);const M=await ew(t);U(M||[]),d({title:"Success",description:"Note deleted successfully"})}catch(M){console.error("Error deleting note:",M),d({title:"Error",description:"Failed to delete note",variant:"destructive"})}finally{re(null)}};return r?i.jsx("div",{className:"container mx-auto py-8",children:i.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:i.jsx("p",{children:"Loading lead details..."})})}):e?i.jsxs("div",{className:"container mx-auto py-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(K,{variant:"outline",size:"sm",onClick:()=>u("/leads"),className:"gap-2",children:[i.jsx(ou,{className:"h-4 w-4"}),"Back to Leads"]}),i.jsxs("h1",{className:"text-2xl font-semibold",children:["Lead ",(e==null?void 0:e.name)||t,(e==null?void 0:e.status)&&i.jsx(at,{className:"ml-2",variant:e.status==="active"?"default":e.status==="converted"?"outline":"secondary",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(K,{variant:"outline",onClick:()=>I(!0),className:"gap-2",children:[i.jsx(Nh,{className:"h-4 w-4"}),"Send Portal Access"]}),i.jsxs(K,{variant:"outline",onClick:()=>m(!0),className:"gap-2",children:[i.jsx(au,{className:"h-4 w-4"}),"Edit Lead Details"]}),i.jsxs(K,{onClick:Q,className:"gap-2",children:[i.jsx(Wi,{className:"h-4 w-4"}),"Create Invoice"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(_e,{className:"md:col-span-1",children:[i.jsx(Be,{children:i.jsx(ze,{children:"Lead Information"})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(Nh,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsx("span",{children:e.email||"No email provided"})]}),i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(zR,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsx("span",{children:e.phone||"No phone provided"})]}),i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(f6,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsx("span",{children:e.address||"No address provided"})]}),i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(Pb,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{children:["Assigned to: ",A]})]})]}),i.jsx(gn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Source"}),i.jsx("p",{className:"text-sm",children:e.source||"Unknown"})]}),i.jsx(gn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(ys,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{children:["Created: ",Z(e.createdAt)]})]}),i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(ys,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{children:["Updated: ",Z(e.updatedAt)]})]})]}),i.jsx(gn,{}),i.jsx(K,{className:"w-full",variant:"outline",onClick:J,children:"Edit Lead Details"})]})]}),i.jsx(Cn,{open:f,onOpenChange:m,children:i.jsxs(bn,{className:"sm:max-w-[425px]",children:[i.jsx(En,{children:i.jsx(jn,{children:"Edit Lead Details"})}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"name",children:"Name"}),i.jsx(ue,{id:"name",value:g.name,onChange:M=>y(B=>({...B,name:M.target.value}))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email"}),i.jsx(ue,{id:"email",type:"email",value:g.email,onChange:M=>y(B=>({...B,email:M.target.value}))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"phone",children:"Phone"}),i.jsx(ue,{id:"phone",value:g.phone,onChange:M=>y(B=>({...B,phone:M.target.value}))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"address",children:"Address"}),i.jsx(ue,{id:"address",value:g.address,onChange:M=>y(B=>({...B,address:M.target.value}))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"source",children:"Source"}),i.jsx(ue,{id:"source",value:g.source,onChange:M=>y(B=>({...B,source:M.target.value}))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(ne,{htmlFor:"assignedTo",children:"Assigned To"}),i.jsxs(sn,{value:g.assignedTo,onValueChange:M=>y(B=>({...B,assignedTo:M})),children:[i.jsx(Zt,{children:i.jsx(on,{placeholder:"Select a user"})}),i.jsxs(Jt,{children:[i.jsx(Oe,{value:"unassigned",children:"Unassigned"}),l.map(M=>i.jsx(Oe,{value:M.id,children:M.displayName||M.email},M.id))]})]})]})]}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),i.jsx(K,{onClick:we,children:"Save Changes"})]})]})}),i.jsx("div",{className:"md:col-span-2 space-y-6",children:i.jsxs(Ba,{defaultValue:"details",children:[i.jsxs(xo,{className:"w-full border-b pb-0",children:[i.jsx(kt,{value:"details",children:"Details"}),i.jsx(kt,{value:"documents",children:"Documents"}),i.jsx(kt,{value:"messages",children:"Messages"}),i.jsx(kt,{value:"activity",children:"Activity"}),i.jsx(kt,{value:"invoices",children:"Invoices"}),i.jsx(kt,{value:"reminders",children:"Reminders"}),i.jsx(kt,{value:"notes",children:"Notes"})]}),i.jsxs(At,{value:"details",className:"space-y-6",children:[i.jsx(_e,{children:i.jsx(De,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Lead Progress"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Current Stage:"}),i.jsx(at,{variant:"secondary",children:e!=null&&e.currentStageId?((Hr=(kn=o[e.currentProcessId])==null?void 0:kn.stages[e.currentStageId])==null?void 0:Hr.name)||"Unknown Stage":"Not Started"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[i.jsx("span",{children:"Start"}),i.jsxs("span",{children:[S,"% Complete"]}),i.jsx("span",{children:"Complete"})]}),i.jsx(to,{value:S,className:"h-2 bg-slate-200",indicatorClassName:"bg-primary transition-all"})]})]})})}),i.jsx(zae,{leadId:t,onProcessSelected:Pe,onStageChanged:xe})]}),i.jsx(At,{value:"documents",children:i.jsx(QV,{leadId:t||""})}),i.jsx(At,{value:"messages",children:e&&i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx(ze,{children:"Lead Messages"})}),i.jsx(De,{children:i.jsx(ZV,{leadId:t||"",lead:e,isLeadPortal:!1})})]})}),i.jsx(At,{value:"activity",children:e&&i.jsx(Hae,{stageHistory:e.stageHistory,processes:o})}),i.jsxs(At,{value:"invoices",children:[i.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Lead Invoices"}),i.jsxs(K,{onClick:Q,className:"flex items-center gap-1",children:[i.jsx(qn,{className:"h-4 w-4"})," Create Invoice"]})]}),i.jsx(ele,{leadId:t,onViewInvoice:P},`invoice-list-${R}`)]}),i.jsx(At,{value:"reminders",children:e&&i.jsx(Xae,{leadId:t})}),i.jsx(At,{value:"notes",children:i.jsxs(_e,{children:[i.jsxs(Be,{className:"flex flex-row items-center justify-between",children:[i.jsx(ze,{children:"Notes"}),i.jsxs(K,{onClick:()=>q(!0),children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),i.jsx(De,{children:$.length===0?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No notes yet. Click 'Add Note' to create one."}):i.jsx("div",{className:"space-y-4",children:$.map(M=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:Z(M.createdAt)}),i.jsx("span",{className:"text-sm font-medium ml-2",children:je[M.createdBy]||M.createdBy})]}),i.jsx(K,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>re({id:M.id,content:M.content}),children:i.jsx(ma,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"whitespace-pre-line",children:M.content})]},M.id))})})]})})]})})]}),e&&i.jsx(Zae,{open:v,onOpenChange:x,lead:e,onInvoiceCreated:ce}),i.jsx($F,{invoice:b,open:E,onOpenChange:C}),i.jsx(Cn,{open:O,onOpenChange:I,children:i.jsxs(bn,{className:"max-w-2xl max-h-[90vh] overflow-auto",children:[i.jsx(En,{children:i.jsx(jn,{children:"Send Portal Access"})}),e&&i.jsx(sle,{lead:e,onSuccess:()=>I(!1),onCancel:()=>I(!1)})]})}),i.jsx(Cn,{open:Y,onOpenChange:q,children:i.jsxs(bn,{children:[i.jsx(En,{children:i.jsx(jn,{children:"Add Note"})}),i.jsx("div",{className:"space-y-4 py-4",children:i.jsx(kr,{placeholder:"Enter your note...",value:V,onChange:M=>z(M.target.value),className:"min-h-[100px]"})}),i.jsxs(dr,{children:[i.jsx(K,{variant:"outline",onClick:()=>q(!1),disabled:F,children:"Cancel"}),i.jsx(K,{onClick:mt,disabled:F||!V.trim(),children:F?"Adding...":"Add Note"})]})]})}),i.jsx(NF,{open:!!W,onOpenChange:M=>!M&&re(null),children:i.jsxs(Yj,{children:[i.jsxs(Xj,{children:[i.jsx(Jj,{children:"Delete Note"}),i.jsxs(eN,{children:["Are you sure you want to delete this note? This action cannot be undone.",i.jsx("div",{className:"mt-2 p-2 bg-gray-100 rounded",children:i.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:W==null?void 0:W.content})})]})]}),i.jsxs(Zj,{children:[i.jsx(nN,{children:"Cancel"}),i.jsx(tN,{className:"bg-red-500 hover:bg-red-600",onClick:gr,children:"Delete"})]})]})})]}):i.jsx("div",{className:"container mx-auto py-8",children:i.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:i.jsx("p",{children:"Lead not found"})})})},ole=Ht.object({email:Ht.string().email({message:"Please enter a valid email address"}),portalCode:Ht.string().min(6,{message:"Portal code must be at least 6 characters"})}),ale=()=>{const t=pr(),[e,n]=p.useState(null),[r,s]=p.useState(!1),o=bu({resolver:Eu(ole),defaultValues:{email:"",portalCode:""}}),a=async l=>{try{s(!0),n(null);const u=(await Mg()).find(d=>d.email.toLowerCase()===l.email.toLowerCase()&&d.portalCode===l.portalCode);u?(sessionStorage.setItem("leadPortalId",u.id),t(`/lead-portal/${u.id}`)):n("Invalid email or portal code. Please try again.")}catch(c){console.error("Login error:",c),n("An error occurred. Please try again later.")}finally{s(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"mx-auto mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Lead Portal Login"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your email and portal code to access your account"})]}),e&&i.jsxs(ws,{variant:"destructive",className:"mb-6",children:[i.jsx(vl,{className:"h-4 w-4"}),i.jsx(no,{children:"Error"}),i.jsx(_s,{children:e})]}),i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm border",children:[i.jsx(ju,{...o,children:i.jsxs("form",{onSubmit:o.handleSubmit(a),className:"space-y-6",children:[i.jsx(Wt,{control:o.control,name:"email",render:({field:l})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Email Address"}),i.jsx(Lt,{children:i.jsx(ue,{placeholder:"yourname@example.com",...l})}),i.jsx(Ft,{})]})}),i.jsx(Wt,{control:o.control,name:"portalCode",render:({field:l})=>i.jsxs(Ot,{children:[i.jsx(Mt,{children:"Portal Code"}),i.jsx(Lt,{children:i.jsx(ue,{type:"password",placeholder:"Your portal access code",...l})}),i.jsx(Ft,{})]})}),i.jsx(K,{type:"submit",className:"w-full",disabled:r,children:r?"Logging in...":"Access Portal"})]})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Don't have a portal access code? Please contact your representative."})})]})]})})},lle=()=>{const{leadId:t}=tE(),e=pr(),[n,r]=p.useState(null),[s,o]=p.useState({}),[a,l]=p.useState(!0),[c,u]=p.useState([]),[d,f]=p.useState([]),[m,g]=p.useState(0),[y,v]=p.useState([]),[x,b]=p.useState(null),[w,E]=p.useState(null);p.useEffect(()=>{(async()=>{if(t)try{l(!0);const S=await Kf(t);if(!S)throw new Error("Lead not found");if(r(S),sessionStorage.getItem("leadPortalId")!==t){e("/lead-login");return}const O=await Qu(),I={};if((await Promise.all(O.map(async W=>{const re=await Ia(W.id);return{...W,stages:re.reduce((je,Re)=>({...je,[Re.id]:Re}),{})}}))).forEach(W=>{I[W.id]=W}),o(I),S.currentProcessId){const W=I[S.currentProcessId];if(W&&(b(W),S.currentStageId)){const re=W.stages[S.currentStageId];re&&(E(re),C(W,S.currentStageId))}}const $=S.currentProcessId||"default",U=S.currentStageId;let V=[];$?V=await ny($,U||void 0):V=await ny("default");const z=await GV(t),F=new Map;z.forEach(W=>{F.set(W.name.toLowerCase(),W)});const H=V.map(W=>{const re=F.get(W.name.toLowerCase());return re?{...W,status:re.status,uploadedAt:re.uploadedAt,fileUrl:re.fileUrl,fileType:re.fileType,notes:re.notes}:W});u(H);const Y=[],q=H.filter(W=>W.status==="not_submitted"||W.status==="rejected");if(q.length>0){const W=new Date;W.setDate(W.getDate()+14),Y.push({title:`${q.length} Document${q.length>1?"s":""} Due`,date:ir(W,"MMMM d, yyyy"),type:"deadline"})}if(x&&w){const W=Object.values(x.stages).sort((je,Re)=>je.order-Re.order),re=W.findIndex(je=>je.id===w.id);if(re<W.length-1){const je=W[re+1],Re=new Date,Pe=re<2?14:21;Re.setDate(Re.getDate()+Pe),Y.push({title:`Next Stage: ${je.name}`,date:ir(Re,"MMMM d, yyyy"),type:"meeting"})}}if(S.assignedTo){const W=new Date;W.setDate(W.getDate()+7);let re="Your Representative";typeof S.assignedTo=="string"&&(/^[a-zA-Z\s]+$/.test(S.assignedTo)&&S.assignedTo.length<20?re=S.assignedTo:re="Your Representative"),Y.push({title:`Meeting with ${re}`,date:ir(W,"MMMM d, yyyy"),type:"meeting"})}Y.sort((W,re)=>{const je=new Date(W.date),Re=new Date(re.date);return je.getTime()-Re.getTime()}),f(Y)}catch(S){console.error("Error loading lead data:",S)}finally{l(!1)}})()},[t,e]);const C=(j,S)=>{const k=Object.values(j.stages).sort((I,N)=>I.order-N.order),O=k.findIndex(I=>I.id===S);if(O!==-1){const I=Math.round((O+1)/k.length*100);g(I);const N=k.map(($,U)=>({name:$.name,completed:U<=O,percentage:U<O?100:U===O?I:0}));v(N)}},R=()=>{sessionStorage.removeItem("leadPortalId"),e("/lead-login")},L=j=>{if(!j)return"N/A";try{return j&&typeof j.toDate=="function"?ir(j.toDate(),"MMMM d, yyyy"):ir(new Date(j),"MMMM d, yyyy")}catch(S){return console.error("Error formatting date:",S),"Invalid date"}},A=j=>{switch(j){case"approved":return{color:"bg-green-500",label:"Verified",textColor:"bg-green-100 text-green-800"};case"pending":return{color:"bg-amber-500",label:"Pending",textColor:"bg-amber-100 text-amber-800"};case"rejected":return{color:"bg-red-500",label:"Rejected",textColor:"bg-red-100 text-red-800"};case"not_submitted":default:return{color:"bg-red-500",label:"Missing",textColor:"bg-red-100 text-red-800"}}};return a?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("p",{children:"Loading your application data..."})}):n?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("header",{className:"bg-white shadow-sm py-4 px-6 flex justify-between items-center",children:[i.jsx("h1",{className:"text-lg font-medium",children:"Lead Portal"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(K,{variant:"ghost",size:"sm",className:"text-gray-600",children:[i.jsx(kb,{className:"h-4 w-4 mr-2"}),"Messages"]}),i.jsxs(K,{variant:"ghost",size:"sm",className:"text-gray-600",onClick:R,children:[i.jsx(BR,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),i.jsxs("main",{className:"container mx-auto py-8 px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-2xl font-bold mb-1",children:["Welcome, ",n.name]}),i.jsx("p",{className:"text-gray-500",children:"Here's your application status"})]}),i.jsxs(Ba,{defaultValue:"overview",children:[i.jsxs(xo,{className:"mb-6",children:[i.jsx(kt,{value:"overview",children:"Overview"}),i.jsx(kt,{value:"documents",children:"Documents"}),i.jsx(kt,{value:"messages",children:"Messages"})]}),i.jsxs(At,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(_e,{children:i.jsxs(De,{className:"pt-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-4",children:"Application Progress"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:x?`Current Process: ${x.name}`:"No active process"}),y.length>0?i.jsx(i.Fragment,{children:y.map((j,S)=>i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-sm font-medium",children:j.name}),j.completed?i.jsxs("div",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:[j.percentage,"%"]}):i.jsxs("div",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:[j.percentage,"%"]})]}),i.jsx(to,{value:j.percentage,className:"h-2"})]},S))}):i.jsx("p",{className:"text-sm text-gray-500",children:"No process steps available"}),i.jsxs("div",{className:"mt-6 pt-6 border-t",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Current Stage"}),w?i.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[i.jsx("div",{className:"font-medium text-blue-700",children:w.name}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.description||"No description available"})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"No active stage"})]})]})}),i.jsx(_e,{children:i.jsxs(De,{className:"pt-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-4",children:"Application Summary"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-amber-500 font-medium",children:n.status||"In Progress"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Status"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:L(n.createdAt)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Submitted on"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["A-",n.id.substring(0,5)]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Reference ID"})]})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-1",children:"Contact Information"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-500",children:"Email:"})," ",n.email]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",n.phone||"Not provided"]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-500",children:"Address:"})," ",n.address||"Not provided"]})]})]})}),n.source&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-sm font-medium mb-1",children:"Source"}),i.jsx("p",{className:"text-sm",children:n.source})]}),i.jsx(gn,{className:"my-4"}),i.jsxs(K,{className:"w-full justify-center",onClick:()=>{const j={...n,process:(x==null?void 0:x.name)||"None",stage:(w==null?void 0:w.name)||"None",progress:m,documentsCompleted:c.filter(S=>S.status==="approved").length,totalDocuments:c.length};console.log("Full Application Details:",j),alert(`Application ID: A-${n.id.substring(0,5)}
Status: ${n.status||"In Progress"}
Process: ${(x==null?void 0:x.name)||"None"}
Stage: ${(w==null?void 0:w.name)||"None"}
Documents: ${c.filter(S=>S.status==="approved").length}/${c.length} completed`)},children:[i.jsx("span",{className:"mr-2",children:"View Full Application"}),i.jsx($R,{size:16})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(_e,{children:i.jsxs(De,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Document Status"}),i.jsx(K,{variant:"ghost",size:"sm",asChild:!0,children:i.jsxs(yn,{to:"#documents",className:"text-primary hover:bg-primary/10",children:[i.jsx("span",{className:"mr-2",children:"View All"}),i.jsx(Sb,{className:"h-4 w-4"})]})})]}),i.jsxs("div",{className:"space-y-4",children:[c.length>0?c.slice(0,5).map((j,S)=>{const k=A(j.status);return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${k.color}`}),i.jsx("span",{children:j.name})]}),i.jsx(uu,{children:i.jsxs(kh,{children:[i.jsx(Ah,{asChild:!0,children:i.jsx("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${k.textColor}`,children:k.label})}),i.jsx(du,{children:j.status==="approved"?`Verified on ${j.uploadedAt?ir(j.uploadedAt,"MMM d, yyyy"):"N/A"}`:j.status==="pending"?`Uploaded on ${j.uploadedAt?ir(j.uploadedAt,"MMM d, yyyy"):"N/A"}, awaiting verification`:j.status==="rejected"?`Rejected on ${j.uploadedAt?ir(j.uploadedAt,"MMM d, yyyy"):"N/A"}. Please resubmit.`:"This document is missing and needs to be uploaded"})]})})]},S)}):i.jsx("p",{className:"text-sm text-gray-500",children:"No document requirements yet"}),c.length>5&&i.jsxs("p",{className:"text-sm text-blue-500 font-medium",children:["+",c.length-5," more documents"]})]})]})}),i.jsx(_e,{children:i.jsxs(De,{className:"pt-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsx("h2",{className:"text-lg font-medium",children:"Upcoming Events"})}),i.jsx("div",{className:"space-y-4",children:d.length>0?d.map((j,S)=>i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-full mr-3 ${j.type==="deadline"?"bg-red-100":"bg-blue-100"}`,children:j.type==="deadline"?i.jsx(vl,{className:`h-4 w-4 ${j.type==="deadline"?"text-red-500":"text-blue-500"}`}):i.jsx(yl,{className:"h-4 w-4 text-blue-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:j.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.date})]})]},S)):i.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming events"})})]})})]})]}),i.jsx(At,{value:"documents",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ze,{children:"Document Requirements"}),i.jsxs(at,{variant:"outline",children:[c.filter(j=>j.status==="approved").length,"/",c.length," Complete"]})]})}),i.jsx(De,{children:i.jsx(QV,{leadId:t||""})})]})}),i.jsx(At,{value:"messages",children:i.jsxs(_e,{children:[i.jsx(Be,{children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(ze,{children:"Messages"})})}),i.jsx(De,{children:n&&i.jsx(ZV,{leadId:t||"",lead:n,isLeadPortal:!0})})]})})]})]})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx(vl,{className:"h-16 w-16 text-red-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Access Denied"}),i.jsx("p",{children:"Lead not found or you don't have access to this portal."}),i.jsx(K,{onClick:()=>e("/lead-login"),children:"Return to Login"})]})})};function cle(){p.useEffect(()=>{const t=localStorage.getItem("brevo_api_key");t?(zc.setApiKey(t),console.log("Brevo email service initialized")):console.log("Brevo API key not found in localStorage")},[])}const ule=new DP,dle=()=>(cle(),i.jsx(OP,{client:ule,children:i.jsx(VO,{children:i.jsxs(iX,{children:[i.jsx(oX,{}),i.jsx(aX,{}),i.jsxs(uu,{children:[i.jsx(eP,{}),i.jsx(MB,{}),i.jsx(kq,{children:i.jsxs(_q,{children:[i.jsx(ot,{path:"/login",element:i.jsx(Lse,{})}),i.jsx(ot,{path:"/signup",element:i.jsx(Fse,{})}),i.jsx(ot,{path:"/logout",element:i.jsx(Use,{})}),i.jsx(ot,{path:"/lead-login",element:i.jsx(ale,{})}),i.jsx(ot,{path:"/lead-portal/:leadId",element:i.jsx(lle,{})}),i.jsx(ot,{element:i.jsx(tX,{}),children:i.jsxs(ot,{element:i.jsx(QJ,{}),children:[i.jsx(ot,{path:"/",element:i.jsx(sF,{children:i.jsx(ise,{})})}),i.jsx(ot,{path:"/leads",element:i.jsx(Ese,{})}),i.jsx(ot,{path:"/leads/:leadId",element:i.jsx(ile,{})}),i.jsx(ot,{path:"/ivr",element:i.jsx(Tse,{})}),i.jsx(ot,{path:"/invoices",element:i.jsx(Pse,{})}),i.jsx(ot,{path:"/reports",element:i.jsx(Dse,{})}),i.jsx(ot,{path:"/settings",element:i.jsx(Mse,{})}),i.jsxs(ot,{element:i.jsx(nX,{}),children:[i.jsx(ot,{path:"/settings/user",element:i.jsx(eie,{})}),i.jsx(ot,{path:"/settings/user/subcrm-settings/:userId",element:i.jsx(Pie,{})}),i.jsx(ot,{path:"/settings/channel",element:i.jsx(tie,{})}),i.jsx(ot,{path:"/settings/invoice",element:i.jsx(nie,{})}),i.jsx(ot,{path:"/settings/questions",element:i.jsx(rie,{})}),i.jsx(ot,{path:"/settings/documents",element:i.jsx(cie,{})}),i.jsx(ot,{path:"/settings/bulk-emailers",element:i.jsx(wie,{})}),i.jsx(ot,{path:"/settings/leads",element:i.jsx(bie,{})}),i.jsx(ot,{path:"/settings/disk-space",element:i.jsx(Eie,{})}),i.jsx(ot,{path:"/settings/triggers",element:i.jsx(jie,{})}),i.jsx(ot,{path:"/settings/marketing-automation",element:i.jsx(Nie,{})}),i.jsx(ot,{path:"/settings/whatsapp-automation",element:i.jsx(Sie,{})}),i.jsx(ot,{path:"/settings/forms",element:i.jsx(Tie,{})}),i.jsx(ot,{path:"/settings/task-reminder",element:i.jsx(Cie,{})}),i.jsx(ot,{path:"/settings/external-links",element:i.jsx(kie,{})}),i.jsx(ot,{path:"/settings/login-details",element:i.jsx(Aie,{})}),i.jsx(ot,{path:"/settings/birthday-wishes",element:i.jsx(Iie,{})}),i.jsx(ot,{path:"/settings/company",element:i.jsx(Oie,{})}),i.jsx(ot,{path:"/settings/social-media",element:i.jsx(Ek,{})}),i.jsx(ot,{path:"/settings/social-media/callback",element:i.jsx(Ek,{})}),i.jsx(ot,{path:"/settings/brevo",element:i.jsx(Sae,{})})]})]})}),i.jsx(ot,{path:"*",element:i.jsx(Vse,{})})]})})]})]})})})),hle={getMessages:()=>(console.log("Iterable (mock): Getting in-app messages"),[]),showMessage:t=>{console.log("Iterable (mock): Would show message",t)},setAutoDisplayPaused:t=>{console.log(`Iterable (mock): Auto display ${t?"paused":"resumed"}`)}},fle={initialize:t=>{console.log("Iterable (mock): Initialized with API key",t)},setEmail:t=>{console.log("Iterable (mock): Set email to",t)},trackEvent:(t,e)=>{console.log("Iterable (mock): Tracked event",t,e)},updateUser:t=>{console.log("Iterable (mock): Updated user",t)},inAppManager:hle};typeof window<"u"&&(window.iterableSDK=fle);const mle=(t,e)=>{console.log("Iterable (mock): Initialized integration",{apiKey:t,email:e})};mle("YOUR_ITERABLE_API_KEY_HERE");const Bk=document.getElementById("root");if(Bk){const t=new DP;dw.createRoot(Bk).render(i.jsx(se.StrictMode,{children:i.jsx(OP,{client:t,children:i.jsx(WJ,{children:i.jsx(VO,{children:i.jsxs(Y5,{children:[i.jsx(dle,{}),i.jsx(eP,{})]})})})})}))}else document.body.innerHTML=`
    <div style="
      font-family: system-ui, -apple-system, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      padding: 20px;
    ">
      <h1 style="color: #e11d48; margin-bottom: 16px;">
        Application Failed to Start
      </h1>
      <p style="max-width: 500px; margin-bottom: 24px;">
        The application couldn't find the necessary HTML element to mount. Please make sure your index.html contains a div with id="root".
      </p>
      <button 
        onclick="window.location.reload()" 
        style="
          background-color: #2563eb;
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 4px;
          cursor: pointer;
        "
      >
        Reload Page
      </button>
    </div>
  `;
